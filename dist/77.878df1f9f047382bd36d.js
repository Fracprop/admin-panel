"use strict";(self.webpackChunk_fracprop_panel=self.webpackChunk_fracprop_panel||[]).push([[77],{7077:(YQ,pA,Je)=>{Je.r(pA),Je.d(pA,{NewsModule:()=>ZQ});var ya=Je(8583),Th=Je(3423),gm=Je(1095),DH=Je(7539),Xc=Je(8295),mm=Je(6627),IC=Je(9983),dA=Je(9692),fA=Je(2178),yr=Je(2458),LH=Je(1494),OH=Je(5396),gA=Je(1436),RH=Je(4466),xC=Je(7441),w=Je(7716),Qc=Je(2340),Jc=Je(5917),$c=Je(3190),PH=Je(1841);let TC=(()=>{class a{constructor(e){this._httpClient=e}getList(e){return this._httpClient.get(Qc.N.apiEndPoint+"news/newsFilterAdmin/"+e.pageNo+"/"+e.limit).pipe((0,$c.w)(i=>(0,Jc.of)(i)))}getDetails(e){return this._httpClient.get(Qc.N.apiEndPoint+"news/"+e).pipe((0,$c.w)(i=>(0,Jc.of)(i)))}addNews(e){return this._httpClient.post(Qc.N.apiEndPoint+"news",Object.assign({},e)).pipe((0,$c.w)(i=>(0,Jc.of)(i)))}editNews(e,i){return this._httpClient.patch(Qc.N.apiEndPoint+"news/"+i,Object.assign({},e)).pipe((0,$c.w)(s=>(0,Jc.of)(s)))}deleteNews(e){return this._httpClient.delete(Qc.N.apiEndPoint+"news/"+e).pipe((0,$c.w)(i=>(0,Jc.of)(i)))}upload(e){return this._httpClient.post(Qc.N.apiEndPoint+"upload",e).pipe((0,$c.w)(i=>(0,Jc.of)(i)))}}return a.\u0275fac=function(e){return new(e||a)(w.LFG(PH.eN))},a.\u0275prov=w.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var MH=Je(1400),zt=Je(3679),kC=Je(8351);function BH(a,t){1&a&&(w.TgZ(0,"div",13),w._UZ(1,"mat-progress-bar",14),w.qZA()),2&a&&(w.xp6(1),w.Q6J("mode","indeterminate"))}function NH(a,t){if(1&a){const e=w.EpF();w.ynx(0),w.TgZ(1,"div",20),w.TgZ(2,"div"),w._uU(3),w.qZA(),w.TgZ(4,"div",21),w._uU(5),w.qZA(),w.TgZ(6,"div",21),w._uU(7),w.qZA(),w.TgZ(8,"div",22),w.TgZ(9,"button",23),w._uU(10," Edit "),w.qZA(),w.TgZ(11,"button",24),w.NdJ("click",function(){const n=w.CHM(e).$implicit;return w.oxw(2).deleteContent(null==n?null:n.id)}),w._uU(12," Delete "),w.qZA(),w.qZA(),w.qZA(),w.BQk()}if(2&a){const e=t.$implicit,i=t.index,s=w.oxw(2);w.xp6(3),w.hij(" ",(null==s.pagination?null:s.pagination.PageNo)*(null==s.pagination?null:s.pagination.limit)+i+1," "),w.xp6(2),w.hij(" ",(null==e?null:e.author)||"-"," "),w.xp6(2),w.hij(" ",(null==e?null:e.category)||"-"," "),w.xp6(2),w.MGl("routerLink","/news/edit-news/",null==e?null:e.id,"")}}const FH=function(a){return{"pointer-events-none":a}},VH=function(){return[5,10,25,100]};function HH(a,t){if(1&a){const e=w.EpF();w.TgZ(0,"mat-paginator",25),w.NdJ("page",function(s){return w.CHM(e),w.oxw(2).pageChanged(s)}),w.qZA()}if(2&a){const e=w.oxw(2);w.Q6J("ngClass",w.VKq(6,FH,e.isLoading))("length",e.pagination.TotalCount)("pageIndex",e.pagination.PageNo)("pageSize",e.pagination.LimitRecords)("pageSizeOptions",w.DdM(8,VH))("showFirstLastButtons",!0)}}function zH(a,t){if(1&a&&(w.ynx(0),w.ynx(1),w.TgZ(2,"div",15),w.TgZ(3,"div",16),w.TgZ(4,"div",17),w._uU(5,"S No."),w.qZA(),w.TgZ(6,"div",17),w._uU(7,"Author"),w.qZA(),w.TgZ(8,"div",17),w._uU(9,"Category"),w.qZA(),w.TgZ(10,"div",17),w._uU(11,"Action"),w.qZA(),w.qZA(),w.ynx(12),w.YNc(13,NH,13,4,"ng-container",18),w.BQk(),w.qZA(),w.YNc(14,HH,1,9,"mat-paginator",19),w.BQk(),w.BQk()),2&a){const e=w.oxw();w.xp6(13),w.Q6J("ngForOf",e.newsList$),w.xp6(1),w.Q6J("ngIf",e.newsList$.length)}}function jH(a,t){if(1&a&&(w.TgZ(0,"div",26),w._uU(1),w.qZA()),2&a){const e=w.oxw();w.xp6(1),w.hij(" ",e.isLoading?"Fetching Data":"There is no data!"," ")}}let qH=(()=>{class a{constructor(e,i,s,n,o){this._newsService=e,this._changeDetectorRef=i,this._fuseConfirmationService=s,this._formBuilder=n,this._commonService=o,this.loading=!1,this.newsList$=[],this.isLoading1=!1,this.isLoading=!1,this.isBlocked=!1,this.pagination={limit:10,pageNo:0,TotalCount:0,PageNo:0},this.confirmationForm()}ngOnInit(){this.getListing()}getListing(){var e,i;let s={pageNo:null===(e=this.pagination)||void 0===e?void 0:e.pageNo,limit:null===(i=this.pagination)||void 0===i?void 0:i.limit};this.isLoading=!0,this._newsService.getList(Object.assign({},s)).subscribe(n=>{this.isLoading=!1,this.pagination.TotalCount=(null==n?void 0:n.totalNews)||10,this.newsList$=n.userNews?[...n.userNews]:[],console.log(this.newsList$),this._changeDetectorRef.detectChanges()},n=>{console.log(n),this._commonService.error(n.error.message),this.isLoading=!1})}pageChanged(e){var i,s,n;if((null==e?void 0:e.pageSize)!==(null===(i=this.pagination)||void 0===i?void 0:i.limit))return this.pagination.limit=null==e?void 0:e.pageSize,void this.resetPagination();this.pagination.limit=null==e?void 0:e.pageSize,this.pagination.PageNo=null==e?void 0:e.pageIndex,this.pagination.pageNo=(null===(s=this.pagination)||void 0===s?void 0:s.limit)*(null===(n=this.pagination)||void 0===n?void 0:n.PageNo),this.getListing()}resetPagination(){this.pagination={limit:this.pagination.limit,pageNo:0,TotalCount:0,PageNo:0},this.getListing()}confirmationForm(){this.confirmationDialog=this._formBuilder.group({title:"",message:"",icon:this._formBuilder.group({show:!0,name:"mat_outline:delete",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Yes",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"No"})}),dismissible:!0})}deleteContent(e){var i,s;null===(i=this.confirmationDialog.controls.title)||void 0===i||i.setValue("Delete "),null===(s=this.confirmationDialog.controls.message)||void 0===s||s.setValue("Are you sure you want to delete ?"),this._fuseConfirmationService.open(this.confirmationDialog.value).afterClosed().subscribe(o=>{"confirmed"===o&&this._newsService.deleteNews(e).subscribe(l=>{this.getListing()},l=>{this._commonService.error(l.error.message)})})}}return a.\u0275fac=function(e){return new(e||a)(w.Y36(TC),w.Y36(w.sBO),w.Y36(MH.R),w.Y36(zt.qu),w.Y36(kC.v))},a.\u0275cmp=w.Xpm({type:a,selectors:[["app-news-list"]],decls:17,vars:6,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-4","px-6","md:px-4"],["class","absolute inset-x-0 top-0",4,"ngIf"],[1,"flex","items-start","justify-between","w-full"],[1,"text-3xl","font-bold","tracking-tight","leading-8","text-theme"],[1,"mr-4","flex","justify-end","pb-2"],["routerLink","/news/add-news","mat-flat-button","","type","button",1,"ml-4","bg-header","rounded-lg",3,"matTooltip","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noAdmin",""],[1,"absolute","inset-x-0","top-0"],[3,"mode"],[1,"grid","table_tr_bg"],[1,"news-grid","z-10","text-lg","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","font-semibold",2,"background-color","#ecf1f2"],[1,"hidden","md:block"],[4,"ngFor","ngForOf"],["class","sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent justify-center text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"news-grid","font-medium","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b-2","border-gray-300"],[1,""],[1,"flex","justify-start"],["matTooltip","Details",1,"min-w-10","min-h-7","h-7","px-2","ml-1","bg-green-600","rounded-2xl",3,"routerLink"],["matTooltip","Delete",1,"min-w-20","min-h-7","h-7","px-2","ml-1","bg-red-600","text-white","rounded-2xl",3,"click"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent","justify-center","text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(e,i){if(1&e&&(w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.YNc(2,BH,2,1,"div",2),w.TgZ(3,"div",3),w.TgZ(4,"div"),w.TgZ(5,"h2",4),w._uU(6," News "),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(7,"div",5),w.TgZ(8,"button",6),w._UZ(9,"mat-icon",7),w.TgZ(10,"span",8),w._uU(11,"Add News"),w.qZA(),w.qZA(),w.qZA(),w.TgZ(12,"div",9),w.TgZ(13,"div",10),w.YNc(14,zH,15,2,"ng-container",11),w.YNc(15,jH,2,1,"ng-template",null,12,w.W1O),w.qZA(),w.qZA(),w.qZA()),2&e){const s=w.MAs(16);w.xp6(2),w.Q6J("ngIf",i.isLoading),w.xp6(6),w.Q6J("matTooltip","Add Content")("color","primary"),w.xp6(1),w.Q6J("svgIcon","heroicons_outline:plus"),w.xp6(5),w.Q6J("ngIf",i.newsList$.length)("ngIfElse",s)}},directives:[ya.O5,gm.lW,Th.rH,gA.gM,mm.Hw,fA.pW,ya.sg,dA.NW,ya.mk],styles:["",".news-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto}@media (min-width: 600px){.news-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto}}@media (min-width: 960px){.news-grid[_ngcontent-%COMP%]{grid-template-columns:300px 300px 300px 300px}}@media (min-width: 1280px){.news-grid[_ngcontent-%COMP%]{grid-template-columns:300px 300px 300px 300px}}"]}),a})();var mA=Je(4553);function yA(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n}var r=Je(373);function SA(a,t,e){var i={};if(a&&a.length){for(var s=0,n=a;s<n.length;s++){var o=n[s];!0===e?(t.propCollection[o]=new w.vpe(!1),t[o]=t.propCollection[o]):i[o]=new w.vpe(!1)}!0!==e&&t.setProperties(i,!0)}}function wA(a,t,e){var i=Object.keys(a.registeredTemplate);if(i.length)for(var s=t&&t.filter(function(S){return!/\./g.test(S)}),n=/tab|accordion|toolbar/.test(a.getModuleName()),o=0,l=s&&s||i;o<l.length;o++){var h=l[o];if(e&&e.length)for(var c=0;c<e.length;c++)if(n)for(var u=0;u<a.registeredTemplate[h].length;u++)(p=a.registeredTemplate[h][u])&&p===e[c]&&(p.destroy(),a.registeredTemplate[h].splice(u,1));else for(u=0;u<a.registeredTemplate.template.length;u++){var p;(p=a.registeredTemplate.template[u].rootNodes[0])===e[c]&&(d=a.registeredTemplate[h])[u].destroy()}else if(a.registeredTemplate[h])for(var f=0,g=a.registeredTemplate[h];f<g.length;f++){var d;if(!(d=g[f]).destroyed){if(d._view){var m=d._view.renderer.parentNode(d.rootNodes[0]);if(!(0,r.le)(m))for(u=0;u<d.rootNodes.length;u++)m.appendChild(d.rootNodes[u])}d.destroy()}}(!n||!e)&&delete a.registeredTemplate[h]}for(var v=function(S){S.instance&&S.instance.clearTemplate(t&&t.filter(function(I){return!!new RegExp(S.name).test(I)}))},y=0,C=a.tagObjects;y<C.length;y++)v(C[y])}var YH=/Ref$/,EA=(function(){function a(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}a.prototype.ngOnInit=function(){this.registeredTemplate={};for(var t=0,e=this.tags;t<e.length;t++){var i=e[t],s=(0,r.NA)("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);s&&this.tagObjects.push({instance:s,name:i})}for(var n=Object.keys(this),o=0;o<n.length;o++){var l=(0,r.NA)(n[o],this);"object"==typeof l&&l&&l.elementRef&&((0,r.NA)(-1!==n[o].indexOf("Ref")?n[o]:n[o]+"Ref",this)||(0,r.sO)(-1!==n[o].indexOf("Ref")?n[o]:n[o]+"Ref",l,this),(0,r.NA)("viewContainerRef",this)&&!(0,r.NA)("_viewContainerRef",l.elementRef.nativeElement)&&!(0,r.NA)("propName",l.elementRef.nativeElement)&&((0,r.sO)("_viewContainerRef",(0,r.NA)("viewContainerRef",this),l.elementRef.nativeElement),(0,r.sO)("propName",n[o].replace("Ref",""),l.elementRef.nativeElement)))}for(var h=0,c=n=(n=Object.keys(this)).filter(function(m){return/Ref$/i.test(m)});h<c.length;h++){var p=c[h].replace("Ref","");(0,r.sO)(p.replace("_","."),(0,r.NA)(p,this),this.propCollection)}var d=Object.keys(this);if(this.directivePropList){for(var f=0;f<this.directivePropList.length;f++){var g=this.directivePropList[f];-1!==d.indexOf(g)&&(!1===(0,r.NA)(g,this)||(0,r.NA)(g,this))&&(0,r.sO)(g,(0,r.NA)(g,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},a.prototype.registerEvents=function(t){SA(t,this,!0)},a.prototype.ngOnChanges=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var s=i[e];this.propCollection[s]=t[s].currentValue}this.isUpdated=!1,this.hasChanges=!0},a.prototype.clearTemplate=function(t){wA(this,t)},a.prototype.getProperties=function(){for(var t=0,e=this.tagObjects;t<e.length;t++){var i=e[t];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},a.prototype.isChanged=function(){var t=this.hasChanges;if(!(0,r.le)(this.propCollection[this.property]))for(var i=Object.keys(this.propCollection[this.property][0]),s=0;s<i.length;s++)if(!(0,r.le)(this.propCollection[i[s]])){var n=(0,r.NA)(i[s],this),o=this.propCollection[this.property][0][i[s]];!(0,r.le)(n)&&this.propCollection[i[s]]!==n&&o!==n&&((0,r.sO)(i[s],n,this.propCollection[this.property][0]),(0,r.sO)(i[s],n,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var l=0,h=this.tagObjects;l<h.length;l++)t=t||h[l].instance.hasChanges;return t||this.hasChanges},a.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var t=Object.keys(this),e=0,i=t=t.filter(function(o){return YH.test(o)});e<i.length;e++){var n=i[e].replace("Ref","");(0,r.sO)(n.replace("_","."),(0,r.NA)(n,this),this.propCollection)}},a.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},a.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},a.prototype.ngOnDestroy=function(){this.directivePropList=[]}}(),function(){function a(t){this.list=[],this.hasChanges=!1,this.propertyName=t}a.prototype.ngOnInit=function(){this.isInitChanges=!0},a.prototype.ngAfterContentInit=function(){var t=this,e=0;this.list=this.children.map(function(i){return i.dirIndex=e++,i.property=t.propertyName,i}),this.hasChanges=!0},a.prototype.getProperties=function(){for(var t=[],e=0,i=this.list;e<i.length;e++)t.push(i[e].getProperties());return t},a.prototype.isChanged=function(){var t=this,e=!1,i=0,s=!1,n=this.children.map(function(u){return u});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&(this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),"series"!==this.list[o].property&&(s=JSON.stringify(this.list[o].propCollection.dataSource)!==JSON.stringify(n[o].propCollection.dataSource))),s=this.list[o].hasChanges!==n[o].hasChanges;this.hasNewChildren=!(this.list.length===this.children.length&&!s)||null,this.hasNewChildren&&(this.list=this.children.map(function(u){return u.dirIndex=i++,u.property=t.propertyName,u}));for(var l=0,h=this.list;l<h.length;l++)e=e||h[l].hasChanges;return!!this.list.length&&e},a.prototype.clearTemplate=function(t){for(var e=this,i=0,s=this.list;i<s.length;i++)s[i].clearTemplate(t&&t.map(function(o){return new RegExp(e.propertyName).test(o)?o.replace(e.propertyName+".",""):o}))},a.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var t=0;t<this.list.length;t++)(0,r.NA)("childColumns",this.list[t])&&"columns"===(0,r.NA)("property",this.list[t])&&(0,r.sO)("columns",(0,r.NA)("childColumns",this.list[t]).getProperties(),this.list[t].propCollection),this.list[t].isUpdated=!0},a.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},a.prototype.ngOnDestroy=function(){this.list=[]}}(),function(){function a(){this.isProtectedOnChange=!0,this.isFormInit=!0}return a.prototype.saveChanges=function(t,e,i){if(!this.isProtectedOnChange){this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate();var s=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(s)}}},a.prototype.ngOnInit=function(t){var e=t||this;e.registeredTemplate={},e.ngBoundedEvents={},e.isAngular=!0,e.isFormInit=!0,t&&(this.tags=t.tags),e.tags=this.tags||[],e.complexTemplate=this.complexTemplate||[],e.tagObjects=[],e.ngAttr=this.getAngularAttr(e.element),e.createElement=function(m,v){var y=e.srenderer?e.srenderer.createElement(m):(0,r.az)(m);return void 0===v||(y.innerHTML=v.innerHTML?v.innerHTML:"",void 0!==v.className&&(y.className=v.className),void 0!==v.id&&(y.id=v.id),void 0!==v.styles&&y.setAttribute("style",v.styles),void 0!==e.ngAttr&&y.setAttribute(e.ngAttr,""),void 0!==v.attrs&&(0,r.Y4)(y,v.attrs)),y};for(var i=0,s=e.tags;i<s.length;i++){var n=s[i],o={instance:(0,r.NA)("child"+n.substring(0,1).toUpperCase()+n.substring(1),e),name:n};e.tagObjects.push(o)}for(var l=Object.keys(e),h=0;h<l.length;h++){var c=(0,r.NA)(l[h],e);"object"==typeof c&&c&&c.elementRef&&("object"==typeof c&&c&&c.elementRef&&-1!==l[h].indexOf("_")&&-1===l[h].indexOf("Ref")&&(0,r.sO)(l[h]+"Ref",c,e),e.viewContainerRef&&!(0,r.NA)("_viewContainerRef",c.elementRef.nativeElement)&&!(0,r.NA)("propName",c.elementRef.nativeElement)&&((0,r.sO)("_viewContainerRef",e.viewContainerRef,c.elementRef.nativeElement),(0,r.sO)("propName",l[h].replace("Ref",""),c.elementRef.nativeElement)))}for(var u=0,p=l=(l=Object.keys(e)).filter(function(m){return/Ref$/i.test(m)&&/\_/i.test(m)});u<p.length;u++){var f=p[u].replace("Ref",""),g={};(0,r.sO)(f.replace("_","."),(0,r.NA)(f,e),g),e.setProperties(g,!0)}},a.prototype.getAngularAttr=function(t){for(var s,e=t.attributes,i=e.length,n=0;n<i;n++)/_ngcontent/g.test(e[n].name)&&(s=e[n].name);return s},a.prototype.ngAfterViewInit=function(t){var e=t||this;/ejs-tab|ejs-accordion/g.test(e.ngEle.nativeElement.outerHTML)&&(e.ngEle.nativeElement.style.visibility="hidden");var s=Object.keys(e);s=s.filter(function(p){return/Ref$/i.test(p)});for(var n="DocumentEditor"===e.getModuleName(),o=0,l=s;o<l.length;o++){var c=l[o].replace("Ref","");(0,r.sO)(c.replace("_","."),(0,r.NA)(c+"Ref",e),e)}var u=function(p){("undefined"!=typeof window&&p.element||p.getModuleName().includes("btn"))&&(p.appendTo(p.element),p.ngEle.nativeElement.style.visibility="")};n?u(e):setTimeout(function(){u(e)})},a.prototype.ngOnDestroy=function(t){var e=t||this;setTimeout(function(){"undefined"!=typeof window&&e.element.classList.contains("e-control")&&(e.destroy(),e.clearTemplate(null),setTimeout(function(){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i],o=e[n];if(o&&/object/.test(typeof o)&&0!==Object.keys(o).length)if(/properties|changedProperties|childChangedProperties|oldProperties|moduleLoader/.test(n))for(var l=0,h=Object.keys(e[n]);l<h.length;l++){var c=h[l],u=o[c];u&&/object/.test(typeof u)&&0!==Object.keys(u).length&&(u.parent||u.parentObj)&&(e[n][c]=null)}else(o.parent||o.parentObj)&&(e[n]=null)}}))})},a.prototype.clearTemplate=function(t,e){wA(this,t,e)},a.prototype.ngAfterContentChecked=function(t){for(var e=t||this,i=0,s=e.tagObjects;i<s.length;i++){var n=s[i];if(!(0,r.o8)(n.instance)&&(n.instance.isInitChanges||n.instance.hasChanges||n.instance.hasNewChildren))if(n.instance.isInitChanges){var o={},l=void 0;(h=(0,r.NA)("instance.list",n))&&h.length&&(l=h[0].directivePropList);var c=!0;if(e.getModuleName&&"gantt"===e.getModuleName()&&(c=!1),l&&c&&-1===l.indexOf(n.instance.propertyName))for(var u=Object.keys(n.instance.list[0].propCollection),p=0;p<n.instance.list.length;p++){n.instance.list[p].propCollection[n.instance.propertyName]=[];for(var d={},f=0;f<u.length;f++)d[g=u[f]]=n.instance.list[p].propCollection[g];for(var m=function(O){var A=n.instance.list[p].tags[O],q=(0,r.NA)("child"+A.substring(0,1).toUpperCase()+A.substring(1),n.instance.list[p]);if(q){var k=n.instance.list[p]["child"+A.substring(0,1).toUpperCase()+A.substring(1)],R=function(D){var z=[];if(D)for(var Y=0;Y<D.list.length;Y++){var H=D.list[0].tags[0];if(H){var W=(0,r.NA)("child"+H.substring(0,1).toUpperCase()+H.substring(1),D.list[Y]);W&&(D.list[Y].tagObjects.push({instance:W,name:H}),z.push(W))}}if(0!==z.length)for(var Z=0;Z<z.length;Z++)R(z[Z])};R(k),n.instance.list[p].tagObjects.push({instance:q,name:A})}},v=0;v<n.instance.list[p].tags.length;v++)m(v);n.instance.list[p].propCollection[n.instance.propertyName].push(d)}o[n.name]=n.instance.getProperties(),e.setProperties(o,n.instance.isInitChanges)}else{(e[n.name].length!==n.instance.list.length||/diagram|DashboardLayout/.test(e.getModuleName()))&&(e[n.name]=n.instance.list);for(var y=0,C=n.instance.list;y<C.length;y++){var h,b=n.instance.list.indexOf(h=C[y]),S=(0,r.NA)(n.name,e)[b],I=Object.keys(S);if(I=I.filter(function(A){return/Ref$/i.test(A)}),S.properties&&0!==Object.keys(S.properties).length)for(var x=0,T=I;x<T.length;x++){var g;g=(g=T[x]).replace(/Ref/,""),S.properties[g]=S.properties[g]?S.properties[g]:S.propCollection[g]}!(0,r.o8)(S)&&!(0,r.o8)(S.setProperties)&&(/diagram|DashboardLayout/.test(e.getModuleName())?S.setProperties(h.getProperties(),!0):S.setProperties(h.getProperties())),h.isUpdated=!0}}}},a.prototype.registerEvents=function(t){SA(t,this)},a.prototype.twoWaySetter=function(t,e){var i=(0,r.NA)(e,this.properties);i!==t&&(this.saveChanges(e,t,i),(0,r.sO)(e,(0,r.le)(t)?null:t,this.properties),(0,r.NA)(e+"Change",this).emit(t))},a.prototype.addTwoWay=function(t){for(var e=this,i=function(h){(0,r.NA)(h,s),Object.defineProperty(s,h,{get:function(){return(0,r.NA)(h,e.properties)},set:function(c){return e.twoWaySetter(c,h)}}),(0,r.sO)(h+"Change",new w.vpe,s)},s=this,n=0,o=t;n<o.length;n++)i(o[n])},a.prototype.addEventListener=function(t,e){var i=(0,r.NA)(t,this);(0,r.o8)(i)||(this.ngBoundedEvents[t]||(this.ngBoundedEvents[t]=new Map),this.ngBoundedEvents[t].set(e,i.subscribe(e)))},a.prototype.removeEventListener=function(t,e){var i=(0,r.NA)(t,this);(0,r.o8)(i)||this.ngBoundedEvents[t].get(e).unsubscribe()},a.prototype.trigger=function(t,e,i){var s=(0,r.NA)(t,this),n=this.isProtectedOnChange;this.isProtectedOnChange=!1,e&&(e.name=t),(0,r.o8)(s)||s.next(e);var o=(0,r.NA)("local"+t.charAt(0).toUpperCase()+t.slice(1),this);(0,r.o8)(o)||o.call(this,e),this.isProtectedOnChange=n,i&&(this.preventChange=this.isPreventChange,i.call(this,e)),this.isPreventChange=!1},a}()),IA=function(){function a(){}return a.prototype.propagateChange=function(t){},a.prototype.propagateTouch=function(){},a.prototype.localChange=function(t){var e=void 0===t.checked?t.value:t.checked;this.objCheck=(0,r.Kn)(e),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(e),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)):e!==this.angularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e),this.cdr.markForCheck()},a.prototype.registerOnChange=function(t){this.propagateChange=t},a.prototype.registerOnTouched=function(t){this.propagateTouch=t},a.prototype.twoWaySetter=function(t,e){var i=this.oldValue||(0,r.NA)(e,this.properties),s=this.inputElement||this.element;s&&i===t&&this.value===t&&(void 0===s.value||""===s.value)||(this.saveChanges(e,t,i),(0,r.sO)(e,(0,r.le)(t)?null:t,this.properties),(0,r.NA)(e+"Change",this).emit(t))},a.prototype.ngAfterViewInit=function(t){var e=t||this;if("undefined"!=typeof window){e.getModuleName().includes("dropdown")?setTimeout(function(){e.appendTo(e.element)}):e.appendTo(e.element);var i=e.inputElement||e.element;i.addEventListener("focus",e.ngOnFocus.bind(e)),i.addEventListener("blur",e.ngOnBlur.bind(e))}this.isFormInit=!1},a.prototype.setDisabledState=function(t){this.enabled=!t,this.disabled=t},a.prototype.writeValue=function(t){void 0===this.checked?this.value=t:this.ngEle&&(this.checked="boolean"==typeof t?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?t===this.value:t:t===this.value),this.angularValue=t,this.isUpdated=!0,this.preventChange=!this.isFormInit,this.cdr.markForCheck()},a.prototype.ngOnFocus=function(t){!0!==this.skipFromEvent&&this.focus.emit(t),this.cdr.markForCheck()},a.prototype.ngOnBlur=function(t){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(t),this.cdr.markForCheck()},a.isFormBase=!0,a}(),KH=(0,r.aR)();function JH(a){return function(t){void 0!==t&&((0,r.sO)(a+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=a):this.saveChanges&&(this.saveChanges(a,t,void 0),this.dataBind()))}}function $H(a,t){return function(){return(0,r.NA)(a+"Ref",this)||t}}(0,r.Wr)({compile:function(a,t){if("string"==typeof a||"function"==typeof a&&a.prototype&&a.prototype.CSPTemplate)return KH(a,t);var e=a.elementRef.nativeElement._viewContainerRef,i=a.elementRef.nativeElement.propName;return function(s,n,o){var h=e||n.viewContainerRef,c=h.createEmbeddedView(a,{$implicit:s});"EJS-MENTION"===(0,r.NA)("currentInstance.element.nodeName",h)?c.detectChanges():c.markForCheck();var u=n&&n.registeredTemplate?n.registeredTemplate:(0,r.NA)("currentInstance.registeredTemplate",h);return void 0===u[o=o&&n.registeredTemplate?o:i]&&(u[o]=[]),u[o].push(c),c.rootNodes}}});var a,ee=function(){function a(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return a.prototype.setKey=function(t){return this.key=t,this},a.prototype.using=function(t){return this.dataManager=t,this},a.prototype.execute=function(t,e,i,s){return(t=t||this.dataManager)?t.executeQuery(this,e,i,s):_.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},a.prototype.executeLocal=function(t){return(t=t||this.dataManager)?t.executeLocal(this):_.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},a.prototype.clone=function(){var t=new a;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},a.prototype.from=function(t){return this.fromTable=t,this},a.prototype.addParams=function(t,e){return this.params.push("function"==typeof e?{key:t,fn:e}:{key:t,value:e}),this},a.prototype.distinct=function(t){return this.distincts="string"==typeof t?[].slice.call([t],0):t.slice(0),this},a.prototype.expand=function(t){return this.expands="string"==typeof t?[].slice.call([t],0):t.slice(0),this},a.prototype.where=function(t,e,i,s,n,o){e=e?e.toLowerCase():null;var l=null;return"string"==typeof t?l=new Be(t,e,i,s,n,o):t instanceof Be&&(l=t),this.queries.push({fn:"onWhere",e:l}),this},a.prototype.search=function(t,e,i,s,n){return"string"==typeof e&&(e=[e]),(!i||"none"===i)&&(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:s,ignoreAccent:n,comparer:_.fnOperators[i]}}),this},a.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},a.prototype.sortByForeignKey=function(t,e,i,s){var o,l,n=(0,r.le)(s)?"ascending":s;if("string"==typeof t&&_.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),e="descending"),(!e||"string"==typeof e)&&(n=e?e.toLowerCase():"ascending",e=_.fnSort(e)),i){o=a.filterQueries(this.queries,"onSortBy");for(var h=0;h<o.length;h++)if("string"==typeof(l=o[h].e.fieldName)){if(l===t)return this}else if(l instanceof Array)for(var c=0;c<l.length;c++)if(l[c]===t||t.toLowerCase()===l[c]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:e,direction:n}}),this},a.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},a.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},a.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},a.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},a.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},a.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},a.prototype.select=function(t){return"string"==typeof t&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},a.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},a.prototype.foreignKey=function(t){return this.fKey=t,this},a.prototype.requiresCount=function(){return this.isCountRequired=!0,this},a.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},a.filterQueries=function(t,e){return t.filter(function(i){return i.fn===e})},a.filterQueryLists=function(t,e){for(var i=t.filter(function(o){return-1!==e.indexOf(o.fn)}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},a}(),Be=function(){function a(t,e,i,s,n,o){return void 0===s&&(s=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=e.toLowerCase(),this.value=i,this.matchCase=o,this.ignoreCase=s,this.ignoreAccent=n,this.isComplex=!1,this.comparer=_.fnOperators.processOperator(this.operator)):(t instanceof a&&i instanceof a||i instanceof Array)&&(this.isComplex=!0,this.condition=e.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return a.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.combinePredicates([].slice.call(t,0),"and")},a.prototype.and=function(t,e,i,s,n){return a.combine(this,t,e,i,"and",s,n)},a.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.combinePredicates([].slice.call(t,0),"or")},a.prototype.or=function(t,e,i,s,n){return a.combine(this,t,e,i,"or",s,n)},a.ornot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.combinePredicates([].slice.call(t,0),"or not")},a.prototype.ornot=function(t,e,i,s,n){return a.combine(this,t,e,i,"ornot",s,n)},a.andnot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.combinePredicates([].slice.call(t,0),"and not")},a.prototype.andnot=function(t,e,i,s,n){return a.combine(this,t,e,i,"andnot",s,n)},a.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,s=t.length;i<s;i++)e.push(this.fromJSONData(t[i]));return e}return this.fromJSONData(t)},a.prototype.validate=function(t){var i,s,e=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.condition&&-1!==this.condition.indexOf("not")?(this.condition=""===this.condition.split("not")[0]?void 0:this.condition.split("not")[0],!this.comparer.call(this,_.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,_.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);s=this.condition&&-1!==this.condition.indexOf("not")?-1!==this.condition.indexOf("and"):"and"===this.condition;for(var n=0;n<e.length;n++)if(n>0&&this.condition&&-1!==this.condition.indexOf("not")&&(e[n].condition=e[n].condition?e[n].condition+"not":"not"),i=e[n].validate(t),s){if(!i)return!1}else if(i)return!0;return s},a.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},a.combinePredicates=function(t,e){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new a(t[0],e,t.slice(1))},a.combine=function(t,e,i,s,n,o,l){return e instanceof a?a[n](t,e):"string"==typeof e?a[n](t,new a(e,i,s,o,l)):_.throwError("Predicate - "+n+" : invalid arguments")},a.fromJSONData=function(t){for(var e=t.predicates||[],i=e.length,s=[],o=0;o<i;o++)s.push(this.fromJSONData(e[o]));return t.isComplex?new a(s[0],t.condition,s.slice(1)):new a(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},a}(),xA={GroupGuid:"{271bbba0-1ee7}"},_=function(){function a(){}return a.getValue=function(t,e){return"function"==typeof t?t.call(e||{}):t},a.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},a.notEndsWith=function(t,e){return t.slice&&t.slice(-e.length)!==e},a.startsWith=function(t,e){return t.slice(0,e.length)===e},a.notStartsWith=function(t,e){return t.slice(0,e.length)!==e},a.wildCard=function(t,e){var i,s;if(-1!==e.indexOf("[")&&(e=e.split("[").join("[[]")),-1!==e.indexOf("(")&&(e=e.split("(").join("[(]")),-1!==e.indexOf(")")&&(e=e.split(")").join("[)]")),-1!==e.indexOf("\\")&&(e=e.split("\\").join("[\\\\]")),-1!==e.indexOf("*")){"*"!==e.charAt(0)&&(e="^"+e),"*"!==e.charAt(e.length-1)&&(e+="$"),i=e.split("*");for(var n=0;n<i.length;n++)i[n]=-1===i[n].indexOf(".")?i[n]+".*":i[n]+"*";e=i.join("")}return(-1!==e.indexOf("%3f")||-1!==e.indexOf("?"))&&(s=-1!==e.indexOf("%3f")?e.split("%3f"):e.split("?"),e=s.join(".")),new RegExp(e,"g").test(t)},a.like=function(t,e){return-1!==e.indexOf("%")&&("%"===e.charAt(0)&&e.lastIndexOf("%")<2?(e=e.substring(1,e.length),a.startsWith(a.toLowerCase(t),a.toLowerCase(e))):"%"===e.charAt(e.length-1)&&e.indexOf("%")>e.length-3?(e=e.substring(0,e.length-1),a.endsWith(a.toLowerCase(t),a.toLowerCase(e))):(e.lastIndexOf("%")!==e.indexOf("%")&&e.lastIndexOf("%")>e.indexOf("%")+1&&(e=e.substring(e.indexOf("%")+1,e.lastIndexOf("%"))),-1!==t.indexOf(e)))},a.fnSort=function(t){return"ascending"===(t=t?a.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},a.fnAscending=function(t,e){return(0,r.le)(t)&&(0,r.le)(e)||null==e?-1:"string"==typeof t?t.localeCompare(e):null==t?1:t-e},a.fnDescending=function(t,e){return(0,r.le)(t)&&(0,r.le)(e)?-1:null==e?1:"string"==typeof t?-1*t.localeCompare(e):null==t?-1:e-t},a.extractFields=function(t,e){for(var i={},s=0;s<e.length;s++)i=this.setValue(e[s],this.getObject(e[s],t),i);return i},a.select=function(t,e){for(var i=[],s=0;s<t.length;s++)i.push(this.extractFields(t[s],e));return i},a.group=function(t,e,i,s,n,o,l){s=s||1;var h=t,c="GroupGuid";if(h.GroupGuid===xA[c]){for(var u=function(b){if((0,r.le)(n))h[b].items=p.group(h[b].items,e,i,h.level+1,null,o,l),h[b].count=h[b].items.length;else{var S,I=n.filter(function(x){return x.key===h[b].key});S=n.indexOf(I[0]),h[b].items=p.group(h[b].items,e,i,h.level+1,n[S].items,o,l),h[b].count=n[S].count}},p=this,d=0;d<h.length;d++)u(d);return h.childLevels+=1,h}var f={},g=[];g.GroupGuid=xA[c],g.level=s,g.childLevels=0,g.records=h;for(var m=function(b){var S=v.getVal(h,b,e);if((0,r.le)(o)||(S=o(S,e)),!f[S]&&(f[S]={key:S,count:0,items:[],aggregates:{},field:e},g.push(f[S]),!(0,r.le)(n))){var I=n.filter(function(x){return x.key===f[S].key});f[S].count=I[0].count}f[S].count=(0,r.le)(n)?f[S].count+=1:f[S].count,(!l||l&&i.length)&&f[S].items.push(h[b])},v=this,y=0;y<h.length;y++)m(y);if(i&&i.length){var C=function(b){for(var S={},I=void 0,x=i,T=0;T<i.length;T++)if(I=a.aggregates[i[T].type],(0,r.le)(n))I&&(S[x[T].field+" - "+x[T].type]=I(g[b].items,x[T].field));else{var O=n.filter(function(A){return A.key===g[b].key});I&&(S[x[T].field+" - "+x[T].type]=I(O[0].items,x[T].field))}g[b].aggregates=S};for(y=0;y<g.length;y++)C(y)}if(l&&g.length&&i.length)for(y=0;y<g.length;y++)g[y].items=[];return h.length&&g||h},a.buildHierarchy=function(t,e,i,s,n){var o,l={};for(s.result&&(s=s.result),s.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<s.length;o++)(l[c=this.getObject(t,s[o])]||(l[c]=[])).push(s[o]);for(o=0;o<i.length;o++){var c=this.getObject(n||t,i[o]);i[o][e]=l[c]}},a.getFieldList=function(t,e,i){if(void 0===i&&(i=""),null==e)return this.getFieldList(t,[],i);for(var s=t,o=0,l=Object.keys(t);o<l.length;o++){var h=l[o];"object"!=typeof s[h]||s[h]instanceof Array?e.push(i+h):this.getFieldList(s[h],e,i+h+".")}return e},a.getObject=function(t,e){if(!t)return e;if(e){if(-1===t.indexOf(".")){var i=t.charAt(0).toLowerCase()+t.slice(1),s=t.charAt(0).toUpperCase()+t.slice(1);return(0,r.le)(e[t])?(0,r.le)(e[i])?(0,r.le)(e[s])?null:e[s]:e[i]:e[t]}for(var n=e,o=t.split("."),l=0;l<o.length&&null!=n;l++){if(void 0===(n=n[o[l]])){var h=o[l].charAt(0).toUpperCase()+o[l].slice(1);n=e[h]||e[h.charAt(0).toLowerCase()+h.slice(1)]||null}e=n}return n}},a.setValue=function(t,e,i){var l,c,s=t.toString().split("."),n=i||{},o=n,h=s.length;for(l=0;l<h;l++)c=s[l],l+1===h?o[c]=void 0===e?void 0:e:(0,r.le)(o[c])&&(o[c]={}),o=o[c];return n},a.sort=function(t,e,i){if(t.length<=1)return t;var s=parseInt((t.length/2).toString(),10),n=t.slice(0,s),o=t.slice(s);return n=this.sort(n,e,i),o=this.sort(o,e,i),this.merge(n,o,e,i)},a.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map(function(s){return s in a.diacritics?a.diacritics[s]:s}).join("")},a.merge=function(t,e,i,s){for(var o,n=[];t.length>0||e.length>0;)o=t.length>0&&e.length>0?s?s(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:t[0][i]<t[0][i]?t:e:t.length>0?t:e,n.push(o.shift());return n},a.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},a.toLowerCase=function(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""},a.callAdaptorFunction=function(t,e,i,s){if(e in t){var n=t[e](i,s);(0,r.le)(n)||(i=n)}return i},a.getAddParams=function(t,e,i){var s={};return a.callAdaptorFunction(t,"addParams",{dm:e,query:i,params:i.params,reqParams:s}),s},a.isPlainObject=function(t){return!!t&&t.constructor===Object},a.isCors=function(){var t=null;try{t=new window.XMLHttpRequest}catch(i){}return!!t&&"withCredentials"in t},a.getGuid=function(t){var i;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(s,n){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint8Array(1);window.crypto.getRandomValues(o),i=o[0]%16|0}else i=16*Math.random()|0;return"0123456789abcdef"[19===n?3&i|8:i]})},a.isNull=function(t){return null==t},a.getItemFromComparer=function(t,e,i){var s,n,o,l=0,h="string"==typeof a.getVal(t,0,e);if(t.length)for(;(0,r.le)(s)&&l<t.length;)s=a.getVal(t,l,e),o=t[l++];for(;l<t.length;l++)n=a.getVal(t,l,e),!(0,r.le)(n)&&(h&&(s=+s,n=+n),i(s,n)>0&&(s=n,o=t[l]));return o},a.distinct=function(t,e,i){i=!(0,r.le)(i)&&i;var n,s=[],o={};return t.forEach(function(l,h){(n="object"==typeof t[h]?a.getVal(t,h,e):t[h])in o||(s.push(i?t[h]:n),o[n]=1)}),s},a.processData=function(t,e){var i=this.prepareQuery(t),s=new B(e);t.requiresCounts&&i.requiresCount();var n=s.executeLocal(i),o={result:t.requiresCounts?n.result:n,count:n.count,aggregates:JSON.stringify(n.aggregates)};return t.requiresCounts?o:n},a.prepareQuery=function(t){var e=this,i=new ee;return t.select&&i.select(t.select),t.where&&a.parse.parseJson(t.where).filter(function(o){if((0,r.le)(o.condition))i.where(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent);else{var l=[];o.field?l.push(new Be(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent)):l=l.concat(e.getPredicate(o.predicates)),"or"===o.condition?i.where(Be.or(l)):"and"===o.condition&&i.where(Be.and(l))}}),t.search&&a.parse.parseJson(t.search).filter(function(o){return i.search(o.key,o.fields,o.operator,o.ignoreCase,o.ignoreAccent)}),t.aggregates&&t.aggregates.filter(function(o){return i.aggregate(o.type,o.field)}),t.sorted&&t.sorted.filter(function(o){return i.sortBy(o.name,o.direction)}),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(function(o){return i.group(o)}),i},a.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];if(s.field)e.push(new Be(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent));else{for(var n=[],o=this.getPredicate(s.predicates),l=0,h=Object.keys(o);l<h.length;l++)n.push(o[h[l]]);e.push("or"===s.condition?Be.or(n):Be.and(n))}}return e},a.serverTimezoneOffset=null,a.timeZoneHandling=!0,a.throwError=function(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}},a.aggregates={sum:function(t,e){for(var s,i=0,n="number"!=typeof a.getVal(t,0,e),o=0;o<t.length;o++)s=a.getVal(t,o,e),!isNaN(s)&&null!==s&&(n&&(s=+s),i+=s);return i},average:function(t,e){return a.aggregates.sum(t,e)/t.length},min:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),a.getObject(e,a.getItemFromComparer(t,e,i||a.fnAscending))},max:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),a.getObject(e,a.getItemFromComparer(t,e,i||a.fnDescending))},truecount:function(t,e){return new B(t).executeLocal((new ee).where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new B(t).executeLocal((new ee).where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},a.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},a.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},a.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},a.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},a.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},a.fnOperators={equal:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?a.toLowerCase(t)===a.toLowerCase(e):t===e},notequal:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),!a.fnOperators.equal(t,e,i)},lessthan:function(t,e,i){return i?a.toLowerCase(t)<a.toLowerCase(e):((0,r.le)(t)&&(t=void 0),t<e)},greaterthan:function(t,e,i){return i?a.toLowerCase(t)>a.toLowerCase(e):t>e},lessthanorequal:function(t,e,i){return i?a.toLowerCase(t)<=a.toLowerCase(e):((0,r.le)(t)&&(t=void 0),t<=e)},greaterthanorequal:function(t,e,i){return i?a.toLowerCase(t)>=a.toLowerCase(e):t>=e},contains:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?!(0,r.le)(t)&&!(0,r.le)(e)&&-1!==a.toLowerCase(t).indexOf(a.toLowerCase(e)):!(0,r.le)(t)&&!(0,r.le)(e)&&-1!==t.toString().indexOf(e)},doesnotcontain:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?!(0,r.le)(t)&&!(0,r.le)(e)&&-1===a.toLowerCase(t).indexOf(a.toLowerCase(e)):!(0,r.le)(t)&&!(0,r.le)(e)&&-1===t.toString().indexOf(e)},isnotnull:function(t){return null!=t},isnull:function(t){return null==t},startswith:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.startsWith(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.startsWith(t,e)},doesnotstartwith:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.notStartsWith(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.notStartsWith(t,e)},like:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.like(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.like(t,e)},isempty:function(t){return void 0===t||""===t},isnotempty:function(t){return void 0!==t&&""!==t},wildcard:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?(t||"boolean"==typeof t)&&e&&"object"!=typeof t&&a.wildCard(a.toLowerCase(t),a.toLowerCase(e)):(t||"boolean"==typeof t)&&e&&a.wildCard(t,e)},endswith:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.endsWith(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.endsWith(t,e)},doesnotendwith:function(t,e,i,s){return s&&(t=a.ignoreDiacritics(t),e=a.ignoreDiacritics(e)),i?t&&e&&a.notEndsWith(a.toLowerCase(t),a.toLowerCase(e)):t&&e&&a.notEndsWith(t,e)},processSymbols:function(t){var e=a.operatorSymbols[t];return e?a.fnOperators[e]:a.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){return a.fnOperators[t]||a.fnOperators.processSymbols(t)}},a.parse={parseJson:function(t){return"string"!=typeof t||!/^[\s]*\[|^[\s]*\{(.)+:/g.test(t)&&-1!==t.indexOf('"')?t instanceof Array?a.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&a.parse.iterateAndReviveJson(t):t=JSON.parse(t,a.parse.jsonReviver),t},iterateAndReviveArray:function(t){for(var e=0;e<t.length;e++)"object"==typeof t[e]&&null!==t[e]?a.parse.iterateAndReviveJson(t[e]):t[e]="string"!=typeof t[e]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[e])&&-1!==t[e].toString().indexOf('"')?a.parse.parseJson(t[e]):a.parse.jsonReviver("",t[e])},iterateAndReviveJson:function(t){for(var e,s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];a.startsWith(o,"__")||("object"==typeof(e=t[o])?e instanceof Array?a.parse.iterateAndReviveArray(e):e&&a.parse.iterateAndReviveJson(e):t[o]=a.parse.jsonReviver(t[o],e))}},jsonReviver:function(t,e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e),s=a.timeZoneHandling?a.serverTimezoneOffset:null;if(i)return a.dateParse.toTimeZone(new Date(parseInt(i[1],10)),s,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var n=e.indexOf("Z")>-1||e.indexOf("z")>-1,o=e.split(/[^0-9.]/);if(n){if(o[5].indexOf(".")>-1){var l=o[5].split(".");o[5]=l[0],o[6]=new Date(e).getUTCMilliseconds().toString()}else o[6]="00";e=a.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5]?o[5]:"00",10),parseInt(o[6],10)),a.serverTimezoneOffset,!1)}else{var h=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5]?o[5]:"00",10)),c=parseInt(o[6],10),u=parseInt(o[7],10);if(isNaN(c)&&isNaN(u))return h;e.indexOf("+")>-1?h.setHours(h.getHours()-c,h.getMinutes()-u):h.setHours(h.getHours()+c,h.getMinutes()+u),e=a.dateParse.toTimeZone(h,a.serverTimezoneOffset,!1)}null==a.serverTimezoneOffset&&(e=a.dateParse.addSelfOffset(e))}else if(/^\d{4}-\d{2}-\d{2}$/.test(e))return o=e.split(/[^0-9.]/),new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10))}return e},isJson:function(t){return"string"==typeof t[0]?t:a.parse.parseJson(t)},isGuid:function(t){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(t)},replacer:function(t,e){return a.isPlainObject(t)?a.parse.jsonReplacer(t,e):t instanceof Array?a.parse.arrayReplacer(t):t instanceof Date?a.parse.jsonReplacer({val:t},e).val:t},jsonReplacer:function(t,e){for(var i,n=0,o=Object.keys(t);n<o.length;n++){var l=o[n];if((i=t[l])instanceof Date){var h=i;null==a.serverTimezoneOffset?t[l]=a.dateParse.toTimeZone(h,null).toJSON():(h=new Date(+h+36e5*a.serverTimezoneOffset),t[l]=a.dateParse.toTimeZone(a.dateParse.addSelfOffset(h),null).toJSON())}}return t},arrayReplacer:function(t){for(var e=0;e<t.length;e++)a.isPlainObject(t[e])?t[e]=a.parse.jsonReplacer(t[e]):t[e]instanceof Date&&(t[e]=a.parse.jsonReplacer({date:t[e]}).date);return t},jsonDateReplacer:function(t,e){if("value"===t&&e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e);if(i)e=a.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var s=e.split(/[^0-9]/);e=a.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)),null,!0)}}if(e instanceof Date)return e=a.dateParse.addSelfOffset(e),null===a.serverTimezoneOffset?a.dateParse.toTimeZone(a.dateParse.addSelfOffset(e),null).toJSON():(e=a.dateParse.toTimeZone(e,e.getTimezoneOffset()/60-a.serverTimezoneOffset,!1)).toJSON()}return e}},a.dateParse={addSelfOffset:function(t){return new Date(+t-6e4*t.getTimezoneOffset())},toUTC:function(t){return new Date(+t+6e4*t.getTimezoneOffset())},toTimeZone:function(t,e,i){if(null===e)return t;var s=i?a.dateParse.toUTC(t):t;return new Date(+s-36e5*e)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),s=i>=0?"+":"-",n=function(l){var h=Math.floor(Math.abs(l));return(h<10?"0":"")+h};return e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())+s+n(i/60)+":"+n(i%60)}},a}(),ba=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)},function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),ez={GroupGuid:"{271bbba0-1ee7}"},TA=function(){function a(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=a,this.dataSource=t,this.pvt={}}return a.prototype.processResponse=function(t,e,i,s){return t},a}(),ym=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return ba(t,a),t.prototype.processQuery=function(e,i){for(var l,h,d,s=e.dataSource.json.slice(0),n=s.length,o=!0,c={},u=0,p=[],f=0;f<i.lazyLoad.length;f++)u++,c[i.lazyLoad[f].key]=i.lazyLoad[f].value;var g={};for(f=0;f<i.queries.length;f++)"onPage"!==(h=i.queries[f]).fn&&"onGroup"!==h.fn||!i.lazyLoad.length?(l=this[h.fn].call(this,s,h.e,i),"onAggregates"===h.fn?g[h.e.field+" - "+h.e.type]=l:s=void 0!==l?l:s,("onPage"===h.fn||"onSkip"===h.fn||"onTake"===h.fn||"onRange"===h.fn)&&(o=!1),o&&(n=s.length)):("onGroup"===h.fn&&p.push(h.e),"onPage"===h.fn&&(d=h.e));if(u){var v=this.lazyLoadGroup({query:i,lazyLoad:c,result:s,group:p,page:d});s=v.result,n=v.count}return i.isCountRequired&&(s={result:s,count:n,aggregates:g}),s},t.prototype.lazyLoadGroup=function(e){var i=0,s=this.getAggregate(e.query),n=e.result;if((0,r.le)(e.lazyLoad.onDemandGroupInfo)){i=(n=_.group(n,e.group[0].fieldName,s,null,null,e.group[0].comparer,!0)).length;var c=n;e.page&&(n=this.onPage(n,e.page,e.query)),this.formGroupResult(n,c)}else{for(var o=e.lazyLoad.onDemandGroupInfo,l=o.where.length-1;l>=0;l--)n=this.onWhere(n,o.where[l]);e.group.length!==o.level&&(n=_.group(n,e.group[o.level].fieldName,s,null,null,e.group[0].comparer,!0)),i=n.length,c=n,n=(n=n.slice(o.skip)).slice(0,o.take),e.group.length!==o.level&&this.formGroupResult(n,c)}return{result:n,count:i}},t.prototype.formGroupResult=function(e,i){if(e.length&&i.length){var s="GroupGuid",n="childLevels",o="level",l="records";e[s]=i[s],e[n]=i[n],e[o]=i[o],e[l]=i[l]}return e},t.prototype.getAggregate=function(e){var i=ee.filterQueries(e.queries,"onAggregates"),s=[];if(i.length)for(var n=void 0,o=0;o<i.length;o++)s.push({type:(n=i[o].e).type,field:_.getValue(n.field,e)});return s},t.prototype.batchRequest=function(e,i,s){var n,o=i.deletedRecords.length;for(n=0;n<i.addedRecords.length;n++)this.insert(e,i.addedRecords[n]);for(n=0;n<i.changedRecords.length;n++)this.update(e,s.key,i.changedRecords[n]);for(n=0;n<o;n++)this.remove(e,s.key,i.deletedRecords[n]);return i},t.prototype.onWhere=function(e,i){return e&&e.length?e.filter(function(s){if(i)return i.validate(s)}):e},t.prototype.onAggregates=function(e,i){var s=_.aggregates[i.type];return e&&s&&0!==e.length?s(e,i.field):null},t.prototype.onSearch=function(e,i){return e&&e.length?(0===i.fieldNames.length&&_.getFieldList(e[0],i.fieldNames),e.filter(function(s){for(var n=0;n<i.fieldNames.length;n++)if(i.comparer.call(s,_.getObject(i.fieldNames[n],s),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,i,s){if(!e||!e.length)return e;var n,o=_.getValue(i.fieldName,s);if(!o)return e.sort(i.comparer);if(o instanceof Array){for(var l=(o=o.slice(0)).length-1;l>=0;l--)!o[l]||(n=i.comparer,_.endsWith(o[l]," desc")&&(n=_.fnSort("descending"),o[l]=o[l].replace(" desc","")),e=_.sort(e,o[l],n));return e}return _.sort(e,o,i.comparer)},t.prototype.onGroup=function(e,i,s){if(!e||!e.length)return e;var n=this.getAggregate(s);return _.group(e,_.getValue(i.fieldName,s),n,null,null,i.comparer)},t.prototype.onPage=function(e,i,s){var n=_.getValue(i.pageSize,s),o=(_.getValue(i.pageIndex,s)-1)*n;return e&&e.length?e.slice(o,o+n):e},t.prototype.onRange=function(e,i){return e&&e.length?e.slice(_.getValue(i.start),_.getValue(i.end)):e},t.prototype.onTake=function(e,i){return e&&e.length?e.slice(0,_.getValue(i.nos)):e},t.prototype.onSkip=function(e,i){return e&&e.length?e.slice(_.getValue(i.nos)):e},t.prototype.onSelect=function(e,i){return e&&e.length?_.select(e,_.getValue(i.fieldNames)):e},t.prototype.insert=function(e,i,s,n,o){return(0,r.le)(o)?e.dataSource.json.push(i):e.dataSource.json.splice(o,0,i)},t.prototype.remove=function(e,i,s,n){var l,o=e.dataSource.json;for("object"==typeof s&&!(s instanceof Date)&&(s=_.getObject(i,s)),l=0;l<o.length&&_.getObject(i,o[l])!==s;l++);return l!==o.length?o.splice(l,1):null},t.prototype.update=function(e,i,s,n){var l,h,o=e.dataSource.json;for((0,r.le)(i)||(h=(0,r.NA)(i,s)),l=0;l<o.length&&((0,r.le)(i)||(0,r.NA)(i,o[l])!==h);l++);return l<o.length?(0,r.TS)(o[l],s):null},t}(TA),Gn=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return ba(t,a),t.prototype.processQuery=function(e,i,s){var c,u,n=this.getQueryRequest(i),o=ee.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),l=i.params,h=e.dataSource.url,p=null,d=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?u=((u=_.getValue((c=o.onPage).pageIndex,i))-1)*(p=_.getValue(c.pageSize,i)):"onRange"in o&&(u=(c=o.onRange).start,p=c.end-c.start);for(var g=0;g<n.sorts.length;g++)c=_.getValue(n.sorts[g].e.fieldName,i),f.sorts.push(_.callAdaptorFunction(this,"onEachSort",{name:c,direction:n.sorts[g].e.direction},i));for(s&&(c=this.getFiltersFrom(s,i))&&f.filters.push(_.callAdaptorFunction(this,"onEachWhere",c.toJson(),i)),g=0;g<n.filters.length;g++){var m=_.callAdaptorFunction(this,"onEachWhere",n.filters[g].e.toJson(),i);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!(0,r.le)(n.filters[g].e.key)&&n.filters.length>1&&(m="("+m+")"),f.filters.push(m);for(var y=0,C="object"==typeof f.filters[g]?Object.keys(f.filters[g]):[];y<C.length;y++)_.isNull(f[b=C[y]])&&delete f[b]}for(g=0;g<n.searches.length;g++)f.searches.push(_.callAdaptorFunction(this,"onEachSearch",{fields:(c=n.searches[g].e).fieldNames,operator:c.operator,key:c.searchKey,ignoreCase:c.ignoreCase},i));for(g=0;g<n.groups.length;g++)f.groups.push(_.getValue(n.groups[g].e.fieldName,i));for(g=0;g<n.aggregates.length;g++)f.aggregates.push({type:(c=n.aggregates[g].e).type,field:_.getValue(c.field,i)});var S={};if(this.getRequestQuery(d,i,o,f,S),_.callAdaptorFunction(this,"addParams",{dm:e,query:i,params:l,reqParams:S}),i.lazyLoad.length)for(g=0;g<i.lazyLoad.length;g++)S[i.lazyLoad[g].key]=i.lazyLoad[g].value;for(var x=0,T=Object.keys(S);x<T.length;x++){var b;(_.isNull(S[b=T[x]])||""===S[b]||0===S[b].length)&&delete S[b]}(!(d.skip in S)||!(d.take in S))&&null!==p&&(S[d.skip]=_.callAdaptorFunction(this,"onSkip",u,i),S[d.take]=_.callAdaptorFunction(this,"onTake",p,i));var O=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(S,_.parse.jsonDateReplacer),url:h,pvtData:O,type:"POST",contentType:"application/json; charset=utf-8"}:(c=this.convertToQueryString(S,i,e),{type:"GET",url:(c=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+c).length?h.replace(/\/*$/,c):h,pvtData:O})},t.prototype.getRequestQuery=function(e,i,s,n,o){var h=o;h[e.from]=i.fromTable,e.apply&&i.distincts.length&&(h[e.apply]="onDistinct"in this?_.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&e.expand&&(h[e.expand]="onExpand"in this&&"onSelect"in s?_.callAdaptorFunction(this,"onExpand",{selects:_.getValue(s.onSelect.fieldNames,i),expands:i.expands},i):i.expands),h[e.select]="onSelect"in s&&!i.distincts.length?_.callAdaptorFunction(this,"onSelect",_.getValue(s.onSelect.fieldNames,i),i):"",h[e.count]=i.isCountRequired?_.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",h[e.search]=n.searches.length?_.callAdaptorFunction(this,"onSearch",n.searches,i):"",h[e.skip]="onSkip"in s?_.callAdaptorFunction(this,"onSkip",_.getValue(s.onSkip.nos,i),i):"",h[e.take]="onTake"in s?_.callAdaptorFunction(this,"onTake",_.getValue(s.onTake.nos,i),i):"",h[e.where]=n.filters.length||n.searches.length?_.callAdaptorFunction(this,"onWhere",n.filters,i):"",h[e.sortBy]=n.sorts.length?_.callAdaptorFunction(this,"onSortBy",n.sorts,i):"",h[e.group]=n.groups.length?_.callAdaptorFunction(this,"onGroup",n.groups,i):"",h[e.aggregates]=n.aggregates.length?_.callAdaptorFunction(this,"onAggregates",n.aggregates,i):"",h.param=[]},t.prototype.convertToQueryString=function(e,i,s){return""},t.prototype.processResponse=function(e,i,s,n,o,l){if(n&&n.headers.get("Content-Type")&&-1!==n.headers.get("Content-Type").indexOf("application/json")){var h=_.timeZoneHandling;i&&!i.timeZoneHandling&&(_.timeZoneHandling=!1),e=_.parse.parseJson(e),_.timeZoneHandling=h}var c=o,u=c.pvtData||{},p=e?e.groupDs:[];if(n&&n.headers.get("Content-Type")&&-1!==n.headers.get("Content-Type").indexOf("xml"))return s.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(c.data);if(d&&"batch"===d.action&&e&&e.addedRecords)return l.addedRecords=e.addedRecords,l;e&&e.d&&(e=e.d);var f={};e&&"count"in e&&(f.count=e.count),f.result=e&&e.result?e.result:e;var g=!1;if(Array.isArray(e.result)&&e.result.length&&((0,r.le)(e.result[0].key)||(f.result=this.formRemoteGroupedData(f.result,1,u.groups.length-1)),s&&s.lazyLoad.length&&u.groups.length))for(var C=0;C<s.lazyLoad.length;C++)"onDemandGroupInfo"===s.lazyLoad[C].key&&u.groups.length===s.lazyLoad[C].value.level&&(g=!0);return g||this.getAggregateResult(u,e,f,p,s),_.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},t.prototype.formRemoteGroupedData=function(e,i,s){for(var n=0;n<e.length;n++)e[n].items.length&&Object.keys(e[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[n].items,i+1,s-1);var o="GroupGuid",c="records";return e[o]=ez[o],e.level=i,e.childLevels=s,e[c]=e[0].items.length?this.getGroupedRecords(e,!(0,r.le)(e[0].items[c])):[],e},t.prototype.getGroupedRecords=function(e,i){for(var s=[],o=0;o<e.length;o++)if(i)s=s.concat(e[o].items.records);else for(var l=0;l<e[o].items.length;l++)s.push(e[o].items[l]);return s},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,i,s,n,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify((0,r.l7)({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:s[void 0],key:s[void 0]},_.getAddParams(this,e,n)))}},t.prototype.beforeSend=function(e,i){},t.prototype.insert=function(e,i,s,n){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,r.l7)({},{value:i,table:s,action:"insert"},_.getAddParams(this,e,n)))}},t.prototype.remove=function(e,i,s,n,o){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,r.l7)({},{key:s,keyColumn:i,table:n,action:"remove"},_.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,s,n,o){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,r.l7)({},{value:s,action:"update",keyColumn:i,key:_.getObject(i,s),table:n},_.getAddParams(this,e,o)))}},t.prototype.getFiltersFrom=function(e,i){var n,s=i.fKey,o=s,l=i.key,h=[];"object"!=typeof e[0]&&(o=null);for(var c=0;c<e.length;c++)n="object"==typeof e[0]?_.getObject(l||o,e[c]):e[c],h.push(new Be(s,"equal",n));return Be.or(h)},t.prototype.getAggregateResult=function(e,i,s,n,o){var l=i;if(i&&i.result&&(l=i.result),e&&e.aggregates&&e.aggregates.length){var h=e.aggregates,c=void 0,u=l,p={};i.aggregate&&(u=i.aggregate);for(var d=0;d<h.length;d++)(c=_.aggregates[h[d].type])&&(p[h[d].field+" - "+h[d].type]=c(u,h[d].field));s.aggregates=p}var g=Array.isArray(i.result)&&i.result.length&&!(0,r.le)(i.result[0].key);if(e&&e.groups&&e.groups.length&&!g){var m=e.groups;for(d=0;d<m.length;d++){(0,r.le)(n)||(n=_.group(n,m[d]));var y=ee.filterQueries(o.queries,"onGroup")[d].e;l=_.group(l,m[d],e.aggregates,null,n,y.comparer)}s.result=l}return s},t.prototype.getQueryRequest=function(e){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=ee.filterQueries(e.queries,"onSortBy"),i.groups=ee.filterQueries(e.queries,"onGroup"),i.filters=ee.filterQueries(e.queries,"onWhere"),i.searches=ee.filterQueries(e.queries,"onSearch"),i.aggregates=ee.filterQueries(e.queries,"onAggregates"),i},t.prototype.addParams=function(e){var i=e.reqParams;e.params.length&&(i.params={});for(var s=0,n=e.params;s<n.length;s++){var o=n[s];if(i[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[o.key]=o.value,o.fn&&(i[o.key]=o.fn.call(e.query,o.key,e.query,e.dm)),i.params[o.key]=i[o.key]}},t}(TA),eu=function(a){function t(e){var i=a.call(this)||this;return i.options=(0,r.l7)({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),(0,r.l7)(i.options,e||{}),i}return ba(t,a),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,s){var o,l,n="",h=e.value,c=typeof h,u=e.field?t.getField(e.field):null;if(h instanceof Date&&(h="datetime'"+_.parse.replacer(h)+"'"),"string"===c&&(h=h.replace(/'/g,"''"),e.ignoreCase&&(h=h.toLowerCase()),"like"!==e.operator&&(h=encodeURIComponent(h)),"wildcard"!==e.operator&&"like"!==e.operator&&(h="'"+h+"'"),s&&(u="cast("+u+", 'Edm.String')"),_.parse.isGuid(h)&&(l="guid"),e.ignoreCase&&(l||(u="tolower("+u+")"),h=h.toLowerCase())),"isempty"===e.operator||"isnull"===e.operator||"isnotempty"===e.operator||"isnotnull"===e.operator?(o=-1!==e.operator.indexOf("isnot")?_.odBiOperator.notequal:_.odBiOperator.equal,h="isnull"===e.operator||"isnotnull"===e.operator?null:"''"):o=_.odBiOperator[e.operator],o)return n+=u,n+=o,l&&(n+=l),n+h;if("like"===(o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator[e.operator]:_.odv4UniOperator[e.operator]))-1!==(h=h).indexOf("%")&&("%"===h.charAt(0)&&h.lastIndexOf("%")<2?(h=h.substring(1,h.length),o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.startswith:_.odv4UniOperator.startswith):"%"===h.charAt(h.length-1)&&h.indexOf("%")>h.length-3?(h=h.substring(0,h.length-1),o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.endswith:_.odv4UniOperator.endswith):h.lastIndexOf("%")!==h.indexOf("%")&&h.lastIndexOf("%")>h.indexOf("%")+1?(h=h.substring(h.indexOf("%")+1,h.lastIndexOf("%")),o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.contains:_.odv4UniOperator.contains):o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.contains:_.odv4UniOperator.contains),h="'"+(h=encodeURIComponent(h))+"'";else if("wildcard"===o)if(-1!==(h=h).indexOf("*")){var p=h.split("*"),d=void 0,f=0;if(0!==h.indexOf("*")&&-1===p[0].indexOf("%3f")&&-1===p[0].indexOf("?")&&(d="'"+(d=p[0])+"'",n+=(o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.startswith:_.odv4UniOperator.startswith)+"(",n+=u+",",l&&(n+=l),n+=d+")",f++),h.lastIndexOf("*")!==h.length-1&&-1===p[p.length-1].indexOf("%3f")&&-1===p[p.length-1].indexOf("?")&&(d="'"+(d=p[p.length-1])+"'",f>0&&(n+=" and "),n+=(o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.endswith:_.odv4UniOperator.endswith)+"(",n+=u+",",l&&(n+=l),n+=d+")",f++),p.length>2)for(var g=1;g<p.length-1;g++)if(-1===p[g].indexOf("%3f")&&-1===p[g].indexOf("?")){if(d="'"+(d=p[g])+"'",f>0&&(n+=" and "),"substringof"===(o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.contains:_.odv4UniOperator.contains)||"not substringof"===o){var m=d;d=u,u=m}n+=o+"(",n+=u+",",l&&(n+=l),n+=d+")",f++}0===f?(o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.contains:_.odv4UniOperator.contains,(-1!==h.indexOf("?")||-1!==h.indexOf("%3f"))&&(h=-1!==h.indexOf("?")?h.split("?").join(""):h.split("%3f").join("")),h="'"+h+"'"):o="wildcard"}else o=(0,r.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?_.odUniOperator.contains:_.odv4UniOperator.contains,(-1!==h.indexOf("?")||-1!==h.indexOf("%3f"))&&(h=-1!==h.indexOf("?")?h.split("?").join(""):h.split("%3f").join("")),h="'"+h+"'";return"substringof"!==o&&"not substringof"!==o||(m=h,h=u,u=m),"wildcard"!==o&&(n+=o+"(",n+=u+",",l&&(n+=l),n+=h+")"),n},t.prototype.addParams=function(e){a.prototype.addParams.call(this,e),delete e.reqParams.params},t.prototype.onComplexPredicate=function(e,i,s){for(var n=[],o=0;o<e.predicates.length;o++)n.push("("+this.onEachWhere(e.predicates[o],i,s)+")");return n.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,i,s){return e.isComplex?this.onComplexPredicate(e,i,s):this.onPredicate(e,i,s)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&_.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],s=0;s<e.fields.length;s++)i.push(new Be(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.search=i},t.prototype.onSearch=function(e){return this.pvt.search=Be.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var s=0;s<e.name.length;s++)i.push(t.getField(e.name[s])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,i,s){_.endsWith(s.url,this.options.batch)&&"post"===s.type.toLowerCase()?(i.headers.set("Accept",this.options.multipartAccept),i.headers.set("DataServiceVersion","2.0")):i.headers.set("Accept",this.options.accept),i.headers.set("DataServiceVersion","2.0"),i.headers.set("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,i,s,n,o,l){var h="odata.metadata";if(o&&"GET"===o.type&&!this.rootUrl&&e[h]){var c=e[h].split("/$metadata#");this.rootUrl=c[0],this.resourceTableName=c[1]}if(!(0,r.le)(e.d)){var p=s&&s.isCountRequired?e.d.results:e.d,d="__metadata";if(!(0,r.le)(p))for(var f=0;f<p.length;f++)(0,r.le)(p[f][d])||delete p[f][d]}var g=o&&o.pvtData,m=this.processBatchResponse(e,s,n,o,l);if(m)return m;var v=n&&o.fetchRequest.headers.get("DataServiceVersion"),y=null,C=v&&parseInt(v,10)||2;if(s&&s.isCountRequired){var b="__count";(e[b]||e["odata.count"])&&(y=e[b]||e["odata.count"]),e.d&&(e=e.d),(e[b]||e["odata.count"])&&(y=e[b]||e["odata.count"])}3===C&&e.value&&(e=e.value),e.d&&(e=e.d),C<3&&e.results&&(e=e.results);var S={};return S.count=y,S.result=e,this.getAggregateResult(g,e,S,null,s),_.isNull(y)?S.result:{result:S.result,count:S.count,aggregates:S.aggregates}},t.prototype.convertToQueryString=function(e,i,s){var n=[],o="table",l=e[o]||"";delete e[o],s.dataSource.requiresFormat&&(e.$format="json");for(var u=0,p=Object.keys(e);u<p.length;u++){var d=p[u];n.push(d+"="+e[d])}return n=n.join("&"),s.dataSource.url&&-1!==s.dataSource.url.indexOf("?")&&!l?n:n.length?l+"?"+n:l||""},t.prototype.localTimeReplacer=function(e,i){for(var s=0,n=(0,r.le)(i)?[]:Object.keys(i);s<n.length;s++){var o=n[s];i[o]instanceof Date&&(i[o]=_.dateParse.toLocalTime(i[o]))}return i},t.prototype.insert=function(e,i,s){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,i,s,n){var o;return o="string"!=typeof s||_.parse.isGuid(s)?"("+s+")":"('"+s+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+o}},t.prototype.update=function(e,i,s,n,o,l){var h;return"PATCH"===this.options.updateType&&!(0,r.le)(l)&&(s=this.compareAndRemove(s,l,i)),h="string"!=typeof s[i]||_.parse.isGuid(s[i])?"("+s[i]+")":"('"+s[i]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+h,data:JSON.stringify(s,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,i,s,n,o){var l=s.guid=_.getGuid(this.options.batchPre),h=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);s.url=this.resourceTableName?this.resourceTableName:s.url;var c={url:s.url,key:s.key,cid:1,cSet:_.getGuid(this.options.changeSet)},u="--"+l+"\n";return u+="Content-Type: multipart/mixed; boundary="+c.cSet.replace("--","")+"\n",this.pvt.changeSet=0,u+=this.generateInsertRequest(i.addedRecords,c,e),u+=this.generateUpdateRequest(i.changedRecords,c,e,o?o.changedRecords:[]),u+=this.generateDeleteRequest(i.deletedRecords,c,e),u+=c.cSet+"--\n",{type:"POST",url:h,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+l,data:u+="--"+l+"--"}},t.prototype.generateDeleteRequest=function(e,i,s){return e?this.generateBodyContent(e,i,{method:"DELETE ",url:function(l,h,c){var u=_.getObject(c,l[h]);return"number"==typeof u||_.parse.isGuid(u)?"("+u+")":u instanceof Date?"("+l[h][c].toJSON()+")":"('"+u+"')"},data:function(l,h){return""}},s)+"\n":""},t.prototype.generateInsertRequest=function(e,i,s){return e?this.generateBodyContent(e,i,{method:"POST ",url:function(l,h,c){return""},data:function(l,h){return JSON.stringify(l[h])+"\n\n"}},s):""},t.prototype.generateUpdateRequest=function(e,i,s,n){var o=this;return e?(e.forEach(function(c){return c=o.compareAndRemove(c,n.filter(function(u){return _.getObject(i.key,u)===_.getObject(i.key,c)})[0],i.key)}),this.generateBodyContent(e,i,{method:this.options.updateType+" ",url:function(c,u,p){return"number"==typeof c[u][p]||_.parse.isGuid(c[u][p])?"("+c[u][p]+")":c[u][p]instanceof Date?"("+c[u][p].toJSON()+")":"('"+c[u][p]+"')"},data:function(c,u){return JSON.stringify(c[u])+"\n\n"}},s)):""},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,i,s,n){for(var o="",l=0;l<e.length;l++)o+="\n"+i.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=s.method,"POST "===s.method?o+=(n.dataSource.insertUrl||n.dataSource.crudUrl||i.url)+s.url(e,l,i.key)+" HTTP/1.1\n":"PUT "===s.method||"PATCH "===s.method?o+=(n.dataSource.updateUrl||n.dataSource.crudUrl||i.url)+s.url(e,l,i.key)+" HTTP/1.1\n":"DELETE "===s.method&&(o+=(n.dataSource.removeUrl||n.dataSource.crudUrl||i.url)+s.url(e,l,i.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",(0,r.le)(e[l]["@odata.etag"])?o+="\n":(o+="If-Match: "+e[l]["@odata.etag"]+"\n\n",delete e[l]["@odata.etag"]),o+=s.data(e,l);return o},t.prototype.processBatchResponse=function(e,i,s,n,o){if(s&&s.headers.get("Content-Type")&&-1!==s.headers.get("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&_.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var l=s.headers.get("Content-Type"),h=void 0,c=void 0,u=e+"";if(l=l.substring(l.indexOf("=batchresponse")+1),(u=u.split(l)).length<2)return{};var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(u=u[1]);p&&u.replace(p[0],"");for(var f=(u=u.split(p?p[1]:"")).length;f>-1;f--)!/\bContent-ID:/i.test(u[f])||!/\bHTTP.+201/.test(u[f])||(h=parseInt(/\bContent-ID: (\d+)/i.exec(u[f])[1],10),o.addedRecords[h]&&(c=_.parse.parseJson(/^\{.+\}/m.exec(u[f])[0]),(0,r.l7)({},o.addedRecords[h],this.processResponse(c))));return o}return null},t.prototype.compareAndRemove=function(e,i,s){var n=this;return(0,r.le)(i)||Object.keys(e).forEach(function(o){o!==s&&"@odata.etag"!==o&&(_.isPlainObject(e[o])?(n.compareAndRemove(e[o],i[o]),0===Object.keys(e[o]).filter(function(h){return"@odata.etag"!==h}).length&&delete e[o]):(e[o]===i[o]||e[o]&&i[o]&&e[o].valueOf()===i[o].valueOf())&&delete e[o])}),e},t}(Gn),kA=function(a){function t(){var e=a.call(this)||this;return(0,r.sO)("beforeSend",Gn.prototype.beforeSend,e),e}return ba(t,a),t.prototype.insert=function(e,i,s,n,o){return this.pvt.position=o,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,r.l7)({},{value:i,table:s,action:"insert"},_.getAddParams(this,e,n)))}},t.prototype.remove=function(e,i,s,n,o){return a.prototype.remove.call(this,e,i,s),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,r.l7)({},{key:s,keyColumn:i,table:n,action:"remove"},_.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,s,n,o){return this.updateType="update",this.updateKey=i,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,r.l7)({},{value:s,action:"update",keyColumn:i,key:s[i],table:n},_.getAddParams(this,e,o)))}},t.prototype.processResponse=function(e,i,s,n,o,l,h){var c;if(e="batch"===(o?JSON.parse(o.data):e).action?_.parse.parseJson(e):e,"add"===this.updateType&&a.prototype.insert.call(this,i,e,null,null,this.pvt.position),"update"===this.updateType&&a.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(c=0;c<e.added.length;c++)a.prototype.insert.call(this,i,e.added[c]);if(e.changed)for(c=0;c<e.changed.length;c++)a.prototype.update.call(this,i,h.key,e.changed[c]);if(e.deleted)for(c=0;c<e.deleted.length;c++)a.prototype.remove.call(this,i,h.key,e.deleted[c]);return e},t.prototype.batchRequest=function(e,i,s,n,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify((0,r.l7)({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:s.url,key:s.key},_.getAddParams(this,e,n)))}},t.prototype.addParams=function(e){(new Gn).addParams(e)},t}(ym),tz=function(a){function t(e){var i=a.call(this)||this;return i.options=(0,r.l7)({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),(0,r.l7)(i.options,e||{}),i}return ba(t,a),t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(Gn),iz=function(a){function t(e,i,s){var n=a.call(this)||this;n.isCrudAction=!1,n.isInsertAction=!1,(0,r.le)(e)||(n.cacheAdaptor=e),n.pageSize=s,n.guidId=_.getGuid("cacheAdaptor"),window.localStorage.setItem(n.guidId,JSON.stringify({keys:[],results:[]}));var l=n.guidId;return(0,r.le)(i)||setInterval(function(){for(var h=_.parse.parseJson(window.localStorage.getItem(l)),c=[],u=0;u<h.results.length;u++){var p=+new Date,d=+new Date(h.results[u].timeStamp);h.results[u].timeStamp=p-d,p-d>i&&c.push(u)}for(u=0;u<c.length;u++)h.results.splice(c[u],1),h.keys.splice(c[u],1);window.localStorage.removeItem(l),window.localStorage.setItem(l,JSON.stringify(h))},i),n}return ba(t,a),t.prototype.generateKey=function(e,i){var s=this.getQueryRequest(i),n=ee.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e,l="onPage";l in n&&(o+=n[l].pageIndex),s.sorts.forEach(function(d){o+=d.e.direction+d.e.fieldName}),s.groups.forEach(function(d){o+=d.e.fieldName}),s.searches.forEach(function(d){o+=d.e.searchKey});for(var h=0;h<s.filters.length;h++){var c=s.filters[h];if(c.e.isComplex){var u=i.clone();u.queries=[];for(var p=0;p<c.e.predicates.length;p++)u.queries.push({fn:"onWhere",e:c.e.predicates[p],filter:i.queries.filter});o+=c.e.condition+this.generateKey(e,u)}else o+=c.e.field+c.e.operator+c.e.value}return o},t.prototype.processQuery=function(e,i,s){var n=this.generateKey(e.dataSource.url,i),o=_.parse.parseJson(window.localStorage.getItem(this.guidId)),l=o?o.results[o.keys.indexOf(n)]:null;return null==l||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):l},t.prototype.processResponse=function(e,i,s,n,o,l){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&_.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,i,s,n,o,l);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var h=s?this.generateKey(i.dataSource.url,s):i.dataSource.url,c={},u=(c=_.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(h);for(-1!==u&&(c.results.splice(u,1),c.keys.splice(u,1)),c.results[c.keys.push(h)-1]={keys:h,result:e.result,timeStamp:new Date,count:e.count};c.results.length>this.pageSize;)c.results.splice(0,1),c.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(c)),e},t.prototype.beforeSend=function(e,i,s){!(0,r.le)(this.cacheAdaptor.options.batch)&&_.endsWith(s.url,this.cacheAdaptor.options.batch)&&"post"===s.type.toLowerCase()&&i.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||i.headers.set("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,i,s,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,i,s,n)},t.prototype.insert=function(e,i,s){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,i,s)},t.prototype.remove=function(e,i,s,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,i,s,n)},t.prototype.batchRequest=function(e,i,s){return this.cacheAdaptor.batchRequest(e,i,s)},t}(Gn),B=function(){function a(t,e,i){var n,s=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isInitialLoad=!0,!t&&!this.dataSource&&(t=[]),i=i||t.adaptor,t&&!1===t.timeZoneHandling&&(this.timeZoneHandling=t.timeZoneHandling),t instanceof Array?n={json:t,offline:!0}:"object"==typeof t?(t.json||(t.json=[]),t.enablePersistence||(t.enablePersistence=!1),t.id||(t.id=""),t.ignoreOnPersist||(t.ignoreOnPersist=[]),n={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:void 0!==t.offline?t.offline:!(t.adaptor instanceof kA||t.adaptor instanceof tz||t.url),requiresFormat:t.requiresFormat,enablePersistence:t.enablePersistence,id:t.id,ignoreOnPersist:t.ignoreOnPersist}):_.throwError("DataManager: Invalid arguments"),void 0===n.requiresFormat&&!_.isCors()&&(n.requiresFormat=!!(0,r.le)(n.crossDomain)||n.crossDomain),void 0===n.dataType&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=e,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new eu,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new ee),this.ready.then(function(o){s.dataSource.offline=!0,s.isDataAvailable=!0,n.json=o.result,s.adaptor=new ym})):this.adaptor=n.offline?new ym:new eu,!n.jsonp&&this.adaptor instanceof eu&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,n.enableCaching&&(this.adaptor=new iz(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return a.prototype.getPersistedData=function(t){var e=localStorage.getItem(t||this.dataSource.id);return JSON.parse(e)},a.prototype.setPersistData=function(t,e,i){localStorage.setItem(e||this.dataSource.id,JSON.stringify(i||this.persistQuery))},a.prototype.setPersistQuery=function(t){var e=this,i=this.getPersistedData();if(this.isInitialLoad&&i&&Object.keys(i).length){this.persistQuery=i,this.persistQuery.queries=this.persistQuery.queries.filter(function(n){if(e.dataSource.ignoreOnPersist&&e.dataSource.ignoreOnPersist.length&&n.fn&&e.dataSource.ignoreOnPersist.some(function(h){return n.fn===h}))return!1;if("onWhere"===n.fn){var o=n.e;if(o&&o.isComplex&&o.predicates instanceof Array){var l=o.predicates.map(function(h){if(h.predicates&&h.predicates instanceof Array){var c=h.predicates.map(function(v){return new Be(v.field,v.operator,v.value,v.ignoreCase,v.ignoreAccent,v.matchCase)});return"and"===h.condition?Be.and(c):Be.or(c)}return new Be(h.field,h.operator,h.value,h.ignoreCase,h.ignoreAccent,h.matchCase)});n.e=new Be(l[0],o.condition,l.slice(1))}}return!0});var s=(0,r.l7)(new ee,this.persistQuery);return this.isInitialLoad=!1,s}return this.persistQuery=t,this.isInitialLoad=!1,t},a.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},a.prototype.executeLocal=function(t){!this.defaultQuery&&!(t instanceof ee)&&_.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||_.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t));var e=this.adaptor.processQuery(this,t=t||this.defaultQuery);if(t.subQuery){var i=t.subQuery.fromTable,s=t.subQuery.lookups,n=t.isCountRequired?e.result:e;s&&s instanceof Array&&_.buildHierarchy(t.subQuery.fKey,i,n,s,t.subQuery.key);for(var o=0;o<n.length;o++)n[o][i]instanceof Array&&(n[o]=(0,r.l7)({},{},n[o]),n[o][i]=this.adaptor.processResponse(t.subQuery.using(new a(n[o][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(e,this,t)},a.prototype.executeQuery=function(t,e,i,s){var n=this,o="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),"function"==typeof t&&(s=i,i=e,e=t,t=null),t||(t=this.defaultQuery),t instanceof ee||_.throwError("DataManager - executeQuery() : A query is required to execute");var l=new js,h={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!(0,r.le)(this.adaptor[o])||this.isCustomDataAdaptor(this.adaptor)){var c=this.adaptor.processQuery(this,t);(0,r.le)(this.adaptor[o])?!(0,r.le)(c.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(c,l,h,t)):(h=a.getDeferedArgs(t,c,h),l.resolve(h)):this.adaptor[o](c,l,h,t)}else a.nextTick(function(){var u=n.executeLocal(t);h=a.getDeferedArgs(t,u,h),l.resolve(h)});return(e||i)&&l.promise.then(e,i),s&&l.promise.then(s,s),l.promise},a.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},a.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},a.prototype.extendRequest=function(t,e,i){return(0,r.l7)({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},a.prototype.makeRequest=function(t,e,i,s){var n=this,o=!!s.subQuerySelector,l=function(v){i.error=v,e.reject(i)},h=function(v,y,C,b,S,I,x){i.xhr=C,i.count=y?parseInt(y.toString(),10):0,i.result=v,i.request=b,i.aggregates=I,i.actual=S,i.virtualSelectRecords=x,e.resolve(i)},c=function(v,y){var C=new js,b={parent:i};s.subQuery.isChild=!0;var S=n.adaptor.processQuery(n,s.subQuery,v?n.adaptor.processResponse(v):y),I=n.makeRequest(S,C,b,s.subQuery);return o||C.then(function(x){v&&(_.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,v,x,s.subQuery.key),h(v,x.count,x.xhr))},l),I},p=this.extendRequest(t,function(v,y){if(n.isGraphQLAdaptor(n.adaptor)&&!(0,r.le)(v.errors))return l(v.errors);n.isCustomDataAdaptor(n.adaptor)&&(y=(0,r.l7)({},n.fetchReqOption,y)),-1===y.contentType.indexOf("xml")&&n.dateParse&&(v=_.parse.parseJson(v));var C=n.adaptor.processResponse(v,n,s,y.fetchRequest,y),b=0,S=null,x=v.virtualSelectRecords;s.isCountRequired&&(b=C.count,S=C.aggregates,C=C.result),s.subQuery?o||c(C,y):h(C,b,y.fetchRequest,y.type,v,S,x)},l);if(this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=p,this.adaptor.options.getData({data:p.data,onSuccess:p.onSuccess,onFailure:p.onFailure});else{var d=new r.Uo(p);d.beforeSend=function(){n.beforeSend(d.fetchRequest,d)},(p=d.send()).catch(function(v){return!0}),this.requests.push(d)}if(o){var m=s.subQuerySelector.call(this,{query:s.subQuery,parent:s});m&&m.length?Promise.all([p,c(null,m)]).then(function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];var C=v[0],b=n.adaptor.processResponse(C[0],n,s,n.requests[0].fetchRequest,n.requests[0]),S=0;s.isCountRequired&&(S=b.count,b=b.result);var I=n.adaptor.processResponse(C[1],n,s.subQuery,n.requests[1].fetchRequest,n.requests[1]);S=0,s.subQuery.isCountRequired&&(S=I.count,I=I.result),_.buildHierarchy(s.subQuery.fKey,s.subQuery.fromTable,b,I,s.subQuery.key),o=!1,h(b,S,n.requests[0].fetchRequest)}):o=!1}return p},a.prototype.beforeSend=function(t,e){this.adaptor.beforeSend(this,t,e);for(var s,i=this.dataSource.headers,n=0;i&&n<i.length;n++){s=[];for(var l=0,h=Object.keys(i[n]);l<h.length;l++){var c=h[l];s.push(c),t.headers.set(c,i[n][c])}}},a.prototype.saveChanges=function(t,e,i,s,n){var o=this;i instanceof ee&&(s=i,i=null);var l={url:i,key:e||this.dataSource.key},h=this.adaptor.batchRequest(this,t,l,s||new ee,n),c="dofetchRequest";if(this.dataSource.offline)return h;if((0,r.le)(this.adaptor[c])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(h,this.adaptor.options.batchUpdate);var u=new js,p=new r.Uo(h);return p.beforeSend=function(){o.beforeSend(p.fetchRequest,p)},p.onSuccess=function(d,f){o.isGraphQLAdaptor(o.adaptor)&&((0,r.le)(d.errors)||p.onFailure(JSON.stringify(d.errors))),u.resolve(o.adaptor.processResponse(d,o,null,f.fetchRequest,f,t,l))},p.onFailure=function(d){u.reject([{error:d}])},p.send().catch(function(d){return!0}),u.promise}return this.adaptor[c](h)},a.prototype.insert=function(t,e,i,s){e instanceof ee&&(i=e,e=null);var n=this.adaptor.insert(this,t,e,i,s),o="dofetchRequest";return this.dataSource.offline?n:(0,r.le)(this.adaptor[o])?this.dofetchRequest(n,this.adaptor.options.addRecord):this.adaptor[o](n)},a.prototype.remove=function(t,e,i,s){"object"==typeof e&&(e=_.getObject(t,e)),i instanceof ee&&(s=i,i=null);var n=this.adaptor.remove(this,t,e,i,s),o="dofetchRequest";return this.dataSource.offline?n:(0,r.le)(this.adaptor[o])?this.dofetchRequest(n,this.adaptor.options.deleteRecord):this.adaptor[o](n)},a.prototype.update=function(t,e,i,s,n){i instanceof ee&&(s=i,i=null);var o=this.adaptor.update(this,t,e,i,s,n),l="dofetchRequest";return this.dataSource.offline?o:(0,r.le)(this.adaptor[l])?this.dofetchRequest(o,this.adaptor.options.updateRecord):this.adaptor[l](o)},a.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},a.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},a.prototype.successFunc=function(t,e){if(this.isGraphQLAdaptor(this.adaptor)){var i=JSON.parse(t);(0,r.le)(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=(0,r.l7)({},this.fetchReqOption,e));try{_.parse.parseJson(t)}catch(s){t=[]}t=this.adaptor.processResponse(_.parse.parseJson(t),this,null,e.fetchRequest,e),this.fetchDeffered.resolve(t)},a.prototype.failureFunc=function(t){this.fetchDeffered.reject([{error:t}])},a.prototype.dofetchRequest=function(t,e){var i=this;if(t=(0,r.l7)({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.fetchDeffered=new js,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var s=new r.Uo(t);s.beforeSend=function(){i.beforeSend(s.fetchRequest,s)},s.onSuccess=this.successFunc.bind(this),s.onFailure=this.failureFunc.bind(this),s.send().catch(function(n){return!0})}return this.fetchDeffered.promise},a.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},a}(),js=function(){return function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}();function sz(a){for(var t,e=a.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}function oo(a,t){if(t){var e=document.createEvent("MouseEvents");e.initEvent(a.type,!1,!0),t.dispatchEvent(e)}}var Ee,az=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_r=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},br_RTL=(new r.Qj,"e-rtl"),It=function(a){function t(e,i){return a.call(this,e,i)||this}return az(t,a),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=(0,r.qx)(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&(0,r.cn)([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),!(0,r.xr)()||(0,r.xr)()&&"progress-btn"!==this.getModuleName()){if(this.content){var e=this.enableHtmlSanitizer?r.pJ.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss()}this.enableRtl&&this.element.classList.add(br_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&r.bi.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&r.bi.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",br_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),a.prototype.destroy.call(this),(0,r.IV)([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&(0,r.og)(i),this.unWireEvents(),r.re&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var s=this.element.querySelector("span.e-btn-icon"),n=0,o=Object.keys(e);n<o.length;n++)switch(o[n]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":(s=this.element.querySelector("span.e-btn-icon"))?e.iconCss?(s.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&s.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):(0,r.og)(s):this.setIconCss();break;case"iconPosition":(0,r.IV)([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(s=this.element.querySelector("span.e-btn-icon"))&&(0,r.og)(s),this.setIconCss();break;case"cssClass":i.cssClass&&(0,r.IV)([this.element],i.cssClass.split(" ")),e.cssClass&&(0,r.cn)([this.element],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(br_RTL):this.element.classList.remove(br_RTL);break;case"content":sz(this.element)||this.element.classList.remove("e-icon-btn"),(!(0,r.xr)()||(0,r.xr)()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(e.content=r.pJ.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss());break;case"isToggle":e.isToggle?r.bi.add(this.element,"click",this.btnClickHandler,this):(r.bi.remove(this.element,"click",this.btnClickHandler),(0,r.IV)([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},_r([(0,r.Z9)("Left")],t.prototype,"iconPosition",void 0),_r([(0,r.Z9)("")],t.prototype,"iconCss",void 0),_r([(0,r.Z9)(!1)],t.prototype,"disabled",void 0),_r([(0,r.Z9)(!1)],t.prototype,"isPrimary",void 0),_r([(0,r.Z9)("")],t.prototype,"cssClass",void 0),_r([(0,r.Z9)("")],t.prototype,"content",void 0),_r([(0,r.Z9)(!1)],t.prototype,"isToggle",void 0),_r([(0,r.Z9)()],t.prototype,"locale",void 0),_r([(0,r.Z9)(!1)],t.prototype,"enableHtmlSanitizer",void 0),_r([(0,r.ju)()],t.prototype,"created",void 0),_r([r.Zl],t)}(r.wA),oz=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Yn=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},LC="e-check",DA="e-checkbox-disabled",Qp="e-frame",OC="e-stop",RC="e-label",Jp="e-ripple-container",PC="e-ripple-check",MC="e-ripple-stop",BC="e-rtl",NC="e-checkbox-wrapper",lz=["title","class","style","disabled","readonly","name","value"],$p=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.isFocused=!1,s.isMouseClick=!1,s.clickTriggered=!1,s.validCheck=!0,s}return oz(t,a),t.prototype.changeState=function(e,i){var s,n=this.getWrapper().getElementsByClassName(Qp)[0];r.re&&(s=this.getWrapper().getElementsByClassName(Jp)[0]),"check"===e?(n&&(n.classList.remove(OC),n.classList.add(LC)),s&&(s.classList.remove(MC),s.classList.add(PC)),this.element.checked=!0,(this.element.required||(0,r.oq)(this.element,"form")&&(0,r.oq)(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!i?(this.element.checked=!1,this.validCheck=!1):(this.element.required||(0,r.oq)(this.element,"form")&&(0,r.oq)(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):"uncheck"===e?(n&&(0,r.IV)([n],[LC,OC]),s&&(0,r.IV)([s],[PC,MC]),this.element.checked=!1,(this.element.required||(0,r.oq)(this.element,"form")&&(0,r.oq)(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!i?(this.element.checked=!0,this.validCheck=!1):(this.element.required||(0,r.oq)(this.element,"form")&&(0,r.oq)(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):(n&&(n.classList.remove(LC),n.classList.add(OC)),s&&(s.classList.remove(PC),s.classList.add(MC)),this.element.indeterminate=!0,this.indeterminate=!0)},t.prototype.clickHandler=function(e){if("INPUT"===e.target.tagName&&this.clickTriggered)return this.isVue&&this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);("SPAN"===e.target.tagName||"LABEL"===e.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var i={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",i),e.stopPropagation()},t.prototype.destroy=function(){var e=this,i=this.getWrapper();a.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),(0,r.og)(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(s){e.element.removeAttribute(s)})):(["class"].forEach(function(s){i.removeAttribute(s)}),i.innerHTML="",this.element=i,this.refreshing&&(["e-control","e-checkbox","e-lib"].forEach(function(s){e.element.classList.add(s)}),(0,r.sO)("ej2_instances",[this],this.element))))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},t.prototype.getModuleName=function(){return"checkbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},t.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},t.prototype.getLabel=function(){return this.element?this.element.parentElement:null},t.prototype.initialize=function(){(0,r.le)(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check",!0),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(NC)||(e=this.createElement("div",{className:NC}),this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}}),s=this.createElement("span",{className:"e-icons "+Qp});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(BC),this.cssClass&&(0,r.cn)([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),e.appendChild(i),i.appendChild(this.element),function(a,t){a.element.getAttribute("ejs-for")&&t.appendChild(a.createElement("input",{attrs:{name:a.name||a.element.name,value:"false",type:"hidden"}}))}(this,i),i.appendChild(s),r.re){var n=this.createElement("span",{className:Jp});"Before"===this.labelPosition?i.appendChild(n):i.insertBefore(n,s),(0,r.qx)(n,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0,oo(e,this.getWrapper().getElementsByClassName(Jp)[0])},t.prototype.labelMouseLeaveHandler=function(e){var i=this.getLabel().getElementsByClassName(Jp)[0];if(i){for(var n=i.querySelectorAll(".e-ripple-element").length-1;n>0;n--)i.removeChild(i.childNodes[n]);oo(e,i)}},t.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var i=this.getWrapper().getElementsByClassName(Jp)[0];if(i){for(var s=i.querySelectorAll(".e-ripple-element"),n=0;n<s.length-1;n++)i.removeChild(i.childNodes[n]);oo(e,i)}},t.prototype.onPropertyChanged=function(e,i){for(var s=this.getWrapper(),n=0,o=Object.keys(e);n<o.length;n++)switch(o[n]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,s.classList.remove(DA),s.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":i.cssClass&&(0,r.IV)([s],i.cssClass.split(" ")),e.cssClass&&(0,r.cn)([s],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?s.classList.add(BC):s.classList.remove(BC);break;case"label":this.setText(e.label);break;case"labelPosition":var h=s.getElementsByClassName(RC)[0],c=s.getElementsByTagName("label")[0];(0,r.og)(h),"After"===e.labelPosition?c.appendChild(h):c.insertBefore(h,s.getElementsByClassName(Qp)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"==typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}},t.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=function(a,t,e,i,s,n){var o=i;if(i.tagName===t){var l=(0,r.NA)("ej2_instances",i);o=a("input",{attrs:{type:e}});for(var h=["change","cssClass","label","labelPosition","id"],c=0,u=i.attributes.length;c<u;c++)-1===h.indexOf(i.attributes[c].nodeName)&&o.setAttribute(i.attributes[c].nodeName,i.attributes[c].nodeValue);(0,r.Y4)(i,{class:s}),i.appendChild(o),(0,r.sO)("ej2_instances",l,o),(0,r.ex)(i,"ej2_instances")}return o}(this.createElement,"EJS-CHECKBOX","checkbox",e,NC),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=(0,r.QI)("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(DA),e.setAttribute("aria-disabled","true")},t.prototype.setText=function(e){var i=this.getWrapper();if(i){var s=i.getElementsByClassName(RC)[0];if(s)s.textContent=e;else{e=this.enableHtmlSanitizer?r.pJ.sanitize(e):e,s=this.createElement("span",{className:RC,innerHTML:e});var n=i.getElementsByTagName("label")[0];"Before"===this.labelPosition?n.insertBefore(s,i.getElementsByClassName(Qp)[0]):n.appendChild(s)}}},t.prototype.changeHandler=function(e){e.stopPropagation()},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},t.prototype.unWireEvents=function(){var e=this.wrapper;r.bi.remove(e,"click",this.clickHandler),r.bi.remove(this.element,"keyup",this.keyUpHandler),r.bi.remove(this.element,"focus",this.focusHandler),r.bi.remove(this.element,"focusout",this.focusOutHandler);var i=e.getElementsByTagName("label")[0];r.bi.remove(i,"mousedown",this.labelMouseDownHandler),r.bi.remove(i,"mouseup",this.labelMouseUpHandler),r.bi.remove(i,"mouseleave",this.labelMouseLeaveHandler);var s=(0,r.oq)(this.element,"form");s&&r.bi.remove(s,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&r.bi.remove(this.element,"change",this.changeHandler)},t.prototype.wireEvents=function(){var e=this.getWrapper();r.bi.add(e,"click",this.clickHandler,this),r.bi.add(this.element,"keyup",this.keyUpHandler,this),r.bi.add(this.element,"focus",this.focusHandler,this),r.bi.add(this.element,"focusout",this.focusOutHandler,this);var i=e.getElementsByTagName("label")[0];r.bi.add(i,"mousedown",this.labelMouseDownHandler,this),r.bi.add(i,"mouseup",this.labelMouseUpHandler,this),r.bi.add(i,"mouseleave",this.labelMouseLeaveHandler,this);var s=(0,r.oq)(this.element,"form");s&&r.bi.add(s,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&r.bi.add(this.element,"change",this.changeHandler,this)},t.prototype.updateVueArrayModel=function(e){if(this.isVue&&"object"==typeof this.value){var i=this.element.value;if(i&&this.value){if(!e){var n=this.value.indexOf(i);return this.checked?n<0&&this.value.push(i):n>-1&&this.value.splice(n,1),this.value}for(var s=0;s<this.value.length;s++)i===this.value[s]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},t.prototype.updateHtmlAttributeToWrapper=function(){if(!(0,r.le)(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e],n=this.getWrapper();lz.indexOf(s)>-1?"class"===s?(0,r.cn)([n],this.htmlAttributes[""+s].split(" ")):"title"===s?n.setAttribute(s,this.htmlAttributes[""+s]):"style"===s?this.getWrapper().getElementsByClassName(Qp)[0].setAttribute(s,this.htmlAttributes[""+s]):"disabled"===s?("true"===this.htmlAttributes[""+s]&&this.setDisabled(),this.element.setAttribute(s,this.htmlAttributes[""+s])):this.element.setAttribute(s,this.htmlAttributes[""+s]):n.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Yn([(0,r.ju)()],t.prototype,"change",void 0),Yn([(0,r.ju)()],t.prototype,"created",void 0),Yn([(0,r.Z9)(!1)],t.prototype,"checked",void 0),Yn([(0,r.Z9)("")],t.prototype,"cssClass",void 0),Yn([(0,r.Z9)(!1)],t.prototype,"disabled",void 0),Yn([(0,r.Z9)(!1)],t.prototype,"indeterminate",void 0),Yn([(0,r.Z9)("")],t.prototype,"label",void 0),Yn([(0,r.Z9)("After")],t.prototype,"labelPosition",void 0),Yn([(0,r.Z9)("")],t.prototype,"name",void 0),Yn([(0,r.Z9)("")],t.prototype,"value",void 0),Yn([(0,r.Z9)(!1)],t.prototype,"enableHtmlSanitizer",void 0),Yn([(0,r.Z9)({})],t.prototype,"htmlAttributes",void 0),Yn([r.Zl],t)}(r.wA),Ae={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function vs(a,t){var e={};if((0,r.le)(a)||"string"==typeof a||"number"==typeof a||!(0,r.le)(a.isHeader))return a;for(var i=0,s=Object.keys(t);i<s.length;i++){var o=t[""+s[i]],l=(0,r.le)(o)||"string"!=typeof o?void 0:(0,r.NA)(o,a);(0,r.le)(l)||(e[""+o]=l)}return e}function Im(a){if(a)try{return"function"!=typeof a&&document.querySelector(a)?(0,r.MY)(document.querySelector(a).innerHTML.trim()):(0,r.MY)(a)}catch(t){return(0,r.MY)(a)}}!function(a){a.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},e={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:a.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function s(k,R,D,z,Y){return A(k,n(k,R,D,z,Y),null,z)}function n(k,R,D,z,Y){var H=[],W=(0,r.l7)({},e,z);Ae=x(W.moduleName);for(var Z=b(),J=0;J<R.length;J++)if(!(0,r.le)(R[J])){var ve;W.itemCreating&&"function"==typeof W.itemCreating&&W.itemCreating({dataSource:R,curData:R[J],text:R[J],options:W}),ve=D?I(k,R[J],void 0,null,null,[],null,Z,J,z):O(k,R[J],void 0,null,null,z,Y),W.itemCreated&&"function"==typeof W.itemCreated&&W.itemCreated({dataSource:R,curData:R[J],text:R[J],item:ve,options:W}),H.push(ve)}return H}function o(k,R,D,z,Y,H){var W=(0,r.l7)({},e,D);Ae=x(W.moduleName);var ve,Z=!H||"listview"!==H.getModuleName()&&"multiselect"!==H.getModuleName()?(0,r.l7)({},a.defaultMappedFields,W.fields):W.fields,J=(0,r.l7)({},t,W.ariaAttributes),ce=[];z&&(J.level=z);var me,ae,de=[];R&&R.length&&!(0,r.le)(g(R).item)&&!g(R).item.hasOwnProperty(Z.id)&&(ve=b());for(var ke=0;ke<R.length;ke++){var re=vs(R[ke],Z);if(!(0,r.le)(R[ke])){W.itemCreating&&"function"==typeof W.itemCreating&&W.itemCreating({dataSource:R,curData:R[ke],text:re[Z.text],options:W,fields:Z});var vt=R[ke];W.itemCreating&&"function"==typeof W.itemCreating&&(re=vs(R[ke],Z)),re.hasOwnProperty(Z.id)&&!(0,r.le)(re[Z.id])&&(ve=re[Z.id]);var Ce=[];if(W.showCheckBox&&(W.itemNavigable&&(re[Z.url]||re[Z.urlAttributes])?ce.push(k("input",{className:Ae.check,attrs:{type:"checkbox"}})):Ce.push(k("input",{className:Ae.check,attrs:{type:"checkbox"}}))),!0===Y)W.showIcon&&re.hasOwnProperty(Z.iconCss)&&!(0,r.le)(re[Z.iconCss])&&Ce.push(k("span",{className:Ae.icon+" "+re[Z.iconCss]})),ae=(me=I(k,vt,re,Z,W.itemClass,Ce,!(!vt.hasOwnProperty("isHeader")||!vt.isHeader),ve,ke,D)).querySelector("."+Ae.anchorWrap),W.itemNavigable&&ce.length&&(0,r.Ce)(ce,me.firstElementChild);else{if((me=O(k,vt,re,Z,W.itemClass,D,H)).classList.add(Ae.level+"-"+J.level),me.setAttribute("aria-level",J.level.toString()),("presentation"===J.groupItemRole||"presentation"===J.itemRole)&&me.removeAttribute("aria-level"),ae=me.querySelector("."+Ae.anchorWrap),re.hasOwnProperty(Z.tooltip)){var P=r.pJ.sanitize(re[Z.tooltip]);me.setAttribute("title",P)}if(re.hasOwnProperty(Z.htmlAttributes)&&re[Z.htmlAttributes]){var V=re[Z.htmlAttributes];V.hasOwnProperty("class")&&"string"==typeof V.class&&""===V.class.trim()&&delete V.class,m(me,V)}if(re.hasOwnProperty(Z.enabled)&&!1===re[Z.enabled]&&me.classList.add(Ae.disabled),re.hasOwnProperty(Z.isVisible)&&!1===re[Z.isVisible]&&(me.style.display="none"),re.hasOwnProperty(Z.imageUrl)&&!(0,r.le)(re[Z.imageUrl])&&!W.template){var X={src:re[Z.imageUrl]};(0,r.TS)(X,re[Z.imageAttributes]);var se=k("img",{className:Ae.image,attrs:X});ae?ae.insertAdjacentElement("afterbegin",se):(0,r.Ce)([se],me.firstElementChild)}if(W.showIcon&&re.hasOwnProperty(Z.iconCss)&&!(0,r.le)(re[Z.iconCss])&&!W.template){var oe=k("div",{className:Ae.icon+" "+re[Z.iconCss]});ae?ae.insertAdjacentElement("afterbegin",oe):(0,r.Ce)([oe],me.firstElementChild)}Ce.length&&(0,r.Ce)(Ce,me.firstElementChild),W.itemNavigable&&ce.length&&(0,r.Ce)(ce,me.firstElementChild),S(k,re,Z,0,W,me,J.level)}ae&&(0,r.cn)([me],[Ae.navigable]),W.itemCreated&&"function"==typeof W.itemCreated&&W.itemCreated({dataSource:R,curData:R[ke],text:re[Z.text],item:me,options:W,fields:Z}),ce=[],de.push(me)}}return de}function l(k,R,D,z,Y,H){var W=(0,r.l7)({},e,D);return A(k,o(k,R,D,z,Y,H),W.listClass,D)}function c(k,R){if(R&&k)return Array.prototype.slice.call(R).indexOf(k)}function p(k,R,D){if(void 0===D&&(D=new ee),"Ascending"===k)D.sortBy(R,"ascending",!0);else if("Descending"===k)D.sortBy(R,"descending",!0);else for(var z=0;z<D.queries.length;z++)"onSortBy"===D.queries[z].fn&&D.queries.splice(z,1);return D}function d(k,R){return new B(k).executeLocal(R)}function g(k){for(var D=0;D<k.length;D++)if(!(0,r.le)(k[D]))return{typeof:typeof k[D],item:k[D]};return{typeof:null,item:null}}function m(k,R){var D={};(0,r.TS)(D,R),D.class&&((0,r.cn)([k],D.class.split(" ")),delete D.class),(0,r.Y4)(k,D)}function v(k){for(var R={},D=k.attributes,z=0;z<D.length;z++)R[D[z].nodeName]=D[z].nodeValue;return R}function b(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function S(k,R,D,z,Y,H,W){var Z=R[D.child]||[],J=R[D.hasChildren];if(Z.length&&(J=!0,H.classList.add(Ae.hasChild),Y.processSubChild)){var ve=l(k,Z,Y,++W);H.appendChild(ve)}Y.expandCollapse&&J&&!Y.template&&(H.firstElementChild.classList.add(Ae.iconWrapper),("Left"===Y.expandIconPosition?r.Ce:r.R3)([k("div",{className:"e-icons "+Y.expandIconClass})],H.querySelector("."+Ae.textContent)))}function I(k,R,D,z,Y,H,W,Z,J,ve){var ke,re,ce=(0,r.l7)({},e,ve),de=(0,r.l7)({},t,ce.ariaAttributes),me=R,ae=R;"string"!=typeof R&&"number"!=typeof R&&"boolean"!=typeof R&&(ke=R,me="boolean"==typeof D[z.text]||"number"==typeof D[z.text]?D[z.text]:D[z.text]||"",ae=D[z.value]),re=(0,r.le)(ke)||(0,r.le)(D[z.id])||""===D[z.id]?Z+"-"+J:Z;var xe=k("li",{className:(!0===W?Ae.group:Ae.li)+" "+((0,r.le)(Y)?"":Y),id:re,attrs:""!==de.groupItemRole&&""!==de.itemRole?{role:!0===W?de.groupItemRole:de.itemRole}:{}});return ke&&D.hasOwnProperty(z.enabled)&&"false"===D[z.enabled].toString()&&xe.classList.add(Ae.disabled),W?xe.innerText=me:(xe.setAttribute("data-value",(0,r.le)(ae)?"null":ae),xe.setAttribute("role","option"),ke&&D.hasOwnProperty(z.htmlAttributes)&&D[z.htmlAttributes]&&m(xe,D[z.htmlAttributes]),H.length&&!ce.itemNavigable&&(0,r.R3)(H,xe),ke&&(D[z.url]||D[z.urlAttributes]&&D[z.urlAttributes].href)?xe.appendChild(T(k,ke,z,me,H,ce.itemNavigable)):(H.length&&ce.itemNavigable&&(0,r.R3)(H,xe),xe.appendChild(document.createTextNode(me)))),xe}function x(k){return{li:"e-"+k+"-item",ul:"e-"+k+"-parent e-ul",group:"e-"+k+"-group-item",icon:"e-"+k+"-icon",text:"e-"+k+"-text",check:"e-"+k+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+k+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+k+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function T(k,R,D,z,Y,H){var J,W=vs(R,D),Z={href:W[D.url]};if(W.hasOwnProperty(D.urlAttributes)&&W[D.urlAttributes]&&((0,r.TS)(Z,W[D.urlAttributes]),Z.href=W[D.url]?W[D.url]:W[D.urlAttributes].href),H){J=k("a",{className:Ae.text+" "+Ae.url});var ve=k("div",{className:Ae.anchorWrap});Y&&Y.length&&(0,r.R3)(Y,ve),ve.appendChild(document.createTextNode(z)),(0,r.R3)([ve],J)}else J=k("a",{className:Ae.text+" "+Ae.url,innerHTML:z});return m(J,Z),J}function O(k,R,D,z,Y,H,W){var ce,de,me,Z=(0,r.l7)({},e,H),J=(0,r.l7)({},t,Z.ariaAttributes),ve=R;"string"!=typeof R&&"number"!=typeof R&&(me=R,ve=D[z.text]||"",ce=(0,r.le)(D._id)?D[z.id]:D._id,de=!(!R.hasOwnProperty("isHeader")||!R.isHeader)),H&&H.enableHtmlSanitizer&&(ve=ve);var ae=k("li",{className:(!0===de?Ae.group:Ae.li)+" "+((0,r.le)(Y)?"":Y),attrs:""!==J.groupItemRole&&""!==J.itemRole?{role:!0===de?J.groupItemRole:J.itemRole}:{}});if((0,r.le)(ce)?ae.setAttribute("data-uid",b()):ae.setAttribute("data-uid",ce),de&&H&&H.groupTemplate){var ke=Im(H.groupTemplate);W&&"listview"!==W.getModuleName()?(re=ke(R,W,"groupTemplate",Z.groupTemplateID,!!Z.isStringTemplate,null,ae))&&(0,r.R3)(re,ae):(0,r.R3)(ke(R,W,"groupTemplate",Z.groupTemplateID,!!Z.isStringTemplate),ae)}else if(!de&&H&&H.template){var re;ke=Im(H.template),W&&"listview"!==W.getModuleName()?(re=ke(R,W,"template",Z.templateID,!!Z.isStringTemplate,null,ae))&&(0,r.R3)(re,ae):(0,r.R3)(ke(R,W,"template",Z.templateID,!!Z.isStringTemplate),ae)}else{var xe=k("div",{className:Ae.textContent,attrs:""!==J.wrapperRole?{role:J.wrapperRole}:{}});if(me&&(D[z.url]||D[z.urlAttributes]&&D[z.urlAttributes].href))xe.appendChild(T(k,me,z,ve,null,Z.itemNavigable));else{var vt=k("span",{className:Ae.text,attrs:""!==J.itemText?{role:J.itemText}:{}});H&&H.enableHtmlSanitizer?vt.innerText=r.pJ.sanitize(ve):vt.innerHTML=ve,xe.appendChild(vt)}ae.appendChild(xe)}return ae}function A(k,R,D,z){var Y=(0,r.l7)({},e,z),H=(0,r.l7)({},t,Y.ariaAttributes),W=k("ul",{className:(Ae=x(Y.moduleName)).ul+" "+((0,r.le)(D)?"":D),attrs:""!==H.listRole?{role:H.listRole}:{}});return(0,r.R3)(R,W),W}a.createList=function(k,R,D,z,Y){var H=(0,r.l7)({},e,D),W=(0,r.l7)({},t,H.ariaAttributes),Z=g(R).typeof;return"string"===Z||"number"===Z?s(k,R,z,D,Y):l(k,R,D,W.level,z,Y)},a.createListFromArray=s,a.createListItemFromArray=n,a.createListItemFromJson=o,a.createListFromJson=l,a.getSiblingLI=function(k,R,D){if(Ae=x(e.moduleName),k&&k.length){var z,Y,H=Array.prototype.slice.call(k);for(z=H[(Y=R?c(R,H):!0===D?H.length:-1)+(!0===D?-1:1)];z&&(!(0,r.pn)(z)||z.classList.contains(Ae.disabled));)z=H[Y+=!0===D?-1:1];return z}},a.indexOf=c,a.groupDataSource=function(k,R,D){void 0===D&&(D="None");var z=(0,r.l7)({},a.defaultMappedFields,R),Y=(new ee).group(z.groupBy),H=d(k,Y=p(D,"key",Y));k=[];for(var W=0;W<H.length;W++){var Z=H[W].items,J={};J[z.text]=H[W].key,J.isHeader=!0;var ce=z.text;"id"===ce&&(J[ce="text"]=H[W].key),J._id="group-list-item-"+(H[W].key?H[W].key.toString().trim():"undefined"),J.items=Z,k.push(J);for(var de=0;de<Z.length;de++)k.push(Z[de])}return k},a.addSorting=p,a.getDataSource=d,a.createJsonFromElement=function f(k,R){var D=(0,r.l7)({},e,R),z=(0,r.l7)({},a.defaultMappedFields,D.fields),Y=k.cloneNode(!0),H=[];Y.classList.add("json-parent");var W=Y.querySelectorAll(".json-parent>li");Y.classList.remove("json-parent");for(var Z=0;Z<W.length;Z++){for(var J=W[Z],ve=J.querySelector("a"),ce=J.querySelector("ul"),de={},me=ve?ve.childNodes:J.childNodes,ae=Object.keys(me),ke=0;ke<me.length;ke++)me[Number(ae[ke])].hasChildNodes()||(de[z.text]=me[Number(ae[ke])].textContent);var re=v(J);re.id?(de[z.id]=re.id,delete re.id):de[z.id]=b(),Object.keys(re).length&&(de[z.htmlAttributes]=re),ve&&(re=v(ve),Object.keys(re).length&&(de[z.urlAttributes]=re)),ce&&(de[z.child]=f(ce,R)),H.push(de)}return H},a.renderContentTemplate=function(k,R,D,z,Y,H){for(var de,W=k("ul",{className:(Ae=x(e.moduleName)).ul,attrs:{role:"presentation"}}),Z=(0,r.l7)({},e,Y),J=(0,r.l7)({},a.defaultMappedFields,z),ve=Im(R),ce=[],me=b(),ae=0;ae<D.length;ae++){var ke=vs(D[ae],J),re=D[ae],xe=re.isHeader;de="string"==typeof D[ae]||"number"==typeof D[ae]?re:ke[J.value],Z.itemCreating&&"function"==typeof Z.itemCreating&&Z.itemCreating({dataSource:D,curData:re,text:de,options:Z,fields:J}),Z.itemCreating&&"function"==typeof Z.itemCreating&&(ke=vs(D[ae],J),de="string"==typeof D[ae]||"number"==typeof D[ae]?re:ke[J.value]);var Ce=k("li",{id:me+"-"+ae,className:xe?Ae.group:Ae.li,attrs:{role:"presentation"}});if(xe)Ce.innerText="string"==typeof D[ae]||"number"==typeof D[ae]?re:ke[J.text];else{var P=xe?Z.groupTemplateID:Z.templateID;if(xe)H&&"listview"!==H.getModuleName()?(V=ve(re,H,"headerTemplate",P,!!Z.isStringTemplate,null,Ce))&&(0,r.R3)(V,Ce):(0,r.R3)(ve(re,H,"headerTemplate",P,!!Z.isStringTemplate),Ce);else if(H&&"listview"!==H.getModuleName()){var V;(V=ve(re,H,"template",P,!!Z.isStringTemplate,null,Ce))&&(0,r.R3)(V,Ce)}else(0,r.R3)(ve(re,H,"template",P,!!Z.isStringTemplate),Ce);Ce.setAttribute("data-value",(0,r.le)(de)?"null":de),Ce.setAttribute("role","option")}Z.itemCreated&&"function"==typeof Z.itemCreated&&Z.itemCreated({dataSource:D,curData:re,text:de,item:Ce,options:Z,fields:J}),ce.push(Ce)}return(0,r.R3)(ce,W),W},a.renderGroupTemplate=function(k,R,D,z,Y,H){for(var W=Im(k),Z=(0,r.l7)({},a.defaultMappedFields,D),J=(0,r.l7)({},e,Y),ve=Z.groupBy,ce=0,de=z;ce<de.length;ce++){var me=de[ce],ae={};if(ae[""+ve]=me.textContent,me.innerHTML="",H&&"listview"!==H.getModuleName()){var ke=W(ae,H,"groupTemplate",J.groupTemplateID,!!J.isStringTemplate,null,me);ke&&(0,r.R3)(ke,me)}else(0,r.R3)(W(ae,H,"groupTemplate",J.groupTemplateID,!!J.isStringTemplate),me)}return z},a.generateId=b,a.generateUL=A,a.generateIcon=function(k,R,D,z){var Y=(0,r.l7)({},e,z);return Ae=x(Y.moduleName),("Left"===Y.expandIconPosition?r.Ce:r.R3)([k("div",{className:"e-icons "+Y.expandIconClass+" "+((0,r.le)(D)?"":D)})],R.querySelector("."+Ae.textContent)),R}}(Ee||(Ee={}));var Sa,Ah,ll,rd,Dh,Kn,lS=!1;function fi(a,t,e,i,s){return Ah=void 0,Ah=s,lS=!!i,a?(t||(t="left"),e||(e="top"),rd=a.ownerDocument,ll=a,function(a,t,e){switch(Sa=ll.getBoundingClientRect(),t+a){case"topcenter":lo(pS(),e),ho(Tm(),e);break;case"topright":lo(uS(),e),ho(Tm(),e);break;case"centercenter":lo(pS(),e),ho(cS(),e);break;case"centerright":lo(uS(),e),ho(cS(),e);break;case"centerleft":lo(km(),e),ho(cS(),e);break;case"bottomcenter":lo(pS(),e),ho(hS(),e);break;case"bottomright":lo(uS(),e),ho(hS(),e);break;case"bottomleft":lo(km(),e),ho(hS(),e);break;default:case"topleft":lo(km(),e),ho(Tm(),e)}return ll=null,e}(t.toLowerCase(),e.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function lo(a,t){t.left=a}function ho(a,t){t.top=a}function aD(){return rd.documentElement.scrollTop||rd.body.scrollTop}function oD(){return rd.documentElement.scrollLeft||rd.body.scrollLeft}function hS(){return lS?Sa.bottom:Sa.bottom+aD()}function cS(){return Tm()+Sa.height/2}function Tm(){return lS?Sa.top:Sa.top+aD()}function km(){return Sa.left+oD()}function uS(){var a=ll&&(ll.classList.contains("e-date-wrapper")||ll.classList.contains("e-datetime-wrapper")||ll.classList.contains("e-date-range-wrapper")||ll.classList.contains("e-multiselect"))?Ah?Ah.width:0:Ah&&Sa.width>=Ah.width?Ah.width:0;return Sa.right+oD()-a}function pS(){return km()+Sa.width/2}function dS(a,t,e,i){if(void 0===t&&(t=null),void 0===e&&(e={X:!1,Y:!1}),!e.Y&&!e.X)return{left:0,top:0};var s=a.getBoundingClientRect();if(Kn=t,Dh=a.ownerDocument,i||(i=fi(a,"left","top")),e.X){var n=Kn?pD():vD(),o=mS(),l=vS(),h=o-i.left,c=i.left+s.width-l;s.width>n?i.left=h>0&&c<=0?l-s.width:c>0&&h<=0?o:h>c?l-s.width:o:h>0?i.left+=h:c>0&&(i.left-=c)}if(e.Y){var u=Kn?dD():mD(),p=gS(),d=yS(),f=p-i.top,g=i.top+s.height-d;s.height>u?i.top=f>0&&g<=0?d-s.height:g>0&&f<=0?p:f>g?d-s.height:p:f>0?i.top+=f:g>0&&(i.top-=g)}return i}function Sr(a,t,e,i){void 0===t&&(t=null);var s=fi(a,"left","top");e&&(s.left=e),i&&(s.top=i);var n=[];Kn=t,Dh=a.ownerDocument;var o=a.getBoundingClientRect(),h=s.left,c=s.left+o.width,p=uD(s.top,s.top+o.height),d=lD(h,c);return p.topSide&&n.push("top"),d.rightSide&&n.push("right"),d.leftSide&&n.push("left"),p.bottomSide&&n.push("bottom"),n}function Bz(a,t,e,i,s,n,o,l,h){if(void 0===o&&(o=null),void 0===l&&(l={X:!0,Y:!0}),t&&a&&s&&n&&(l.X||l.Y)){var p,c={TL:null,TR:null,BL:null,BR:null},u={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(a).display){var d=a.style.visibility;a.style.visibility="hidden",a.style.display="block",p=a.getBoundingClientRect(),a.style.removeProperty("display"),a.style.visibility=d}else p=a.getBoundingClientRect();var f={posX:s,posY:n,offsetX:e,offsetY:i,position:{left:0,top:0}};Kn=o,Dh=t.ownerDocument,function(a,t,e,i,s){e.position=fi(a,e.posX,e.posY,i,s),t.TL=fi(a,"left","top",i,s),t.TR=fi(a,"right","top",i,s),t.BR=fi(a,"left","bottom",i,s),t.BL=fi(a,"right","bottom",i,s)}(t,c,f,h,p),fS(u,f,p),l.X&&hD(t,u,c,f,p,!0),l.Y&&c.TL.top>-1&&cD(t,u,c,f,p,!0),function(a,t,e){var i=0,s=0;if(null!=a.offsetParent&&("absolute"===getComputedStyle(a.offsetParent).position||"relative"===getComputedStyle(a.offsetParent).position)){var n=fi(a.offsetParent,"left","top",!1,e);i=n.left,s=n.top}var o=1,l=1;if(a.offsetParent){var h=getComputedStyle(a.offsetParent).transform;if("none"!==h){var c=new DOMMatrix(h);o=c.a,l=c.d}}a.style.top=t.position.top/l+t.offsetY-s+"px",a.style.left=t.position.left/o+t.offsetX-i+"px"}(a,f,p)}}function fS(a,t,e){a.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},a.TR={top:a.TL.top,left:a.TL.left+e.width},a.BL={top:a.TL.top+e.height,left:a.TL.left},a.BR={top:a.TL.top+e.height,left:a.TL.left+e.width}}function lD(a,t){var e=!1,i=!1;return a-Dm()<mS()&&(e=!0),t>vS()&&(i=!0),{leftSide:e,rightSide:i}}function hD(a,t,e,i,s,n){var o=lD(t.TL.left,t.TR.left);e.TL.left-Dm()<=mS()&&(o.leftSide=!1),e.TR.left>vS()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&(i.posX="right"===i.posX?"left":"right",i.offsetX=i.offsetX+s.width,i.offsetX=-1*i.offsetX,i.position=fi(a,i.posX,i.posY,!1),fS(t,i,s),n&&hD(a,t,e,i,s,!1))}function cD(a,t,e,i,s,n){var o=uD(t.TL.top,t.BL.top);e.TL.top-Am()<=gS()&&(o.topSide=!1),e.BL.top>=yS()&&a.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&(i.posY="top"===i.posY?"bottom":"top",i.offsetY=i.offsetY+s.height,i.offsetY=-1*i.offsetY,i.position=fi(a,i.posX,i.posY,!1,s),fS(t,i,s),n&&cD(a,t,e,i,s,!1))}function uD(a,t){var e=!1,i=!1;return a-Am()<gS()&&(e=!0),t>yS()&&(i=!0),{topSide:e,bottomSide:i}}function pD(){return Kn.getBoundingClientRect().width}function dD(){return Kn.getBoundingClientRect().height}function fD(){return Kn.getBoundingClientRect().left}function gD(){return Kn.getBoundingClientRect().top}function gS(){return Kn?gD():0}function mS(){return Kn?fD():0}function vS(){return Kn?Dm()+fD()+pD():Dm()+vD()}function yS(){return Kn?Am()+gD()+dD():Am()+mD()}function Am(){return Dh.documentElement.scrollTop||Dh.body.scrollTop}function Dm(){return Dh.documentElement.scrollLeft||Dh.body.scrollLeft}function mD(){return window.innerHeight}function vD(){var a=window.innerWidth,t=document.documentElement.getBoundingClientRect();return a-(a-((0,r.le)(document.documentElement)?0:t.width))}var yD=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),qi=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},bD=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return yD(t,a),qi([(0,r.Z9)("left")],t.prototype,"X",void 0),qi([(0,r.Z9)("top")],t.prototype,"Y",void 0),t}(r.rt),cs_OPEN="e-popup-open",cs_CLOSE="e-popup-close",Ni=function(a){function t(e,i){return a.call(this,i,e)||this}return yD(t,a),t.prototype.onPropertyChanged=function(e,i){for(var s=0,n=Object.keys(e);s<n.length;s++)switch(n[s]){case"width":(0,r.V7)(this.element,{width:(0,r.Ac)(e.width)});break;case"height":(0,r.V7)(this.element,{height:(0,r.Ac)(e.height)});break;case"zIndex":(0,r.V7)(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var l=e.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+l).toString()+"px";break;case"offsetY":var h=e.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+h).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove("e-popup","e-rtl",cs_OPEN,cs_CLOSE),this.content=null,this.relateTo=null,a.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=(0,r.Ac)(this.width)),"auto"!==this.height&&(e.height=(0,r.Ac)(this.height)),(0,r.V7)(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){r.AR.isDevice&&r.bi.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)r.bi.add(i[e],"scroll",this.scrollRefresh,this)},t.prototype.unwireEvents=function(){r.AR.isDevice&&r.bi.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)r.bi.remove(i[e],"scroll",this.scrollRefresh)},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||(0,r.le)(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?!(0,r.le)(this.element)&&!(this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),e.target);i||this.targetInvisibleStatus?i&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,i){for(var s=this.getScrollableParent(e),n=0;n<s.length;n++)if(!this.isElementVisible(e,s[n]))return!1;return!0},t.prototype.isElementVisible=function(e,i){var s=this.checkGetBoundingClientRect(e);if(!s.height||!s.width)return!1;if((0,r.le)(this.checkGetBoundingClientRect(i))){var o=window,l={top:o.scrollY,left:o.scrollX,right:o.scrollX+o.outerWidth,bottom:o.scrollY+o.outerHeight},h=fi(e),c={top:h.top,left:h.left,right:h.left+s.width,bottom:h.top+s.height},u={top:l.bottom-c.top,left:l.right-c.left,bottom:c.bottom-l.top,right:c.right-l.left};return u.top>0&&u.left>0&&u.right>0&&u.bottom>0}var n=i.getBoundingClientRect();return!(s.bottom<n.top||s.bottom>n.bottom||s.right>n.right||s.left<n.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.setContent=function(){if(!(0,r.le)(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),i=this.content.props;(!e.classList.contains("e-dropdown-btn")||(0,r.le)(i))&&this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,i){(0,r.le)(e)||this.checkFixedParent(e),this.reposition(),i||this.checkCollision()},t.prototype.reposition=function(){var e,i,s=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n=void 0,o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(s,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(s){var l=this.element.clientHeight;o=this.element.style.display,this.element.style.display="block",e=this.getAnchorPosition(s,this.element,this.position,this.offsetX,this.offsetY,l),this.element.style.display=o}else e={left:0,top:0};(0,r.le)(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(s){return null}},t.prototype.getAnchorPosition=function(e,i,s,n,o,l){void 0===l&&(l=0);var h=this.checkGetBoundingClientRect(i),c=this.checkGetBoundingClientRect(e);if((0,r.le)(h)||(0,r.le)(c))return null;var u=e,p={left:0,top:0};switch(i.offsetParent&&"BODY"===i.offsetParent.tagName&&"BODY"===e.tagName?p=fi(e):(i.classList.contains("e-dlg-modal")&&"BODY"!==u.tagName&&(i=i.parentElement),p=function(a,t){var e=!1,i={left:0,top:0},s=a;if(!a||!t)return i;for((0,r.le)(t.offsetParent)&&"fixed"===t.style.position&&(e=!0);(t.offsetParent||e)&&a&&t.offsetParent!==a;)i.left+=a.offsetLeft,i.top+=a.offsetTop,a=a.offsetParent;for(a=s;(t.offsetParent||e)&&a&&t.offsetParent!==a;)i.left-=a.scrollLeft,i.top-=a.scrollTop,a=a.parentElement;return i}(u,i)),s.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===u.tagName&&"container"===this.targetType?p.left+=window.innerWidth/2-h.width/2:p.left+="container"===this.targetType?c.width/2-h.width/2:c.width/2;break;case"right":i.classList.contains("e-dlg-modal")&&"BODY"===u.tagName&&"container"===this.targetType?p.left+=window.innerWidth-h.width:p.left+="container"===this.targetType?c.width-h.width:c.width}switch(s.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===u.tagName&&"container"===this.targetType?p.top+=window.innerHeight/2-h.height/2:p.top+="container"===this.targetType?c.height/2-h.height/2:c.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&"BODY"===u.tagName&&"container"===this.targetType?p.top+=window.innerHeight-h.height:"container"!==this.targetType||i.classList.contains("e-dialog")?"container"===this.targetType&&i.classList.contains("e-dialog")?p.top+=c.height-l:p.top+=c.height:p.top+=c.height-h.height}return p.left+=n,p.top+=o,p},t.prototype.callFlip=function(e){var i=this.getRelateToElement();Bz(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==Sr(this.element,this.viewPortElement).length)if((0,r.le)(this.viewPortElement)){var i=dS(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=i.left+"px"),e.Y&&(this.element.style.top=i.top+"px")}else{var s=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if((0,r.le)(s)||(0,r.le)(n))return null;e&&!0===e.Y&&(n.top>s.top?this.element.style.top="0px":n.bottom<s.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(s.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<s.right?this.element.style.left=parseInt(this.element.style.left,10)-(s.right-n.right)+"px":n.left>s.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-s.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,i=this.collision.Y;"none"===e&&"none"===i||("flip"===e&&"flip"===i?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===i?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===i&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===i&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,i){var s=this;if(this.getRelateToElement().classList.contains("e-filemanager")&&(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0]),this.wireEvents(),!(0,r.le)(this.fmDialogContainer)&&r.AR.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!(0,r.le)(i)){var o=(0,r.le)(i)?this.element:i;this.zIndex=wa(o),(0,r.V7)(this.element,{zIndex:this.zIndex})}e=(0,r.le)(e)||"object"!=typeof e?this.showAnimation:e,("none"!==this.collision.X||"none"!==this.collision.Y)&&((0,r.IV)([this.element],cs_CLOSE),(0,r.cn)([this.element],cs_OPEN),this.checkCollision(),(0,r.IV)([this.element],cs_OPEN),(0,r.cn)([this.element],cs_CLOSE)),(0,r.le)(e)?((0,r.IV)([this.element],cs_CLOSE),(0,r.cn)([this.element],cs_OPEN),this.trigger("open")):(e.begin=function(){s.isDestroyed||((0,r.IV)([s.element],cs_CLOSE),(0,r.cn)([s.element],cs_OPEN))},e.end=function(){s.isDestroyed||s.trigger("open")},new r.fw(e).animate(this.element))},t.prototype.hide=function(e){var i=this;e=(0,r.le)(e)||"object"!=typeof e?this.hideAnimation:e,(0,r.le)(e)?((0,r.IV)([this.element],cs_OPEN),(0,r.cn)([this.element],cs_CLOSE),this.trigger("close")):(e.end=function(){i.isDestroyed||((0,r.IV)([i.element],cs_OPEN),(0,r.cn)([i.element],cs_CLOSE),i.trigger("close"))},new r.fw(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),iu(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var i=e.parentElement;i&&"HTML"!==i.tagName;){var s=getComputedStyle(i);"fixed"===s.position&&!(0,r.le)(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&"hidden"!==getComputedStyle(this.element.offsetParent).overflow&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?(0,r.Ac)(window.scrollY-parseInt(this.element.style.top,10)):(0,r.Ac)(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!(0,r.le)(this.element)&&(0,r.le)(this.element.offsetParent)&&"fixed"===s.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},qi([(0,r.Z9)("auto")],t.prototype,"height",void 0),qi([(0,r.Z9)("auto")],t.prototype,"width",void 0),qi([(0,r.Z9)(null)],t.prototype,"content",void 0),qi([(0,r.Z9)("container")],t.prototype,"targetType",void 0),qi([(0,r.Z9)(null)],t.prototype,"viewPortElement",void 0),qi([(0,r.Z9)({X:"none",Y:"none"})],t.prototype,"collision",void 0),qi([(0,r.Z9)("")],t.prototype,"relateTo",void 0),qi([(0,r.Zz)({},bD)],t.prototype,"position",void 0),qi([(0,r.Z9)(0)],t.prototype,"offsetX",void 0),qi([(0,r.Z9)(0)],t.prototype,"offsetY",void 0),qi([(0,r.Z9)(1e3)],t.prototype,"zIndex",void 0),qi([(0,r.Z9)(!1)],t.prototype,"enableRtl",void 0),qi([(0,r.Z9)("reposition")],t.prototype,"actionOnScroll",void 0),qi([(0,r.Z9)(null)],t.prototype,"showAnimation",void 0),qi([(0,r.Z9)(null)],t.prototype,"hideAnimation",void 0),qi([(0,r.ju)()],t.prototype,"open",void 0),qi([(0,r.ju)()],t.prototype,"close",void 0),qi([(0,r.ju)()],t.prototype,"targetExitViewport",void 0),qi([r.Zl],t)}(r.wA);function iu(a,t){for(var e=getComputedStyle(a),i=[],s=/(auto|scroll)/,n=a.parentElement;n&&"HTML"!==n.tagName;){var o=getComputedStyle(n);!("absolute"===e.position&&"static"===o.position)&&s.test(o.overflow+o.overflowY+o.overflowX)&&i.push(n),n=n.parentElement}return t||i.push(document),i}function wa(a){for(var t=a.parentElement,e=[];t&&"BODY"!==t.tagName;){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==i&&"static"!==s&&e.push(i),t=t.parentElement}for(var n=[],o=0;o<document.body.children.length;o++)a.isEqualNode(document.body.children[o])||(i=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==s&&n.push(i));n.push("999");var l=[];if(!(0,r.le)(a.parentElement)&&"BODY"!==a.parentElement.tagName){var h=[].slice.call(a.parentElement.children);for(o=0;o<h.length;o++)a.isEqualNode(h[o])||(i=document.defaultView.getComputedStyle(h[o],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(h[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==s&&l.push(i))}var c=e.concat(n,l),u=Math.max.apply(Math,c)+1;return u>2147483647?2147483647:u}var xt,Ea,su,cl,wS,co,nt,ul,bS=["north-west","north","north-east","west","east","south-west","south","south-east"],ad="e-resize-handle",hl="e-focused-handle",CD=["e-restrict-left"],SD="e-resize-viewport",Hz=["north","west","east","south"],CS=0,SS=0,wD=0,ED=0,od=0,ld=0,hd=null,ES=null,IS=null,Lm=!0,ID=0,xS=!0;function jz(a){TS();var t=(0,r.az)("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+a),"south"===a&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===a&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===a&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===a&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),xt.appendChild(t)}function xD(a){var t;return(0,r.le)(a)||(t="string"==typeof a?document.querySelector(a):a),t}function TD(a){(0,r.le)(a)&&(a=this);for(var t=xt.querySelectorAll("."+ad),e=0;e<t.length;e++)r.bi.add(Ea=t[e],"mousedown",AD,a),r.bi.add(Ea,"msie"===r.AR.info.name?"pointerdown":"touchstart",DD,a);var s=xt.querySelectorAll(".e-dialog-border-resize");if(!(0,r.le)(s))for(e=0;e<s.length;e++)r.bi.add(Ea=s[e],"mousedown",AD,a),r.bi.add(Ea,"msie"===r.AR.info.name?"pointerdown":"touchstart",DD,a)}function kD(a){return a.indexOf("mouse")>-1?"mouse":"touch"}function AD(a){if(a.preventDefault(),xt=a.target.parentElement,TS(),od=a.pageX,ld=a.pageY,a.target.classList.add(hl),(0,r.le)(hd)||!0!==hd(a,this)){this.targetEle&&xt&&xt.querySelector(".e-dlg-resizable")&&(nt="body"===this.target?null:this.targetEle,co=this.targetEle.clientWidth,cl=this.targetEle.clientHeight);var t=(0,r.le)(nt)?document:nt;r.bi.add(t,"mousemove",cd,this),r.bi.add(document,"mouseup",Om,this);for(var e=0;e<CD.length;e++)Lm=!xt.classList.contains(CD[e])}}function Om(a){var t="msie"===r.AR.info.name?"pointermove":"touchmove",e="msie"===r.AR.info.name?"pointerup":"touchend",i=(0,r.le)(nt)?document:nt,s="msie"===r.AR.info.name?"pointerdown":"touchstart";r.bi.remove(i,"mousemove",cd),r.bi.remove(i,t,cd),r.bi.remove(i,s,cd),(0,r.le)(document.body.querySelector("."+hl))||document.body.querySelector("."+hl).classList.remove(hl),(0,r.le)(IS)||IS(a,this),r.bi.remove(document,"mouseup",Om),r.bi.remove(document,e,Om)}function TS(){CS=parseFloat(getComputedStyle(xt,null).getPropertyValue("width").replace("px","")),SS=parseFloat(getComputedStyle(xt,null).getPropertyValue("height").replace("px","")),wD=xt.getBoundingClientRect().left,ED=xt.getBoundingClientRect().top}function DD(a){xt=a.target.parentElement,TS();var t=xt.classList.contains("e-dialog");(a.target.classList.contains(ad)||a.target.classList.contains("e-dialog-border-resize"))&&t&&a.target.classList.add(hl);var e=a.touches?a.changedTouches[0]:a;if(od=e.pageX,ld=e.pageY,(0,r.le)(hd)||!0!==hd(a,this)){var i="msie"===r.AR.info.name?"pointermove":"touchmove",s="msie"===r.AR.info.name?"pointerup":"touchend",n=(0,r.le)(nt)?document:nt;r.bi.add(n,i,cd,this),r.bi.add(document,s,Om,this)}}function cd(a){if(a.target.classList.contains(ad)&&a.target.classList.contains(hl)?Ea=a.target:(0,r.le)(document.body.querySelector("."+hl))||(Ea=document.body.querySelector("."+hl)),!(0,r.le)(Ea)){for(var t="",e=0;e<bS.length;e++)Ea.classList.contains("e-"+bS[e])&&(t=bS[e]);switch((0,r.le)(ES)||ES(a,this),t){case"south":kS(a);break;case"north":AS(a);break;case"west":DS(a);break;case"east":LS(a);break;case"south-east":kS(a),LS(a);break;case"south-west":kS(a),DS(a);break;case"north-east":AS(a),LS(a);break;case"north-west":AS(a),DS(a)}}}function dl(a){return a.getBoundingClientRect()}function kS(a){var o,t=document.documentElement.clientHeight,e=!1,s=(a.touches?a.changedTouches[0]:a).pageY,n=dl(xt);(0,r.le)(nt)||(o=dl(nt)),(0,r.le)(nt)?(0,r.le)(nt)&&(t-s>=0||n.top<0)&&(e=!0):e=!0;var l=SS+(s-ld);l=l>su?l:su;var h=0;(0,r.le)(nt)||(h=o.top);var c=(0,r.le)(nt)?0:nt.offsetHeight-nt.clientHeight,u=n.top-h-c/2;if(u=u<0?0:u,n.top>0&&u+l>cl){if(e=!1,xt.classList.contains(SD))return;xt.style.height=cl-parseInt(u.toString(),10)+"px"}else{var p=0;if(e){n.top<0&&t+(n.height+n.top)>0&&l+(p=n.top)<=30&&(l=n.height-(n.height+n.top)+30),l+n.top>=cl&&(xt.style.height=n.height+(t-(n.height+n.top))+"px");var d=(0,r.le)(nt)?p:u;l>=su&&l+d<=cl&&(xt.style.height=l+"px")}}}function AS(a){var e,t=!1,i="mouse"===kD(a.type)?a.pageY:a.touches[0].pageY,s=dl(xt);(0,r.le)(nt)||(e=dl(nt)),(!(0,r.le)(nt)&&s.top-e.top>0||(0,r.le)(nt)&&i>0)&&(t=!0);var n=SS-(i-ld);if(t&&n>=su&&n<=cl){var o=0;(0,r.le)(nt)||(o=e.top);var l=ED-o+(i-ld);l=l>0?l:1,xt.style.height=n+"px",xt.style.top=l+"px"}}function DS(a){var i,t=document.documentElement.clientWidth,e=!1;(0,r.le)(nt)||(i=dl(nt));var s="mouse"===kD(a.type)?a.pageX:a.touches[0].pageX,n=dl(xt),o=(0,r.le)(nt)?0:nt.offsetWidth-nt.clientWidth,l=(0,r.le)(nt)?0:i.left,h=(0,r.le)(nt)?0:i.width;(0,r.le)(ul)&&((0,r.le)(nt)?ul=t:(ul=n.left-l-o/2+n.width,ul+=h-o-ul)),(!(0,r.le)(nt)&&Math.floor(n.left-i.left+n.width+(i.right-n.right))-o<=co||(0,r.le)(nt)&&s>=0)&&(e=!0);var c=CS-(s-od);if(Lm&&(c=c>ul?ul:c),e&&c>=wS&&c<=co){var u=0;(0,r.le)(nt)||(u=i.left);var p=wD-u+(s-od);p=p>0?p:1,c!==ID&&xS&&(xt.style.width=c+"px"),Lm&&(xt.style.left=p+"px",xS=1!==p)}ID=c}function LS(a){var i,t=document.documentElement.clientWidth,e=!1;(0,r.le)(nt)||(i=dl(nt));var n=(a.touches?a.changedTouches[0]:a).pageX,o=dl(xt);(!(0,r.le)(nt)&&(o.left-i.left+o.width<=co||o.right-i.left>=o.width)||(0,r.le)(nt)&&t-n>0)&&(e=!0);var l=CS+(n-od),h=0;if((0,r.le)(nt)||(h=i.left),o.left-h+l>co){if(e=!1,xt.classList.contains(SD))return;xt.style.width=co-(o.left-h)+"px"}e&&l>=wS&&l<=co&&(xt.style.width=l+"px")}function LD(){for(var a=xt.querySelectorAll("."+ad),t=0;t<a.length;t++)(0,r.og)(a[t]);var e=xt.querySelectorAll(".e-dialog-border-resize");if(!(0,r.le)(e))for(t=0;t<e.length;t++)(0,r.og)(e[t])}var jD,OS=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ue=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},Uz=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return OS(t,a),Ue([(0,r.Z9)(!0)],t.prototype,"isFlat",void 0),Ue([(0,r.Z9)()],t.prototype,"buttonModel",void 0),Ue([(0,r.Z9)("Button")],t.prototype,"type",void 0),Ue([(0,r.ju)()],t.prototype,"click",void 0),t}(r.rt),Gz=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return OS(t,a),Ue([(0,r.Z9)("Fade")],t.prototype,"effect",void 0),Ue([(0,r.Z9)(400)],t.prototype,"duration",void 0),Ue([(0,r.Z9)(0)],t.prototype,"delay",void 0),t}(r.rt),Rm="e-dialog",RS="e-rtl",PS="e-dlg-header-content",OD="e-dlg-header",ud="e-footer-content",Pm="e-dlg-modal",RD="e-icon-dlg-close",Ia="e-dlg-target",Gr="e-scroll-disabled",PD="e-device",Mm="e-dlg-fullscreen",MD="e-dlg-closeicon-btn",BD="e-popup-open",ND="Information",FD="e-scroll-disabled",VD="e-alert-dialog",HD="e-confirm-dialog",MS="e-dlg-resizable",Bm="e-restrict-left",zD="e-resize-viewport",BS="user action",Xn=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.needsID=!0,s}return OS(t,a),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=(0,r.Ac)(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=BS},t.prototype.preRender=function(){var e=this;if(this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(n){e.dlgClosedBy="close icon",e.hide(n)},this.dlgOverlayClickEventHandler=function(n){e.dlgClosedBy="overlayClick",n.preventFocus=!1,e.trigger("overlayClick",n,function(o){o.preventFocus||e.focusContent(),e.dlgClosedBy=BS})},this.l10n=new r.E7("dialog",{close:"Close"},this.locale),this.checkPositionData(),(0,r.le)(this.target)){var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=s}},t.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!(0,r.le)(this.position)){if(!(0,r.le)(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}(0,r.le)(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(i=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i)}},t.prototype.getEle=function(e,i){for(var s=void 0,n=0;n<e.length;n++)if(e[n].classList.contains(i)){s=e[n];break}return s},t.prototype.getMinHeight=function(){var e="0px",i="0px";(0,r.le)(this.element.querySelector("."+PS))||(e=getComputedStyle(this.headerContent).height);var s=this.getEle(this.element.children,ud);(0,r.le)(s)||(i=getComputedStyle(s).height);var n=parseInt(e.slice(0,e.indexOf("p")),10),o=parseInt(i.slice(0,i.indexOf("p")),10);return function(a){su=a}(n+30+(isNaN(o)?0:o)),n+30+o},t.prototype.onResizeStart=function(e,i){return i.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e,i){i.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,i){i.trigger("resizeStop",e),this.updatePersistData()},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!(0,r.le)(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(MS);for(var e=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,s="",n=0;n<this.resizeHandles.length;n++){if("All"===this.resizeHandles[n]){s="south north east west north-east north-west south-east south-west";break}var o="";switch(this.resizeHandles[n].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[n].toString()}s+=o.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===s.trim()?s="south-west":this.enableRtl&&"south-west"===s.trim()&&(s="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Bm):this.isModal&&this.target===document.body&&this.element.classList.add(zD),function(a){hd=a.resizeBegin,ES=a.resizing,IS=a.resizeComplete,xt=xD(a.element),nt=xD(a.boundary);for(var t=a.direction.split(" "),e=0;e<t.length;e++)if(Hz.indexOf(t[e])>=0&&t[e])jz(t[e]);else if(""!==t[e].trim()){var i=(0,r.az)("div",{className:"e-icons "+ad+" e-"+t[e]});xt.appendChild(i)}su=a.minHeight,wS=a.minWidth,co=a.maxWidth,cl=a.maxHeight,a.proxy&&a.proxy.element&&a.proxy.element.classList.contains("e-dialog")?TD(a.proxy):TD()}({element:this.element,direction:s,minHeight:parseInt(e.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else LD(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?Bm:zD),this.element.classList.remove(MS)},t.prototype.getFocusElement=function(e){var s=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:s[s.length-1]}},t.prototype.keyDown=function(e){var i=this;if(9===e.keyCode&&this.isModal){var s=void 0;(0,r.le)(this.btnObj)||(s=this.btnObj[this.btnObj.length-1]),(0,r.le)(this.btnObj)&&!(0,r.le)(this.ftrTemplateContent)&&(s=this.getFocusElement(this.ftrTemplateContent)),(0,r.le)(this.btnObj)&&(0,r.le)(this.ftrTemplateContent)&&!(0,r.le)(this.contentEle)&&(s=this.getFocusElement(this.contentEle)),!(0,r.le)(s)&&document.activeElement===s.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),(0,r.le)(s)||s.element.focus())}var c,n=document.activeElement,o=["input","textarea"].indexOf(n.tagName.toLowerCase())>-1,l=!1;if(o||(l=n.hasAttribute("contenteditable")&&"true"===n.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape){this.dlgClosedBy="escape";var h=document.querySelector(".e-popup-open:not(.e-dialog)");!(0,r.le)(h)&&!h.classList.contains("e-toolbar-pop")||this.hide(e)}(13===e.keyCode&&!e.ctrlKey&&"textarea"!==n.tagName.toLowerCase()&&o&&!(0,r.le)(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===n.tagName.toLowerCase()||l)&&!(0,r.le)(this.primaryButtonEle))&&this.buttons.some(function(p,d){c=d;var f=p.buttonModel;return!(0,r.le)(f)&&!0===f.isPrimary})&&"function"==typeof this.buttons[c].click&&setTimeout(function(){i.buttons[c].click.call(i,e)})},t.prototype.initialize=function(){(0,r.le)(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||(0,r.cn)([this.element],Rm),r.AR.isDevice&&(0,r.cn)([this.element],PD),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||(0,r.Y4)(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&(0,r.le)(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&(0,r.le)(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!(0,r.le)(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||(0,r.le)(this.footerTemplate)?(0,r.le)(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!(0,r.le)(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!(0,r.le)(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||((0,r.Y4)(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&(0,r.le)(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var i=0,s=this.dlgContainer.children;i<s.length;i++)s[i].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=s[i])}if(!0!==this.element.classList.contains(VD)&&!0!==this.element.classList.contains(HD)&&!(0,r.le)(this.element.parentElement)){var n=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),n.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}if((0,r.le)(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Ni(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(h){var c={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",c,function(u){u.preventFocus||e.focusContent()})},close:function(h){e.isModal&&(0,r.cn)([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var c=document.activeElement;!(0,r.le)(c)&&!(0,r.le)(c.blur)&&c.blur(),!(0,r.le)(e.storeActiveElement)&&!(0,r.le)(e.storeActiveElement.focus)&&e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||((0,r.cn)([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible){if(this.show(),this.isModal){var o=this.getTargetContainer(this.target);o instanceof Element&&"rtl"===window.getComputedStyle(o).getPropertyValue("direction")&&this.setPopupPosition()}}else this.isModal&&(this.dlgOverlay.style.display="none");this.initialRender=!1},t.prototype.getTargetContainer=function(e){var i=null;if("string"==typeof e)if(e.startsWith("#"))i=document.getElementById(e.substring(1));else if(e.startsWith(".")){var s=document.getElementsByClassName(e.substring(1));i=s.length>0?s[0]:null}else!(e instanceof HTMLElement)&&e!==document.body&&(i=document.querySelector(e));else e instanceof HTMLElement&&(i=e);return i},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var s=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));(0,r.le)(s)||(s.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var i;i=(0,r.le)(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this;this.element.classList.contains("e-draggable")||(this.dragObj=new r._l(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(s){e.trigger("dragStart",s,function(n){(0,r.xr)()&&n.bindEvents(s.dragElement)})},dragStop:function(s){if(e.isModal){(0,r.le)(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y);var n=e.getTargetContainer(e.target);if(n instanceof Element){var o=window.getComputedStyle(n);e.element.style.position="rtl"===o.getPropertyValue("direction")?"absolute":"relative"}else e.element.style.position="relative"}e.trigger("dragStop",s),e.element.classList.remove(Bm),e.updatePersistData()},drag:function(s){e.trigger("drag",s)}}),(0,r.le)(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var i=(0,r.le)(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),s=this.createElement("button",{className:this.cssClass,attrs:{type:i}});this.buttonContent.push(s.outerHTML)}this.setFooterTemplate()}e=0;for(var n,o=this.element.children;e<o.length;e++)o[e].classList.contains(ud)&&(n=o[e].querySelectorAll("button"));for(e=0;e<this.buttons.length;e++)this.isBlazorServerRender()||(this.btnObj[e]=new It(this.buttons[e].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+ud)),!(0,r.le)(this.ftrTemplateContent)&&n.length>0&&("function"==typeof this.buttons[e].click&&r.bi.add(n[e],"click",this.buttons[e].click,this),"object"==typeof this.buttons[e].click&&r.bi.add(n[e],"click",this.buttonClickHandler.bind(this,e),this)),!this.isBlazorServerRender()&&!(0,r.le)(this.ftrTemplateContent)&&(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.buttons[e].isFlat&&this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.buttonClickHandler=function(e){this.trigger("buttons["+e+"].click",{})},t.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!(0,r.le)(this.content)&&""!==this.content||!this.initialRender)&&(("string"!=typeof this.content||(0,r.xr)())&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),(0,r.le)(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&r.AR.isIE&&""===this.element.style.width&&!(0,r.le)(this.width)&&(this.element.style.width=(0,r.Ac)(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,i,s){var n,o,l;o=i.classList.contains(OD)?this.element.id+"header":i.classList.contains(ud)?this.element.id+"footerTemplate":this.element.id+"content",(0,r.le)(e.outerHTML)?("string"==typeof e||"string"!=typeof e||(0,r.xr)()&&!this.isStringTemplate)&&("string"==typeof e&&(e=this.sanitizeHelper(e)),this.isVue||"string"!=typeof e?(n=(0,r.MY)(e),l=e):i.innerHTML=e):i.appendChild(e);var h=[];if(!(0,r.le)(n)){for(var u=0,p=n({},this,s,o,!((0,r.xr)()&&!this.isStringTemplate&&0===l.indexOf("<div>Blazor"))||this.isStringTemplate);u<p.length;u++)h.push(p[u]);(0,r.R3)([].slice.call(h),i)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var i=r.pJ.beforeSanitize();(0,r.l7)(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!(0,r.le)(i.helper)?e=i.helper(e):i.cancel||(e=r.pJ.serializeValue(i,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!(0,r.le)(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,r.AR.isIE&&"auto"===this.height&&!(0,r.le)(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?(0,r.cn)([this.element],RS):(0,r.IV)([this.element],RS)),(0,r.le)(this.element.querySelector(".e-resize-handle"))||(LD(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if((0,r.le)(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(s){8!==s.nodeType&&e.innerContentElement.appendChild(s)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:OD}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),(0,r.Y4)(this.element,{"aria-labelledby":this.element.id+"_title"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!(0,r.le)(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:ud}),""===this.footerTemplate||(0,r.le)(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){(0,r.le)(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:PS}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:MD,attrs:{type:"button"}}),this.closeIconBtnObj=new It({cssClass:"e-flat",iconCss:RD+" e-icons"}),this.closeIconTitle(),(0,r.le)(this.headerContent)?(this.createHeaderContent(),(0,r.Ce)([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):(0,r.Ce)([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){e&&((0,r.IV)([this.element],e.split(" ")),this.isModal&&!(0,r.le)(this.dlgContainer)&&(0,r.IV)([this.dlgContainer],e.split(" "))),this.cssClass&&((0,r.cn)([this.element],this.cssClass.split(" ")),this.isModal&&!(0,r.le)(this.dlgContainer)&&(0,r.cn)([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove(BD),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),(0,r.cn)([this.element],Pm),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var i,s=0;s<e.length;s++){if(((i=e[s]).clientHeight>0||"a"===i.tagName.toLowerCase()&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},t.prototype.focusableElements=function(e){if(!(0,r.le)(e)){var s=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(s)}return null},t.prototype.getAutoFocusNode=function(e){var i=e.querySelector("."+MD),n=e.querySelectorAll("[autofocus]"),o=this.getValidFocusNode(n);if((0,r.xr)()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),(0,r.le)(o)){if(o=this.focusableElements(this.contentEle),!(0,r.le)(o))return o;if(!(0,r.le)(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else i=o;return i},t.prototype.disableElement=function(e,i){var s=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(s)for(;e;e=e.parentNode)if(e instanceof Element&&s.call(e,i))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),i=(0,r.le)(e)?this.element:e,s=r.AR.userAgent;(s.indexOf("MSIE ")>0||s.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){r.bi.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){r.bi.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return(0,r.xr)()&&this.isServerRendered},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,i){if(this.element.classList.contains(Rm))for(var s=0,n=Object.keys(e);s<n.length;s++)switch(n[s]){case"content":(0,r.le)(this.content)||""===this.content?(0,r.le)(this.contentEle)||((0,r.og)(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),(0,r.le)(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||(0,r.le)(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),(0,r.og)(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||(0,r.le)(this.header)?this.headerEle&&((0,r.og)(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||(0,r.le)(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||(0,r.le)(this.footerTemplate)){if(!this.ftrTemplateContent)return;(0,r.og)(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||(0,r.le)(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(RD).length>0?this.showCloseIcon||""!==this.header&&!(0,r.le)(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():(0,r.og)(this.closeIcon):((0,r.og)(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":(0,r.V7)(this.element,{height:(0,r.Ac)(e.height)}),this.updatePersistData();break;case"width":(0,r.V7)(this.element,{width:(0,r.Ac)(e.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":var l=this.buttons.length;!(0,r.le)(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&((0,r.og)(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var h=0;h<l;h++)(0,r.le)(this.buttons[h].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!(0,r.le)(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var c=(0,r.le)(i.position)||(0,r.le)(i.position.X)?this.position.X:i.position.X,u=(0,r.le)(i.position)||(0,r.le)(i.position.Y)?this.position.Y:i.position.Y;this.dlgContainer.classList.contains("e-dlg-"+c+"-"+u)&&this.dlgContainer.classList.remove("e-dlg-"+c+"-"+u)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=(0,r.Ac)(this.minHeight))}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)(0,r.le)(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",(0,r.le)(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for((0,r.IV)([this.element],Pm),(0,r.IV)([document.body],[Ia,Gr]),(0,r.og)(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&r.bi.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,i){var s=this.isProtectedOnChange;this.isProtectedOnChange=!0;var n=wa(e);this.zIndex=n>this.zIndex?n:this.zIndex,this.isProtectedOnChange=s,i&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){(function(a){co=a})(this.targetEle.clientWidth),function(a){cl=a}(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},t.prototype.destroy=function(){if(!this.isDestroyed){var e=[RS,Pm,MS,Bm,Mm,PD],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if((0,r.IV)([this.targetEle],[Ia,Gr]),!(0,r.le)(this.element)&&this.element.classList.contains(Mm)&&(0,r.IV)([document.body],[Ia,Gr]),this.isModal&&(0,r.IV)([(0,r.le)(this.targetEle)?document.body:this.targetEle],Gr),this.unWireEvents(),!(0,r.le)(this.btnObj))for(var s=0;s<this.btnObj.length;s++)this.btnObj[s].destroy();if((0,r.le)(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),(0,r.le)(this.dragObj)||this.dragObj.destroy(),!(0,r.le)(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),(0,r.IV)([this.element],e),!(0,r.le)(this.cssClass)&&""!==this.cssClass&&(0,r.IV)([this.element],this.cssClass.split(" ")),!(0,r.le)(this.refElement)&&!(0,r.le)(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),(0,r.og)(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&((0,r.og)(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),(0,r.og)(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!(0,r.le)(this.element.children))for(s=0;s<=this.element.children.length;s++)(0,r.og)(this.element.children[s-=s]);for(s=0;s<i.length;s++)this.element.removeAttribute(i[s]);this.ftrTemplateContent=null,this.headerContent=null,this.contentEle=null,this.isBlazorServerRender()?this.isDestroyed=!0:a.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&r.bi.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&r.bi.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&r.bi.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&r.bi.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!(0,r.le)(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&r.bi.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition(),this.element.classList.contains(Pm)&&this.positionChange()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.show=function(e){var i=this;if(this.element.classList.contains(Rm)){if(!this.element.classList.contains(BD)||!(0,r.le)(e)){(0,r.le)(e)||this.fullScreen(e);var s=(0,r.xr)()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",s,function(n){if(!n.cancel){if(i.element.style.maxHeight!==s.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=s.maxHeight),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!(0,r.le)(i.dlgOverlay))if(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",(0,r.IV)([i.dlgOverlay],"e-fade"),(0,r.le)(i.targetEle))(0,r.cn)([document.body],[Ia,Gr]);else{i.dlgContainer.style.position=i.targetEle===document.body?"fixed":"absolute",i.dlgOverlay.style.position="absolute";var o=i.getTargetContainer(i.target);if(o instanceof Element){var l=window.getComputedStyle(o);i.element.style.position="rtl"===l.getPropertyValue("direction")?"absolute":"relative"}else i.element.style.position="relative";(0,r.cn)([i.targetEle],[Ia,Gr])}var h={name:"None"===i.animationSettings.effect&&"Enable"===r.ti?"ZoomIn":i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.calculatezIndex&&(i.setzIndex(i.isModal?i.element.parentElement:i.element,!0),(0,r.V7)(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),"None"===i.animationSettings.effect&&"Enable"===r.ti?i.popupObj.show(h):"None"===i.animationSettings.effect?i.popupObj.show():i.popupObj.show(h),i.dialogOpen=!0;var u=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=u}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var i=this;if(this.element.classList.contains(Rm)&&this.preventVisibility){var s=(0,r.xr)()?{cancel:!1,isInteracted:!!e,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:e}:{cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=s,this.trigger("beforeClose",s,function(n){if(!n.cancel){i.isModal&&((0,r.le)(i.targetEle)||(0,r.IV)([i.targetEle],[Ia,Gr])),document.body.classList.contains(Ia)&&document.body.classList.contains(Gr)&&(0,r.IV)([document.body],[Ia,Gr]);var o={name:"None"===i.animationSettings.effect&&"Enable"===r.ti?"ZoomOut":i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};"None"===i.animationSettings.effect&&"Enable"===r.ti?i.popupObj.hide(o):"None"===i.animationSettings.effect?i.popupObj.hide():i.popupObj.hide(o),i.dialogOpen=!1;var l=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=l}i.dlgClosedBy=BS})}},t.prototype.fullScreen=function(e){if(e){this.element.style.top=document.scrollingElement.scrollTop+"px",(0,r.cn)([this.element],Mm);var n=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=(0,r.le)(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=n,(0,r.cn)([document.body],[Ia,Gr]),this.allowDragging&&!(0,r.le)(this.dragObj)&&this.dragObj.destroy()}else(0,r.IV)([this.element],Mm),(0,r.IV)([document.body],[Ia,Gr]),this.allowDragging&&!(0,r.le)(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return(0,r.le)(e)?this.btnObj:this.btnObj[e]},Ue([(0,r.Z9)("")],t.prototype,"content",void 0),Ue([(0,r.Z9)(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ue([(0,r.Z9)(!1)],t.prototype,"enablePersistence",void 0),Ue([(0,r.Z9)(!1)],t.prototype,"showCloseIcon",void 0),Ue([(0,r.Z9)(!1)],t.prototype,"isModal",void 0),Ue([(0,r.Z9)("")],t.prototype,"header",void 0),Ue([(0,r.Z9)(!0)],t.prototype,"visible",void 0),Ue([(0,r.Z9)(!1)],t.prototype,"enableResize",void 0),Ue([(0,r.Z9)(["South-East"])],t.prototype,"resizeHandles",void 0),Ue([(0,r.Z9)("auto")],t.prototype,"height",void 0),Ue([(0,r.Z9)("")],t.prototype,"minHeight",void 0),Ue([(0,r.Z9)("100%")],t.prototype,"width",void 0),Ue([(0,r.Z9)("")],t.prototype,"cssClass",void 0),Ue([(0,r.Z9)(1e3)],t.prototype,"zIndex",void 0),Ue([(0,r.Z9)(null)],t.prototype,"target",void 0),Ue([(0,r.Z9)("")],t.prototype,"footerTemplate",void 0),Ue([(0,r.Z9)(!1)],t.prototype,"allowDragging",void 0),Ue([(0,r.FE)([{}],Uz)],t.prototype,"buttons",void 0),Ue([(0,r.Z9)(!0)],t.prototype,"closeOnEscape",void 0),Ue([(0,r.Zz)({},Gz)],t.prototype,"animationSettings",void 0),Ue([(0,r.Zz)({X:"center",Y:"center"},bD)],t.prototype,"position",void 0),Ue([(0,r.ju)()],t.prototype,"created",void 0),Ue([(0,r.ju)()],t.prototype,"open",void 0),Ue([(0,r.ju)()],t.prototype,"beforeSanitizeHtml",void 0),Ue([(0,r.ju)()],t.prototype,"beforeOpen",void 0),Ue([(0,r.ju)()],t.prototype,"close",void 0),Ue([(0,r.ju)()],t.prototype,"beforeClose",void 0),Ue([(0,r.ju)()],t.prototype,"dragStart",void 0),Ue([(0,r.ju)()],t.prototype,"dragStop",void 0),Ue([(0,r.ju)()],t.prototype,"drag",void 0),Ue([(0,r.ju)()],t.prototype,"overlayClick",void 0),Ue([(0,r.ju)()],t.prototype,"resizeStart",void 0),Ue([(0,r.ju)()],t.prototype,"resizing",void 0),Ue([(0,r.ju)()],t.prototype,"resizeStop",void 0),Ue([(0,r.ju)()],t.prototype,"destroyed",void 0),Ue([r.Zl],t)}(r.wA);!function(a){function i(u,p){var d=new Xn(u);return d.appendTo(p),d}function o(u,p){return u.header=(0,r.le)(p.title)?null:p.title,u.content=(0,r.le)(p.content)?"":p.content,u.isModal=!!(0,r.le)(p.isModal)||p.isModal,u.showCloseIcon=!(0,r.le)(p.showCloseIcon)&&p.showCloseIcon,u.allowDragging=!(0,r.le)(p.isDraggable)&&p.isDraggable,u.closeOnEscape=!(0,r.le)(p.closeOnEscape)&&p.closeOnEscape,u.position=(0,r.le)(p.position)?{X:"center",Y:"top"}:p.position,u.animationSettings=(0,r.le)(p.animationSettings)?{effect:"Fade",duration:400,delay:0}:p.animationSettings,u.cssClass=(0,r.le)(p.cssClass)?"":p.cssClass,u.zIndex=(0,r.le)(p.zIndex)?1e3:p.zIndex,u.open=(0,r.le)(p.open)?null:p.open,u.width=(0,r.le)(p.width)?"auto":p.width,u.height=(0,r.le)(p.height)?"auto":p.height,u}function c(u,p,d){var f=d;return(0,r.le)(p.text)||(f.buttonModel.content=p.text),(0,r.le)(p.icon)||(f.buttonModel.iconCss=p.icon),(0,r.le)(p.cssClass)||(f.buttonModel.cssClass=p.cssClass),(0,r.le)(p.click)||(f.click=p.click),(0,r.le)(p.isFlat)||(f.isFlat=p.isFlat),f}a.alert=function(u){var d,p=(0,r.az)("div",{className:VD});return document.body.appendChild(p),(d=i("string"==typeof u?{content:u,position:{X:"center",Y:"top"},isModal:!0,header:ND,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(u){var p={buttons:[]};return function(u,p){var d=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return(0,r.le)(p.okButton)?u.buttons=d:u.buttons[0]=c(0,p.okButton,d[0]),u}(p=o(p,u),u)}(u),p)).close=function(){u&&u.close&&u.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(FD)):d.element.remove()},d},a.confirm=function(u){var d,p=(0,r.az)("div",{className:HD});return document.body.appendChild(p),(d=i("string"==typeof u?{position:{X:"center",Y:"top"},content:u,isModal:!0,header:ND,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(u){var p={buttons:[]};return function(u,p){var d={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},f={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return u.buttons[0]=(0,r.le)(p.okButton)?d:c(0,p.okButton,d),u.buttons[1]=(0,r.le)(p.cancelButton)?f:c(0,p.cancelButton,f),u}(p=o(p,u),u)}(u),p)).close=function(){u&&u.close&&u.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(FD)):d.element.remove()},d}}(jD||(jD={}));var qD=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Tt=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},NS="e-tooltip",GD="e-icons",ZD="e-tooltip-close",FS="e-tooltip-wrap",YD="e-tip-content",nu="e-arrow-tip",KD="e-arrow-tip-outer",Nm="e-arrow-tip-inner",pd="e-tip-bottom",VS="e-tip-top",XD="e-tip-left",HS="e-tip-right",zS="e-popup",Fm="e-popup-open",jS="e-popup-close",Vm="e-lib",QD="e-tooltip-popup-container",cj=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return qD(t,a),Tt([(0,r.Z9)({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Tt([(0,r.Z9)({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(r.rt),fl=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.mouseMoveEvent=null,s.mouseMoveTarget=null,s.containerElement=null,s.isBodyContainer=!0,s}return qD(t,a),t.prototype.initialize=function(){this.formatPosition(),(0,r.cn)([this.element],NS)},t.prototype.formatPosition=function(){var e,i;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:nu+" "+this.tipClass});e.appendChild(this.createElement("div",{className:KD+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:Nm+" "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){this.tipClass=0===e.indexOf("Right")?XD:0===e.indexOf("Bottom")?VS:0===e.indexOf("Left")?HS:pd},t.prototype.renderPopup=function(e){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(Vm),this.popupObj=new Ni(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getScalingFactor=function(e){if(!e)return{x:1,y:1};var i={x:1,y:1},s=e.closest('[style*="transform: scale"]');if(s&&s!=this.tooltipEle&&s.contains(this.tooltipEle)){var l=window.getComputedStyle(s).getPropertyValue("transform").match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);i.x=l[0],i.y=l[3]}return i},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var i=this.element.closest('[style*="zoom"]');i&&(i.contains(this.tooltipEle)||(this.tooltipEle.style.zoom=getComputedStyle(i).zoom));var s=fi(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.getScalingFactor(e),o=this.calculateTooltipOffset(this.position,n.x,n.y),l=this.calculateElementPosition(s,o),u=this.collisionFlipFit(e,l[0],l[1]);return u.left=u.left/n.x,u.top=u.top/n.y,this.tooltipEle.style.display="",u},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(e){if(this.popupObj&&e){var i=this.getTooltipPosition(e);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.closePopupHandler=function(){this.isReact&&!("Click"===this.opensOn&&"function"==typeof this.content)&&this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.calculateTooltipOffset=function(e,i,s){void 0===i&&(i=1),void 0===s&&(s=1);var o,l,h,c,u,p,d,f,n={top:0,left:0};if(1!=i||1!=s){var g=this.tooltipEle.getBoundingClientRect(),m=void 0;h=Math.round(g.width),c=Math.round(g.height),(u=(0,r.Ys)("."+nu,this.tooltipEle))&&(m=u.getBoundingClientRect()),o=u?Math.round(m.width):0,l=u?Math.round(m.height):0,p=this.showTipPointer?0:8,d=l/2+2+(c-this.tooltipEle.clientHeight*s),f=o/2+2+(h-this.tooltipEle.clientWidth*i)}else h=this.tooltipEle.offsetWidth,c=this.tooltipEle.offsetHeight,u=(0,r.Ys)("."+nu,this.tooltipEle),p=this.showTipPointer?0:8,d=(l=u?u.offsetHeight:0)/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),f=(o=u?u.offsetWidth:0)/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(p+=2),e){case"RightTop":n.left+=o+p,n.top-=c-d;break;case"RightCenter":n.left+=o+p,n.top-=c/2;break;case"RightBottom":n.left+=o+p,n.top-=d;break;case"BottomRight":n.top+=l+p,n.left-=f;break;case"BottomCenter":n.top+=l+p,n.left-=h/2;break;case"BottomLeft":n.top+=l+p,n.left-=h-f;break;case"LeftBottom":n.left-=o+h+p,n.top-=d;break;case"LeftCenter":n.left-=o+h+p,n.top-=c/2;break;case"LeftTop":n.left-=o+h+p,n.top-=c-d;break;case"TopLeft":n.top-=c+l+p,n.left-=h-f;break;case"TopRight":n.top-=c+l+p,n.left-=f;break;default:n.top-=c+l+p,n.left-=h/2}return n.left+=this.offsetX,n.top+=this.offsetY,n},t.prototype.updateTipPosition=function(e){var i=(0,r.td)("."+nu+",."+KD+",."+Nm,this.tooltipEle);(0,r.IV)(i,[pd,VS,XD,HS]),this.setTipClass(e),(0,r.cn)(i,this.tipClass)},t.prototype.adjustArrow=function(e,i,s,n){var o=(0,r.Ys)("."+nu,this.tooltipEle);if(!1!==this.showTipPointer&&null!==o){var l,h;this.updateTipPosition(i),this.tooltipEle.style.display="block";var g,c=this.tooltipEle.clientWidth,u=this.tooltipEle.clientHeight,p=(0,r.Ys)("."+Nm,this.tooltipEle),d=o.offsetWidth,f=o.offsetHeight;this.tooltipEle.style.display="",this.tipClass===pd||this.tipClass===VS?(this.tipClass===pd?(h="99.9%",p.style.top="-"+(f-2)+"px"):(h=-(f-1)+"px",p.style.top="-"+(f-6)+"px"),e&&(l=(g="Center"!==s||c>e.offsetWidth||this.mouseTrail)&&"Left"===s||!g&&"End"===this.tipPointerPosition?c-d-2+"px":g&&"Right"===s||!g&&"Start"===this.tipPointerPosition?"2px":!g||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?c/2-d/2+"px":"End"===this.tipPointerPosition?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2+2+"px")):(this.tipClass===HS?(l="99.9%",p.style.left="-"+(d-2)+"px"):(l=-(d-1)+"px",p.style.left=d-2-d+"px"),h=(g="Center"!==n||u>e.offsetHeight||this.mouseTrail)&&"Top"===n||!g&&"End"===this.tipPointerPosition?u-f-2+"px":g&&"Bottom"===n||!g&&"Start"===this.tipPointerPosition?"2px":u/2-f/2+"px"),o.style.top=h,o.style.left=l}},t.prototype.renderContent=function(e){var i=(0,r.Ys)("."+YD,this.tooltipEle);if(this.cssClass&&(0,r.cn)([this.tooltipEle],this.cssClass.split(" ")),e&&!(0,r.le)(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),(0,r.le)(this.content))e&&!(0,r.le)(e.getAttribute("data-content"))&&(i.innerHTML=e.getAttribute("data-content"));else if(i.innerHTML="",this.content instanceof HTMLElement)i.appendChild(this.content);else if("string"==typeof this.content)this.enableHtmlSanitizer&&this.setProperties({content:r.pJ.sanitize(this.content)},!0),this.enableHtmlParse?(n=(0,r.MY)(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i,this.root))&&(0,r.R3)(n,i):i.textContent=this.content;else{var n;(n=(0,r.MY)(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))&&(0,r.R3)(n,i),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var i=this.createElement("div",{className:GD+" "+ZD});this.tooltipEle.appendChild(i),r.bi.add(i,r.AR.touchStartEvent,this.onStickyClose,this)}else{var e=this.tooltipEle.querySelector("."+GD+"."+ZD);e&&(0,r.Od)(e)}},t.prototype.addDescribedBy=function(e,i){var s=(e.getAttribute("aria-describedby")||"").split(/\s+/);s.indexOf(i)<0&&s.push(i),(0,r.Y4)(e,{"aria-describedby":s.join(" ").trim(),"data-tooltip-id":i})},t.prototype.removeDescribedBy=function(e){var i=e.getAttribute("data-tooltip-id"),s=(e.getAttribute("aria-describedby")||"").split(/\s+/),n=s.indexOf(i);-1!==n&&s.splice(n,1),e.removeAttribute("data-tooltip-id");var o=s.join(" ").trim();o?e.setAttribute("aria-describedby",o):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var i=this;this.isSticky||(this.autoCloseTimer=setTimeout(function(){i.close()},1500))},t.prototype.targetClick=function(e){var i;i=this.target?(0,r.oq)(e.target,this.target):this.element,!(0,r.le)(i)&&(null===i.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,i))},t.prototype.targetHover=function(e){var i;if(i=this.target?(0,r.oq)(e.target,this.target):this.element,!((0,r.le)(i)||null!==i.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var n=0,o=[].slice.call((0,r.td)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));n<o.length;n++)this.restoreElement(o[n]);this.showTooltip(i,this.animation.open,e)}},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&r.bi.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,i,s){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,r.bi.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:s?s.type:null,cancel:!1,target:e,event:s||null,element:this.tooltipEle,isInteracted:!(0,r.le)(s)},this.trigger("beforeRender",this.tooltipEventArgs,function(l){n.beforeRenderCallback(l,e,s,i)}.bind(this))},t.prototype.beforeRenderCallback=function(e,i,s,n){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,(0,r.le)(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?(0,r.QI)(this.element.getAttribute("id")):(0,r.QI)("tooltip"),this.tooltipEle=this.createElement("div",{className:FS+" "+zS+" "+Vm,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+(0,r.Ac)(this.width)+";height:"+(0,r.Ac)(this.height)+";position:absolute;"}),this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,s,n,this)):i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(i,this.ctrlId+"_content"),this.renderContent(i),r.fw.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,s,n,this)))},t.prototype.appendContainer=function(e){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=(0,r.Ys)(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||(0,r.cn)([this.containerElement],QD),this.containerElement.appendChild(e.tooltipEle)},t.prototype.tooltipBeforeRender=function(e,i){e&&(r.AR.isDevice&&(0,r.cn)([i.tooltipEle],"e-bigger"),"auto"!==i.width&&(i.tooltipEle.style.maxWidth=(0,r.Ac)(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:YD})),this.appendContainer(i),(0,r.IV)([i.tooltipEle],"e-hidden"),i.addDescribedBy(e,i.ctrlId+"_content"),i.renderContent(e),(0,r.cn)([i.tooltipEle],Fm),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(e),i.adjustArrow(e,i.position,i.tooltipPositionX,i.tooltipPositionY),r.fw.stop(i.tooltipEle),i.reposition(e))},t.prototype.tooltipAfterRender=function(e,i,s,n){e&&((0,r.IV)([n.tooltipEle],Fm),(0,r.cn)([n.tooltipEle],jS),n.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:n.tooltipEle,isInteracted:!(0,r.le)(i)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none"),n.trigger("beforeOpen",n.tooltipEventArgs,function(l){n.beforeOpenCallback(l,e,s,i)}.bind(n)))},t.prototype.beforeOpenCallback=function(e,i,s,n){var o=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var l={name:"None"===s.effect&&"Enable"===r.ti?"FadeIn":this.animation.open.effect,duration:s.duration,delay:s.delay,timingFunction:"easeOut"};"None"===s.effect&&(l=void 0),this.openDelay>0?this.showTimer=setTimeout(function(){o.mouseTrail&&r.bi.add(i,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&(o.popupObj.show(l,i),o.mouseMoveEvent&&o.mouseTrail&&o.onMouseMove(o.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(l,i)}n&&this.wireMouseEvents(n,i)},t.prototype.needTemplateReposition=function(){return!(0,r.le)(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef},t.prototype.checkCollision=function(e,i,s){var n={left:i,top:s,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=Sr(this.tooltipEle,this.checkCollideTarget(),i,s);return o.length>0&&(n.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.calculateElementPosition=function(e,i){return[this.isBodyContainer?e.left+i.left:e.left-this.containerElement.offsetLeft+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+i.top:e.top-this.containerElement.offsetTop+i.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,i,s){var n=this.checkCollision(e,i,s),o=n.position;if(this.tooltipPositionY!==n.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===o.indexOf("Left")&&(n.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=n.vertical+"Left"),0===o.indexOf("Right")&&(n.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)o=this.position;else{var l=n.vertical,h=n.horizontal;if(n.position!==o){var c=fi(e,h,l,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,o,h,l);var u=this.getScalingFactor(e),p=this.calculateTooltipOffset(o,u.x,u.y);p.top-=this.getOffSetPosition("TopBottom",o,this.offsetY),p.left-=this.getOffSetPosition("RightLeft",o,this.offsetX),n.position=o;var d=this.calculateElementPosition(c,p);n.left=d[0],n.top=d[1]}else this.adjustArrow(e,o,h,l)}var f={left:n.left,top:n.top},g=this.isBodyContainer?dS(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.windowCollision},f):f;this.tooltipEle.style.display="block";var m=(0,r.Ys)("."+nu,this.tooltipEle);if(this.showTipPointer&&null!=m&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var v=parseInt(m.style.left,10)-(g.left-n.left);v<0?v=0:v+m.offsetWidth>this.tooltipEle.clientWidth&&(v=this.tooltipEle.clientWidth-m.offsetWidth),m.style.left=v.toString()+"px"}return this.tooltipEle.style.display="",f.left=g.left,f.top=g.top,f},t.prototype.getOffSetPosition=function(e,i,s){return-1!==e.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(i.split(/(?=[A-Z])/)[0])?2*s:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,i,s){var n=this;this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(e,i,s)},this.closeDelay)):this.tooltipHide(e,i,s)},t.prototype.tooltipHide=function(e,i,s){var o,n=this;o=i?this.target?s||i.target:this.element:(0,r.Ys)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:o,event:i||null,element:this.tooltipEle,isInteracted:!(0,r.le)(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(l){l.cancel?n.isHidden=!1:(n.mouseMoveBeforeRemove(),n.popupHide(e,o))}),this.tooltipEventArgs=null},t.prototype.popupHide=function(e,i){i&&this.restoreElement(i),this.isHidden=!0;var s={name:"None"===e.effect&&"Enable"===r.ti?"FadeOut":this.animation.close.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(s=void 0),this.popupObj&&this.popupObj.hide(s)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),(0,r.le)(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){this.tooltipEle&&((0,r.IV)([this.tooltipEle],jS),(0,r.cn)([this.tooltipEle],Fm)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&(0,r.Od)(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var i=e.relatedTarget;if(i&&!this.mouseTrail){var s=(0,r.oq)(i,"."+FS+"."+Vm+"."+zS);s?r.bi.add(s,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),r.bi.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var i=0,s=0;e.type.indexOf("touch")>-1?(e.preventDefault(),i=e.touches[0].pageX,s=e.touches[0].pageY):(i=e.pageX,s=e.pageY),r.fw.stop(this.tooltipEle),(0,r.IV)([this.tooltipEle],jS),(0,r.cn)([this.tooltipEle],Fm),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.getScalingFactor(e.target),o=this.calculateTooltipOffset(this.position,n.x,n.y),c=this.checkCollision(e.target,i+o.left+this.offsetX,s+o.top+this.offsetY);if(this.tooltipPositionX!==c.horizontal||this.tooltipPositionY!==c.vertical){var u=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?c.vertical+c.horizontal:c.horizontal+c.vertical;c.position=u,this.adjustArrow(e.target,c.position,c.horizontal,c.vertical);var p=this.calculateTooltipOffset(c.position,n.x,n.y);c.left=i+p.left-this.offsetX,c.top=s+p.top-this.offsetY}this.tooltipEle.style.left=c.left+"px",this.tooltipEle.style.top=c.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===(0,r.oq)(e.target,"."+NS)&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&!this.isSticky&&((0,r.oq)(e.target,"."+FS+"."+Vm+"."+zS)||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=pd,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var s=0,n=this.getTriggerList(e);s<n.length;s++){var o=n[s];if("Custom"===o)return;"Focus"===o&&this.wireFocusEvents(),"Click"===o&&r.bi.add(this.element,r.AR.touchStartEvent,this.targetClick,this),"Hover"===o&&(r.AR.isDevice?(this.touchModule=new r.Xh(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),r.bi.add(this.element,r.AR.touchEndEvent,this.touchEndHandler,this)):r.bi.add(this.element,"mouseover",this.targetHover,this))}r.bi.add(document,"touchend",this.touchEnd,this),r.bi.add(document,"scroll wheel",this.scrollHandler,this),r.bi.add(window,"resize",this.windowResize,this),r.bi.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=r.AR.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if((0,r.le)(this.target))r.bi.add(this.element,"focusin",this.targetHover,this);else{var e=[].slice.call((0,r.td)(this.target,this.element));this.targetsList=e;for(var i=0,s=e;i<s.length;i++)r.bi.add(s[i],"focus",this.targetHover,this)}},t.prototype.wireMouseEvents=function(e,i){this.tooltipEle&&(this.isSticky||("focus"===e.type&&r.bi.add(i,"blur",this.onMouseOut,this),"focusin"===e.type&&r.bi.add(i,"focusout",this.onMouseOut,this),"mouseover"===e.type&&r.bi.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(r.bi.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),r.bi.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&r.bi.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var s=0,n=this.getTriggerList(e);s<n.length;s++){var o=n[s];if("Custom"===o)return;"Focus"===o&&this.unwireFocusEvents(),"Click"===o&&r.bi.remove(this.element,r.AR.touchStartEvent,this.targetClick),"Hover"===o&&(r.AR.isDevice?(this.touchModule&&this.touchModule.destroy(),r.bi.remove(this.element,r.AR.touchEndEvent,this.touchEndHandler)):r.bi.remove(this.element,"mouseover",this.targetHover))}r.bi.remove(document,"touchend",this.touchEnd),r.bi.remove(document,"scroll wheel",this.scrollHandler),r.bi.remove(window,"resize",this.windowResize),r.bi.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if((0,r.le)(this.target))r.bi.remove(this.element,"focusin",this.targetHover);else for(var i=0,s=[].slice.call((0,r.td)(this.target,this.element));i<s.length;i++)r.bi.remove(s[i],"focus",this.targetHover)},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var s=0,n=this.getTriggerList(this.opensOn);s<n.length;s++){var o=n[s];"Focus"===o&&(r.bi.remove(e,"blur",this.onMouseOut),r.bi.remove(e,"focusout",this.onMouseOut)),"Hover"===o&&!r.AR.isDevice&&r.bi.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(r.bi.remove(e,"mouseenter",this.tooltipHover),r.bi.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&r.bi.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return(0,r.Ys)('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,i){for(var s=this.findTarget(),n=0,o=Object.keys(e);n<o.length;n++)switch(o[n]){case"width":this.tooltipEle&&s&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=(0,r.Ac)(e.width),this.reposition(s));break;case"height":this.tooltipEle&&s&&(this.tooltipEle.style.height=(0,r.Ac)(e.height),this.reposition(s));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&s){var h=(0,r.Ys)("."+Nm,this.tooltipEle);h&&(h.style.top=h.style.left=null),this.reposition(s)}break;case"tipPointerPosition":this.tooltipEle&&s&&this.reposition(s);break;case"offsetX":if(this.tooltipEle){var c=e.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+c).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var u=e.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+u).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&(0,r.IV)([this.tooltipEle],i.cssClass.split(" ")),e.cssClass&&(0,r.cn)([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?(0,r.cn)([this.tooltipEle],"e-rtl"):(0,r.IV)([this.tooltipEle],"e-rtl"));break;case"isSticky":this.tooltipEle&&s&&(this.renderCloseIcon(),this.reposition(s));break;case"container":(0,r.le)(this.containerElement)||(0,r.IV)([this.containerElement],QD),this.container=e.container,this.tooltipEle&&s&&(this.appendContainer(this),this.reposition(s))}},t.prototype.open=function(e,i){(0,r.le)(i)&&(i=this.animation.open),(0,r.le)(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,i)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e),(0,r.le)(this.targetsList)||(0,r.le)(this.target)||(0,r.td)(this.target,this.element).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))},t.prototype.destroy=function(){a.prototype.destroy.call(this),this.tooltipEle&&(0,r.Od)(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),(0,r.IV)([this.element],NS),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var i=0,s=(0,r.td)('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element);i<s.length;i++)this.restoreElement(s[i])},Tt([(0,r.Z9)("auto")],t.prototype,"width",void 0),Tt([(0,r.Z9)("auto")],t.prototype,"height",void 0),Tt([(0,r.Z9)()],t.prototype,"content",void 0),Tt([(0,r.Z9)("body")],t.prototype,"container",void 0),Tt([(0,r.Z9)()],t.prototype,"target",void 0),Tt([(0,r.Z9)("TopCenter")],t.prototype,"position",void 0),Tt([(0,r.Z9)(0)],t.prototype,"offsetX",void 0),Tt([(0,r.Z9)(0)],t.prototype,"offsetY",void 0),Tt([(0,r.Z9)(!0)],t.prototype,"showTipPointer",void 0),Tt([(0,r.Z9)(!0)],t.prototype,"enableHtmlParse",void 0),Tt([(0,r.Z9)(!1)],t.prototype,"windowCollision",void 0),Tt([(0,r.Z9)("Auto")],t.prototype,"tipPointerPosition",void 0),Tt([(0,r.Z9)("Auto")],t.prototype,"opensOn",void 0),Tt([(0,r.Z9)(!1)],t.prototype,"mouseTrail",void 0),Tt([(0,r.Z9)(!1)],t.prototype,"isSticky",void 0),Tt([(0,r.Zz)({},cj)],t.prototype,"animation",void 0),Tt([(0,r.Z9)(0)],t.prototype,"openDelay",void 0),Tt([(0,r.Z9)(0)],t.prototype,"closeDelay",void 0),Tt([(0,r.Z9)()],t.prototype,"cssClass",void 0),Tt([(0,r.Z9)(!1)],t.prototype,"enableHtmlSanitizer",void 0),Tt([(0,r.Z9)("")],t.prototype,"htmlAttributes",void 0),Tt([(0,r.ju)()],t.prototype,"beforeRender",void 0),Tt([(0,r.ju)()],t.prototype,"beforeOpen",void 0),Tt([(0,r.ju)()],t.prototype,"afterOpen",void 0),Tt([(0,r.ju)()],t.prototype,"beforeClose",void 0),Tt([(0,r.ju)()],t.prototype,"afterClose",void 0),Tt([(0,r.ju)()],t.prototype,"beforeCollision",void 0),Tt([(0,r.ju)()],t.prototype,"created",void 0),Tt([(0,r.ju)()],t.prototype,"destroyed",void 0),Tt([r.Zl],t)}(r.wA),us={},dd="e-spin-show",fd="e-spin-hide",$D="e-spin-material",eL="e-spin-material3",tL="e-spin-fabric",iL="e-spin-fluent",sL="e-spin-tailwind",vj="e-spin-bootstrap",nL="e-spin-bootstrap4",rL="e-spin-bootstrap5",aL="e-spin-high-contrast",Hm="e-spinner-pane",qS="e-spinner-inner",zm="e-path-circle",jm="e-spin-template";function sn(a,t){var e;if(a.target){var i,s=(0,r.le)(t)?r.az:t,n=function(a,t){var e=t("div",{}),i=t("div",{});return e.classList.add(Hm),i.classList.add(qS),i.setAttribute("aria-disabled","true"),a.appendChild(e),e.appendChild(i),{wrap:e,inner_wrap:i}}(a.target,s);if(!(0,r.le)(a.cssClass)){var o=a.cssClass.split(" ").filter(function(u){return""!==u.trim()});(e=n.wrap.classList).add.apply(e,o)}if((0,r.le)(a.template)&&(0,r.le)(null)){var h=(0,r.le)(a.type)?function(a){return window.getComputedStyle(a,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):a.type;i=function(a,t){var e;switch(t){case"Material":case"Material3":case"Fabric":e=30;break;case"Tailwind":case"Tailwind-dark":case"Fluent":e=30;break;case"Bootstrap4":case"Bootstrap5":e=36;break;default:e=30}return a=a?parseFloat(a+""):e,"Bootstrap"===t?a:a/2}((0,r.le)(a.width)?void 0:a.width,h),function(a,t,e,i){var s=t.querySelector("."+qS),n=s.querySelector("svg");switch((0,r.le)(n)||s.removeChild(n),a){case"Material":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"Material",radius:t},Wm(a,i,0,$D),Um(t,a,"Material",$D)}(s,e);break;case"Material3":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"Material3",radius:t},Wm(a,i,0,eL),Um(t,a,"Material3",eL)}(s,e);break;case"Fabric":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"Fabric",radius:t},_m(a,i,tL),Gm(t,a,tL)}(s,e);break;case"Fluent":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"Fluent",radius:t},_m(a,i,iL),Gm(t,a,iL)}(s,e);break;case"Bootstrap":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"Bootstrap",radius:t},function(a,t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=64,n=32,o=2;i.setAttribute("id",t),i.setAttribute("class",vj),i.setAttribute("viewBox","0 0 "+s+" "+s),a.insertBefore(i,a.firstChild);for(var l=0;l<=7;l++){var h=document.createElementNS("http://www.w3.org/2000/svg","circle");h.setAttribute("class",zm+"_"+l),h.setAttribute("r",o+""),h.setAttribute("transform","translate("+n+","+n+")"),i.appendChild(h)}}(a,i),function(a,t){var e=a.querySelector("svg.e-spin-bootstrap"),i=0,s=0,n=24;e.style.width=e.style.height=t+"px";for(var o=90,l=0;l<=7;l++){var h=_S(i,s,n,o),c=e.querySelector("."+zm+"_"+l);c.setAttribute("cx",h.x+""),c.setAttribute("cy",h.y+""),o=o>=360?0:o,o+=45}}(a,t)}(s,e);break;case"HighContrast":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"HighContrast",radius:t},_m(a,i,aL),Gm(t,a,aL)}(s,e);break;case"Bootstrap4":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"Bootstrap4",radius:t},Wm(a,i,0,nL),Um(t,a,"Bootstrap4",nL)}(s,e);break;case"Bootstrap5":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"Bootstrap5",radius:t},Wm(a,i,0,rL),Um(t,a,"Bootstrap5",rL)}(s,e);break;case"Tailwind":case"Tailwind-dark":!function(a,t,e){var i=uo();us[""+i]={timeOut:0,type:"Tailwind",radius:t},_m(a,i,sL),Gm(t,a,sL)}(s,e)}}(h,n.wrap,i),(0,r.le)(a.label)||function(a,t,e){var i=e("div",{});i.classList.add("e-spin-label"),i.innerHTML=t,a.appendChild(i)}(n.inner_wrap,a.label,s)}else{var l=(0,r.le)(a.template)?null:a.template;n.wrap.classList.add(jm),function(a,t,e){(0,r.le)(e)||a.classList.add(e),a.querySelector(".e-spinner-inner").innerHTML=t}(n.wrap,l,null)}n.wrap.classList.add(fd),n=null}}function Mj(a,t){var e=[],i=a,s=t,n=!1,o=1;return function l(h){e.push(h),(h!==s||1===o)&&(h<=i&&h>1&&!n?h=parseFloat((h-.2).toFixed(2)):1===h?(h=7,h=parseFloat((h+.2).toFixed(2)),n=!0):h<8&&n?8===(h=parseFloat((h+.2).toFixed(2)))&&(n=!1):h<=8&&!n&&(h=parseFloat((h-.2).toFixed(2))),++o,l(h))}(i),e}function uo(){for(var a="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}function _m(a,t,e,i){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",e);var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",zm);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),a.insertBefore(s,a.firstChild),s.appendChild(n),s.appendChild(o)}function Wm(a,t,e,i){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",i),s.setAttribute("id",t),n.setAttribute("class",zm),a.insertBefore(s,a.firstChild),s.appendChild(n)}function hL(a){var e,i,o,l,h,u,p,d;e=qj,i=1333,l=++(o=a).globalInfo[o.uniqueID].previousId,h=(new Date).getTime(),u=function(a){return parseFloat(a)}(2*o.globalInfo[o.uniqueID].radius+""),p=cL(u),d=-90*(o.globalInfo[o.uniqueID].count||0),function f(m){var v=Math.max(0,Math.min((new Date).getTime()-h,i));(function(m,v){if(!(0,r.le)(v.querySelector("svg.e-spin-material"))||!(0,r.le)(v.querySelector("svg.e-spin-material3"))){var y=void 0;if((0,r.le)(v.querySelector("svg.e-spin-material"))||(0,r.le)(v.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?!(0,r.le)(v.querySelector("svg.e-spin-material3"))&&!(0,r.le)(v.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))&&(y=v.querySelector("svg.e-spin-material3")):y=v.querySelector("svg.e-spin-material"),!(0,r.le)(y)){var C=y.querySelector("path.e-path-circle");C.setAttribute("stroke-dashoffset",uL(u,p,m,75)+""),C.setAttribute("transform","rotate("+d+" "+u/2+" "+u/2+")")}}})(e(v,1,148,i),m.container),l===m.globalInfo[m.uniqueID].previousId&&v<i?us[m.uniqueID].timeOut=setTimeout(f.bind(null,m),1):hL(m)}(o),a.globalInfo[a.uniqueID].count=++a.globalInfo[a.uniqueID].count%4}function Um(a,t,e,i){var s=2*a,n=t.querySelector("svg."+i),o=n.querySelector("path.e-path-circle"),l=cL(s),h=s/2+"px";n.setAttribute("viewBox","0 0 "+s+" "+s),n.style.width=n.style.height=s+"px",n.style.transformOrigin=h+" "+h+" "+h,o.setAttribute("d",function(a,t){var e=a/2,i=t/2;return"M"+e+","+i+"A"+(e-i)+","+(e-i)+" 0 1 1 "+i+","+e}(s,l)),("Material"===e||"Material3"===e)&&(o.setAttribute("stroke-width",l+""),o.setAttribute("stroke-dasharray",(s-l)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",uL(s,l,1,75)+""))}function cL(a){return.1*a}function uL(a,t,e,i){return(a-t)*Math.PI*(3*i/100-e/100)}function qj(a,t,e,i){var s=(a/=i)*a,n=s*a;return t+e*(6*n*s+-15*s*s+10*n)}function Gm(a,t,e){var i=a,s=a,n=2*a,h=t.querySelector("."+e),c=h.querySelector(".e-path-circle"),u=h.querySelector(".e-path-arc"),p=n/2+"px";c.setAttribute("d",function(a,t,e){return["M",a,t,"m",-e,0,"a",e,e,0,1,0,2*e,0,"a",e,e,0,1,0,2*-e,0].join(" ")}(i,s,a)),u.setAttribute("d",function(a,t,e,i,s){var n=_S(a,t,e,45),o=_S(a,t,e,315);return["M",n.x,n.y,"A",e,e,0,0,0,o.x,o.y].join(" ")}(i,s,a)),h.setAttribute("viewBox","0 0 "+n+" "+n),h.style.transformOrigin=p+" "+p+" "+p,h.style.width=h.style.height=n+"px"}function _S(a,t,e,i){var s=(i-90)*Math.PI/180;return{x:a+e*Math.cos(s),y:t+e*Math.sin(s)}}function ri(a){pL(a,!1),a=null}function pL(a,t){var e;if(a)if(a.classList.contains(Hm))e=a;else{var i=a.querySelectorAll("."+Hm);if(r.AR.isIE){for(var s=0;s<i.length;s++)if(i[s].parentElement&&i[s].parentElement===a){e=i[s];break}}else e=Array.from(i).find(function(c){return c.parentElement===a})||null}if(a&&e){var n=e.querySelector("."+qS);if(t?!e.classList.contains(jm)&&!e.classList.contains(fd):!e.classList.contains(jm)&&!e.classList.contains(dd)){var l=e.querySelector("svg");if((0,r.le)(l))return;var h=l.getAttribute("id");switch(us[""+h].isAnimate=!t,us[""+h].type){case"Material":case"Material3":t?clearTimeout(us[h].timeOut):function(a,t,e){var i={};us[""+t].timeOut=0,i[""+t]=function(a,t,e,i){return{radius:t,count:0,previousId:0}}(0,e),hL({uniqueID:t,container:a,globalInfo:i,timeOutVar:0})}(n,h,us[h].radius);break;case"Bootstrap":t?clearTimeout(us[h].timeOut):function(a){for(var e=a.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)n(a.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,Mj(i,i),e);function n(o,l,h,c,u){var p=0;!function d(f){us[""+u].isAnimate&&(++p,o.setAttribute("r",f+""),p>=c.length&&(p=0),us[u].timeOut=setTimeout(d.bind(null,c[p]),18))}(l)}}(n)}}t?(0,r.s1)(e,[fd],[dd]):(0,r.s1)(e,[dd],[fd]),a=null}}function _i(a){pL(a,!0),a=null}var Yj=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),au=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n};function gd(a,t){for(var e=(0,r.l7)({},a),i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];t.indexOf(n)<0&&(0,r.ex)(e,n)}return e}function Kj(a,t){var e=40===t?0:a.childElementCount-1,i=e,n=a.querySelector(".e-selected");n&&n.classList.remove("e-selected");for(var o=0,l=a.children.length;o<l;o++)a.children[o].classList.contains("e-focused")&&(i=o,a.children[o].classList.remove("e-focused"),40===t?i++:i--,i===(40===t?a.childElementCount:-1)&&(i=e));-1!==(i=dL(a,a.children[i],i,t))&&((0,r.cn)([a.children[i]],"e-focused"),a.children[i].focus())}function dL(a,t,e,i,s){if(void 0===s&&(s=0),(t.classList.contains("e-separator")||t.classList.contains("e-disabled"))&&(e===(40===i?a.childElementCount-1:0)?e=40===i?0:a.childElementCount-1:40===i?e++:e--),(t=a.children[e]).classList.contains("e-separator")||t.classList.contains("e-disabled")){if(++s===a.childElementCount)return-1;e=dL(a,t,e,i,s)}return e}var N,WS=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Yj(t,a),au([(0,r.Z9)("")],t.prototype,"iconCss",void 0),au([(0,r.Z9)("")],t.prototype,"id",void 0),au([(0,r.Z9)(!1)],t.prototype,"separator",void 0),au([(0,r.Z9)("")],t.prototype,"text",void 0),au([(0,r.Z9)("")],t.prototype,"url",void 0),au([(0,r.Z9)(!1)],t.prototype,"disabled",void 0),t}(r.rt),Qj=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ys=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},gl=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.isPopupCreated=!0,s}return Qj(t,a),t.prototype.preRender=function(){},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.createPopupOnClick&&!this.isPopupCreated?(this.createPopup(),this.openPopUp()):this.closePopup()},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,i){for(var s,n=this.items.length,o=0,l=this.items.length;o<l;o++)if(i===this.items[o].text){n=o;break}for(var h=e.length-1;h>=0;h--)s=new WS(this,"items",e[h],!0),this.items.splice(n,0,s);this.canOpen()||this.createItems()},t.prototype.removeItems=function(e,i){for(var s=!1,n=0,o=e.length;n<o;n++)for(var l=0,h=this.items.length;l<h;l++)if(e[n]===(i?this.items[l].id:this.items[l].text)){this.items.splice(l,1),s=!0;break}s&&this.getULElement()&&this.createItems()},t.prototype.createPopup=function(){var e,i=this.createElement("div",{className:"e-dropdown-popup",id:this.element.id+"-popup"});document.body.appendChild(i),this.dropDown=new Ni(i,{relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),this.dropDown.element.setAttribute("role","dialog"),this.dropDown.element.setAttribute("aria-label","dropdown menu"),(0,r.le)(this.popupContent)||(this.popupContent.style.display=""),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),(0,r.Y4)(this.element,((e={})["aria-haspopup"]=this.items.length||this.target?"true":"false",e["aria-expanded"]="false",e.type="button",e)),this.cssClass&&(0,r.cn)([i],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0},t.prototype.getTargetElement=function(){return!this.createPopupOnClick||this.isColorPicker()||(0,r.le)(this.popupContent)?"string"==typeof this.target?(0,r.Ys)(this.target):this.target:this.popupContent},t.prototype.createItems=function(e){var n,o,l,i=this.items,s=this.hasIcon(this.items,"iconCss"),c=this.getULElement();c?c.innerHTML="":c=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}});for(var u=0;u<i.length;u++){var p=(o=i[u]).text;l=this.createElement("li",{innerHTML:o.url?"":p,className:o.separator?"e-item e-separator":"e-item",attrs:o.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":p},id:o.id?o.id:(0,r.QI)("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?l.textContent=o.url?"":p:l.innerHTML=o.url?"":p,o.url&&(l.appendChild(this.createAnchor(o)),l.classList.add("e-url")),o.iconCss?(n=this.createElement("span",{className:"e-menu-icon "+o.iconCss}),o.url?l.childNodes[0].appendChild(n):l.insertBefore(n,l.childNodes[0])):s&&!o.separator&&l.classList.add("e-blank-icon"),o.disabled&&l.classList.add("e-disabled"),this.trigger("beforeItemRender",{item:o,element:l}),c.appendChild(l)}e&&this.getPopUpElement().appendChild(c),s&&function(a,t){var e=[].slice.call(a.getElementsByClassName("e-blank-icon"));if(e.length){var s=a.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!(0,r.le)(s)){s.classList.contains("e-url")&&(s=s.querySelector(".e-menu-url"));var o,n=s.querySelector(".e-menu-icon"),l=a.classList.contains("e-rtl");o=l?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var h=parseInt(getComputedStyle(n).fontSize,10)+parseInt(getComputedStyle(n)[o.margin],10)+parseInt(getComputedStyle(s).paddingLeft,10)+"px";e.forEach(function(c){c.classList.contains("e-url")?c.querySelector(".e-menu-url").style[o.padding]=h:c.style[o.padding]=h})}}}(this.getPopUpElement())},t.prototype.hasIcon=function(e,i){for(var s=0,n=e.length;s<n;s++)if(e[s][""+i])return!0;return!1},t.prototype.createAnchor=function(e){var i=this.enableHtmlSanitizer?r.pJ.sanitize(e.text):e.text;return this.createElement("a",{className:"e-menu-text e-menu-url",innerHTML:i,attrs:{href:e.url}})},t.prototype.initialize=function(){this.button=new It({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=(0,r.QI)("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.element.setAttribute("aria-label",this.element.textContent?this.element.textContent:"dropdownbutton"),this.target&&!this.isColorPicker()&&!this.createPopupOnClick||!this.createPopupOnClick?this.createPopup():(this.isPopupCreated=!1,this.target&&!this.isColorPicker()&&this.createPopupOnClick&&(this.popupContent=this.getTargetElement(),this.popupContent.style.display="none"))},t.prototype.isColorPicker=function(){if(!this.element)return!1;var e=this.element.previousSibling;return!!(e&&e.classList&&e.classList.contains("e-split-colorpicker"))},t.prototype.appendArrowSpan=function(){this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf("e-vertical")>-1?"bottom":"right")+" e-caret"}))},t.prototype.setActiveElem=function(e){this.activeElem=e},t.prototype.getModuleName=function(){return"dropdown-btn"},t.prototype.canOpen=function(){var e=!1;return this.isPopupCreated&&(e=this.getPopUpElement().classList.contains("e-popup-close")),e},t.prototype.destroy=function(){var i,e=this;a.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName()&&(this.element.querySelector("span.e-caret")&&(0,r.og)(this.element.querySelector("span.e-caret")),this.cssClass&&(i=this.cssClass.split(" ")),this.button.destroy(),i&&(0,r.IV)([this.element],i),(0,r.IV)(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(function(n){e.element.removeAttribute(n)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents())},t.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var e=document.getElementById(this.getPopUpElement().id);e&&((0,r.IV)([e],["e-popup-open","e-popup-close"]),(0,r.og)(e))}r.bi.remove(this.getPopUpElement(),"click",this.clickHandler),r.bi.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&this.dropDown&&(this.dropDown.element=null,this.dropDown=void 0)}this.isPopupCreated=!1},t.prototype.getPopUpElement=function(){var e=null;if(!this.dropDown&&this.activeElem[0].classList.contains("e-split-btn")){var i=(0,r.Xr)(this.activeElem[1],"dropdown-btn");i&&(this.dropDown=i.dropDown)}return this.dropDown&&(e=this.dropDown.element),e},t.prototype.getULElement=function(){var e=null;return this.getPopUpElement()&&(e=this.getPopUpElement().children[0]),e},t.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||r.bi.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),r.bi.add(this.element,"click",this.clickHandler,this),r.bi.add(this.element,"keydown",this.keyBoardHandler,this),r.bi.add(window,"resize",this.windowResize,this)},t.prototype.windowResize=function(){!this.canOpen()&&this.dropDown&&this.dropDown.refreshPosition(this.element)},t.prototype.popupWireEvents=function(){this.delegateMousedownHandler||(this.delegateMousedownHandler=this.mousedownHandler.bind(this));var e=this.getPopUpElement();this.createPopupOnClick&&r.bi.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),e&&(r.bi.add(e,"click",this.clickHandler,this),r.bi.add(e,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&r.bi.add(e,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=(0,r.qx)(e,{selector:".e-item"})},t.prototype.popupUnWireEvents=function(){var e=this.getPopUpElement();this.createPopupOnClick&&r.bi.remove(document,"mousedown touchstart",this.delegateMousedownHandler),e&&e.parentElement&&(r.bi.remove(e,"click",this.clickHandler),r.bi.remove(e,"keydown",this.keyBoardHandler),this.closeActionEvents&&r.bi.remove(e,this.closeActionEvents,this.focusoutHandler)),r.re&&this.rippleFn&&this.rippleFn()},t.prototype.keyBoardHandler=function(e){if(e.target!==this.element||9!==e.keyCode&&(e.altKey||40!==e.keyCode)&&38!==e.keyCode)switch(e.keyCode){case 38:case 40:!e.altKey||38!==e.keyCode&&40!==e.keyCode?this.upDownKeyHandler(e):this.keyEventHandler(e);break;case 9:case 13:case 27:case 32:this.keyEventHandler(e)}},t.prototype.upDownKeyHandler=function(e){this.target&&(38===e.keyCode||40===e.keyCode)||(e.preventDefault(),Kj(this.getULElement(),e.keyCode))},t.prototype.keyEventHandler=function(e){if(!this.target||13!==e.keyCode&&9!==e.keyCode){if(13===e.keyCode&&this.activeElem[0].classList.contains("e-split-btn"))return void this.activeElem[0].focus();e.target&&e.target.className.indexOf("e-edit-template")>-1&&32===e.keyCode||(9!==e.keyCode&&e.preventDefault(),27===e.keyCode||38===e.keyCode||9===e.keyCode?this.canOpen()||this.closePopup(e,this.element):this.clickHandler(e))}},t.prototype.getLI=function(e){return"LI"===e.tagName?e:(0,r.oq)(e,"li")},t.prototype.mousedownHandler=function(e){var i=e.target;this.dropDown&&!this.canOpen()&&!(0,r.oq)(i,'[id="'+this.getPopUpElement().id+'"]')&&!(0,r.oq)(i,'[id="'+this.element.id+'"]')&&this.closePopup(e)},t.prototype.focusoutHandler=function(e){if(this.isPopupCreated&&!this.canOpen()){var i=e.relatedTarget;if(i&&i.className.indexOf("e-item")>-1){var s=this.getLI(i);if(s){var n=Array.prototype.indexOf.call(this.getULElement().children,s),o=this.items[n];o&&this.trigger("select",{element:s,item:o,event:e})}}this.closePopup(e)}},t.prototype.clickHandler=function(e){var i=e.target;if((0,r.oq)(i,'[id="'+this.element.id+'"]'))!this.createPopupOnClick||this.target&&""!==this.target&&!this.isColorPicker()&&!this.createPopupOnClick?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(e):this.closePopup(e):this.isPopupCreated?this.closePopup(e,this.activeElem[0]):(this.createPopup(),this.openPopUp(e));else if((0,r.oq)(i,'[id="'+this.getPopUpElement().id+'"]')){var n=void 0,o=void 0,l=this.getLI(i);l&&(n=Array.prototype.indexOf.call(this.getULElement().children,l),(o=this.items[n])&&this.trigger("select",{element:l,item:o,event:e}),this.closePopup(e,this.activeElem[0]))}},t.prototype.openPopUp=function(e){var i=this;void 0===e&&(e=null);var s=this.getPopUpElement();if(this.target)if(this.activeElem.length>1){var n=(0,r.Xr)(this.activeElem[0],"split-btn");n.isReact&&s.childNodes.length<1&&(n.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&s.childNodes.length<1&&(this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());else this.createItems(!0);var o=this.getULElement();this.popupWireEvents(),this.trigger("beforeOpen",{element:o,items:this.items,event:e,cancel:!1},function(h){if(!h.cancel){var c=i.getULElement();if(i.dropDown.show(null,i.element),(0,r.cn)([i.element],"e-active"),i.element.setAttribute("aria-expanded","true"),i.element.setAttribute("aria-owns",i.getPopUpElement().id),c&&c.focus(),i.enableRtl&&"0px"!==c.parentElement.style.left){var u;u=i.element.parentElement&&i.element.parentElement.classList.contains("e-split-btn-wrapper")?i.element.parentElement.offsetWidth:i.element.offsetWidth;var p=c.parentElement.offsetWidth-u,d=parseFloat(c.parentElement.style.left)-p;d<0&&(d=0),c.parentElement.style.left=d+"px"}i.trigger("open",{element:c,items:i.items})}})},t.prototype.closePopup=function(e,i){var s=this;void 0===e&&(e=null);var n=this.getULElement();this.trigger("beforeClose",{element:n,items:this.items,event:e,cancel:!1},function(l){if(l.cancel)n&&n.focus();else{var h=s.getPopUpElement();h&&r.bi.remove(h,"keydown",s.keyBoardHandler),s.popupUnWireEvents();var c=s.getULElement(),u=void 0;c&&(u=c.querySelector(".e-selected")),u&&u.classList.remove("e-selected"),s.dropDown.hide(),(0,r.IV)(s.activeElem,"e-active"),s.element.setAttribute("aria-expanded","false"),s.element.removeAttribute("aria-owns"),i&&i.focus(),s.trigger("close",{element:c,items:s.items}),!s.target&&c&&(0,r.og)(c),(!s.target||s.isColorPicker()||s.target&&!s.isColorPicker())&&s.createPopupOnClick&&s.destroyPopup()}})},t.prototype.unWireEvents=function(){this.createPopupOnClick||r.bi.remove(document,"mousedown touchstart",this.delegateMousedownHandler),r.bi.remove(this.element,"click",this.clickHandler),r.bi.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(r.bi.remove(this.getPopUpElement(),"click",this.clickHandler),r.bi.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler)),r.bi.remove(window,"resize",this.windowResize)},t.prototype.onPropertyChanged=function(e,i){var n;this.button.setProperties(gd(e,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.isPopupCreated&&(n=this.getPopUpElement(),this.dropDown.setProperties(gd(e,["enableRtl"])));for(var o=0,l=Object.keys(e);o<l.length;o++)switch(l[o]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":e.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(e.cssClass.indexOf("e-vertical")>-1||i.cssClass.indexOf("e-vertical")>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var c=this.element.querySelector("span.e-caret");e.cssClass.indexOf("e-vertical")>-1?(0,r.s1)(c,["e-icon-bottom"],["e-icon-right"]):(0,r.s1)(c,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(i.cssClass&&(0,r.IV)([n],i.cssClass.split(" ")),e.cssClass&&(0,r.cn)([n],e.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":e.createPopupOnClick?this.destroyPopup():this.createPopup()}},t.prototype.focusIn=function(){this.element.focus()},ys([(0,r.Z9)("")],t.prototype,"content",void 0),ys([(0,r.Z9)("")],t.prototype,"cssClass",void 0),ys([(0,r.Z9)(!1)],t.prototype,"disabled",void 0),ys([(0,r.Z9)("")],t.prototype,"iconCss",void 0),ys([(0,r.Z9)("Left")],t.prototype,"iconPosition",void 0),ys([(0,r.Z9)(!1)],t.prototype,"enableHtmlSanitizer",void 0),ys([(0,r.FE)([],WS)],t.prototype,"items",void 0),ys([(0,r.Z9)(!1)],t.prototype,"createPopupOnClick",void 0),ys([(0,r.Z9)("")],t.prototype,"target",void 0),ys([(0,r.Z9)("")],t.prototype,"closeActionEvents",void 0),ys([(0,r.ju)()],t.prototype,"beforeItemRender",void 0),ys([(0,r.ju)()],t.prototype,"beforeOpen",void 0),ys([(0,r.ju)()],t.prototype,"beforeClose",void 0),ys([(0,r.ju)()],t.prototype,"close",void 0),ys([(0,r.ju)()],t.prototype,"open",void 0),ys([(0,r.ju)()],t.prototype,"select",void 0),ys([(0,r.ju)()],t.prototype,"created",void 0),ys([r.Zl],t)}(r.wA),Jj=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ks=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},Zm="e-rtl",US="EJS-SPLITBUTTON",$j=function(a){function t(e,i){return a.call(this,e,i)||this}return Jj(t,a),t.prototype.preRender=function(){var e=this.element;if(e.tagName===US){for(var i=(0,r.NA)("ej2_instances",e),s=this.createElement("button",{attrs:{type:"button"}}),n=this.createElement(US,{className:"e-"+this.getModuleName()+"-wrapper"}),o=0,l=e.attributes.length;o<l;o++)s.setAttribute(e.attributes[o].nodeName,e.attributes[o].nodeValue);e.parentNode.insertBefore(n,e),(0,r.og)(e),n.appendChild(e=s),(0,r.sO)("ej2_instances",i,e),this.wrapper=n,this.element=e}this.element.id||(this.element.id=(0,r.QI)("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},t.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},t.prototype.addItems=function(e,i){a.prototype.addItems.call(this,e,i),this.secondaryBtnObj.items=this.items},t.prototype.removeItems=function(e,i){a.prototype.removeItems.call(this,e,i),this.secondaryBtnObj.items=this.items},t.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(Zm),this.cssClass&&(0,r.cn)([this.wrapper],this.cssClass.replace(/\s+/g," ").trim().split(" "))},t.prototype.createPrimaryButton=function(){this.primaryBtnObj=new It({cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled}),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},t.prototype.createSecondaryButton=function(){var e=this,i=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(i),this.secondaryBtnObj=new gl({cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick,beforeItemRender:function(n){e.createPopupOnClick&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown),e.trigger("beforeItemRender",n)},open:function(n){e.trigger("open",n)},close:function(n){e.trigger("close",n)},select:function(n){e.trigger("select",n)},beforeOpen:function(n){e.createPopupOnClick&&0==e.items.length&&(e.secondaryBtnObj.dropDown.relateTo=e.wrapper,e.dropDown=e.secondaryBtnObj.dropDown);var o=new Ym;return e.trigger("beforeOpen",n,function(l){o.resolve(l)}),o},beforeClose:function(n){var o=new Ym;return e.trigger("beforeClose",n,function(l){o.resolve(l)}),o}}),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(i),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.isPopupCreated=this.secondaryBtnObj.isPopupCreated,this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right"),this.disabled&&this.wrapper.classList.add("e-splitbtn-disabled")},t.prototype.setAria=function(){(0,r.Y4)(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent?this.element.textContent+" splitbutton":"splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})},t.prototype.getModuleName=function(){return"split-btn"},t.prototype.toggle=function(){this.secondaryBtnObj.toggle()},t.prototype.destroy=function(){var e=this,i=[Zm];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var s=document.getElementById(this.element.id);s&&s.parentElement===this.wrapper&&(this.wrapper.tagName===US?(this.wrapper.innerHTML="",(0,r.IV)([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),(0,r.IV)([this.wrapper],this.cssClass.split(" "))):((0,r.IV)([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(n){e.element.removeAttribute(n)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),(0,r.Od)(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),a.prototype.destroy.call(this),this.element&&!this.element.getAttribute("class")&&this.element.removeAttribute("class"),this.refreshing&&this.isAngular&&(this.element=this.wrapper,["e-control","e-split-btn","e-lib"].forEach(function(n){e.element.classList.add(n)}),(0,r.sO)("ej2_instances",[this],this.element)),this.wrapper=null},t.prototype.wireEvents=function(){r.bi.add(this.element,"click",this.primaryBtnClickHandler,this),new r.nv(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow",enter:"enter"}})},t.prototype.unWireEvents=function(){r.bi.remove(this.element,"click",this.primaryBtnClickHandler),(0,r.s8)(this.element,r.nv).destroy()},t.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},t.prototype.btnKeyBoardHandler=function(e){switch(e.action){case"altdownarrow":this.clickHandler(e);break;case"enter":this.clickHandler(e),this.getPopUpElement()&&!this.getPopUpElement().classList.contains("e-popup-close")?(this.element.classList.remove("e-active"),this.secondaryBtnObj.element.classList.add("e-active")):this.secondaryBtnObj.element.classList.remove("e-active")}},t.prototype.onPropertyChanged=function(e,i){var s=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(gd(e,s)),s=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(e).indexOf("items")>-1&&(this.secondaryBtnObj.items=e.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(gd(e,s));for(var n=0,o=Object.keys(e);n<o.length;n++)switch(o[n]){case"cssClass":i.cssClass&&(0,r.IV)([this.wrapper],i.cssClass.split(" ")),(0,r.cn)([this.wrapper],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?(0,r.cn)([this.wrapper],Zm):(0,r.IV)([this.wrapper],Zm);break;case"disabled":e.disabled?(0,r.cn)([this.wrapper],"e-splitbtn-disabled"):(0,r.IV)([this.wrapper],"e-splitbtn-disabled")}},t.prototype.focusIn=function(){this.element.focus()},ks([(0,r.Z9)("")],t.prototype,"content",void 0),ks([(0,r.Z9)("")],t.prototype,"cssClass",void 0),ks([(0,r.Z9)(!1)],t.prototype,"disabled",void 0),ks([(0,r.Z9)("")],t.prototype,"iconCss",void 0),ks([(0,r.Z9)("Left")],t.prototype,"iconPosition",void 0),ks([(0,r.Z9)(!1)],t.prototype,"createPopupOnClick",void 0),ks([(0,r.FE)([],WS)],t.prototype,"items",void 0),ks([(0,r.Z9)("")],t.prototype,"target",void 0),ks([(0,r.ju)()],t.prototype,"beforeItemRender",void 0),ks([(0,r.ju)()],t.prototype,"beforeOpen",void 0),ks([(0,r.ju)()],t.prototype,"beforeClose",void 0),ks([(0,r.ju)()],t.prototype,"click",void 0),ks([(0,r.ju)()],t.prototype,"close",void 0),ks([(0,r.ju)()],t.prototype,"open",void 0),ks([(0,r.ju)()],t.prototype,"select",void 0),ks([(0,r.ju)()],t.prototype,"created",void 0),ks([r.Zl],t)}(gl),Ym=function(){return function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)}}();!function(a){var t,e=!0;function s(P){n(P.floatLabelType,P.element),P.element.addEventListener("focus",function(){var V=m(this);(V.classList.contains("e-input-group")||V.classList.contains("e-outline")||V.classList.contains("e-filled"))&&V.classList.add("e-input-focus"),"Auto"===P.floatLabelType&&setTimeout(function(){a.calculateWidth(P.element,V)},80)}),P.element.addEventListener("blur",function(){var V=m(this);(V.classList.contains("e-input-group")||V.classList.contains("e-outline")||V.classList.contains("e-filled"))&&V.classList.remove("e-input-focus"),"Auto"===P.floatLabelType&&""===P.element.value&&setTimeout(function(){a.calculateWidth(P.element,V)},80)}),P.element.addEventListener("input",function(){n(t,P.element)})}function n(P,V){var X=V.value,se=V.parentElement,oe=se.parentElement;""===X||(0,r.le)(X)?"Always"!==P&&(se&&se.classList.contains("e-input-group")?se.classList.remove("e-valid-input"):oe&&oe.classList.contains("e-input-group")&&oe.classList.remove("e-valid-input")):se&&se.classList.contains("e-input-group")?se.classList.add("e-valid-input"):oe&&oe.classList.contains("e-input-group")&&oe.classList.add("e-valid-input")}function o(){var P=m(this).getElementsByClassName("e-float-text")[0];(0,r.le)(P)||((0,r.cn)([P],"e-label-top"),P.classList.contains("e-label-bottom")&&(0,r.IV)([P],"e-label-bottom"))}function l(){var P=m(this);if(P.getElementsByTagName("textarea")[0]?""===P.getElementsByTagName("textarea")[0].value:""===P.getElementsByTagName("input")[0].value){var V=P.getElementsByClassName("e-float-text")[0];(0,r.le)(V)||(V.classList.contains("e-label-top")&&(0,r.IV)([V],"e-label-top"),(0,r.cn)([V],"e-label-bottom"))}}function h(P){P.addEventListener("focus",o),P.addEventListener("blur",l)}function u(P,V,X){var se=(0,r.le)(X)?r.az:X;"Auto"===P.floatLabelType&&h(P.element),(0,r.le)(V.container)?(V.container=S(P,"e-float-input","e-float-custom-tag","div",se),V.container.classList.add("e-input-group"),P.element.parentNode&&P.element.parentNode.insertBefore(V.container,P.element)):((0,r.le)(P.customTag)||V.container.classList.add("e-float-custom-tag"),V.container.classList.add("e-float-input"));var oe=se("span",{className:"e-float-line"}),ue=se("label",{className:"e-float-text"});if(!(0,r.le)(P.element.id)&&""!==P.element.id&&(ue.id="label_"+P.element.id.replace(/ /g,"_"),(0,r.Y4)(P.element,{"aria-labelledby":ue.id})),!(0,r.le)(P.element.placeholder)&&""!==P.element.placeholder&&(ue.innerText=I(P.element.placeholder),P.element.removeAttribute("placeholder")),!(0,r.le)(P.properties)&&!(0,r.le)(P.properties.placeholder)&&""!==P.properties.placeholder&&(ue.innerText=I(P.properties.placeholder)),ue.innerText||V.container.classList.add("e-no-float-label"),V.container.classList.contains("e-float-icon-left")){var Qe=V.container.querySelector(".e-input-in-wrap");Qe.appendChild(P.element),Qe.appendChild(oe),Qe.appendChild(ue)}else V.container.appendChild(P.element),V.container.appendChild(oe),V.container.appendChild(ue);g(P.element.value,ue),"Always"===P.floatLabelType&&(ue.classList.contains("e-label-bottom")&&(0,r.IV)([ue],"e-label-bottom"),(0,r.cn)([ue],"e-label-top")),"Auto"===P.floatLabelType&&(P.element.addEventListener("input",function(ni){b(P.element,P.floatLabelType)}),P.element.addEventListener("blur",function(ni){b(P.element,P.floatLabelType)})),(0,r.le)(P.element.getAttribute("id"))||ue.setAttribute("for",P.element.getAttribute("id"))}function p(P,V){"Always"===P&&V.classList.contains("e-outline")&&V.classList.add("e-valid-input")}function f(P,V,X){(0,r.le)(V)||(P&&!X?(0,r.IV)([V],"e-clear-icon-hide"):(0,r.cn)([V],"e-clear-icon-hide"))}function g(P,V,X){void 0===X&&(X=null),P?((0,r.cn)([V],"e-label-top"),V.classList.contains("e-label-bottom")&&(0,r.IV)([V],"e-label-bottom")):(null==X||X!==document.activeElement)&&(V.classList.contains("e-label-top")&&(0,r.IV)([V],"e-label-top"),(0,r.cn)([V],"e-label-bottom"))}function m(P){var V=(0,r.le)(P.parentNode)?P:P.parentNode;return V&&V.classList.contains("e-input-in-wrap")&&(V=V.parentNode),V}function y(P,V,X){(void 0===e||e)&&V.addEventListener("click",function(se){P.classList.contains("e-disabled")||P.readOnly||(se.preventDefault(),P!==document.activeElement&&P.focus(),P.value="",(0,r.cn)([V],"e-clear-icon-hide"))}),P.addEventListener("input",function(se){f(P.value,V)}),P.addEventListener("focus",function(se){f(P.value,V,P.readOnly)}),P.addEventListener("blur",function(se){setTimeout(function(){(0,r.le)(V)||((0,r.cn)([V],"e-clear-icon-hide"),V=!(0,r.le)(P)&&P.classList.contains("e-combobox")?null:V)},200)})}function b(P,V){if(m(P).classList.contains("e-float-input")&&"Auto"===V){var se=m(P).getElementsByClassName("e-float-text")[0];g(P.value,se,P)}}function S(P,V,X,se,oe){var Qe,ue=(0,r.le)(oe)?r.az:oe;return(0,r.le)(P.customTag)?Qe=ue(se,{className:V}):(Qe=ue(P.customTag,{className:V})).classList.add(X),Qe.classList.add("e-control-wrapper"),Qe}function I(P){var V="";if(!(0,r.le)(P)&&""!==P){var X=document.createElement("span");X.innerHTML='<input  placeholder="'+P+'"/>',V=X.children[0].placeholder}return V}function T(P,V,X){!(0,r.le)(X)&&""!==X&&(0,r.IV)(V,X.split(" ")),!(0,r.le)(P)&&""!==P&&(0,r.cn)(V,P.split(" "))}function O(P,V,X){var se="multiselect"===X?P:P.clientWidth-parseInt(getComputedStyle(P,null).getPropertyValue("padding-left"),10);(0,r.le)(V.getElementsByClassName("e-float-text-content")[0])||(V.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&V.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(se<V.getElementsByClassName("e-float-text-content")[0].clientWidth||se===V.getElementsByClassName("e-float-text-content")[0].clientWidth)&&V.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}function q(P,V){P=I(P);var X=m(V);X.classList.contains("e-float-input")?(0,r.le)(P)||""===P?(X.classList.add("e-no-float-label"),X.getElementsByClassName("e-float-text-content")[0]?X.getElementsByClassName("e-float-text")[0].children[0].textContent="":X.getElementsByClassName("e-float-text")[0].textContent=""):(X.getElementsByClassName("e-float-text-content")[0]?X.getElementsByClassName("e-float-text")[0].children[0].textContent=P:X.getElementsByClassName("e-float-text")[0].textContent=P,X.classList.remove("e-no-float-label"),V.removeAttribute("placeholder")):(0,r.le)(P)||""===P?V.removeAttribute("placeholder"):(0,r.Y4)(V,{placeholder:P})}function k(P,V,X){P?(0,r.Y4)(V,{readonly:""}):V.removeAttribute("readonly"),(0,r.le)(X)||b(V,X)}function R(P,V){P?(0,r.cn)(V,"e-rtl"):(0,r.IV)(V,"e-rtl")}function D(P,V,X,se){var oe={disabled:"disabled","aria-disabled":"true"},ue=!(0,r.le)(se);P?(V.classList.remove("e-disabled"),Y(oe,V),ue&&(0,r.IV)([se],"e-disabled")):(V.classList.add("e-disabled"),H(oe,V),ue&&(0,r.cn)([se],"e-disabled")),(0,r.le)(X)||b(V,X)}function z(P,V,X,se,oe){var ue=(0,r.le)(oe)?r.az:oe;P?X.clearButton=function(P,V,X,se){var ue=((0,r.le)(se)?r.az:se)("span",{className:"e-clear-icon"}),Qe=V.container;return(0,r.le)(X)?(V.container.classList.contains("e-float-input")?V.container.querySelector(".e-float-text"):P).insertAdjacentElement("afterend",ue):Qe.appendChild(ue),(0,r.cn)([ue],"e-clear-icon-hide"),y(P,ue),ue.setAttribute("aria-label","close"),ue}(V,X,se,ue):((0,r.Od)(X.clearButton),X.clearButton=null)}function Y(P,V){for(var X=0,se=Object.keys(P);X<se.length;X++){var oe=se[X],ue=m(V);"disabled"===oe&&V.classList.remove("e-disabled"),"disabled"===oe&&ue.classList.contains("e-input-group")&&ue.classList.remove("e-disabled"),"placeholder"===oe&&ue.classList.contains("e-float-input")?ue.getElementsByClassName("e-float-text")[0].textContent="":V.removeAttribute(oe)}}function H(P,V){for(var X=0,se=Object.keys(P);X<se.length;X++){var oe=se[X],ue=m(V);"disabled"===oe&&V.classList.add("e-disabled"),"disabled"===oe&&ue.classList.contains("e-input-group")&&ue.classList.add("e-disabled"),"placeholder"===oe&&ue.classList.contains("e-float-input")?ue.getElementsByClassName("e-float-text")[0].textContent=P[""+oe]:V.setAttribute(oe,P[""+oe])}}function J(P,V){if(P.classList.contains("e-outline")&&P.getElementsByClassName("e-float-text")[0]){var X=V("span",{className:"e-float-text-content"});X.innerHTML=P.getElementsByClassName("e-float-text")[0].innerHTML,P.getElementsByClassName("e-float-text")[0].innerHTML="",P.getElementsByClassName("e-float-text")[0].appendChild(X)}}function ce(P,V,X){var se=[];se.push(X);var oe=(0,r.le)(X)?V.querySelectorAll(".e-input-group-icon"):se;if(P&&oe.length>0)for(var ue=0;ue<oe.length;ue++)oe[parseInt(ue.toString())].addEventListener("mousedown",me,!1),oe[parseInt(ue.toString())].addEventListener("mouseup",ae,!1);else if(oe.length>0)for(ue=0;ue<oe.length;ue++)oe[parseInt(ue.toString())].removeEventListener("mousedown",me,this),oe[parseInt(ue.toString())].removeEventListener("mouseup",ae,this)}function me(){for(var V=this.parentElement;!V.classList.contains("e-input-group");)V=V.parentElement;!function(P,V){!P.classList.contains("e-disabled")&&!P.querySelector("input").readOnly&&V.classList.add("e-input-btn-ripple")}(V,this)}function ae(){var P=this;setTimeout(function(){P.classList.remove("e-input-btn-ripple")},500)}function ke(P,V){var X=V("span",{className:P});return X.classList.add("e-input-group-icon"),X}function xe(P,V,X,se){var oe=(0,r.le)(se)?r.az:se,ue=ke(P,oe);V.classList.add("e-float-icon-left");var Qe=V.querySelector(".e-input-in-wrap");if((0,r.le)(Qe)){Qe=oe("span",{className:"e-input-in-wrap"}),X.parentNode.insertBefore(Qe,X);var ni=V.querySelectorAll(X.tagName+" ~ *");Qe.appendChild(X);for(var Ht=0;Ht<ni.length;Ht++){var ji=ni[parseInt(Ht.toString())],zs=Qe.parentElement;(!ji.classList.contains("e-float-line")||(!zs||!zs.classList.contains("e-filled"))&&zs)&&Qe.appendChild(ji)}}return Qe.parentNode.insertBefore(ue,Qe),ce(!0,V,ue),ue}function vt(P,V,X){var oe=ke(P,(0,r.le)(X)?r.az:X);return(V.classList.contains("e-float-icon-left")?V.querySelector(".e-input-in-wrap"):V).appendChild(oe),ce(!0,V,oe),oe}function Ce(P,V){"hidden"===V.type?P.classList.add("e-hidden"):P.classList.contains("e-hidden")&&P.classList.remove("e-hidden")}a.createInput=function(P,V){var X=(0,r.le)(V)?r.az:V,se={container:null,buttons:[],clearButton:null};if(t=P.floatLabelType,e=P.bindClearAction,(0,r.le)(P.floatLabelType)||"Never"===P.floatLabelType?(se.container=S(P,"e-input-group","e-input-custom-tag","span",X),P.element.parentNode.insertBefore(se.container,P.element),(0,r.cn)([P.element],"e-input"),se.container.appendChild(P.element)):u(P,se,X),s(P),!(0,r.le)(P.properties)&&!(0,r.le)(P.properties.showClearButton)&&P.properties.showClearButton&&(z(P.properties.showClearButton,P.element,se,!0,X),se.clearButton.setAttribute("role","button"),se.container.classList.contains("e-float-input")&&(0,r.cn)([se.container],"e-input-group")),!(0,r.le)(P.buttons))for(var oe=0;oe<P.buttons.length;oe++)se.buttons.push(vt(P.buttons[oe],se.container,X));return!(0,r.le)(P.element)&&"TEXTAREA"===P.element.tagName&&(0,r.cn)([se.container],"e-multi-line-input"),Ce(se.container,P.element),J((se=function(P,V){if(!(0,r.le)(P.properties))for(var X=0,se=Object.keys(P.properties);X<se.length;X++)switch(se[X]){case"cssClass":T(P.properties.cssClass,[V.container]),p(P.floatLabelType,V.container);break;case"enabled":D(P.properties.enabled,P.element,P.floatLabelType,V.container);break;case"enableRtl":R(P.properties.enableRtl,[V.container]);break;case"placeholder":q(P.properties.placeholder,P.element);break;case"readonly":k(P.properties.readonly,P.element)}return V}(P,se)).container,X),se},a.bindInitialEvent=s,a.wireFloatingEvents=h,a.wireClearBtnEvents=y,a.destroy=function(){},a.setValue=function(P,V,X,se){if(V.value=P,"Auto"===X&&""===P&&O(V,V.parentElement),!(0,r.le)(X)&&"Auto"===X&&b(V,X),!(0,r.le)(se)&&se){var oe=m(V);if(!(0,r.le)(oe)){var ue=oe.getElementsByClassName("e-clear-icon")[0];(0,r.le)(ue)||(V.value&&!(0,r.le)(oe)&&oe.classList.contains("e-input-focus")?(0,r.IV)([ue],"e-clear-icon-hide"):(0,r.cn)([ue],"e-clear-icon-hide"))}}n(X,V)},a.setCssClass=T,a.calculateWidth=O,a.setWidth=function(P,V){"number"==typeof P?V.style.width=(0,r.Ac)(P):"string"==typeof P&&(V.style.width=P.match(/px|%|em/)?P:(0,r.Ac)(P)),O(V.firstChild,V)},a.setPlaceholder=q,a.setReadonly=k,a.setEnableRtl=R,a.setEnabled=D,a.setClearButton=z,a.removeAttributes=Y,a.addAttributes=H,a.removeFloating=function(P){var V=P.container;if(!(0,r.le)(V)&&V.classList.contains("e-float-input")){var X=V.querySelector("textarea")?V.querySelector("textarea"):V.querySelector("input"),se=V.querySelector(".e-float-text").textContent,oe=null!==V.querySelector(".e-clear-icon");(0,r.og)(V.querySelector(".e-float-line")),(0,r.og)(V.querySelector(".e-float-text")),(0,r.s1)(V,["e-input-group"],["e-float-input"]),function(P){P.removeEventListener("focus",o),P.removeEventListener("blur",l)}(X),(0,r.Y4)(X,{placeholder:se}),X.classList.add("e-input"),!oe&&"INPUT"===X.tagName&&X.removeAttribute("required")}},a.addFloating=function(P,V,X,se){var oe=(0,r.le)(se)?r.az:se,ue=(0,r.oq)(P,".e-input-group");if(t=V,"Never"!==V){var Qe=ue.tagName,ni={element:P,floatLabelType:V,customTag:Qe="DIV"!==Qe&&"SPAN"!==Qe?Qe:null,properties:{placeholder:X}},Ht=ue.querySelector(".e-clear-icon"),ji={container:ue};P.classList.remove("e-input"),u(ni,ji,oe),J(ji.container,oe),O(ni.element,ji.container);var zs=ue.classList.contains("e-float-icon-left");if((0,r.le)(Ht)&&(Ht=zs?ue.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):ue.querySelector(".e-input-group-icon")),(0,r.le)(Ht))zs&&(Ht=ue.querySelector(".e-input-group-icon"));else{var uA=ue.querySelector(".e-float-line"),AH=ue.querySelector(".e-float-text"),EC=zs?ue.querySelector(".e-input-in-wrap"):ue;EC.insertBefore(P,Ht),EC.insertBefore(uA,Ht),EC.insertBefore(AH,Ht)}}p(V,P.parentElement)},a.createSpanElement=J,a.setRipple=function(P,V){for(var X=0;X<V.length;X++)ce(P,V[parseInt(X.toString())].container)},a.addIcon=function(P,V,X,se,oe){var ue="string"==typeof V?V.split(","):V;if("append"===P.toLowerCase())for(var Qe=0,ni=ue;Qe<ni.length;Qe++)vt(ni[Qe],X,oe);else for(var ji=0,zs=ue;ji<zs.length;ji++)xe(zs[ji],X,se,oe);X.getElementsByClassName("e-input-group-icon")[0]&&X.getElementsByClassName("e-float-text-overflow")[0]&&X.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},a.prependSpan=xe,a.appendSpan=vt,a.validateInputType=Ce}(N||(N={}));var $O,iq=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xt=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},YS="e-input-group-icon",KS="e-spin-up",XS="e-error",ou="increment",vd="decrement",rq=new RegExp("^(-)?(\\d*)$"),gL="e-input-focus",mL=["title","style","class"],vL=0,wr=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.isVue=!1,s.preventChange=!1,s.isAngular=!1,s.isDynamicChange=!1,s.numericOptions=e,s}return iq(t,a),t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=(0,r.NA)("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),(0,r.IV)([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=(0,r.oq)(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var i=this.createElement("input"),s=0;s<this.element.attributes.length;s++){var n=this.element.attributes[s].nodeName;"id"!==n&&"class"!==n?(i.setAttribute(this.element.attributes[s].nodeName,this.element.attributes[s].nodeValue),i.innerHTML=this.element.innerHTML):"class"===n&&i.setAttribute(n,this.element.className.split(" ").filter(function(l){return 0!==l.indexOf("ng-")}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(i),this.element=i,(0,r.sO)("ej2_instances",e,this.element)}(0,r.Y4)(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"}),this.l10n=new r.E7("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",(0,r.QI)("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!(0,r.le)((0,r.oq)(this.element,"fieldset"))&&(0,r.oq)(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var s=0,n=e?(0,r.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];s<n.length;s++){var o=n[s];if(!(0,r.le)(this.element.getAttribute(o)))switch(o){case"disabled":if((0,r.le)(this.numericOptions)||void 0===this.numericOptions.enabled||e){var l=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:l},!e)}break;case"readonly":if((0,r.le)(this.numericOptions)||void 0===this.numericOptions.readonly||e){var h="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:h},!e)}break;case"placeholder":((0,r.le)(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if((0,r.le)(this.numericOptions)||void 0===this.numericOptions.value||e){var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));this.setProperties((0,r.sO)(o,c,{}),!e)}break;case"min":if((0,r.le)(this.numericOptions)||void 0===this.numericOptions.min||e){var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==u&&!isNaN(u)&&this.setProperties((0,r.sO)(o,u,{}),!e)}break;case"max":if((0,r.le)(this.numericOptions)||void 0===this.numericOptions.max||e){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==p&&!isNaN(p)&&this.setProperties((0,r.sO)(o,p,{}),!e)}break;case"step":if((0,r.le)(this.numericOptions)||void 0===this.numericOptions.step||e){var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==d&&!isNaN(d)&&this.setProperties((0,r.sO)(o,d,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(o);break;case"name":this.inputName=this.element.getAttribute(o);break;default:var f=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));(null!==f&&!isNaN(f)||"value"===o)&&this.setProperties((0,r.sO)(o,f,{}),!0)}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new r.eC(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==(0,r.NA)("currency",this)&&((0,r.sO)("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;!(0,r.le)(this.cssClass)&&""!==this.cssClass&&(e=this.getNumericValidClassList(this.cssClass));var i=N.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&(0,r.Y4)(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true","aria-label":"hidden",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),(0,r.Y4)(this.hiddenInput,this.isAngular&&"EJS-NUMERICTEXTBOX"===this.angularTagName&&this.cloneElement.id.length>0?{name:this.cloneElement.id}:{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&(0,r.Y4)(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var i={};if(e)i=this.htmlAttributes;else for(var s=0;s<this.element.attributes.length;s++)i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name);for(var n=0,o=Object.keys(i);n<o.length;n++){var l=o[n];0===l.indexOf("data")&&this.hiddenInput.setAttribute(l,i[""+l])}},t.prototype.updateHTMLAttrToElement=function(){if(!(0,r.le)(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];mL.indexOf(s)<0&&this.element.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.updateCssClass=function(e,i){N.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(i))},t.prototype.getNumericValidClassList=function(e){var i=e;return!(0,r.le)(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.updateHTMLAttrToWrapper=function(){if(!(0,r.le)(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];if(mL.indexOf(s)>-1)if("class"===s){var n=this.getNumericValidClassList(this.htmlAttributes[""+s]);""!==n&&(0,r.cn)([this.container],n.split(" "))}else if("style"===s){var o=this.container.getAttribute(s);o=(0,r.le)(o)?this.htmlAttributes[""+s]:o+this.htmlAttributes[""+s],this.container.setAttribute(s,o)}else this.container.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.setElementWidth=function(e){(0,r.le)(e)||("number"==typeof e?this.container.style.width=(0,r.Ac)(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:(0,r.Ac)(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=N.appendSpan(YS+" e-spin-down",this.container,this.createElement),(0,r.Y4)(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=N.appendSpan(YS+" "+KS,this.container,this.createElement),(0,r.Y4)(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&(0,r.Y4)(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&(0,r.Y4)(this.element,{"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,i){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(i)},t.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,i){this.isInteract=!0;var s=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(s,this.step,e)),this.raiseChangeEvent(i)},t.prototype.checkErrorClass=function(){this.isValidState?(0,r.IV)([this.container],XS):(0,r.cn)([this.container],XS),(0,r.Y4)(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&r.bi.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",(0,r.oq)(this.element,"form")){var s=this.element.nextElementSibling,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),s.dispatchEvent(n)}},t.prototype.resetFormHandler=function(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)},t.prototype.setSpinButton=function(){(0,r.le)(this.spinDown)||(0,r.Y4)(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),(0,r.le)(this.spinUp)||(0,r.Y4)(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){r.bi.add(this.element,"focus",this.focusHandler,this),r.bi.add(this.element,"blur",this.focusOutHandler,this),r.bi.add(this.element,"keydown",this.keyDownHandler,this),r.bi.add(this.element,"keyup",this.keyUpHandler,this),r.bi.add(this.element,"input",this.inputHandler,this),r.bi.add(this.element,"keypress",this.keyPressHandler,this),r.bi.add(this.element,"change",this.changeHandler,this),r.bi.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&r.bi.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){r.bi.add(this.spinUp,r.AR.touchStartEvent,this.mouseDownOnSpinner,this),r.bi.add(this.spinDown,r.AR.touchStartEvent,this.mouseDownOnSpinner,this),r.bi.add(this.spinUp,r.AR.touchEndEvent,this.mouseUpOnSpinner,this),r.bi.add(this.spinDown,r.AR.touchEndEvent,this.mouseUpOnSpinner,this),r.bi.add(this.spinUp,r.AR.touchMoveEvent,this.touchMoveOnSpinner,this),r.bi.add(this.spinDown,r.AR.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){r.bi.remove(this.element,"focus",this.focusHandler),r.bi.remove(this.element,"blur",this.focusOutHandler),r.bi.remove(this.element,"keyup",this.keyUpHandler),r.bi.remove(this.element,"input",this.inputHandler),r.bi.remove(this.element,"keydown",this.keyDownHandler),r.bi.remove(this.element,"keypress",this.keyPressHandler),r.bi.remove(this.element,"change",this.changeHandler),r.bi.remove(this.element,"paste",this.pasteHandler),this.formEle&&r.bi.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){r.bi.remove(this.spinUp,r.AR.touchStartEvent,this.mouseDownOnSpinner),r.bi.remove(this.spinDown,r.AR.touchStartEvent,this.mouseDownOnSpinner),r.bi.remove(this.spinUp,r.AR.touchEndEvent,this.mouseUpOnSpinner),r.bi.remove(this.spinDown,r.AR.touchEndEvent,this.mouseUpOnSpinner),r.bi.remove(this.spinUp,r.AR.touchMoveEvent,this.touchMoveOnSpinner),r.bi.remove(this.spinDown,r.AR.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,e)},t.prototype.raiseChangeEvent=function(e){if(this.inputValue=(0,r.le)(this.inputValue)||isNaN(this.inputValue)?null:this.inputValue,this.prevValue!==this.value||this.prevValue!==this.inputValue){var i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),(0,r.TS)(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}},t.prototype.pasteHandler=function(){var e=this;if(this.enabled&&!this.readonly){var i=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(i)})}},t.prototype.preventHandler=function(){var e=this,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var s=e.element.selectionStart,n=e.element.selectionStart-1,l=e.element.value.split(""),h=(0,r.NE)(e.locale),c=(0,r.NA)("decimal",h),u=c.charCodeAt(0);" "===e.element.value[n]&&e.element.selectionStart>0&&!i?((0,r.le)(e.prevVal)?e.element.value=e.element.value.trim():0!==n?e.element.value=e.prevVal:0===n&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(n,n)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(l.indexOf(e.element.value[e.element.selectionStart-1])!==l.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===u||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==u)&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(s,e.element.value.length),e.element.setSelectionRange(n,n),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(l.indexOf(e.element.value[e.element.selectionStart-2])!==l.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===u||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==u)&&(e.element.setSelectionRange(n,n),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&(45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(e.element.value=(0,r.le)(e.prevVal)?e.element.value:e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===c&&0===e.decimals&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(s,e.element.value.length))),e.prevVal=e.element.value}})},t.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&r.AR.isDevice&&this.preventHandler();var i=this.instance.getNumberParser({format:"n"})(this.element.value);if(i=null===i||isNaN(i)?null:i,this.hiddenInput.value=i||0===i?i.toString():null,(0,r.oq)(this.element,"form")){var n=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),n.dispatchEvent(o)}}},t.prototype.inputHandler=function(e){if(this.enabled&&!this.readonly){var s=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||s)&&r.AR.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==(0,r.NA)("decimal",(0,r.NE)(this.locale))&&this.element.value!==(0,r.NA)("minusSign",(0,r.NE)(this.locale))){var o=this.instance.getNumberParser({format:"n"})(this.element.value);o=isNaN(o)?null:o,this.localChange({value:o}),this.preventChange=!0}if(this.isVue){var l=this.instance.getNumberParser({format:"n"})(this.element.value),h=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(l=this.value);var u={event:e,value:null===l||isNaN(l)?null:l,previousValue:null===h||isNaN(h)?null:h};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",u)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(ou,e);break;case 40:e.preventDefault(),this.action(vd,e)}},t.prototype.performAction=function(e,i,s){(null===e||isNaN(e))&&(e=0);var n=s===ou?e+i:e-i;return n=this.correctRounding(e,i,n),this.strictMode?this.trimValue(n):n},t.prototype.correctRounding=function(e,i,s){var n=new RegExp("[,.](.*)"),o=n.test(e.toString()),l=n.test(i.toString());if(o||l){var h=o?n.exec(e.toString())[0].length:0,c=l?n.exec(i.toString())[0].length:0,u=Math.max(h,c);return this.roundValue(s,u)}return s},t.prototype.roundValue=function(e,i){i=i||0;var s=Math.pow(10,i);return Math.round(e*=s)/s},t.prototype.updateValue=function(e,i){i&&(this.isInteract=!0),null!==e&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.inputValue=e,this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(i)},t.prototype.updateCurrency=function(e,i){(0,r.sO)(e,i,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(e||0===e){var i=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,i)},!0)}else this.setProperties({value:e=null},!0);this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||0===this.value){var e=this.formatNumber(),i=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),(0,r.Y4)(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,i){N.setValue(e,i||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var i,s=new RegExp("[eE][-+]?([0-9]+)"),n=e.toString();if(s.test(n)){var o=s.exec(n);(0,r.le)(o)||(n=e.toFixed(Math.min(parseInt(o[1],10),20)))}var l=n.split(".")[1];return i=l&&l.length?l.length:0,null!==this.decimals&&(i=i<this.decimals?i:this.decimals),i},t.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,i){var s=e,n=i||0,o=s.toString().split("e"),l=(s=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+n:n)))).toString().split("e");return s=Number(l[0]+"e"+(l[1]?Number(l[1])-n:-n)),Number(s.toFixed(n))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!r.AR.isDevice&&"11.0"===r.AR.info.version&&13===e.keyCode){var i=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(i,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var s=String.fromCharCode(e.which),n=(0,r.NA)("decimal",(0,r.NE)(this.locale)),o="NumpadDecimal"===e.code&&s!==n;o&&(s=n);var l=this.element.value;if(l=l.substring(0,this.element.selectionStart)+s+l.substring(this.element.selectionEnd),this.numericRegex().test(l)){if(o){var h=this.element.selectionStart+1;this.element.value=l,this.element.setSelectionRange(h,h),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},t.prototype.numericRegex=function(){var e=(0,r.NE)(this.locale),i=(0,r.NA)("decimal",e),s="*";return"."===i&&(i="\\"+i),0===this.decimals&&this.validateDecimalOnType?rq:(this.decimals&&this.validateDecimalOnType&&(s="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+i+"\\d"+s+")?)|("+i+"\\d"+s+")))?$"))},t.prototype.mouseWheel=function(e){var i;e.preventDefault(),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i>0?this.action(ou,e):i<0&&this.action(vd,e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var i=this;if(clearTimeout(vL),this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,(0,r.IV)([this.container],XS),this.prevValue=this.value,this.value||0===this.value){var s=this.formatNumber();this.setElementValue(s),this.isPrevFocused||(r.AR.isDevice||"11.0"!==r.AR.info.version?vL=setTimeout(function(){i.element.setSelectionRange(0,s.length)},r.AR.isDevice&&r.AR.isIos?600:0):this.element.setSelectionRange(0,s.length))}r.AR.isDevice||r.bi.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var i=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),r.AR.isDevice){var s=this.element.value;this.element.focus(),this.isPrevFocused=!1;var n=this.element;setTimeout(function(){i.setElementValue(s,n)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var o=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(o),r.AR.isDevice||r.bi.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if((0,r.oq)(this.element,"form")){var h=this.element.nextElementSibling,c=document.createEvent("FocusEvent");c.initEvent("focusout",!1,!0),h.dispatchEvent(c)}}},t.prototype.mouseDownOnSpinner=function(e){var i=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var n=e.currentTarget,o=n.classList.contains(KS)?ou:vd;r.bi.add(n,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0,i.action(o,e)},150),r.bi.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){var i;if("touchmove"===e.type){var s=e.touches;i=s.length&&document.elementFromPoint(s[0].pageX,s[0].pageY)}else i=document.elementFromPoint(e.clientX,e.clientY);i.classList.contains(YS)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),r.AR.isDevice||(this.isPrevFocused=!1)),r.AR.isDevice||e.preventDefault(),this.getElementData(e)){var i=e.currentTarget,s=i.classList.contains(KS)?ou:vd;if(r.bi.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(s,e),this.isCalled=!1,r.bi.remove(document,"mouseup",this.mouseUpClick),(0,r.oq)(this.element,"form")){var o=this.element.nextElementSibling,l=document.createEvent("KeyboardEvent");l.initEvent("keyup",!1,!0),o.dispatchEvent(l)}}},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))},t.prototype.floatLabelTypeUpdate=function(){N.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),N.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&r.bi.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&r.bi.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,ou)),this.raiseChangeEvent()},t.prototype.decrement=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,vd)),this.raiseChangeEvent()},t.prototype.destroy=function(){this.unwireEvents(),(0,r.og)(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),(0,r.og)(this.spinUp),(0,r.og)(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),(0,r.og)(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,N.destroy(),a.prototype.destroy.call(this)},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),(0,r.cn)([this.container],[gL]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),(0,r.IV)([this.container],[gL]))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i){for(var s=0,n=Object.keys(e);s<n.length;s++){var o=n[s];switch(o){case"width":this.setElementWidth(e.width),N.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"enabled":N.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":N.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":N.setReadonly(e.readonly,this.element),this.readonly?(0,r.Y4)(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),N.validateInputType(this.container,this.element);break;case"placeholder":N.setPlaceholder(e.placeholder,this.element),N.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":(0,r.sO)(o,(0,r.NA)(o,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),N.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var l=(0,r.NA)(o,e);this.setProperties({currencyCode:l},!0),this.updateCurrency(o,l);break;case"currencyCode":var h=(0,r.NA)(o,e);this.setProperties({currency:h},!0),this.updateCurrency("currency",h);break;case"format":(0,r.sO)(o,(0,r.NA)(o,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){N.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},t.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():((0,r.og)(this.spinUp),(0,r.og)(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},Xt([(0,r.Z9)("")],t.prototype,"cssClass",void 0),Xt([(0,r.Z9)(null)],t.prototype,"value",void 0),Xt([(0,r.Z9)(-Number.MAX_VALUE)],t.prototype,"min",void 0),Xt([(0,r.Z9)(Number.MAX_VALUE)],t.prototype,"max",void 0),Xt([(0,r.Z9)(1)],t.prototype,"step",void 0),Xt([(0,r.Z9)(null)],t.prototype,"width",void 0),Xt([(0,r.Z9)(null)],t.prototype,"placeholder",void 0),Xt([(0,r.Z9)({})],t.prototype,"htmlAttributes",void 0),Xt([(0,r.Z9)(!0)],t.prototype,"showSpinButton",void 0),Xt([(0,r.Z9)(!1)],t.prototype,"readonly",void 0),Xt([(0,r.Z9)(!0)],t.prototype,"enabled",void 0),Xt([(0,r.Z9)(!1)],t.prototype,"showClearButton",void 0),Xt([(0,r.Z9)(!1)],t.prototype,"enablePersistence",void 0),Xt([(0,r.Z9)("n2")],t.prototype,"format",void 0),Xt([(0,r.Z9)(null)],t.prototype,"decimals",void 0),Xt([(0,r.Z9)(null)],t.prototype,"currency",void 0),Xt([(0,r.Z9)(null)],t.prototype,"currencyCode",void 0),Xt([(0,r.Z9)(!0)],t.prototype,"strictMode",void 0),Xt([(0,r.Z9)(!1)],t.prototype,"validateDecimalOnType",void 0),Xt([(0,r.Z9)("Never")],t.prototype,"floatLabelType",void 0),Xt([(0,r.ju)()],t.prototype,"created",void 0),Xt([(0,r.ju)()],t.prototype,"destroyed",void 0),Xt([(0,r.ju)()],t.prototype,"change",void 0),Xt([(0,r.ju)()],t.prototype,"focus",void 0),Xt([(0,r.ju)()],t.prototype,"blur",void 0),Xt([r.Zl],t)}(r.wA),yd=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_e=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},Aq=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return yd(t,a),_e([(0,r.Z9)("None")],t.prototype,"placement",void 0),_e([(0,r.Z9)(10)],t.prototype,"largeStep",void 0),_e([(0,r.Z9)(1)],t.prototype,"smallStep",void 0),_e([(0,r.Z9)(!1)],t.prototype,"showSmallTicks",void 0),_e([(0,r.Z9)(null)],t.prototype,"format",void 0),t}(r.rt),Dq=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return yd(t,a),_e([(0,r.Z9)(null)],t.prototype,"color",void 0),_e([(0,r.Z9)(null)],t.prototype,"start",void 0),_e([(0,r.Z9)(null)],t.prototype,"end",void 0),t}(r.rt),Lq=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return yd(t,a),_e([(0,r.Z9)(!1)],t.prototype,"enabled",void 0),_e([(0,r.Z9)(null)],t.prototype,"minStart",void 0),_e([(0,r.Z9)(null)],t.prototype,"minEnd",void 0),_e([(0,r.Z9)(null)],t.prototype,"maxStart",void 0),_e([(0,r.Z9)(null)],t.prototype,"maxEnd",void 0),_e([(0,r.Z9)(!1)],t.prototype,"startHandleFixed",void 0),_e([(0,r.Z9)(!1)],t.prototype,"endHandleFixed",void 0),t}(r.rt),Oq=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return yd(t,a),_e([(0,r.Z9)("")],t.prototype,"cssClass",void 0),_e([(0,r.Z9)("Before")],t.prototype,"placement",void 0),_e([(0,r.Z9)("Focus")],t.prototype,"showOn",void 0),_e([(0,r.Z9)(!1)],t.prototype,"isVisible",void 0),_e([(0,r.Z9)(null)],t.prototype,"format",void 0),t}(r.rt),WL=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.horDir="left",s.verDir="bottom",s.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},s.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},s.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",s.customAriaText=null,s.drag=!0,s.isDragComplete=!1,s.initialTooltip=!0,s}return yd(t,a),t.prototype.preRender=function(){this.l10n=new r.E7("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},t.prototype.formChecker=function(){var e=(0,r.oq)(this.element,"form");e?(this.isForm=!0,(0,r.le)(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!(0,r.le)(this.formResetValue)&&"object"==typeof this.formResetValue?(0,r.le)(this.formResetValue)&&(this.formResetValue=parseFloat((0,r.Ac)(this.min))):this.formResetValue=[parseFloat((0,r.Ac)(this.min)),parseFloat((0,r.Ac)(this.max))],this.formElement=e):this.isForm=!1},t.prototype.initCultureFunc=function(){this.internationalization=new r.eC(this.locale)},t.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=(0,r.le)(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=(0,r.le)(this.ticks.format)?null:this.ticks.format},t.prototype.formatString=function(e,i){var s=null,n=null;if(e||0===e){s=this.formatNumber(e);var o=this.numberOfDecimals(e);n=this.internationalization.getNumberFormat(i)(this.makeRoundNumber(e,o))}return{elementVal:s,formatString:n}},t.prototype.formatNumber=function(e){var i=this.numberOfDecimals(e);return this.internationalization.getNumberFormat({maximumFractionDigits:i,minimumFractionDigits:i,useGrouping:!1})(e)},t.prototype.numberOfDecimals=function(e){var i=e.toString().split(".")[1];return i&&i.length?i.length:0},t.prototype.makeRoundNumber=function(e,i){return Number(e.toFixed(i||0))},t.prototype.fractionalToInteger=function(e){e=0===this.numberOfDecimals(e)?Number(e).toFixed(this.noOfDecimals):e;for(var i=1,s=0;s<this.noOfDecimals;s++)i*=10;return Number((e*i).toFixed(0))},t.prototype.render=function(){var e=this;this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"==this.getTheme(this.sliderContainer)&&setTimeout(function(){e.refresh()},0)},t.prototype.initialize=function(){(0,r.cn)([this.element],"e-slider"),this.setCSSClass()},t.prototype.setElementWidth=function(e){!(0,r.le)(e)&&!(0,r.le)(this.sliderContainer)&&("number"==typeof e?this.sliderContainer.style.width=(0,r.Ac)(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:(0,r.Ac)(e)))},t.prototype.setCSSClass=function(e){e&&(0,r.IV)([this.element],e.split(" ")),this.cssClass&&(0,r.cn)([this.element],this.cssClass.split(" "))},t.prototype.setEnabled=function(){this.enabled?((0,r.IV)([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove("e-disabled"),this.wireEvents()):((0,r.cn)([this.sliderContainer],["e-disabled"]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add("e-disabled"),this.unwireEvents())},t.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},t.prototype.initRender=function(){this.sliderContainer=this.createElement("div",{className:"e-slider-container e-control-wrapper"}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:"e-slider-track"}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:(0,r.le)(this.value)?this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:"e-slider-input"}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=(0,r.le)(this.value)?parseFloat((0,r.Ac)(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat((0,r.Ac)(this.value.toString()))):[this.checkHandleValue(parseFloat((0,r.Ac)(this.value[0].toString()))),this.checkHandleValue(parseFloat((0,r.Ac)(this.value[1].toString())))],this.previousChanged=this.previousVal,(0,r.le)(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?(0,r.IV)([this.sliderContainer],["e-disabled"]):(0,r.cn)([this.sliderContainer],["e-disabled"]),this.readonly?(0,r.cn)([this.sliderContainer],["e-read-only"]):(0,r.IV)([this.sliderContainer],["e-read-only"])},t.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isMaterial3="Material3"===this.getTheme(this.sliderContainer)||"Material3-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isFluent="FluentUI"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=(this.isMaterial||this.isMaterial3)&&"Range"!==this.type&&this.tooltip.isVisible},t.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:"e-range"}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&this.rangeBar.classList.add("Horizontal"===this.orientation?"e-drag-horizontal":"e-drag-vertical"))},t.prototype.createLimitBar=function(){var e="Range"!==this.type?"e-limit-bar":"e-limit-first";this.limitBarFirst=this.createElement("div",{attrs:{class:e+=" e-limits"}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:"e-limit-second e-limits"}}),this.element.appendChild(this.limitBarSecond))},t.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove("e-vertical"),this.sliderContainer.classList.add("e-horizontal"),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove("e-horizontal"),this.sliderContainer.classList.add("e-vertical"),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},t.prototype.setAriaAttributes=function(e){var i=this,s=this.min,n=this.max;!(0,r.le)(this.customValues)&&this.customValues.length>0&&(s=this.customValues[0],n=this.customValues[this.customValues.length-1]),"Range"!==this.type?(0,r.Y4)(e,{"aria-valuemin":s.toString(),"aria-valuemax":n.toString()}):(!(0,r.le)(this.customValues)&&this.customValues.length>0?[[s.toString(),this.customValues[this.value[1]].toString()],[this.customValues[this.value[0]].toString(),n.toString()]]:[[s.toString(),this.value[1].toString()],[this.value[0].toString(),n.toString()]]).forEach(function(l,h){var c=0===h?i.firstHandle:i.secondHandle;c&&(0,r.Y4)(c,{"aria-valuemin":l[0],"aria-valuemax":l[1]})})},t.prototype.createSecondHandle=function(){this.secondHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0","aria-label":"slider"}}),this.secondHandle.classList.add("e-handle-second"),this.element.appendChild(this.secondHandle)},t.prototype.createFirstHandle=function(){this.firstHandle=this.createElement("div",{attrs:{class:"e-handle",role:"slider",tabIndex:"0","aria-label":"slider"}}),this.firstHandle.classList.add("e-handle-first"),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:"e-handle e-material-handle"}}),this.element.appendChild(this.materialHandle))},t.prototype.wireFirstHandleEvt=function(e){e?(r.bi.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),r.bi.remove(this.firstHandle,"transitionend",this.transitionEnd),r.bi.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),r.bi.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(r.bi.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),r.bi.add(this.firstHandle,"transitionend",this.transitionEnd,this),r.bi.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),r.bi.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.wireSecondHandleEvt=function(e){e?(r.bi.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),r.bi.remove(this.secondHandle,"transitionend",this.transitionEnd),r.bi.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),r.bi.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(r.bi.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),r.bi.add(this.secondHandle,"transitionend",this.transitionEnd,this),r.bi.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),r.bi.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},t.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"]("e-handle-start"),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"]("e-material-tooltip-start")))},t.prototype.transitionEnd=function(e){"transform"!==e.propertyName&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),"Default"!==this.type&&(this.rangeBar.style.transition="none"),(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},t.prototype.handleFocusOut=function(){this.firstHandle.classList.contains("e-handle-focused")&&this.firstHandle.classList.remove("e-handle-focused"),"Range"===this.type&&this.secondHandle.classList.contains("e-handle-focused")&&this.secondHandle.classList.remove("e-handle-focused")},t.prototype.handleFocus=function(e){this.focusSliderElement(),this.sliderBarClick(e),e.currentTarget===this.firstHandle?(this.firstHandle.classList.add("e-handle-focused"),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add("e-handle-focused"),this.secondHandle.classList.add("e-tab-handle")),r.bi.add(document,"mousemove touchmove",this.sliderBarMove,this),r.bi.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.handleOver=function(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(e.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())},t.prototype.handleLeave=function(e){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&!e.currentTarget.classList.contains("e-handle-focused")&&!e.currentTarget.classList.contains("e-tab-handle")&&this.closeTooltip()},t.prototype.setHandler=function(){this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},t.prototype.setEnableRTL=function(){this.enableRtl&&"Vertical"!==this.orientation?(0,r.cn)([this.sliderContainer],"e-rtl"):(0,r.IV)([this.sliderContainer],"e-rtl");var e="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),e!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&((0,r.V7)(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&(0,r.V7)(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()},t.prototype.tooltipValue=function(){var i,e=this,s={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),s.text=i="function"==typeof this.tooltipObj.content?this.tooltipObj.content():this.tooltipObj.content,this.trigger("tooltipChange",s,function(n){e.addTooltipClass(n.text),i!==n.text&&(e.customAriaText=n.text,n.text=e.enableHtmlSanitizer?r.pJ.sanitize(n.text.toString()):n.text.toString(),e.tooltipObj.content=(0,r.rN)(function(){return n.text}),e.setAriaAttrValue(e.firstHandle),"Range"===e.type&&e.setAriaAttrValue(e.secondHandle))}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},t.prototype.setTooltipContent=function(){var e;e=this.formatContent(this.tooltipFormatInfo,!1),this.tooltipObj.content=(0,r.rN)(function(){return e})},t.prototype.formatContent=function(e,i){var s="",n=this.handleVal1,o=this.handleVal2;return!(0,r.le)(this.customValues)&&this.customValues.length>0&&(n=this.customValues[this.handleVal1],o=this.customValues[this.handleVal2]),i?("Range"===this.type?s=this.enableRtl&&"Vertical"!==this.orientation?(0,r.le)(this.tooltip)||(0,r.le)(this.tooltip.format)?o.toString()+" - "+n.toString():this.formatString(o,e).elementVal+" - "+this.formatString(n,e).elementVal:(0,r.le)(this.tooltip)||(0,r.le)(this.tooltip.format)?n.toString()+" - "+o.toString():this.formatString(n,e).elementVal+" - "+this.formatString(o,e).elementVal:(0,r.le)(n)||(s=(0,r.le)(this.tooltip)||(0,r.le)(this.tooltip.format)?n.toString():this.formatString(n,e).elementVal),s):("Range"===this.type?s=this.enableRtl&&"Vertical"!==this.orientation?(0,r.le)(e.format)?o.toString()+" - "+n.toString():this.formatString(o,e).formatString+" - "+this.formatString(n,e).formatString:(0,r.le)(e.format)?n.toString()+" - "+o.toString():this.formatString(n,e).formatString+" - "+this.formatString(o,e).formatString:(0,r.le)(n)||(s=(0,r.le)(e.format)?n.toString():this.formatString(n,e).formatString),s)},t.prototype.addTooltipClass=function(e){if(this.isMaterialTooltip){var s,i=e.toString().length;this.tooltipElement?(this.tooltipElement.classList.remove((s=i>4?{oldCss:"e-material-default",newCss:"e-material-range"}:{oldCss:"e-material-range",newCss:"e-material-default"}).oldCss),this.tooltipElement.classList.contains(s.newCss)||(this.tooltipElement.classList.add(s.newCss),this.tooltipElement.style.transform=i>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)):this.tooltipObj.cssClass="e-slider-tooltip "+(s=i>4?"e-material-range":"e-material-default")}},t.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},t.prototype.tooltipBeforeOpen=function(e){this.tooltipElement=e.element,this.tooltip.cssClass&&(0,r.cn)([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(i){return i})),e.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add("e-material-tooltip-hide"),this.handleStart(),this.setTooltipTransform())},t.prototype.tooltipCollision=function(e){if(this.isBootstrap||this.isBootstrap4||(this.isMaterial||this.isMaterial3)&&!this.isMaterialTooltip){var i=this.isBootstrap4?3:6;switch(e){case"TopCenter":this.tooltipObj.setProperties({offsetY:-i},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:i},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-i},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:i},!1)}}},t.prototype.materialTooltipEventCallBack=function(e){this.sliderBarClick(e),r.bi.add(document,"mousemove touchmove",this.sliderBarMove,this),r.bi.add(document,"mouseup touchend",this.sliderBarUp,this)},t.prototype.wireMaterialTooltipEvent=function(e){this.isMaterialTooltip&&(e?r.bi.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):r.bi.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},t.prototype.tooltipPositionCalculation=function(e){var i;switch(e){case"TopCenter":i="e-slider-horizontal-before";break;case"BottomCenter":i="e-slider-horizontal-after";break;case"LeftCenter":i="e-slider-vertical-before";break;case"RightCenter":i="e-slider-vertical-after"}return i},t.prototype.getTooltipTransformProperties=function(e){var i;if(this.tooltipElement){var s="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;i="Horizontal"===this.orientation?"e-slider-horizontal-before"===e?{rotate:"rotate(45deg)",translate:"translateY("+s+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-s+"px)"}:"e-slider-vertical-before"===e?{rotate:"rotate(-45deg)",translate:"translateX("+s+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-s+"px)"}}return i},t.prototype.openMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var i=this.tooltipElement.firstElementChild;i.classList.remove("e-material-tooltip-hide"),i.classList.add("e-material-tooltip-show"),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add("e-material-tooltip-open"),this.materialHandle.style.transform="scale(0)",this.tooltipElement.style.transform=i.innerText.length>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition=e.transition.handle)},2500):setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition="none")},2500)}},t.prototype.closeMaterialTooltip=function(){var e=this;if(this.isMaterialTooltip){var i=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,i.classList.remove("e-material-tooltip-show"),i.classList.add("e-material-tooltip-hide"),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove("e-material-tooltip-open"),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){e.tooltipElement&&(e.tooltipElement.style.transition="none")},2500)}},t.prototype.checkTooltipPosition=function(e){var i=this.tooltipPositionCalculation(e.collidedPosition);(void 0===this.tooltipCollidedPosition||this.tooltipCollidedPosition!==e.collidedPosition||!e.element.classList.contains(i))&&(this.isMaterialTooltip&&(void 0!==i&&(e.element.classList.remove(this.previousTooltipClass),e.element.classList.add(i),this.previousTooltipClass=i),e.element.style.transform&&e.element.classList.contains("e-material-tooltip-open")&&e.element.firstElementChild.innerText.length<=4&&(e.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=e.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},t.prototype.setTooltipTransform=function(){var e=this.getTooltipTransformProperties(this.previousTooltipClass);(0,r.le)(this.tooltipElement)||(this.tooltipElement.style.transform=this.tooltipElement.firstElementChild.innerText.length>4?e.translate+" scale(0.01)":e.translate+" "+e.rotate+" scale(0.01)")},t.prototype.renderTooltip=function(){this.tooltipObj=new fl({showTipPointer:this.isBootstrap||this.isMaterial||this.isMaterial3||this.isBootstrap4||this.isTailwind||this.isBootstrap5||this.isFluent,cssClass:"e-slider-tooltip",height:this.isMaterial||this.isMaterial3?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},t.prototype.initializeTooltipProps=function(){this.setProperties({tooltip:{showOn:"Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(i){(0,r.le)(i)||(i.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add("e-material-slider"),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},t.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},t.prototype.setButtons=function(){this.firstBtn=this.createElement("div",{className:"e-slider-button e-first-button"}),this.firstBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:"e-slider-button e-second-button"}),this.secondBtn.appendChild(this.createElement("span",{className:"e-button-icon"})),this.isTailwind&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add("e-slider-btn"),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()},t.prototype.buttonTitle=function(){var e=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("decrementTitle"),s=this.l10n.getConstant("incrementTitle");(0,r.Y4)(e?this.secondBtn:this.firstBtn,{"aria-label":i,title:i}),(0,r.Y4)(e?this.firstBtn:this.secondBtn,{"aria-label":s,title:s})},t.prototype.buttonFocusOut=function(){(this.isMaterial||this.isMaterial3)&&this.getHandle().classList.remove("e-large-thumb-size")},t.prototype.repeatButton=function(e){var n,i=this.handleValueUpdate(),s=this.enableRtl&&"Vertical"!==this.orientation;e.target.parentElement.classList.contains("e-first-button")||e.target.classList.contains("e-first-button")?n=this.add(i,parseFloat(this.step.toString()),!!s):(e.target.parentElement.classList.contains("e-second-button")||e.target.classList.contains("e-second-button"))&&(n=this.add(i,parseFloat(this.step.toString()),!s)),this.limits.enabled&&(n=this.getLimitCorrectedValues(n)),n>=this.min&&n<=this.max&&(this.changeHandleValue(n),this.tooltipToggle(this.getHandle()))},t.prototype.repeatHandlerMouse=function(e){e.preventDefault(),("mousedown"===e.type||"touchstart"===e.type)&&(this.buttonClick(e),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,e))},t.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},t.prototype.focusHandle=function(){this.getHandle().classList.contains("e-tab-handle")||this.getHandle().classList.add("e-tab-handle")},t.prototype.repeatHandlerUp=function(e){this.changeEvent("changed",e),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},t.prototype.customTickCounter=function(e){var i=4;return!(0,r.le)(this.customValues)&&this.customValues.length>0&&(e>4&&(i=3),e>7&&(i=2),e>14&&(i=1),e>28&&(i=0)),i},t.prototype.renderScale=function(){var e="Vertical"===this.orientation?"v":"h";this.noOfDecimals=this.numberOfDecimals(this.step),this.ul=this.createElement("ul",{className:"e-scale e-"+e+"-scale e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),this.ul.style.zIndex="-1",r.AR.isAndroid&&"h"===e&&this.ul.classList.add("e-tick-pos");var i=this.ticks.smallStep;this.ticks.showSmallTicks?i<=0&&(i=parseFloat((0,r.Ac)(this.step))):i=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat((0,r.Ac)(this.max))-parseFloat((0,r.Ac)(this.min));var s=this.fractionalToInteger(this.min),n=this.fractionalToInteger(this.max),o=this.fractionalToInteger(i),l=!(0,r.le)(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,h=this.customTickCounter(l),c=!(0,r.le)(this.customValues)&&this.customValues.length>0?l*h+l:Math.abs((n-s)/o);this.element.appendChild(this.ul);var u,p=parseFloat(this.min.toString());"v"===e&&(p=parseFloat(this.max.toString()));var f,d=0,g=100/c;g===1/0&&(g=5);for(var m=0,v=!(0,r.le)(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,y=0;m<=c;m++){if(u=this.createElement("li",{attrs:{class:"e-tick",role:"presentation",tabIndex:"-1","aria-hidden":"true"}}),!(0,r.le)(this.customValues)&&this.customValues.length>0)(f=m%(h+1)==0)&&("h"===e?(p=this.customValues[y],y++):(p=this.customValues[v],v--),u.setAttribute("title",p.toString()));else if(u.setAttribute("title",p.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))f="h"===e?(p-parseFloat(this.min.toString()))%this.ticks.largeStep==0:Math.abs(p-parseFloat(this.max.toString()))%this.ticks.largeStep==0;else{var C=this.fractionalToInteger(this.ticks.largeStep),b=this.fractionalToInteger(p);f="h"===e?(b-s)%C==0:Math.abs(b-parseFloat(n.toString()))%C==0}f&&u.classList.add("e-large"),"h"===e?u.style.width=g+"%":u.style.height=g+"%";var S=f?"Both"===this.ticks.placement?2:1:0;if(f)for(var I=0;I<S;I++)this.createTick(u,p,g);else(0,r.le)(this.customValues)&&this.formatTicksValue(u,p);this.ul.appendChild(u),this.tickElementCollection.push(u);var x=void 0;(0,r.le)(this.customValues)&&(x=this.numberOfDecimals(i)>this.numberOfDecimals(p)?this.numberOfDecimals(i):this.numberOfDecimals(p),p=this.makeRoundNumber("h"===e||this.min>this.max?p+i:p-i,x),d=this.makeRoundNumber(d+i,x))}this.ticksAlignment(e,g)},t.prototype.ticksAlignment=function(e,i,s){void 0===s&&(s=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add("e-first-tick"),this.lastChild.classList.add("e-last-tick"),this.sliderContainer.classList.add("e-scale-"+this.ticks.placement.toLowerCase()),"h"===e?(this.firstChild.style.width=i/2+"%",this.lastChild.style.width=i/2+"%"):(this.firstChild.style.height=i/2+"%",this.lastChild.style.height=i/2+"%"),s&&this.trigger("renderedTicks",{ticksWrapper:this.ul,tickElements:this.tickElementCollection}),this.scaleAlignment()},t.prototype.createTick=function(e,i,s){var n=this.createElement("span",{className:"e-tick-value e-tick-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation",tabIndex:"-1","aria-hidden":"true"}});e.appendChild(n),(0,r.le)(this.customValues)?this.formatTicksValue(e,i,n,s):n.innerHTML=this.enableHtmlSanitizer?r.pJ.sanitize(i.toString()):i.toString()},t.prototype.formatTicksValue=function(e,i,s,n){var o=this,l=this.formatNumber(i),h=(0,r.le)(this.ticks)||(0,r.le)(this.ticks.format)?l:this.formatString(i,this.ticksFormatInfo).formatString;this.trigger("renderingTicks",{value:i,text:h,tickElement:e},function(u){e.setAttribute("title",u.text.toString()),s&&(s.innerHTML=o.enableHtmlSanitizer?r.pJ.sanitize(u.text.toString()):u.text.toString())})},t.prototype.scaleAlignment=function(){this.tickValuePosition(),"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size"):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add("e-small-size"):this.sliderContainer.classList.remove("e-small-size")},t.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var i,s,e=this.firstChild.getBoundingClientRect(),n=this.ticks.smallStep,o=Math.abs(parseFloat((0,r.Ac)(this.max))-parseFloat((0,r.Ac)(this.min)))/n;this.firstChild.children.length>0&&(i=this.firstChild.children[0].getBoundingClientRect());var h,l=[this.sliderContainer.querySelectorAll(".e-tick.e-large .e-tick-value")];h=[].slice.call(l[0],"Both"===this.ticks.placement?2:1);for(var c="Vertical"===this.orientation?2*e.height:2*e.width,u=0;u<this.firstChild.children.length;u++)"Vertical"===this.orientation?this.firstChild.children[u].style.top=-i.height/2+"px":this.firstChild.children[u].style.left=this.enableRtl?(c-this.firstChild.children[u].getBoundingClientRect().width)/2+"px":-i.width/2+"px";for(u=0;u<h.length;u++)s=h[u].getBoundingClientRect(),(0,r.V7)(h[u],"Vertical"===this.orientation?{top:(c-s.height)/2+"px"}:{left:(c-s.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==o&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===o&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove("e-last-tick"),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove("e-last-tick"))},t.prototype.setAriaAttrValue=function(e){var i,s=!(0,r.le)(this.ticks)&&!(0,r.le)(this.ticks.format),n=this.formatContent(s?this.tooltipFormatInfo:this.ticksFormatInfo,!1),o=this.formatContent(s?this.ticksFormatInfo:this.tooltipFormatInfo,!0);i=2===(n=this.customAriaText?this.customAriaText:n).split(" - ").length?n.split(" - "):[n,n],this.setAriaAttributes(e),(0,r.Y4)(e,"Range"!==this.type?{"aria-valuenow":o,"aria-valuetext":n}:this.enableRtl?e===this.firstHandle?{"aria-valuenow":o.split(" - ")[1],"aria-valuetext":i[1]}:{"aria-valuenow":o.split(" - ")[0],"aria-valuetext":i[0]}:e===this.firstHandle?{"aria-valuenow":o.split(" - ")[0],"aria-valuetext":i[0]}:{"aria-valuenow":o.split(" - ")[1],"aria-valuetext":i[1]})},t.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},t.prototype.getLimitCorrectedValues=function(e){return"MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(e,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(e,this.limits.maxStart,this.limits.maxEnd)[0]},t.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},t.prototype.buttonClick=function(e){this.focusSliderElement();var i,s=this.enableRtl&&"Vertical"!==this.orientation,n=this.handleValueUpdate();40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains("e-first-button")?i=this.add(n,parseFloat(this.step.toString()),!!s):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains("e-second-button")?i=this.add(n,parseFloat(this.step.toString()),!s):33===e.keyCode||e.currentTarget.classList.contains("e-first-button")?i=this.add(n,parseFloat(this.ticks.largeStep.toString()),!s):34===e.keyCode||e.currentTarget.classList.contains("e-second-button")?i=this.add(n,parseFloat(this.ticks.largeStep.toString()),!!s):36===e.keyCode?i=parseFloat(this.min<this.max?this.min.toString():this.max.toString()):35===e.keyCode&&(i=parseFloat(this.min<this.max?this.max.toString():this.min.toString())),this.limits.enabled&&(i=this.getLimitCorrectedValues(i)),this.changeHandleValue(i),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),e.currentTarget.classList.contains("e-first-button")&&r.bi.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),e.currentTarget.classList.contains("e-second-button")&&r.bi.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},t.prototype.tooltipToggle=function(e){this.isMaterialTooltip?this.tooltipElement.classList.contains("e-material-tooltip-open")?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(e):this.openTooltip(e)},t.prototype.buttonUp=function(e){e.currentTarget.classList.contains("e-first-button")&&r.bi.remove(this.firstBtn,"mouseup touchend",this.buttonUp),e.currentTarget.classList.contains("e-second-button")&&r.bi.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},t.prototype.setRangeBar=function(){"Horizontal"!==this.orientation||(0,r.le)(this.rangeBar)?(0,r.le)(this.rangeBar)||("MinRange"===this.type?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",(0,r.V7)(this.rangeBar,{height:(0,r.le)(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",(0,r.V7)(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))):"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",(0,r.V7)(this.rangeBar,{width:(0,r.le)(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",(0,r.V7)(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))},t.prototype.checkValidValueAndPos=function(e){return e=this.checkHandleValue(e),this.checkHandlePosition(e)},t.prototype.setLimitBarPositions=function(e,i,s,n){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=e+"px",this.limitBarFirst.style.width=i-e+"px"):(this.limitBarFirst.style.left=e+"px",this.limitBarFirst.style.width=i-e+"px"):(this.limitBarFirst.style.bottom=(this.min<this.max?e:i)+"px",this.limitBarFirst.style.height=(this.min<this.max?i-e:e-i)+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=s+"px",this.limitBarSecond.style.width=n-s+"px"):(this.limitBarSecond.style.left=s+"px",this.limitBarSecond.style.width=n-s+"px"):(this.limitBarSecond.style.bottom=(this.min<this.max?s:n)+"px",this.limitBarSecond.style.height=(this.min<this.max?n-s:s-n)+"px"))},t.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var e=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e);var i=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i),this.setLimitBarPositions(e,i)}else if("Range"===this.type){var s=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];s=this.checkValidValueAndPos(s);var n=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var o=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];o=this.checkValidValueAndPos(o);var l=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];l=this.checkValidValueAndPos(l),this.setLimitBarPositions(s,n,o,l)}},t.prototype.getLimitValueAndPosition=function(e,i,s,n){return(0,r.le)(i)&&(i=this.min<this.max?this.min:this.max,(0,r.le)(e)&&n&&(e=i)),(0,r.le)(s)&&(s=this.min<this.max?this.max:this.min,(0,r.le)(e)&&n&&(e=s)),e<i&&(e=i),e>s&&(e=s),[e,this.checkHandlePosition(e)]},t.prototype.setValue=function(){if(!(0,r.le)(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=(0,r.le)(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,this.activeHandle=(0,r.le)(this.activeHandle)?"Range"===this.type?2:1:this.activeHandle,"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},t.prototype.rangeValueUpdate=function(){(null===this.value||"object"!=typeof this.value)&&(this.value=[parseFloat((0,r.Ac)(this.min)),parseFloat((0,r.Ac)(this.max))])},t.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},t.prototype.modifyZindex=function(){"Range"!==this.type||(0,r.le)(this.firstHandle)||(0,r.le)(this.secondHandle)?this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=wa(this.element)+""):1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+"")},t.prototype.setHandlePosition=function(e){var s,i=this,n=1===this.activeHandle?this.handlePos1:this.handlePos2;s=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),s.forEach(function(o){"Horizontal"===i.orientation?i.enableRtl?o.style.right=n+"px":o.style.left=n+"px":o.style.bottom=n+"px"}),this.changeEvent("change",e)},t.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},t.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},t.prototype.changeEvent=function(e,i){var s="change"===e?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),s!==this.value&&(!this.isMaterialTooltip||!this.initialTooltip)&&(this.trigger(e,this.changeEventArgs(e,i)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.firstHandle);else{var n=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:n},!0),(s.length===this.value.length&&this.value[0]!==s[0]||this.value[1]!==s[1])&&(this.initialTooltip=!1,this.trigger(e,this.changeEventArgs(e,i)),this.initialTooltip=!0,this.setPreviousVal(e,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},t.prototype.changeEventArgs=function(e,i){var s;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),s={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:"function"==typeof this.tooltipObj.content?this.tooltipObj.content():this.tooltipObj.content,isInteracted:!(0,r.le)(i)}):s={value:this.value,previousValue:"change"===e?this.previousVal:this.previousChanged,action:e,text:(0,r.le)(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!(0,r.le)(i)},s},t.prototype.setPreviousVal=function(e,i){"change"===e?this.previousVal=i:this.previousChanged=i},t.prototype.updateRangeValue=function(){var e=this.value.toString().split(",").map(Number);if(this.value=this.enableRtl&&"Vertical"!==this.orientation||this.rtl?[e[1],e[0]]:[e[0],e[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.min<this.max&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.min>this.max&&this.handlePos1<this.handlePos2&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var i=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=i[0],this.handlePos1=i[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,i=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=i[0],this.handlePos2=i[1],this.preHandlePos2=this.handlePos2}},t.prototype.checkHandlePosition=function(e){var i;return e=100*(e-parseFloat((0,r.Ac)(this.min)))/(parseFloat((0,r.Ac)(this.max))-parseFloat((0,r.Ac)(this.min))),i="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(e/100):this.element.getBoundingClientRect().height*(e/100),parseFloat((0,r.Ac)(this.max))===parseFloat((0,r.Ac)(this.min))&&(i="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),i},t.prototype.checkHandleValue=function(e){if(this.min===this.max)return parseFloat((0,r.Ac)(this.max));var i=this.tempStartEnd();return e<i.start?e=i.start:e>i.end&&(e=i.end),e},t.prototype.reposition=function(){var e=this;(0,r.le)(this.firstHandle)||(this.firstHandle.style.transition="none"),"Default"!==this.type&&!(0,r.le)(this.rangeBar)&&(this.rangeBar.style.transition="none"),"Range"===this.type&&!(0,r.le)(this.secondHandle)&&(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&!(0,r.le)(this.materialHandle)&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"!==this.type||(0,r.le)(this.rangeBar)?"Range"===this.type&&!(0,r.le)(this.secondHandle)&&!(0,r.le)(this.rangeBar)&&(this.enableRtl?this.secondHandle.style.right=this.handlePos2+"px":this.secondHandle.style.left=this.handlePos2+"px",this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",(0,r.V7)(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",(0,r.V7)(this.rangeBar,{width:(0,r.le)(this.handlePos1)?0:this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",(0,r.V7)(this.rangeBar,{height:(0,r.le)(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",(0,r.V7)(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){(0,r.le)(e.firstHandle)||(e.firstHandle.style.transition=e.scaleTransform),"Range"===e.type&&!(0,r.le)(e.secondHandle)&&(e.secondHandle.style.transition=e.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()},t.prototype.changeHandleValue=function(e){var i=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(e),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&(this.handlePos1>this.handlePos2&&this.min<this.max||this.handlePos1<this.handlePos2&&this.min>this.max)&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(i=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(e),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&(this.handlePos2<this.handlePos1&&this.min<this.max||this.handlePos2>this.handlePos1&&this.min>this.max)&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(i=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==i&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},t.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},t.prototype.xyToPosition=function(e){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var s=e.x-this.element.getBoundingClientRect().left;this.val=s/(this.element.offsetWidth/100)}else{var o=e.y-this.element.getBoundingClientRect().top;this.val=100-o/(this.element.offsetHeight/100)}var l=this.stepValueCalculation(this.val);return l<0?l=0:l>100&&(l=100),this.enableRtl&&"Vertical"!==this.orientation&&(l=100-l),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(l/100):this.element.getBoundingClientRect().height*(l/100)},t.prototype.stepValueCalculation=function(e){0===this.step&&(this.step=1);var i=parseFloat((0,r.Ac)(this.step))/((parseFloat((0,r.Ac)(this.max))-parseFloat((0,r.Ac)(this.min)))/100),s=e%Math.abs(i);return 0!==s&&(i/2>s?e-=s:e+=Math.abs(i)-s),e},t.prototype.add=function(e,i,s){var o=Math.pow(10,3);return s?(Math.round(e*o)+Math.round(i*o))/o:(Math.round(e*o)-Math.round(i*o))/o},t.prototype.positionToValue=function(e){var i,s=parseFloat((0,r.Ac)(this.max))-parseFloat((0,r.Ac)(this.min));return i="Horizontal"===this.orientation?e/this.element.getBoundingClientRect().width*s:e/this.element.getBoundingClientRect().height*s,this.add(i,parseFloat(this.min.toString()),!0)},t.prototype.sliderBarClick=function(e){var i;e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?i={x:e.clientX,y:e.clientY}:("touchend"===e.type||"touchstart"===e.type)&&(i={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var s=this.xyToPosition(i),n=this.positionToValue(s);if("Range"===this.type&&(this.min<this.max&&this.handlePos2-s<s-this.handlePos1||this.min>this.max&&this.handlePos1-s>s-this.handlePos2))this.activeHandle=2,this.limits.enabled&&this.limits.endHandleFixed||(this.limits.enabled&&(n=(o=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],s=o[1]),this.secondHandle.classList.add("e-handle-active"),this.handlePos2=this.preHandlePos2=s,this.handleVal2=n),this.modifyZindex(),this.secondHandle.focus();else{var o;if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed)this.limits.enabled&&(n=(o=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],s=o[1]),this.firstHandle.classList.add("e-handle-active"),this.handlePos1=this.preHandlePos1=s,this.handleVal1=n;this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add("e-tooltip-active");var l=this.element.querySelector(".e-tab-handle");l&&this.getHandle()!==l&&l.classList.remove("e-tab-handle");var c,h=1===this.activeHandle?this.firstHandle:this.secondHandle;if("click"!==e.type&&"mousedown"!==e.type||e.target!==h||(c=document.elementFromPoint(e.clientX,e.clientY)),e.target===h&&c!=h)return(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.sliderBarUp(e),void this.tooltipToggle(this.getHandle());if(this.checkRepeatedValue(n)){var d=(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=d.handle,"Default"!==this.type&&(this.rangeBar.style.transition=d.rangeBar),this.setHandlePosition(e),this.isMaterialTooltip&&(this.initialTooltip=!1),e.target!=h&&this.changeEvent("changed",e),"Default"!==this.type&&this.setRangeBar()}},t.prototype.handleValueAdjust=function(e,i,s){1===s?(this.handleVal1=i,this.handleVal2=this.handleVal1+this.minDiff):2===s&&(this.handleVal2=i,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},t.prototype.dragRangeBarMove=function(e){var i,s,n,o,l;if("touchmove"!==e.type&&e.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(o=(i=[e.clientX,e.clientY])[0],l=i[1]):(o=(s=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],l=s[1]),!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(n=this.enableRtl?{x:o+this.secondPartRemain,y:l+this.secondPartRemain}:{x:o-this.firstPartRemain,y:l+this.secondPartRemain},this.min>this.max?(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)),n=this.enableRtl?{x:o-this.firstPartRemain,y:l-this.firstPartRemain}:{x:o+this.secondPartRemain,y:l-this.firstPartRemain},this.min>this.max?(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)),this.limits.enabled){var h=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=h[0],this.handlePos1=h[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),h=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=h[0],this.handlePos2=h[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===(this.min>this.max?this.min:this.max)&&this.handleValueAdjust(this.handleVal2,this.min>this.max?this.min:this.max,2),this.handleVal1===(this.min>this.max?this.max:this.min)&&this.handleValueAdjust(this.handleVal1,this.min>this.max?this.max:this.min,1)}this.activeHandle=1,this.setHandlePosition(e),this.activeHandle=2,this.setHandlePosition(e),this.tooltipToggle(this.rangeBar),this.setRangeBar()},t.prototype.sliderBarUp=function(e){this.changeEvent("changed",e),this.handleFocusOut(),this.firstHandle.classList.remove("e-handle-active"),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove("e-handle-active")),this.closeTooltip(),(this.isMaterial||this.isMaterial3)&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove("e-tooltip-active")),r.bi.remove(document,"mousemove touchmove",this.sliderBarMove),r.bi.remove(document,"mouseup touchend",this.sliderBarUp)},t.prototype.sliderBarMove=function(e){"touchmove"!==e.type&&e.preventDefault();var s=this.xyToPosition("mousemove"===e.type?{x:e.clientX,y:e.clientY}:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),n=this.positionToValue(s);if(s=Math.round(s),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var o=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);s=o[1],n=o[0]}this.handlePos1=s,this.handleVal1=n}this.firstHandle.classList.add("e-handle-active")}if("Range"===this.type)if(1===this.activeHandle)this.firstHandle.classList.add("e-handle-active"),this.limits.enabled&&this.limits.startHandleFixed||((this.min<this.max&&s>this.handlePos2||this.min>this.max&&s<this.handlePos2)&&(s=this.handlePos2,n=this.handleVal2),s===this.preHandlePos1)||(this.limits.enabled&&(n=(l=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],s=l[1]),this.handlePos1=this.preHandlePos1=s,this.handleVal1=n,this.activeHandle=1);else if(2===this.activeHandle&&(this.secondHandle.classList.add("e-handle-active"),!(this.limits.enabled&&this.limits.endHandleFixed||((this.min<this.max&&s<this.handlePos1||this.min>this.max&&s>this.handlePos1)&&(s=this.handlePos1,n=this.handleVal1),s===this.preHandlePos2)))){var l;this.limits.enabled&&(n=(l=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],s=l[1]),this.handlePos2=this.preHandlePos2=s,this.handleVal2=n,this.activeHandle=2}!this.checkRepeatedValue(n)||(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(e),(this.isMaterial||this.isMaterial3)&&!this.tooltip.isVisible&&!this.getHandle().classList.contains("e-tab-handle")&&this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},t.prototype.dragRangeBarUp=function(e){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(e)),this.changeEvent("changed",e),this.closeTooltip(),r.bi.remove(document,"mousemove touchmove",this.dragRangeBarMove),r.bi.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},t.prototype.checkRepeatedValue=function(e){if("Range"===this.type){if(e===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(e===this.previousVal)return 0;return 1},t.prototype.refreshTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),e&&(this.tooltipObj.refresh(e),this.tooltipTarget=e))},t.prototype.openTooltip=function(e){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(e),this.tooltipTarget=e)},t.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},t.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),this.buttonClick(e)}},t.prototype.wireButtonEvt=function(e){e?(r.bi.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),r.bi.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),r.bi.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),r.bi.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),r.bi.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),r.bi.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),r.bi.remove(this.firstBtn,"focusout",this.sliderFocusOut),r.bi.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(r.bi.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),r.bi.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),r.bi.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),r.bi.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),r.bi.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),r.bi.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),r.bi.add(this.firstBtn,"focusout",this.sliderFocusOut,this),r.bi.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},t.prototype.rangeBarMousedown=function(e){var i,s;if(e.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&e.target===this.rangeBar){var n=void 0,o=void 0;"mousedown"===e.type?(n=(i=[e.clientX,e.clientY])[0],o=i[1]):"touchstart"===e.type&&(n=(s=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=s[1]),"Horizontal"===this.orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=o-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-o),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var l=this.element.querySelector(".e-tab-handle");l&&l.classList.remove("e-tab-handle"),r.bi.add(document,"mousemove touchmove",this.dragRangeBarMove,this),r.bi.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},t.prototype.elementClick=function(e){this.isDragComplete?this.isDragComplete=!1:(e.preventDefault(),this.focusSliderElement(),this.sliderBarClick(e),this.focusHandle())},t.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(r.bi.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&r.bi.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),r.bi.add(this.sliderContainer,"keydown",this.keyDown,this),r.bi.add(this.sliderContainer,"keyup",this.keyUp,this),r.bi.add(this.element,"focusout",this.sliderFocusOut,this),r.bi.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&r.bi.add(this.formElement,"reset",this.formResetHandler,this))},t.prototype.unwireEvents=function(){r.bi.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&r.bi.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),r.bi.remove(this.sliderContainer,"keydown",this.keyDown),r.bi.remove(this.sliderContainer,"keyup",this.keyUp),r.bi.remove(this.element,"focusout",this.sliderFocusOut),r.bi.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),r.bi.remove(this.element,"reset",this.formResetHandler)},t.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},t.prototype.keyUp=function(e){if(9===e.keyCode&&e.target.classList.contains("e-handle")&&(this.focusSliderElement(),!e.target.classList.contains("e-tab-handle"))){this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),e.target.classList.add("e-tab-handle");var i=e.target.parentElement;i===this.element&&(i.querySelector(".e-slider-track").classList.add("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&i.querySelector(".e-range").classList.add("e-tab-range")),"Range"===this.type&&(this.activeHandle=e.target.previousSibling.classList.contains("e-handle")?2:1),this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",e)},t.prototype.hover=function(e){if(!(0,r.le)(e))if("mouseover"===e.type||"touchmove"===e.type||"mousemove"===e.type||"pointermove"===e.type||"touchstart"===e.type)this.sliderContainer.classList.add("e-slider-hover");else{this.sliderContainer.classList.remove("e-slider-hover");var i=e.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!i.classList.contains("e-handle-focused")&&!i.classList.contains("e-tab-handle")&&this.closeMaterialTooltip()}},t.prototype.sliderFocusOut=function(e){e.relatedTarget!==this.secondHandle&&e.relatedTarget!==this.firstHandle&&e.relatedTarget!==this.element&&e.relatedTarget!==this.firstBtn&&e.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector(".e-tab-handle")&&this.element.querySelector(".e-tab-handle").classList.remove("e-tab-handle"),this.element.querySelector(".e-tab-track")&&(this.element.querySelector(".e-tab-track").classList.remove("e-tab-track"),("Range"===this.type||"MinRange"===this.type)&&this.element.querySelector(".e-tab-range")&&this.element.querySelector(".e-tab-range").classList.remove("e-tab-range")),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},t.prototype.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.prototype.changeSliderType=function(e,i){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove("e-material-slider"),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==e&&("Range"===e&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!(0,r.le)(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===e||"Default"===e?(0,r.le)(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):(0,r.le)(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==i&&this.updateConfig()},t.prototype.changeRtl=function(){if(!this.enableRtl&&"Range"===this.type&&(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var e=this.enableRtl&&"Vertical"!==this.orientation;(0,r.Y4)(e?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),(0,r.Y4)(e?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},t.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},t.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},t.prototype.limitsPropertyChange=function(){this.limits.enabled?((0,r.le)(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),(0,r.le)(this.limitBarFirst)&&(0,r.le)(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):((0,r.le)(this.limitBarFirst)||(0,r.og)(this.limitBarFirst),(0,r.le)(this.limitBarSecond)||(0,r.og)(this.limitBarSecond))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.destroy=function(){a.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),(0,r.IV)([this.sliderContainer],["e-disabled"]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),(0,r.og)(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML="",this.hiddenInput=null,this.sliderContainer=null,this.sliderTrack=null,this.rangeBar=null,this.firstHandle=null,this.secondHandle=null,this.tickElementCollection=null,this.ul=null,this.firstBtn=null,this.secondBtn=null,this.materialHandle=null,this.tooltipObj=null,this.tooltipTarget=null,this.limitBarFirst=null,this.limitBarSecond=null,this.firstChild=null,this.lastChild=null,this.tooltipElement=null},t.prototype.onPropertyChanged=function(e,i){for(var s=this,n=0,o=Object.keys(e);n<o.length;n++){var l=o[n];switch(l){case"cssClass":this.setCSSClass(i.cssClass);break;case"value":if(e&&i){var h=(0,r.le)(e.value)?"Range"===this.type?[this.min,this.max]:this.min:e.value;this.setProperties({value:h},!0),!(0,r.le)(i.value)&&i.value.toString()!==h.toString()&&(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(this.activeHandle=(0,r.le)(e.value)||i.value[1]===h[1]?1:2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":!(0,r.le)(e.tooltip)&&!(0,r.le)(i.tooltip)&&(this.setTooltip(l),this.showButtons||this.wireEvents());break;case"type":!(0,r.le)(i)&&Object.keys(i).length&&!(0,r.le)(i.type)&&(this.changeSliderType(i.type,l),this.setZindex());break;case"enableRtl":i.enableRtl!==e.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=i.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":(0,r.le)(this.sliderContainer.querySelector(".e-scale"))||((0,r.og)(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(c){c.match(/e-scale-/)&&s.sliderContainer.classList.remove(c)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":e.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove("e-slider-btn"),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(e.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},t.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add("e-read-only")):(this.wireEvents(),this.sliderContainer.classList.remove("e-read-only"))},t.prototype.setMinMaxValue=function(){var e=this;this.setValue(),this.refreshTooltip(this.tooltipTarget),(0,r.le)(this.sliderContainer.querySelector(".e-scale"))||this.ul&&((0,r.og)(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(i){i.match(/e-scale-/)&&e.sliderContainer.classList.remove(i)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},t.prototype.setZindex=function(){this.zIndex=6,!(0,r.le)(this.ticks)&&"None"!==this.ticks.placement&&!(0,r.le)(this.ul)&&!(0,r.le)(this.element)&&(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),!this.isMaterial&&!this.isMaterial3&&!(0,r.le)(this.ticks)&&"Both"===this.ticks.placement&&(this.element.style.zIndex=this.zIndex+2+""),(0,r.le)(this.firstHandle)||(this.firstHandle.style.zIndex=this.zIndex+3+""),"Range"===this.type&&!(0,r.le)(this.secondHandle)&&(this.secondHandle.style.zIndex=this.zIndex+4+"")},t.prototype.setTooltip=function(e){this.changeSliderType(this.type,e)},t.prototype.setBarColor=function(){for(var e,i,s=this.sliderTrack.lastElementChild;s;)this.sliderTrack.removeChild(s),s=this.sliderTrack.lastElementChild;for(var n=0;n<this.colorRange.length;n++)if(!(0,r.le)(this.colorRange[n].start)&&!(0,r.le)(this.colorRange[n].end)&&this.colorRange[n].end>this.colorRange[n].start){this.colorRange[n].start<this.min&&(this.colorRange[n].start=this.min),this.colorRange[n].end>this.max&&(this.colorRange[n].end=this.max);var o=this.checkHandlePosition(this.colorRange[n].start),l=this.checkHandlePosition(this.colorRange[n].end),h=this.createElement("div");h.style.backgroundColor=this.colorRange[n].color,h.style.border="1px solid "+this.colorRange[n].color,"Horizontal"===this.orientation?(i="e-slider-horizantal-color",e=this.enableRtl?(0,r.le)(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[n].end):this.checkHandlePosition(this.customValues.length-this.colorRange[n].end-1):this.checkHandlePosition(this.colorRange[n].start),h.style.width=l-o+"px",h.style.left=e+"px"):(i="e-slider-vertical-color",e=this.checkHandlePosition(this.colorRange[n].start),h.style.height=l-o+"px",h.style.bottom=e+"px"),h.classList.add(i),this.sliderTrack.appendChild(h)}},t.prototype.getModuleName=function(){return"slider"},_e([(0,r.Z9)(null)],t.prototype,"value",void 0),_e([(0,r.Z9)(null)],t.prototype,"customValues",void 0),_e([(0,r.Z9)(1)],t.prototype,"step",void 0),_e([(0,r.Z9)(null)],t.prototype,"width",void 0),_e([(0,r.Z9)(0)],t.prototype,"min",void 0),_e([(0,r.Z9)(100)],t.prototype,"max",void 0),_e([(0,r.Z9)(!1)],t.prototype,"readonly",void 0),_e([(0,r.Z9)("Default")],t.prototype,"type",void 0),_e([(0,r.FE)([{}],Dq)],t.prototype,"colorRange",void 0),_e([(0,r.Zz)({},Aq)],t.prototype,"ticks",void 0),_e([(0,r.Zz)({},Lq)],t.prototype,"limits",void 0),_e([(0,r.Z9)(!0)],t.prototype,"enabled",void 0),_e([(0,r.Zz)({},Oq)],t.prototype,"tooltip",void 0),_e([(0,r.Z9)(!1)],t.prototype,"showButtons",void 0),_e([(0,r.Z9)(!0)],t.prototype,"enableAnimation",void 0),_e([(0,r.Z9)("Horizontal")],t.prototype,"orientation",void 0),_e([(0,r.Z9)("")],t.prototype,"cssClass",void 0),_e([(0,r.Z9)(!1)],t.prototype,"enableHtmlSanitizer",void 0),_e([(0,r.ju)()],t.prototype,"created",void 0),_e([(0,r.ju)()],t.prototype,"change",void 0),_e([(0,r.ju)()],t.prototype,"changed",void 0),_e([(0,r.ju)()],t.prototype,"renderingTicks",void 0),_e([(0,r.ju)()],t.prototype,"renderedTicks",void 0),_e([(0,r.ju)()],t.prototype,"tooltipChange",void 0),_e([r.Zl],t)}(r.wA),Jm=(new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),new RegExp("^[0-9]*$"),new RegExp("^[+]?[0-9]{9,13}$"),new RegExp("^\\d{13,16}$"),function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),Ve=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},UL="e-file-select",tw="e-file-drop",GL="e-upload-files",$m="e-upload-file-list",Fi="e-file-status",ZL="e-file-name",YL="e-file-type",KL="e-file-size",bs="e-file-remove-btn",Er="e-file-delete-btn",XL="e-spinner-pane",Ii="e-file-abort-btn",ka="e-file-reload-btn",iw="e-upload-drag-hover",Oh="e-upload-progress-wrap",ev="e-upload-progress-bar",sw="e-progress-bar-text",Ir="e-upload-progress",Yr="e-upload-success",xr="e-upload-fails",nw="e-file-container",QL="e-validation-fails",rw="e-disabled",$L="e-rtl-container",aw="e-clear-icon-focus",qs="e-file-pause-btn",Rh="e-file-play-btn",Cd="e-restrict-retry",e1=["title","style","class"],t1="e-form-upload",Sd="e-file-invalid",Wq=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Jm(t,a),Ve([(0,r.Z9)("")],t.prototype,"name",void 0),Ve([(0,r.Z9)(null)],t.prototype,"size",void 0),Ve([(0,r.Z9)("")],t.prototype,"type",void 0),t}(r.rt),Uq=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Jm(t,a),Ve([(0,r.Z9)("Browse...")],t.prototype,"browse",void 0),Ve([(0,r.Z9)("Upload")],t.prototype,"upload",void 0),Ve([(0,r.Z9)("Clear")],t.prototype,"clear",void 0),t}(r.rt),Gq=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Jm(t,a),Ve([(0,r.Z9)("")],t.prototype,"saveUrl",void 0),Ve([(0,r.Z9)("")],t.prototype,"removeUrl",void 0),Ve([(0,r.Z9)(0)],t.prototype,"chunkSize",void 0),Ve([(0,r.Z9)(3)],t.prototype,"retryCount",void 0),Ve([(0,r.Z9)(500)],t.prototype,"retryAfterDelay",void 0),t}(r.rt),hu=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.initialAttr={accept:null,multiple:!1,disabled:!1},s.uploadedFilesData=[],s.base64String=[],s.isForm=!1,s.allTypes=!1,s.pausedData=[],s.uploadMetaData=[],s.tabIndex="0",s.btnTabIndex="0",s.disableKeyboardNavigation=!1,s.count=-1,s.actionCompleteCount=0,s.flag=!0,s.selectedFiles=[],s.uploaderName="UploadFiles",s.fileStreams=[],s.newFileRef=0,s.isFirstFileOnSelection=!1,s.dragCounter=0,s.isAngular=!1,s.fileList=[],s.filesData=[],s.uploaderOptions=e,s}return Jm(t,a),t.prototype.onPropertyChanged=function(e,i){for(var s=0,n=Object.keys(e);s<n.length;s++)switch(n[s]){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=(0,r.le)(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=(0,r.le)(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=(0,r.le)(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":(0,r.NA)("ej2_instances",this.element)[0].isReact?this.reRenderFileList():this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=(0,r.NA)("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(i.cssClass)}},t.prototype.setLocalizedTexts=function(){(0,r.le)(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!(0,r.le)(this.uploadWrapper.querySelector("."+tw))&&(this.uploadWrapper.querySelector("."+tw).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},t.prototype.getKeyValue=function(e){for(var i,s=0,n=Object.keys(this.preLocaleObj);s<n.length;s++){var o=n[s];this.preLocaleObj[""+o]===e&&(i=o)}return i},t.prototype.updateFileList=function(){if(this.fileList.length>0&&!(0,r.le)(this.uploadWrapper.querySelector("."+GL)))for(var i=0;i<this.fileList.length;i++)this.fileList[i].querySelector(".e-file-status").innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[i].status)),this.filesData[i].status=this.localizedTexts(this.getKeyValue(this.filesData[i].status)),this.fileList[i].classList.contains(Yr)&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[i].querySelector(".e-file-play-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[i].querySelector(".e-file-remove-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[i].querySelector(".e-file-reload-btn")&&this.fileList[i].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},t.prototype.reRenderFileList=function(){this.listParent&&((0,r.og)(this.listParent),this.listParent=null,this.fileList=[],this.internalCreateFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},t.prototype.preRender=function(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",invalidFileName:"File Name is not allowed",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new r.E7("uploader",this.localeText,this.locale),this.preLocaleObj=(0,r.NA)("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var e=(0,r.NA)("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){for(var i=this.createElement("input",{attrs:{type:"file"}}),s=0;s<this.element.attributes.length;s++)"id"!==this.element.attributes[s].nodeName?i.setAttribute(this.element.attributes[s].nodeName,this.element.attributes[s].nodeValue):"id"===this.element.attributes[s].nodeName&&i.setAttribute(this.element.attributes[s].nodeName,(0,r.QI)("uploader")),i.innerHTML=this.element.innerHTML;i.hasAttribute("name")||i.setAttribute("name","UploadFiles"),this.element.appendChild(i),this.element=i,(0,r.sO)("ej2_instances",e,this.element)}e[0].isPureReactComponent&&((0,r.le)(e[0].props.name)?!(0,r.le)(e[0].props.id)&&(0,r.le)(e[0].props.name)?this.element.setAttribute("name",e[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",e[0].props.name)),(0,r.le)(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=r.AR.info.name,this.uploaderName=this.element.getAttribute("name")},t.prototype.formRendered=function(){var e=(0,r.oq)(this.element,"form");if(!(0,r.le)(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},t.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},t.prototype.getModuleName=function(){return"uploader"},t.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},t.prototype.render=function(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()},t.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},t.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()},t.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},t.prototype.wireActionButtonEvents=function(){r.bi.add(this.uploadButton,"click",this.uploadButtonClick,this),r.bi.add(this.clearButton,"click",this.clearButtonClick,this)},t.prototype.unwireActionButtonEvents=function(){r.bi.remove(this.uploadButton,"click",this.uploadButtonClick),r.bi.remove(this.clearButton,"click",this.clearButtonClick)},t.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),(0,r.og)(this.actionButtons),this.actionButtons=null)},t.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e=(0,r.le)(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var i=(0,r.le)(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=i,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},t.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var e=this.createElement("span",{className:UL});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},t.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.internalCreateFileList(this.filesData);if((0,r.le)(this.files[0].size))return;this.isPreloadFiles=!0;var e=[].slice.call(this.files),i=[];this.multiple||(this.clearData(),e=[e[0]]);for(var s=0,n=e;s<n.length;s++){var o=n[s],l={name:o.name+"."+o.type.split(".")[o.type.split(".").length-1],rawFile:"",size:o.size,status:this.localizedTexts("uploadSuccessMessage"),type:o.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};i.push(l),this.filesData.push(l)}this.internalCreateFileList(i),!this.autoUpload&&this.listParent&&!this.actionButtons&&(!this.isForm||this.allowUpload())&&this.showFileList&&this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}},t.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll("."+QL).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+Yr).length+this.uploadWrapper.querySelectorAll("span."+Ir).length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},t.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:(0,r.Ys)(this.dropArea,document);for(var i=this.element,s=!1;i.parentNode;)(i=i.parentNode)===this.dropZoneElement&&(s=!0,e?e.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!s&&e&&(0,r.Od)(e)}else!(0,r.le)(this.uploaderOptions)&&void 0===this.uploaderOptions.dropArea&&(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},t.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&(0,r.Od)(e)}},t.prototype.createDropTextHint=function(){var e=this.createElement("span",{className:tw});e.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(e)},t.prototype.updateHTMLAttrToElement=function(){if(!(0,r.le)(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];e1.indexOf(s)<0&&this.element.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.updateHTMLAttrToWrapper=function(){if(!(0,r.le)(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];if(e1.indexOf(s)>-1)if("class"===s){var n=this.htmlAttributes[""+s].replace(/\s+/g," ").trim();""!==n&&(0,r.cn)([this.uploadWrapper],n.split(" "))}else if("style"===s){var o=this.uploadWrapper.getAttribute(s);o=(0,r.le)(o)?this.htmlAttributes[""+s]:o+this.htmlAttributes[""+s],this.uploadWrapper.setAttribute(s,o)}else this.uploadWrapper.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var e=document.createAttribute("multiple");e.value="multiple",this.element.setAttributeNode(e)}else this.multiple||this.element.removeAttribute("multiple")},t.prototype.checkAutoUpload=function(e){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(e):this.upload(e),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},t.prototype.sequenceUpload=function(e){if(this.filesData.length-e.length==0||"1"!==this.filesData[this.filesData.length-e.length-1].statusCode){(this.multiple||this.count<0)&&++this.count;var i=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],i),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}},t.prototype.setCSSClass=function(e){var i=e;(0,r.le)(e)||(i=e.replace(/\s+/g," ").trim()),!(0,r.le)(e)&&""!==i&&(0,r.IV)([this.uploadWrapper],i.split(" "));var s=this.cssClass;!(0,r.le)(this.cssClass)&&""!==this.cssClass&&(s=this.cssClass.replace(/\s+/g," ").trim()),!(0,r.le)(this.cssClass)&&""!==s&&(0,r.cn)([this.uploadWrapper],s.split(s.indexOf(",")>-1?",":" "))},t.prototype.wireEvents=function(){r.bi.add(this.browseButton,"click",this.browseButtonClick,this),r.bi.add(this.element,"change",this.onSelectFiles,this),r.bi.add(document,"click",this.removeFocus,this),this.keyboardModule=new r.nv(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&r.bi.add(this.formElement,"reset",this.resetForm,this)},t.prototype.unWireEvents=function(){r.bi.remove(this.browseButton,"click",this.browseButtonClick),r.bi.remove(this.element,"change",this.onSelectFiles),r.bi.remove(document,"click",this.removeFocus),this.isForm&&r.bi.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},t.prototype.resetForm=function(){this.clearAll()},t.prototype.keyActionHandler=function(e){var i=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(i.classList.contains(qs))(s=this.getCurrentMetaData(null,e)).file.statusCode="4",s.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(s,!1);else if(i.classList.contains(Rh))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(i.classList.contains(ka)){var s=this.getCurrentMetaData(null,e);if((0,r.le)(s)){var o=this.filesData[this.fileList.indexOf(e.target.parentElement)];this.retry(o)}else s.file.statusCode="1",s.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(s.file)}else this.removeFiles(e),i.classList.contains(Ii)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}},t.prototype.getCurrentMetaData=function(e,i){var s,n;s=(0,r.le)(e)?this.filesData[this.fileList.indexOf(i.target.parentElement)]:e;for(var l=0;l<this.uploadMetaData.length;l++)this.uploadMetaData[l].file.name===s.name&&(n=this.uploadMetaData[l]);return n},t.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+aw)&&(document.activeElement.blur(),this.listParent.querySelector("."+aw).classList.remove(aw))},t.prototype.browseButtonClick=function(){this.element.click()},t.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},t.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},t.prototype.bindDropEvents=function(){this.dropZoneElement&&(r.bi.add(this.dropZoneElement,"drop",this.dropElement,this),r.bi.add(this.dropZoneElement,"dragover",this.dragHover,this),r.bi.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),r.bi.add(this.dropZoneElement,"paste",this.onPasteFile,this),r.bi.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},t.prototype.unBindDropEvents=function(){this.dropZoneElement&&(r.bi.remove(this.dropZoneElement,"drop",this.dropElement),r.bi.remove(this.dropZoneElement,"dragover",this.dragHover),r.bi.remove(this.dropZoneElement,"dragleave",this.onDragLeave),r.bi.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},t.prototype.onDragEnter=function(e){!this.enabled||(this.dropZoneElement.classList.add(iw),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},t.prototype.onDragLeave=function(){!this.enabled||(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(iw))},t.prototype.dragHover=function(e){!this.enabled||("Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),e.preventDefault(),e.stopPropagation())},t.prototype.dropElement=function(e){this.dragCounter=0,this.dropZoneElement.classList.remove(iw),this.onSelectFiles(e),e.preventDefault(),e.stopPropagation()},t.prototype.onPasteFile=function(e){var i=e.clipboardData.items;if("paste"===e.type&&"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=e.clipboardData.files),1===i.length){var s=[].slice.call(i)[0];"file"===s.kind&&s.type.match("^image/")&&this.renderSelectedFiles(e,[s.getAsFile()],!1,!0)}},t.prototype.getSelectedFiles=function(e){for(var i=[],s=this.fileList[e],n=this.getFilesData(),o=+s.getAttribute("data-files-count"),l=0,h=0;h<e;h++)l+=+this.fileList[h].getAttribute("data-files-count");for(var c=l;c<l+o;c++)i.push(n[c]);return i},t.prototype.removeFiles=function(e){if(this.enabled){var s=this.fileList.indexOf(e.target.parentElement),n=this.fileList[s],o=this.isFormUpload(),l=o?this.getSelectedFiles(s):this.getFilesInArray(this.filesData[s]);if(!(0,r.le)(l)){if(e.target.classList.contains(Ii)&&!o){if(l[0].statusCode="5",!(0,r.le)(n)){var h=n.querySelector("."+Ii);sn({target:h,width:"20px"}),ri(h)}this.sequentialUpload&&this.uploadSequential(),n.classList.contains(Cd)||this.checkActionComplete(!0)}else(0,r.oq)(e.target,"."+XL)||this.remove(l,!1,!1,!0,e);this.checkActionButtonStatus()}}},t.prototype.removeFilesData=function(e,i){var s;if(i)this.showFileList||(s=this.filesData.indexOf(e),this.filesData.splice(s,1));else{var n=this.getLiElement(e);(0,r.le)(n)||(this.element.value="",(0,r.og)(n),s=this.fileList.indexOf(n),this.fileList.splice(s,1),this.filesData.splice(s,1),0===this.fileList.length&&!(0,r.le)(this.listParent)&&((0,r.og)(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&s<=this.count&&--this.count)}},t.prototype.removeUploadedFile=function(e,i,s,n){var o=this,l=e,h=new r.tk(this.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1;var c=new FormData;h.beforeSend=function(u){i.currentRequest=h.httpRequest,s?o.removingEventCallback(i,c,l,e):o.trigger("removing",i,function(p){p.cancel?u.cancel=!0:o.removingEventCallback(p,c,l,e)})},h.onLoad=function(u){return o.removeCompleted(u,l,n),{}},h.onError=function(u){return o.removeFailed(u,l,n),{}},h.send(c)},t.prototype.removingEventCallback=function(e,i,s,n){var o=this.element.getAttribute("name"),l=this.getLiElement(n);if(!((0,r.le)(l)||(0,r.le)(l.querySelector("."+Er))&&(0,r.le)(l.querySelector("."+bs)))){var h=l.querySelector("."+Er)?l.querySelector("."+Er):l.querySelector("."+bs);sn({target:h,width:"20px"}),ri(h)}e.postRawFile&&!(0,r.le)(s.rawFile)&&""!==s.rawFile?i.append(o,s.rawFile,s.name):i.append(o,s.name),this.updateFormData(i,e.customFormData)},t.prototype.updateFormData=function(e,i){if(i.length>0&&i[0])for(var s=function(o){var l=i[o],h=Object.keys(l).map(function(c){return l[""+c]});e.append(Object.keys(l)[0],h)},n=0;n<i.length;n++)s(n)},t.prototype.updateCustomheader=function(e,i){if(i.length>0&&i[0])for(var s=function(o){var l=i[o],h=Object.keys(l).map(function(c){return l[""+c]});e.setRequestHeader(Object.keys(l)[0],h)},n=0;n<i.length;n++)s(n)},t.prototype.removeCompleted=function(e,i,s){var n=e&&e.currentTarget?this.getResponse(e):null,o=e.target;if(4===o.readyState&&o.status>=200&&o.status<=299){var l={e,response:n,operation:"remove",file:this.updateStatus(i,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",l),this.removeFilesData(i,s);var h=this.uploadedFilesData.indexOf(i);this.uploadedFilesData.splice(h,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(e,i,s)},t.prototype.removeFailed=function(e,i,s){var o={e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(i,this.localizedTexts("removedFailedMessage"),"0")};if(!s){var l=this.filesData.indexOf(i),h=this.fileList[l];if(h){h.classList.remove(Yr),h.classList.add(xr);var c=h.querySelector("."+Fi);c&&(c.classList.remove(Yr),c.classList.add(xr))}this.checkActionButtonStatus()}this.trigger("failure",o);var u=this.getLiElement(i);(0,r.le)(u)||(0,r.le)(u.querySelector("."+Er))||(_i(u.querySelector("."+Er)),(0,r.og)(u.querySelector(".e-spinner-pane")))},t.prototype.getFilesFromFolder=function(e){this.filesEntries=[];var i=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]];if(this.checkDirectoryUpload(i))for(var n=function(h){var c=i[h].webkitGetAsEntry();if(c.isFile){var u=[];c.file(function(p){u.push({path:c.fullPath,file:p})}),o.renderSelectedFiles(e,u,!0)}else c.isDirectory&&o.traverseFileTree(c,e)},o=this,l=0;l<i.length;l++)n(l)},t.prototype.checkDirectoryUpload=function(e){for(var i=0;e&&i<e.length;i++)if(e[i].webkitGetAsEntry().isDirectory)return!0;return!1},t.prototype.traverseFileTree=function(e,i){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var s=e.createReader();this.readFileFromDirectory(s,i)}},t.prototype.readFileFromDirectory=function(e,i){var s=this;e.readEntries(function(n){for(var o=0;o<n.length;o++)s.traverseFileTree(n[o],i);s.pushFilesEntries(i),n.length&&s.readFileFromDirectory(e)})},t.prototype.pushFilesEntries=function(e){for(var i=this,s=[],n=function(h){o.filesEntries[h].file(function(c){i.filesEntries.length&&(s.push({path:i.filesEntries[h].fullPath,file:c}),h===i.filesEntries.length-1&&(i.filesEntries=[],i.renderSelectedFiles(e,s,!0)))})},o=this,l=0;l<this.filesEntries.length;l++)n(l)},t.prototype.onSelectFiles=function(e){if(this.enabled){var i;if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{var s=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=s),s.length>0&&(i=this.multiple?this.sortFileList(s):[s[0]],this.renderSelectedFiles(e,i))}else i=[].slice.call(e.target.files),this.renderSelectedFiles(e,i);(this.isAngular||this.isReact)&&e.stopPropagation()}},t.prototype.getBase64=function(e){return new Promise(function(i,s){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return i(n.result)},n.onerror=function(o){return s(o)}})},t.prototype.renderSelectedFiles=function(e,i,s,n){var o=this;this.base64String=[];var l={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(i.length<1)return l.isCanceled=!0,void this.trigger("selected",l);this.flag=!0;var h=[];this.multiple||(this.clearData(!0),this.actionCompleteCount=0,i=[i[0]]);for(var c=0;c<i.length;c++)this.updateInitialFileDetails(e,i,s?i[c].file:i[c],c,h,s,n);if(l.filesData=h,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(c=0;c<h.length;c++){for(var p=r.pJ.beforeSanitize(),d=r.pJ.serializeValue(p,h[parseInt(c.toString())].name),f=h[parseInt(c.toString())].name,g=!1,m=0;m<f.length;m++)if(f.charCodeAt(m)>127){g=!0;break}var y=/<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/i.test(f);if(d!==h[parseInt(c.toString())].name&&(!g||y)){var C=i[parseInt(c.toString())].name.replace(/[\u00A0-\u9999<>\&]/g,function(S){return"&#"+S.charCodeAt(0)+";"});h[parseInt(c.toString())].name=C,h[parseInt(c.toString())].status=this.localizedTexts("invalidFileName"),h[parseInt(c.toString())].statusCode="0"}}this.allTypes||(h=this.checkExtension(h)),this.trigger("selected",l,function(b){o._internalRenderSelect(b,h)})},t.prototype.updateInitialFileDetails=function(e,i,s,n,o,l,h){var u={name:l?i[n].path.substring(1,i[n].path.length):h?(0,r.QI)(s.name.substring(0,s.name.lastIndexOf(".")))+"."+this.getFileType(s.name):this.directoryUpload?i[n].webkitRelativePath:s.name,rawFile:s,size:s.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(s.name),validationMessages:this.validatedFileSize(s.size),statusCode:"1",id:(0,r.QI)(s.name.substring(0,s.name.lastIndexOf(".")))+"."+this.getFileType(s.name)};h&&(u.fileSource="paste"),u.status=""!==u.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==u.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):u.status,(""!==u.validationMessages.minSize||""!==u.validationMessages.maxSize)&&(u.statusCode="0"),o.push(u)},t.prototype._internalRenderSelect=function(e,i){if(!e.cancel){if(this.selectedFiles=this.selectedFiles.concat(i),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var s=0;s<e.modifiedFilesData.length;s++)for(var n=0;n<i.length;n++)e.modifiedFilesData[s].id===i[n].id&&(e.modifiedFilesData[s].rawFile=i[n].rawFile);var o=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(o),this.filesData=this.filesData.concat(o),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(o)}else{if(this.internalCreateFileList(i),this.autoUpload&&this.sequenceUpload&&this.filesData.length>0&&"2"!==this.filesData[this.filesData.length-1].statusCode)return void(this.filesData=this.filesData.concat(i));this.filesData=this.filesData.concat(i),(!this.isForm||this.allowUpload())&&this.checkAutoUpload(i)}!(0,r.le)(e.progressInterval)&&""!==e.progressInterval&&(this.progressInterval=e.progressInterval)}else this.filesData=this.filesData.concat(i),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},t.prototype.allowUpload=function(){var e=!1;return this.isForm&&!(0,r.le)(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},t.prototype.isFormUpload=function(){var e=!1;return this.isForm&&((0,r.le)(this.asyncSettings.saveUrl)||""===this.asyncSettings.saveUrl)&&((0,r.le)(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl)&&(e=!0),e},t.prototype.clearData=function(e){(0,r.le)(this.listParent)||((0,r.og)(this.listParent),this.listParent=null),"msie"!==this.browserName&&!e&&(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},t.prototype.updateSortedFileList=function(e){var i=this.createElement("div",{id:"clonewrapper"}),s=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var o=this.listParent.querySelectorAll("li")[n];i.appendChild(o.cloneNode(!0))}this.removeActionButtons();var l=[].slice.call(i.childNodes);this.createParentUL();for(var h=0;h<e.length;h++){for(var c=0;c<this.filesData.length;c++)this.filesData[c].name===e[h].name&&(this.listParent.appendChild(l[c]),r.bi.add(l[c].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(l[c]),s=h);s!==h&&this.internalCreateFileList([e[h]])}}else this.internalCreateFileList(e)},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.checkExtension=function(e){var i=e;if(!this.isBlank(this.allowedExtensions)){for(var s=[],o=0,l=this.allowedExtensions.split(",");o<l.length;o++)s.push(l[o].trim().toLocaleLowerCase());for(var c=0;c<e.length;c++)-1===s.indexOf(("."+e[c].type).toLocaleLowerCase())&&(e[c].status=this.localizedTexts("invalidFileType"),e[c].statusCode="0")}return i},t.prototype.validatedFileSize=function(e){var i="",s="";return e<this.minFileSize?i=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?s=this.localizedTexts("invalidMaxFileSize"):(i="",s=""),{minSize:i,maxSize:s}},t.prototype.isPreLoadFile=function(e){for(var i=!1,s=0;s<this.files.length;s++)this.files[s].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[s].type===e.type&&(i=!0);return i},t.prototype.createCustomfileList=function(e){this.createParentUL();for(var i=0,s=e;i<s.length;i++){var n=s[i],o=this.createElement("li",{className:$m,attrs:{"data-file-name":n.name}});this.uploadTemplateFn=this.templateComplier(this.template);var l=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,o);if(l){var h=[].slice.call(l);(0,r.R3)(h,o)}var c=e.indexOf(n),u={element:o,fileInfo:n,index:c,isPreload:this.isPreLoadFile(n)},p={element:o,fileInfo:n,index:c,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",u),this.trigger("fileListRendering",p),this.listParent.appendChild(o),this.fileList.push(o)}this.renderReactTemplates()},t.prototype.createParentUL=function(){(0,r.le)(this.listParent)&&(this.listParent=this.createElement("ul",{className:GL}),this.uploadWrapper.appendChild(this.listParent))},t.prototype.formFileList=function(e,i){var s=this.createElement("li",{className:$m});s.setAttribute("data-files-count",e.length+"");for(var o,n=this.createElement("span",{className:nw}),l=0,h=e;l<h.length;l++){var c=h[l],u=this.createElement("span",{className:ZL});u.innerHTML=this.getFileNameOnly(c.name);var p=this.createElement("span",{className:YL}),d=this.getFileType(c.name);if(p.innerHTML="."+d,d||p.classList.add("e-hidden"),this.enableRtl){var f=this.createElement("span",{className:$L});f.appendChild(p),f.appendChild(u),n.appendChild(f)}else n.appendChild(u),n.appendChild(p);this.truncateName(u),o=this.formValidateFileInfo(c,s)}s.appendChild(n),this.setListToFileInfo(e,s);var g=this.listParent.querySelectorAll("li").length,m=this.createElement("span");if(s.classList.contains(Sd)?(m.classList.add(Fi),m.classList.add(Sd),m.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):o):(m.classList.add(e.length>1?"e-file-information":KL),m.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),n.appendChild(m),(0,r.le)(s.querySelector(".e-icons"))){var v=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&v.classList.add("e-msie"),v.setAttribute("title",this.localizedTexts("remove")),s.appendChild(n),s.appendChild(v),r.bi.add(v,"click",this.removeFiles,this),v.classList.add(bs)}var y={element:s,fileInfo:this.mergeFileInfo(e,s),index:g,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,s))},C={element:s,fileInfo:this.mergeFileInfo(e,s),index:g,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,s))};this.trigger("rendering",y),this.trigger("fileListRendering",C),this.listParent.appendChild(s),this.fileList.push(s)},t.prototype.formValidateFileInfo=function(e,i){var s=e.status,n=this.validatedFileSize(e.size);(""!==n.minSize||""!==n.maxSize)&&(this.addInvalidClass(i),s=""!==n.minSize?this.localizedTexts("invalidMinFileSize"):""!==n.maxSize?this.localizedTexts("invalidMaxFileSize"):s);var o=this.checkExtension(this.getFilesInArray(e))[0].status;return o===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(i),s=o),s},t.prototype.addInvalidClass=function(e){e.classList.add(Sd)},t.prototype.createFormInput=function(e){if("safari"!==this.browserName){var i=this.element.cloneNode(!0);i.classList.add("e-hidden-file-input");for(var s=0,n=e;s<n.length;s++)n[s].input=i;i.setAttribute("id",(0,r.QI)("hiddenUploader")),i.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+UL).appendChild(i),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")}},t.prototype.getFileSize=function(e){for(var i=0,s=0,n=e;s<n.length;s++)i+=n[s].size;return i},t.prototype.mergeFileInfo=function(e,i){for(var s={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:i},n=[],o="",l=0,h=e;l<h.length;l++){var c=h[l];n.push(c.name),o=c.type}return s.name=n.join(", "),s.size=this.getFileSize(e),s.type=o,s.status=this.statusForFormUpload(e,i),s},t.prototype.statusForFormUpload=function(e,i){for(var n,s=!0,o=0,l=e;o<l.length;o++){var h=l[o];n=h.status;var c=this.validatedFileSize(h.size);(""!==c.minSize||""!==c.maxSize)&&(s=!1,n=""!==c.minSize?this.localizedTexts("invalidMinFileSize"):""!==c.maxSize?this.localizedTexts("invalidMaxFileSize"):n);var u=this.checkExtension(this.getFilesInArray(h))[0].status;u===this.localizedTexts("invalidFileType")&&(s=!1,n=u)}return s?n=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(i.classList.add(Sd),n=e.length>1?this.localizedTexts("invalidFileSelection"):n),n},t.prototype.formCustomFileList=function(e,i){this.createParentUL();var s=this.createElement("li",{className:$m});s.setAttribute("data-files-count",e.length+""),this.setListToFileInfo(e,s);var n=this.mergeFileInfo(e,s);s.setAttribute("data-file-name",n.name),this.uploadTemplateFn=this.templateComplier(this.template);var o=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,s);if(o){var l=[].slice.call(o);(0,r.R3)(l,s)}var h=this.listParent.querySelectorAll("li").length;s.classList.contains(Sd)||this.createFormInput(e);var c={element:s,fileInfo:n,index:h,isPreload:this.isPreLoadFile(n)},u={element:s,fileInfo:n,index:h,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",c),this.trigger("fileListRendering",u),this.listParent.appendChild(s),this.fileList.push(s),this.renderReactTemplates()},t.prototype.createFileList=function(e){this.filesData=this.filesData&&this.filesData.length>0?this.filesData.concat(e):e,this.internalCreateFileList(e)},t.prototype.internalCreateFileList=function(e){if(this.createParentUL(),""===this.template||(0,r.le)(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add(t1),this.formFileList(e,this.element.files);else for(var i=0,s=e;i<s.length;i++){var n=s[i],o=this.createElement("li",{className:$m,attrs:{"data-file-name":n.name,"data-files-count":"1"}}),l=this.createElement("span",{className:nw}),h=this.createElement("span",{className:ZL,attrs:{title:n.name}});h.innerHTML=this.getFileNameOnly(n.name);var c=this.createElement("span",{className:YL}),u=this.getFileType(n.name);if(c.innerHTML="."+u,u||c.classList.add("e-hidden"),this.enableRtl){var p=this.createElement("span",{className:$L});p.appendChild(c),p.appendChild(h),l.appendChild(p)}else l.appendChild(h),l.appendChild(c);var d=this.createElement("span",{className:KL});d.innerHTML=this.bytesToSize(n.size),l.appendChild(d);var f=this.createElement("span",{className:Fi});l.appendChild(f),f.innerHTML=n.status,o.appendChild(l);var g=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&g.classList.add("e-msie"),g.setAttribute("title",this.localizedTexts("remove")),o.appendChild(g),r.bi.add(g,"click",this.removeFiles,this),"2"===n.statusCode?(f.classList.add(Yr),g.classList.add(Er),g.setAttribute("title",this.localizedTexts("delete"))):"1"!==n.statusCode&&(f.classList.remove(Yr),f.classList.add(QL)),this.autoUpload&&"1"===n.statusCode&&""!==this.asyncSettings.saveUrl&&(f.innerHTML=""),g.classList.contains(Er)||g.classList.add(bs);var m=e.indexOf(n),v={element:o,fileInfo:n,index:m,isPreload:this.isPreLoadFile(n)},y={element:o,fileInfo:n,index:m,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",v),this.trigger("fileListRendering",y),this.listParent.appendChild(o),this.fileList.push(o),this.truncateName(h);var C=this.flag;this.isPreLoadFile(n)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=C)}else this.isFormUpload()?(this.uploadWrapper.classList.add(t1),this.formCustomFileList(e,this.element.files)):this.createCustomfileList(e)},t.prototype.getSlicedName=function(e){var i=e.textContent;e.dataset.tail=i.slice(i.length-10)},t.prototype.setListToFileInfo=function(e,i){for(var s=0,n=e;s<n.length;s++)n[s].list=i},t.prototype.truncateName=function(e){("edge"!==this.browserName&&e.offsetWidth<e.scrollWidth||e.offsetWidth+1<e.scrollWidth)&&this.getSlicedName(e)},t.prototype.getFileType=function(e){var i,s=e.lastIndexOf(".");return s>=0&&(i=e.substring(s+1)),i||""},t.prototype.getFileNameOnly=function(e){var i=this.getFileType(e);return e.split("."+i)[0]},t.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},t.prototype.filterfileList=function(e){for(var i=[],n=0;n<e.length;n++)this.getLiElement(e[n]).classList.contains(Yr)||i.push(e[n]);return i},t.prototype.updateStatus=function(e,i,s,n){if(void 0===n&&(n=!0),!(""===i||(0,r.le)(i))&&!(""===s||(0,r.le)(s))&&(e.status=i,e.statusCode=s),n){var o=this.getLiElement(e);(0,r.le)(o)||!(0,r.le)(o.querySelector("."+Fi))&&""!==i&&!(0,r.le)(i)&&(o.querySelector("."+Fi).textContent=i)}return e},t.prototype.getLiElement=function(e){for(var i,s=0;s<this.filesData.length;s++)!(0,r.le)(e)&&((0,r.le)(this.filesData[s].id)||(0,r.le)(e.id)?this.filesData[s].name===e.name:this.filesData[s].name===e.name&&this.filesData[s].id===e.id)&&(i=s);return this.fileList[i]},t.prototype.createProgressBar=function(e){var i=this.createElement("span",{className:Oh}),s=this.createElement("progressbar",{className:ev,attrs:{value:"0",max:"100"}}),n=this.createElement("span",{className:"e-progress-inner-wrap"});s.setAttribute("style","width: 0%");var o=this.createElement("span",{className:sw});o.textContent="0%",n.appendChild(s),i.appendChild(n),i.appendChild(o),e.querySelector("."+nw).appendChild(i)},t.prototype.updateProgressbar=function(e,i){if(!isNaN(Math.round(e.loaded/e.total*100))&&!(0,r.le)(i.querySelector("."+ev)))if((0,r.le)(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(i,Math.round(e.loaded/e.total*100).toString()+"%");else{var s=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);(0===s||100===s)&&this.changeProgressValue(i,Math.round(e.loaded/e.total*100).toString()+"%")}},t.prototype.changeProgressValue=function(e,i){e.querySelector("."+ev).setAttribute("style","width:"+i),e.querySelector("."+sw).textContent=i},t.prototype.uploadInProgress=function(e,i,s,n){var o=this.getLiElement(i);if(!(0,r.le)(o)||s){if((0,r.le)(o))this.cancelUploadingFile(i,e,n);else{"5"===i.statusCode&&this.cancelUploadingFile(i,e,n,o),!(o.querySelectorAll("."+Oh).length>0)&&o.querySelector("."+Fi)&&(o.querySelector("."+Fi).classList.add(Ir),this.createProgressBar(o),this.updateProgressBarClasses(o,Ir),o.querySelector("."+Fi).classList.remove(xr)),this.updateProgressbar(e,o);var l=o.querySelector("."+bs);(0,r.le)(l)||(l.classList.add(Ii,Ir),l.setAttribute("title",this.localizedTexts("abort")),l.classList.remove(bs))}var h={e,operation:"upload",file:this.updateStatus(i,this.localizedTexts("inProgress"),"3")};this.trigger("progress",h)}},t.prototype.cancelUploadingFile=function(e,i,s,n){var o=this;"5"===e.statusCode&&this.trigger("canceling",{event:i,fileData:e,cancel:!1,customFormData:[]},function(h){if(h.cancel){if(e.statusCode="3",!(0,r.le)(n)){var c=n.querySelector("."+Ii);(0,r.le)(c)||(_i(c),(0,r.og)(n.querySelector(".e-spinner-pane")))}}else{s.emitError=!1,s.httpRequest.abort();var u=new FormData;if("5"===e.statusCode){var p=o.element.getAttribute("name");u.append(p,e.name),u.append("cancel-uploading",e.name),o.updateFormData(u,h.customFormData);var d=new r.tk(o.asyncSettings.removeUrl,"POST",!0,null);d.emitError=!1,d.onLoad=function(f){return o.removecanceledFile(f,e),{}},d.send(u)}}})},t.prototype.removecanceledFile=function(e,i){var s=this.getLiElement(i);if(!((0,r.le)(s)||s.querySelector("."+ka)||(0,r.le)(s.querySelector("."+Ii)))){this.updateStatus(i,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,i,s);var n=s.querySelector("."+bs);(0,r.le)(s)||(_i(n),(0,r.le)(s.querySelector(".e-spinner-pane"))||(0,r.og)(s.querySelector(".e-spinner-pane")));var o=e&&e.currentTarget?this.getResponse(e):null;this.trigger("success",{event:e,response:o,operation:"cancel",file:i})}},t.prototype.renderFailureState=function(e,i,s){var n=this;this.updateProgressBarClasses(s,xr),this.removeProgressbar(s,"failure"),(0,r.le)(s.querySelector(".e-file-status"))||s.querySelector(".e-file-status").classList.add(xr);var o=s.querySelector("."+Ii);(0,r.le)(o)||(o.classList.remove(Ii,Ir),o.classList.add(bs),o.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),s.querySelector("."+ka).addEventListener("click",function(h){n.reloadcanceledFile(h,i,s,!1)},!1))},t.prototype.reloadcanceledFile=function(e,i,s,n){i.statusCode="1",i.status=this.localizedTexts("readyToUploadMessage"),n||((0,r.le)(s.querySelector("."+Fi))||s.querySelector("."+Fi).classList.remove(xr),(0,r.le)(s.querySelector("."+ka))||(0,r.og)(s.querySelector("."+ka)),this.pauseButton=null),(0,r.le)(s)||s.classList.add(Cd),this.upload([i])},t.prototype.uploadComplete=function(e,i,s){var n=e.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var o=this.getLiElement(i);if((0,r.le)(o)&&(!s||(0,r.le)(s)))return;if(!(0,r.le)(o)){this.updateProgressBarClasses(o,Yr),this.removeProgressbar(o,"success");var l=o.querySelector("."+Ii);(0,r.le)(l)||(l.classList.add(Er),l.setAttribute("title",this.localizedTexts("delete")),l.classList.remove(Ii),l.classList.remove(Ir))}this.raiseSuccessEvent(e,i)}else this.uploadFailed(e,i)},t.prototype.getResponse=function(e){var i=e.currentTarget;return{readyState:i.readyState,statusCode:i.status,statusText:i.statusText,headers:i.getAllResponseHeaders(),withCredentials:i.withCredentials}},t.prototype.raiseSuccessEvent=function(e,i){var s=this,n=e&&e.currentTarget?this.getResponse(e):null,o=this.localizedTexts("uploadSuccessMessage"),l={e,response:n,operation:"upload",file:this.updateStatus(i,o,"2",!1),statusText:o},h=this.getLiElement(i);if(!(0,r.le)(h)){var c=h.querySelector("."+XL);(0,r.le)(c)||(_i(h),(0,r.og)(c))}this.trigger("success",l,function(u){s.updateStatus(i,u.statusText,"2"),s.uploadedFilesData.push(i),s.trigger("change",{file:s.uploadedFilesData}),s.checkActionButtonStatus(),s.fileList.length>0&&(s.getLiElement(i).classList.contains(Cd)?s.getLiElement(i).classList.remove(Cd):(s.uploadSequential(),s.checkActionComplete(!0)))})},t.prototype.uploadFailed=function(e,i){var s=this,n=this.getLiElement(i),o=e&&e.currentTarget?this.getResponse(e):null,l=this.localizedTexts("uploadFailedMessage"),h={e,response:o,operation:"upload",file:this.updateStatus(i,l,"0",!1),statusText:l};(0,r.le)(n)||this.renderFailureState(e,i,n),this.trigger("failure",h,function(c){s.updateStatus(i,c.statusText,"0"),s.checkActionButtonStatus(),s.uploadSequential(),s.checkActionComplete(!0)})},t.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},t.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},t.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",e)}},t.prototype.getSelectedFileStatus=function(e){for(var i=[],s=0,n=0;n<e.length;n++)for(var o=e[n],l=0;l<this.filesData.length;l++)this.filesData[l].name===o.name&&this.filesData[l].status===o.status&&(i[s]=this.filesData[l],++s);return i},t.prototype.updateProgressBarClasses=function(e,i){var s=e.querySelector("."+ev);(0,r.le)(s)||s.classList.add(i)},t.prototype.removeProgressbar=function(e,i){var s=this;(0,r.le)(e.querySelector("."+Oh))||(this.progressAnimation=new r.fw({duration:1250}),this.progressAnimation.animate(e.querySelector("."+Oh),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector("."+sw),{name:"FadeOut"}),setTimeout(function(){s.animateProgressBar(e,i)},750))},t.prototype.animateProgressBar=function(e,i){"success"===i?(e.classList.add(Yr),(0,r.le)(e.querySelector("."+Fi))||(e.querySelector("."+Fi).classList.remove(Ir),this.progressAnimation.animate(e.querySelector("."+Fi),{name:"FadeIn"}),e.querySelector("."+Fi).classList.add(Yr))):(0,r.le)(e.querySelector("."+Fi))||(e.querySelector("."+Fi).classList.remove(Ir),this.progressAnimation.animate(e.querySelector("."+Fi),{name:"FadeIn"}),e.querySelector("."+Fi).classList.add(xr)),e.querySelector("."+Oh)&&(0,r.og)(e.querySelector("."+Oh))},t.prototype.setExtensions=function(e){""===e||(0,r.le)(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)},t.prototype.templateComplier=function(e){if(e)try{return"function"!=typeof e&&(0,r.td)(e,document).length?(0,r.MY)((0,r.Ys)(e,document).innerHTML.trim()):(0,r.MY)(e)}catch(i){return(0,r.MY)(e)}},t.prototype.setRTL=function(){this.enableRtl?(0,r.cn)([this.uploadWrapper],"e-rtl"):(0,r.IV)([this.uploadWrapper],"e-rtl")},t.prototype.localizedTexts=function(e){return this.l10n.setLocale(this.locale),this.l10n.getConstant(e)},t.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains(rw)&&this.uploadWrapper.classList.remove(rw),!(0,r.le)(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!(0,r.le)(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!(0,r.le)(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(rw),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),(0,r.le)(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),(0,r.le)(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},t.prototype.checkHTMLAttributes=function(e){for(var s=0,n=e?(0,r.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];s<n.length;s++){var o=n[s];if(!(0,r.le)(this.element.getAttribute(o)))switch(o){case"accept":((0,r.le)(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||e)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!e),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if((0,r.le)(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||e){var l="multiple"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({multiple:l},!e),this.initialAttr.multiple=!0}break;case"disabled":if((0,r.le)(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||e){var h=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:h},!e),this.initialAttr.disabled=!0}}}},t.prototype.chunkUpload=function(e,i,s){var o=Math.min(this.asyncSettings.chunkSize,e.size),h=e.rawFile.slice(0,o);this.sendRequest(e,{chunkIndex:0,blob:h,file:e,start:0,end:o,retryCount:0,request:null},i,s)},t.prototype.sendRequest=function(e,i,s,n){var o=this,l=new FormData,h=e.rawFile.slice(i.start,i.end);l.append(this.uploaderName,h,e.name),l.append("chunk-index",i.chunkIndex.toString()),l.append("chunkIndex",i.chunkIndex.toString());var c=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);l.append("total-chunk",c.toString()),l.append("totalChunk",c.toString());var u=new r.tk({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});u.emitError=!1,u.onLoad=function(d){return o.chunkUploadComplete(d,i,s),{}},u.onUploadProgress=function(d){return o.chunkUploadInProgress(d,i,s),{}};var p={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};u.beforeSend=function(d){p.currentRequest=u.httpRequest,p.currentChunkIndex=i.chunkIndex,o.trigger(0===p.currentChunkIndex?"uploading":"chunkUploading",p,function(f){o.uploadingEventCallback(l,f,d,e)})},u.onError=function(d){return o.chunkUploadFailed(d,i,s),{}},u.send(l),i.request=u},t.prototype.uploadingEventCallback=function(e,i,s,n){i.cancel?this.eventCancelByArgs(s,i,n):this.updateFormData(e,i.customFormData)},t.prototype.eventCancelByArgs=function(e,i,s){var n=this;if(e.cancel=!0,"5"!==i.fileData.statusCode){i.fileData.statusCode="5",i.fileData.status=this.localizedTexts("fileUploadCancel");var o=this.getLiElement(i.fileData);if(o){(0,r.le)(o.querySelector("."+Fi))||(o.querySelector("."+Fi).innerHTML=this.localizedTexts("fileUploadCancel"),o.querySelector("."+Fi).classList.add(xr)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var l=o.querySelector("."+bs);l&&l.parentElement.insertBefore(this.pauseButton,l),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(h){n.reloadcanceledFile(h,s,o)},!1),this.checkActionButtonStatus()}}},t.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||(0,r.le)(this.asyncSettings.chunkSize))},t.prototype.chunkUploadComplete=function(e,i,s){var l,n=this,o=e.target;if(4===o.readyState&&o.status>=200&&o.status<300){var h=e&&e.currentTarget?this.getResponse(e):null,c=Math.max(Math.ceil(i.file.size/this.asyncSettings.chunkSize),1);if(this.trigger("chunkSuccess",{event:e,file:i.file,chunkIndex:i.chunkIndex,totalChunk:c,chunkSize:this.asyncSettings.chunkSize,response:h}),((0,r.le)(s)||!s)&&(l=this.getLiElement(i.file)),this.updateMetaData(i),i.end===i.file.size&&(i.file.statusCode="3"),"5"===i.file.statusCode)this.trigger("canceling",{event:e,fileData:i.file,cancel:!1,customFormData:[]},function(f){if(f.cancel){i.file.statusCode="3";var g=l.querySelector("."+Ii);!(0,r.le)(l)&&!(0,r.le)(g)&&(_i(g),(0,r.og)(l.querySelector(".e-spinner-pane"))),n.sendNextRequest(i)}else{i.request.emitError=!1,o.abort();var m=new FormData,v=n.element.getAttribute("name");m.append(v,i.file.name),m.append("cancel-uploading",i.file.name),m.append("cancelUploading",i.file.name),n.updateFormData(m,f.customFormData);var y=new r.tk(n.asyncSettings.removeUrl,"POST",!0,null);y.emitError=!1,y.onLoad=function(C){return n.removeChunkFile(C,i,s),{}},y.send(m)}});else{if(c-1===i.chunkIndex&&c>i.chunkIndex){var d=this.pausedData.indexOf(i);return d>=0&&this.pausedData.splice(d,1),(0,r.le)(this.template)&&((0,r.le)(s)||!s)&&l&&(l&&!(0,r.le)(l.querySelector("."+qs))&&(0,r.og)(l.querySelector("."+qs)),this.removeChunkProgressBar(i)),void this.raiseSuccessEvent(e,i.file)}"4"!==i.file.statusCode&&this.sendNextRequest(i)}}else this.chunkUploadFailed(e,i)},t.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},t.prototype.removeChunkFile=function(e,i,s){if((0,r.le)(this.template)&&(0,r.le)(s)&&!s){var n=this.getLiElement(i.file),o=n.querySelector("."+Ii),l=o;this.updateStatus(i.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(n,xr),this.removeProgressbar(n,"failure"),o&&o.classList.remove(Ii),o&&o.classList.add(bs),o&&o.setAttribute("title",this.localizedTexts("remove"));var h=n.querySelector("."+qs);h&&h.classList.add(ka),h&&h.classList.remove(qs),h&&h.setAttribute("title",this.localizedTexts("retry")),!(0,r.le)(n)&&!(0,r.le)(o)&&!(0,r.le)(n.querySelector(".e-spinner-pane"))&&(_i(l),(0,r.og)(n.querySelector(".e-spinner-pane")))}},t.prototype.pauseUpload=function(e,i,s){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var n={event:i||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,s,n)},t.prototype.abortUpload=function(e,i,s){"4"!==e.file.statusCode&&(e.request.emitError=!1,e.request.httpRequest.abort());var n=this.getLiElement(e.file);if((0,r.le)(this.template)&&((0,r.le)(i)||!i)){var o=n.querySelector("."+qs);o.classList.remove(qs),o.classList.add(Rh),o.setAttribute("title",this.localizedTexts("resume")),o.nextElementSibling.classList.add(bs),o.nextElementSibling.classList.remove(Ii),o.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var l=0;l<this.pausedData.length;l++)this.pausedData[l].file.name===e.file.name&&this.pausedData.splice(l,1);this.pausedData.push(e),this.trigger("pausing",s)},t.prototype.resumeUpload=function(e,i,s){var o,n=this.getLiElement(e.file);(0,r.le)(n)||(o=n.querySelector("."+Rh)),!(0,r.le)(o)&&((0,r.le)(s)||!s)&&(o.classList.remove(Rh),o.classList.add(qs),o.setAttribute("title",this.localizedTexts("pause")),o.nextElementSibling.classList.remove(bs),o.nextElementSibling.classList.add(Ii),o.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var l={event:i||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",l);for(var h=0;h<this.pausedData.length;h++)this.pausedData[h].end===this.pausedData[h].file.size?this.chunkUploadComplete(i,e,s):this.pausedData[h].file.name===e.file.name&&(this.pausedData[h].start=this.pausedData[h].end,this.pausedData[h].end=this.pausedData[h].end+this.asyncSettings.chunkSize,this.pausedData[h].end=Math.min(this.pausedData[h].end,this.pausedData[h].file.size),this.pausedData[h].chunkIndex=this.pausedData[h].chunkIndex+1,this.sendRequest(this.pausedData[h].file,this.pausedData[h],s))},t.prototype.updateMetaData=function(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)},t.prototype.removeChunkProgressBar=function(e){var i=this.getLiElement(e.file);if(!(0,r.le)(i)){this.updateProgressBarClasses(i,Yr),this.removeProgressbar(i,"success");var s=i.querySelector("."+Ii);(0,r.le)(s)||(s.classList.add(Er),s.setAttribute("title",this.localizedTexts("delete")),s.classList.remove(Ii,Ir))}},t.prototype.chunkUploadFailed=function(e,i,s){var l,n=this,o=Math.max(Math.ceil(i.file.size/this.asyncSettings.chunkSize),1);(0,r.le)(this.template)&&((0,r.le)(s)||!s)&&(l=this.getLiElement(i.file));var h=e&&e.currentTarget?this.getResponse(e):null;this.trigger("chunkFailure",{event:e,file:i.file,chunkIndex:i.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:h},function(u){if(!u.cancel)if(i.retryCount<n.asyncSettings.retryCount)setTimeout(function(){n.retryRequest(l,i,s)},n.asyncSettings.retryAfterDelay);else{if(!(0,r.le)(l)){var p=l.querySelector("."+qs)?l.querySelector("."+qs):l.querySelector("."+Rh);(0,r.le)(p)||(p.classList.add(ka),p.classList.remove(qs,Rh)),n.updateProgressBarClasses(l,xr),n.removeProgressbar(l,"failure"),l.querySelector(".e-icons").classList.remove(Ir);var d=l.querySelector("."+Ii)?l.querySelector("."+Ii):l.querySelector("."+bs);d.classList.remove(Ii),(0,r.le)(l.querySelector("."+qs))||(0,r.og)(l.querySelector("."+qs)),i.start>0?(d.classList.add(Er),d.setAttribute("title",n.localizedTexts("delete"))):(d.classList.add(bs),d.setAttribute("title",n.localizedTexts("remove")))}i.retryCount=0;var f=i.file,g=n.localizedTexts("uploadFailedMessage"),m={e,response:h,operation:"upload",file:n.updateStatus(f,g,"0",!1),statusText:g};n.trigger("failure",m,function(v){n.updateStatus(f,v.statusText,"0"),n.uploadSequential(),n.checkActionComplete(!0)})}})},t.prototype.retryRequest=function(e,i,s){(0,r.le)(this.template)&&((0,r.le)(s)||!s)&&e&&this.updateProgressBarClasses(e,xr),i.retryCount+=1,this.sendRequest(i.file,i)},t.prototype.checkPausePlayAction=function(e){var i=e.target,n=this.fileList.indexOf(e.target.parentElement),l=this.getCurrentMetaData(this.filesData[n]);i.classList.contains(qs)?this.pauseUpload(l,e):i.classList.contains(Rh)?this.resumeUpload(l,e):i.classList.contains(ka)&&(l.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(l,!1):this.retryUpload(l,!0))},t.prototype.retryUpload=function(e,i){i?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add(Cd)},t.prototype.chunkUploadInProgress=function(e,i,s){var n=this;if("4"!==i.file.statusCode){"4"!==i.file.statusCode&&"5"!==i.file.statusCode&&(i.file.statusCode="3",i.file.status=this.localizedTexts("inProgress")),this.updateMetaData(i);var o=this.getLiElement(i.file);if(!(0,r.le)(o)){var l=o.querySelector("."+ka);if((0,r.le)(l)||(l.classList.add(qs),l.setAttribute("title",this.localizedTexts("pause")),l.classList.remove(ka)),!(0,r.le)(o)){if(!(o.querySelectorAll("."+Oh).length>0)){var h=o.querySelector("."+Fi);(0,r.le)(this.template)&&(h.classList.add(Ir),h.classList.remove(xr),this.createProgressBar(o),this.updateProgressBarClasses(o,Ir));var c=o.querySelector("."+bs)?o.querySelector("."+bs):o.querySelector("."+Er);(0,r.le)(c)||(c.classList.add(Ii),c.setAttribute("title",this.localizedTexts("abort")),c.classList.remove(bs))}if(!isNaN(Math.round(e.loaded/e.total*100))&&(0,r.le)(this.template)&&"4"!==i.file.statusCode){var u=void 0,p=Math.ceil(i.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&p&&(u=Math.round(i.chunkIndex/p*100),this.changeProgressValue(o,u.toString()+"%"))}0===i.chunkIndex&&this.checkActionButtonStatus()}if((0,r.le)(o.querySelector("."+qs))&&(0,r.le)(this.template)&&(0,r.le)(o.querySelector("."+Er))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var d=o.querySelector("."+Ii);d.parentElement.insertBefore(this.pauseButton,d),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(f){n.checkPausePlayAction(f)},!1)}}}},t.prototype.bytesToSize=function(e){var i=-1;if(!e)return"0.0 KB";do{e/=1024,i++}while(e>99);return i>=2&&(e*=1024,i=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][i]},t.prototype.sortFileList=function(e){for(var i=e=e||this.sortFilesList,s=[],n=0;n<i.length;n++)s.push(i[n].name);for(var l=[],h=0,c=s.sort();h<c.length;h++){var u=c[h];for(n=0;n<i.length;n++)u===i[n].name&&l.push(i[n])}return l},t.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var i=0,s=["aria-label","directory","webkitdirectory","tabindex"];i<s.length;i++)this.element.removeAttribute(s[i]);(0,r.le)(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),(0,r.og)(this.uploadWrapper)),this.uploadWrapper=null,this.uploadWrapper=null,this.browseButton=null,this.dropAreaWrapper=null,this.dropZoneElement=null,this.dropArea=null,this.keyboardModule=null,this.clearButton=null,this.uploadButton=null,a.prototype.destroy.call(this)},t.prototype.upload=function(e,i){var s=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||i))this.sequenceUpload(e);else{var n=this.getFilesInArray(e);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},function(l){l.cancel||s.uploadFiles(n,i)})}},t.prototype.getFilesInArray=function(e){var i=[];return e instanceof Array?i=e:i.push(e),i},t.prototype.serverReadFileBase64=function(e,i,s){var n=this;return new Promise(function(o,l){var u,h=n.fileStreams[e].rawFile;try{var c=new FileReader;c.onload=(u=c,function(){try{var p=u.result,d=p?p.split(";base64,")[1]:null;o(d)}catch(f){l(f)}}),c.readAsDataURL(h.slice(i,i+s))}catch(u){l(u)}})},t.prototype.uploadFileCount=function(e){var i=this.filesData;return i&&0!==i.length?i.length:-1},t.prototype.getFileRead=function(e,i){var s=this.filesData;if(!s||0===s.length)return-1;var n=s[e],o=this.newFileRef++;return this.fileStreams[o]=n,o},t.prototype.getFileInfo=function(e,i){var s=this.filesData;return s&&0!==s.length&&s[e]?this.filesData[e]:null},t.prototype.uploadFiles=function(e,i){var s=[];if(""!==this.asyncSettings.saveUrl&&!(0,r.le)(this.asyncSettings.saveUrl)){if(!i||(0,r.le)(i))if(this.multiple)s=this.filterfileList(e);else{var n=[];n.push(e[0]),s=this.filterfileList(n)}else s=e;for(var o=0;o<s.length;o++)this.uploadFilesRequest(s,o,i)}},t.prototype.uploadFilesRequest=function(e,i,s){var n=this,o=this.checkChunkUpload(),l=new r.tk(this.asyncSettings.saveUrl,"POST",!0,null);l.emitError=!1;var h={fileData:e[i],customFormData:[],cancel:!1},c=new FormData;if(l.beforeSend=function(p){h.currentRequest=l.httpRequest,n.trigger("uploading",h,function(d){d.cancel&&n.eventCancelByArgs(p,d,e[i]),n.updateFormData(c,d.customFormData)})},"1"===e[i].statusCode){var u=this.element.getAttribute("name");c.append(u,e[i].rawFile,e[i].name),o&&e[i].size>this.asyncSettings.chunkSize?this.chunkUpload(e[i],s,i):(l.onLoad=function(p){return h.cancel||n.uploadComplete(p,e[i],s),{}},l.onUploadProgress=function(p){return h.cancel||n.uploadInProgress(p,e[i],s,l),{}},l.onError=function(p){return n.uploadFailed(p,e[i]),{}},l.send(c))}},t.prototype.spliceFiles=function(e){for(var i=this.fileList[e],s=this.getFilesData(),n=+i.getAttribute("data-files-count"),o=0,l=0;l<e;l++)o+=+this.fileList[l].getAttribute("data-files-count");for(var c=o+n-1;c>=o;c--)s.splice(c,1)},t.prototype.remove=function(e,i,s,n,o){var l=this;(0,r.le)(n)&&(n=!0);var h={event:o,cancel:!1,filesData:[],customFormData:[],postRawFile:n,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},function(u){if(!u.cancel)if(l.isFormUpload())h.filesData=e,l.trigger("removing",h,function(C){if(!C.cancel)for(var S=!1,I=void 0,x=0,T=l.getFilesInArray(e);x<T.length;x++){var O=T[x];if(S||(I=l.fileList.indexOf(O.list)),I>-1){var A=(0,r.le)(O.input)?null:O.input;A&&(0,r.og)(A),l.spliceFiles(I),(0,r.og)(l.fileList[I]),l.fileList.splice(I,1),S=!0,I=-1}}});else if(l.isForm&&((0,r.le)(l.asyncSettings.removeUrl)||""===l.asyncSettings.removeUrl))h.filesData=l.getFilesData(),l.trigger("removing",h,function(C){C.cancel||l.clearAll()});else{var p=[];(e=(0,r.le)(e)?l.filesData:e)instanceof Array?p=e:p.push(e),h.filesData=p;for(var d=l.asyncSettings.removeUrl,f=!(""===d||(0,r.le)(d)),g=function(C){var b=l.uploadedFilesData.indexOf(C);("2"===C.statusCode||"4"===C.statusCode||"0"===C.statusCode&&-1!==b)&&f?l.removeUploadedFile(C,h,s,i):s?l.removeFilesData(C,i):l.trigger("removing",h,function(S){S.cancel||l.removeFilesData(C,i)}),o&&!o.target.classList.contains(bs)&&l.checkActionComplete(!1)},m=0,v=p;m<v.length;m++)g(v[m])}})},t.prototype.clearAll=function(){var e=this;if((0,r.le)(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.trigger("clearing",{cancel:!1,filesData:this.filesData},function(s){s.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})},t.prototype.getFilesData=function(e){return(0,r.le)(e)?this.filesData:this.getSelectedFiles(e)},t.prototype.pause=function(e,i){var s=this.getFilesInArray(e=e||this.filesData);this.pauseUploading(s,i)},t.prototype.pauseUploading=function(e,i){for(var s=this.getFiles(e),n=0;n<s.length;n++)"3"===s[n].statusCode&&this.pauseUpload(this.getCurrentMetaData(s[n],null),null,i)},t.prototype.getFiles=function(e){var i=[];return(0,r.le)(e)||e instanceof Array?i=e:i.push(e),i},t.prototype.resume=function(e,i){var s=this.getFilesInArray(e=e||this.filesData);this.resumeFiles(s,i)},t.prototype.resumeFiles=function(e,i){for(var s=this.getFiles(e),n=0;n<s.length;n++)"4"===s[n].statusCode&&this.resumeUpload(this.getCurrentMetaData(s[n],null),null,i)},t.prototype.retry=function(e,i,s){var n=this.getFilesInArray(e=e||this.filesData);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(n,i,s)},t.prototype.retryFailedFiles=function(e,i,s){for(var n=this.getFiles(e),o=0;o<n.length;o++)if("5"===n[o].statusCode||"0"===n[o].statusCode)if(this.asyncSettings.chunkSize>0&&this.getCurrentMetaData(n[o],null))this.retryUpload(this.getCurrentMetaData(n[o],null),i);else{var l=void 0;s||(l=this.fileList[this.filesData.indexOf(n[o])]),this.reloadcanceledFile(null,n[o],l,s)}},t.prototype.cancel=function(e){var i=this.getFilesInArray(e=e||this.filesData);this.cancelUpload(i)},t.prototype.cancelUpload=function(e){var i=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var s=0;s<i.length;s++)if("3"===i[s].statusCode){var n=this.getCurrentMetaData(i[s],null);n.file.statusCode="5",n.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(n),this.showHideUploadSpinner(i[s])}}else for(s=0;s<i.length;s++)"3"===i[s].statusCode&&(i[s].statusCode="5",i[s].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(i[s]))},t.prototype.showHideUploadSpinner=function(e){var i=this.getLiElement(e);if(!(0,r.le)(i)&&(0,r.le)(this.template)){var s=i.querySelector("."+Ii);sn({target:s,width:"20px"}),ri(s)}},Ve([(0,r.Zz)({saveUrl:"",removeUrl:""},Gq)],t.prototype,"asyncSettings",void 0),Ve([(0,r.Z9)(!1)],t.prototype,"sequentialUpload",void 0),Ve([(0,r.Z9)({})],t.prototype,"htmlAttributes",void 0),Ve([(0,r.Z9)("")],t.prototype,"cssClass",void 0),Ve([(0,r.Z9)(!0)],t.prototype,"enabled",void 0),Ve([(0,r.Z9)(null)],t.prototype,"template",void 0),Ve([(0,r.Z9)(!0)],t.prototype,"multiple",void 0),Ve([(0,r.Z9)(!0)],t.prototype,"autoUpload",void 0),Ve([(0,r.Z9)(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ve([(0,r.Zz)({},Uq)],t.prototype,"buttons",void 0),Ve([(0,r.Z9)("")],t.prototype,"allowedExtensions",void 0),Ve([(0,r.Z9)(0)],t.prototype,"minFileSize",void 0),Ve([(0,r.Z9)(3e7)],t.prototype,"maxFileSize",void 0),Ve([(0,r.Z9)(null)],t.prototype,"dropArea",void 0),Ve([(0,r.FE)([{}],Wq)],t.prototype,"files",void 0),Ve([(0,r.Z9)(!0)],t.prototype,"showFileList",void 0),Ve([(0,r.Z9)(!1)],t.prototype,"directoryUpload",void 0),Ve([(0,r.Z9)("Default")],t.prototype,"dropEffect",void 0),Ve([(0,r.ju)()],t.prototype,"created",void 0),Ve([(0,r.ju)()],t.prototype,"actionComplete",void 0),Ve([(0,r.ju)()],t.prototype,"rendering",void 0),Ve([(0,r.ju)()],t.prototype,"beforeUpload",void 0),Ve([(0,r.ju)()],t.prototype,"fileListRendering",void 0),Ve([(0,r.ju)()],t.prototype,"selected",void 0),Ve([(0,r.ju)()],t.prototype,"uploading",void 0),Ve([(0,r.ju)()],t.prototype,"success",void 0),Ve([(0,r.ju)()],t.prototype,"failure",void 0),Ve([(0,r.ju)()],t.prototype,"removing",void 0),Ve([(0,r.ju)()],t.prototype,"beforeRemove",void 0),Ve([(0,r.ju)()],t.prototype,"clearing",void 0),Ve([(0,r.ju)()],t.prototype,"progress",void 0),Ve([(0,r.ju)()],t.prototype,"change",void 0),Ve([(0,r.ju)()],t.prototype,"chunkSuccess",void 0),Ve([(0,r.ju)()],t.prototype,"chunkFailure",void 0),Ve([(0,r.ju)()],t.prototype,"chunkUploading",void 0),Ve([(0,r.ju)()],t.prototype,"canceling",void 0),Ve([(0,r.ju)()],t.prototype,"pausing",void 0),Ve([(0,r.ju)()],t.prototype,"resuming",void 0),Ve([r.Zl],t)}(r.wA),Zq=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xi=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},wd="e-apply",tv="e-cancel",ow="e-current",Ed="e-ctrl-btn",cu="e-switch-ctrl-btn",i1="e-disabled",s1="e-value-switch-btn",n1="e-handler",lw="e-hide-hex-value",hw="e-hide-opacity",uu="e-hide-switchable-value",Ph="e-hide-value",a1="e-hide-valueswitcher",Id="e-hsv-color",o1="e-hsv-container",pu="e-selected-value",iv="e-mode-switch-btn",cw="e-nocolor-item",uw="e-opacity-value",xd="e-palette",sv="e-color-palette",pw="e-color-picker",nv="e-preview-container",rv="e-previous",du="e-show-value",Td="e-selected",av="e-split-preview",ov="e-tile",Xq_default=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],l1=function(a){function t(e,i){return a.call(this,e,i)||this}return Zq(t,a),t.prototype.preRender=function(){var e=this.element;this.formElement=(0,r.oq)(this.element,"form"),this.formElement&&r.bi.add(this.formElement,"reset",this.formResetHandler,this),this.l10n=new r.E7("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode"},this.locale),e.getAttribute("ejs-for")&&!e.getAttribute("name")&&e.setAttribute("name",e.id)},t.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||(0,r.cn)([this.container.parentElement],hw),this.renderComplete()},t.prototype.initWrapper=function(){var e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(e,this.element),e.appendChild(this.element),(0,r.Y4)(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var i=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(i="");var s=i.slice(0,7);(0,r.le)(this.initialInputValue)&&(this.initialInputValue=s),this.element.value=s,this.setProperties(this.enableOpacity?{value:i}:{value:s},!0),this.enableRtl&&e.classList.add("e-rtl"),this.cssClass&&(0,r.cn)([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.tileRipple=(0,r.qx)(this.container,{selector:"."+ov}),this.ctrlBtnRipple=(0,r.qx)(this.container,{selector:".e-btn"})},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),r.AR.isDevice&&this.refreshPopupPos()},t.prototype.createSplitBtn=function(){var e=this,i=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(i),this.splitBtn=new $j({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){e.trigger("change",{currentValue:{hex:e.value.slice(0,7),rgba:e.convertToRgbString(e.hexToRgb(e.value))},previousValue:{hex:null,rgba:null},value:e.value})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(i);var s=this.createElement("span",{className:av});(0,r.Ys)(".e-selected-color",i).appendChild(s),s.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var n=this.getPopupEle();if((0,r.cn)([n],"e-colorpicker-popup"),this.cssClass&&(0,r.cn)([n],this.cssClass.replace(/\s+/g," ").trim().split(" ")),r.AR.isDevice){var o=this.getPopupInst();o.relateTo=document.body,o.position={X:"center",Y:"center"},o.targetType="container",o.collision={X:"fit",Y:"fit"},o.offsetY=4,n.style.zIndex=wa(this.splitBtn.element).toString()}this.bindCallBackEvent()},t.prototype.onOpen=function(){if(this.trigger("open",{element:this.container}),!r.AR.isDevice){var e=this.getPopupInst();Sr(e.element).length>0&&(e.collision={X:"flip",Y:"fit"},e.position={X:"right",Y:"bottom"},e.targetType="container")}},t.prototype.getPopupInst=function(){return(0,r.s8)(this.getPopupEle(),Ni)},t.prototype.bindCallBackEvent=function(){var e=this;this.splitBtn.beforeOpen=function(i){var s=new Ym;return e.trigger("beforeOpen",i,function(n){if(!n.cancel){var o=e.getPopupEle();o.style.top=(0,r.Ac)(0+pageYOffset),o.style.left=(0,r.Ac)(0+pageXOffset),o.style.display="block",e.createWidget(),o.style.display="",r.AR.isDevice&&(e.modal=e.createElement("div"),e.modal.className="e-"+e.getModuleName()+" e-modal",e.modal.style.display="none",document.body.insertBefore(e.modal,o),document.body.className+=" e-colorpicker-overflow",e.modal.style.display="block",e.modal.style.zIndex=(Number(o.style.zIndex)-1).toString())}i.cancel=n.cancel,s.resolve(n)}),s},this.splitBtn.beforeClose=function(i){var s=new Ym;return(0,r.le)(i.event)?s.resolve(i):e.trigger("beforeClose",{element:e.container,event:i.event,cancel:!1},function(o){r.AR.isDevice&&i.event.target===e.modal&&(o.cancel=!0),o.cancel||e.onPopupClose(),i.cancel=o.cancel,s.resolve(o)}),s}},t.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",(0,r.Ys)("."+av,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",(0,r.IV)([this.container],[pw,sv]),r.AR.isDevice&&this.modal&&((0,r.IV)([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.createPalette=function(){if((0,r.s1)(this.container,[sv],[pw]),this.presetColors){var e=this.createElement("div",{className:"e-custom-palette"});this.appendElement(e);var i=Object.keys(this.presetColors);if(1===i.length)this.appendPalette(this.presetColors[i[0]],i[0],e);else for(var s=0,n=i.length;s<n;s++)this.appendPalette(this.presetColors[i[s]],i[s],e);(0,r.td)(".e-row",e).length>10&&(0,r.cn)([e],"e-palette-group")}else this.appendPalette(Xq_default,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor();var o=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=(0,r.Ac)(this.container.children[0].offsetWidth+o+o),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},t.prototype.firstPaletteFocus=function(){(0,r.Ys)("."+Td,this.container.children[0])||(0,r.td)("."+xd,this.container)[0].focus()},t.prototype.appendPalette=function(e,i,s){var n=this.createElement("div",{className:xd,attrs:{tabindex:"0",role:"grid"}});s?s.appendChild(n):this.appendElement(n);for(var o,l,h,c=0,u=e.length;c<u;c++)(0===c||c%this.columns==0)&&(o=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),n.appendChild(o)),h=this.roundValue(e[c]).toLowerCase(),l=this.createElement("span",{className:ov,attrs:{role:"gridcell","aria-label":h,"aria-selected":"false",tabindex:"0"}}),this.trigger("beforeTileRender",{element:l,presetName:i,value:e[c]}),o.appendChild(l),this.value===h&&(this.addTileSelection(l),n.focus()),l.style.backgroundColor=this.convertToRgbString(this.hexToRgb(h))},t.prototype.setNoColor=function(){var e=this.container.querySelector(".e-row").children[0];e.classList.add(cw),this.value||(e.classList.add(Td),(0,r.oq)(e,"."+xd).focus()),["aria-selected","aria-label"].forEach(function(i){e.removeAttribute(i)}),e.style.backgroundColor=""},t.prototype.appendElement=function(e,i){void 0===i&&(i=0);var s=this.container.children[i];s?this.container.insertBefore(e,s):this.container.appendChild(e)},t.prototype.addTileSelection=function(e){e.classList.add(Td),e.setAttribute("aria-selected","true")},t.prototype.createPicker=function(){(0,r.s1)(this.container,[pw],[sv]);var e=this.createElement("div",{className:o1});this.appendElement(e),e.appendChild(this.createElement("div",{className:Id}));var i=this.createElement("span",{className:n1,attrs:{tabindex:"0"}});e.appendChild(i),(null===this.value||""===this.value)&&(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},t.prototype.setHsvContainerBg=function(e){void 0===e&&(e=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(e,100,100,1))},t.prototype.getHsvContainer=function(){return(0,r.Ys)("."+o1,this.container)},t.prototype.setHandlerPosition=function(){var e=this.getDragHandler(),i=(0,r.Ys)("."+Id,this.container);e.style.left=(0,r.Ac)(this.enableRtl?i.offsetWidth*Math.abs(100-this.hsv[1])/100:i.offsetWidth*this.hsv[1]/100),e.style.top=(0,r.Ac)(i.offsetHeight*(100-this.hsv[2])/100)},t.prototype.createSlider=function(){var e=this.createElement("div",{className:"e-slider-preview"});this.appendElement(e,1),this.createPreview(e);var i=this.createElement("div",{className:"e-colorpicker-slider"});e.insertBefore(i,e.children[0]);var s=this.createElement("div",{className:"e-hue-slider"});i.appendChild(s),this.hueSlider=new WL({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(s),this.enableOpacity&&(s=this.createElement("div",{className:"e-opacity-slider"}),i.appendChild(s),this.createOpacitySlider(s))},t.prototype.createOpacitySlider=function(e){this.opacitySlider=new WL({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(e);var i=this.createElement("div",{className:"e-opacity-empty-track"});e.appendChild(i),this.updateOpacitySliderBg()},t.prototype.updateOpacitySliderBg=function(){var e=this.enableRtl?"to left":"to right",i=(0,r.Ys)(".e-opacity-empty-track",this.opacitySlider.element);i&&(i.style.background="linear-gradient("+e+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},t.prototype.hueChange=function(e){this.hsv[0]=e.value,this.setHsvContainerBg(),this.convertToOtherFormat()},t.prototype.opacityChange=function(e){var i=e.value,s=this.rgbToHex(this.rgb);this.hsv[3]=i/100,this.rgb[3]=i/100;var n=this.rgbToHex(this.rgb);this.updateOpacityInput(i);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(n,s,o)},t.prototype.updateOpacityInput=function(e){if(this.enableOpacity&&!this.getWrapper().classList.contains(Ph)){var i=(0,r.s8)((0,r.Ys)("."+uw,this.container),wr);i.value=e,i.dataBind()}},t.prototype.createPreview=function(e){var i=this.createElement("div",{className:nv});e.appendChild(i);var s=this.createElement("span",{className:"e-preview "+ow});i.appendChild(s);var n=this.convertToRgbString(this.rgb);s.style.backgroundColor=n,s=this.createElement("span",{className:"e-preview "+rv}),i.appendChild(s),s.style.backgroundColor=n},t.prototype.isPicker=function(){return!this.container.classList.contains(sv)},t.prototype.getPopupEle=function(){return this.container.parentElement},t.prototype.createNumericInput=function(e,i,s,n){var o=this,l=new wr({value:i,placeholder:s,min:0,max:n,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(h){h.event&&o.inputHandler(h.event)}});l.createElement=this.createElement,l.appendTo(e)},t.prototype.createInput=function(){var e=this.isPicker(),i=this.getWrapper();if(e&&!i.classList.contains(Ph)||!e&&i.classList.contains(du)){var s=this.createElement("div",{className:pu});this.appendElement(s,e?2:1);var n=this.createElement("div",{className:"e-input-container"});if(s.appendChild(n),i.classList.contains(a1)||this.appendValueSwitchBtn(s),!i.classList.contains(lw)){var o=this.createElement("input",{className:"e-hex",attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});n.appendChild(o),N.createInput({element:o,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),N.setValue(this.value.slice(0,7),o),o.addEventListener("input",this.inputHandler.bind(this))}if(!i.classList.contains(uu)){var l=void 0,h=void 0;this.isRgb?(l="RGB",h=this.rgb):(l="HSV",h=this.hsv);for(var c=["rh","gs","bv"],u=0;u<3;u++)this.createNumericInput(n.appendChild(this.createElement("input",{className:"e-"+c[u]+"-value"})),h[u],l[u],255);this.enableOpacity&&this.appendOpacityValue(n)}}},t.prototype.appendOpacityValue=function(e){this.createNumericInput(e.appendChild(this.createElement("input",{className:uw})),100*this.rgb[3],"A",100)},t.prototype.appendValueSwitchBtn=function(e){var i=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+s1,attrs:{title:"Toggle format"}});e.appendChild(i),this.isPicker()&&!this.getWrapper().classList.contains(uu)&&i.addEventListener("click",this.formatSwitchHandler.bind(this))},t.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var e=this.createElement("div",{className:cu});if(this.container.appendChild(e),this.showButtons){var i=this.createElement("div",{className:Ed});e.appendChild(i);var s=this.l10n.getConstant("Apply");i.appendChild(this.createElement("button",{innerHTML:s,className:"e-btn e-css e-flat e-primary e-small "+wd,attrs:{title:s}}));var n=this.l10n.getConstant("Cancel");i.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-small "+tv,attrs:{title:n}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},t.prototype.appendModeSwitchBtn=function(){var e=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+iv,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});(0,r.Ys)("."+cu,this.container).insertBefore(e,(0,r.Ys)("."+Ed,this.container))},t.prototype.createDragTooltip=function(){var e=this,i=new fl({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",htmlAttributes:{title:"tooltip"},beforeOpen:function(s){e.tooltipEle=s.element},animation:{open:{effect:"None"},close:{effect:"None"}}});i.createElement=this.createElement,i.appendTo(this.container),i.open(this.container),this.tooltipEle.style.zIndex=wa(this.tooltipEle).toString(),this.tooltipEle.setAttribute("aria-label","colorpicker-tooltip"),(0,r.Ys)(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},t.prototype.getTooltipInst=function(){return(0,r.s8)(this.container,fl)},t.prototype.setTooltipOffset=function(e){this.getTooltipInst().offsetY=e},t.prototype.toggleDisabled=function(e){e?this.getWrapper().classList.add(i1):this.getWrapper().classList.remove(i1),this.showButtons&&[].slice.call((0,r.td)(".e-btn",this.container)).forEach(function(i){e?(0,r.Y4)(i,{disabled:""}):i.removeAttribute("disabled")})},t.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},t.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},t.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},t.prototype.convertToOtherFormat=function(e){void 0===e&&(e=!1);var i=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var s=this.rgbToHex(this.rgb),n=this.convertToRgbString(this.rgb);this.updatePreview(n),this.updateInput(s),this.triggerEvent(s,i,n,e)},t.prototype.updateInput=function(e){var i=this.getWrapper();i.classList.contains(Ph)||(i.classList.contains(lw)||N.setValue(e.substr(0,7),(0,r.Ys)(".e-hex",this.container)),i.classList.contains(uu)||this.updateValue(this.isRgb?this.rgb:this.hsv,!1))},t.prototype.updatePreview=function(e){this.enableOpacity&&this.updateOpacitySliderBg(),(0,r.Ys)(".e-tip-transparent",this.tooltipEle).style.backgroundColor=e,(0,r.Ys)("."+nv+" ."+ow,this.container).style.backgroundColor=e,(0,r.Ys)("."+nv+" ."+rv,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},t.prototype.getDragHandler=function(){return(0,r.Ys)("."+n1,this.container)},t.prototype.removeTileSelection=function(){[].slice.call((0,r.td)("."+Td,this.container.children[0])).forEach(function(i){i.classList.remove(Td),i.setAttribute("aria-selected","false")})},t.prototype.convertRgbToNumberArray=function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(function(i,s){return 3!==s?parseInt(i,10):parseFloat(i)})},t.prototype.getValue=function(e,i){if(e||(e=this.value),i=i?i.toLowerCase():"hex","r"===e[0]){var s=this.convertRgbToNumberArray(e);if("hex"===i||"hexa"===i){var n=this.rgbToHex(s);return"hex"===i?n.slice(0,7):n}return"hsv"===i?this.convertToHsvString(this.rgbToHsv.apply(this,s.slice(0,3))):"hsva"===i?this.convertToHsvString(this.rgbToHsv.apply(this,s)):"null"}if("h"===e[0])return s=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e)),"rgba"===i?this.convertToRgbString(s):"hex"===i||"hexa"===i?(n=this.rgbToHex(s),"hex"===i?n.slice(0,7):n):"rgb"===i?this.convertToRgbString(s.slice(0,3)):"null";e=this.roundValue(e);var o=this.hexToRgb(e);return("rgb"===i||"hsv"===i)&&(o=o.slice(0,3)),"rgba"===i||"rgb"===i?this.convertToRgbString(o):"hsva"===i||"hsv"===i?this.convertToHsvString(this.rgbToHsv.apply(this,o)):"hex"===i?e.slice(0,7):"a"===i?o[3].toString():"null"},t.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},t.prototype.getModuleName=function(){return"colorpicker"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.wireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();r.bi.add(e,"keydown",this.pickerKeyDown,this);var i=(0,r.Ys)("."+Ed,this.container);i&&r.bi.add(i,"keydown",this.ctrlBtnKeyDown,this),r.bi.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),r.bi.add((0,r.Ys)("."+rv,this.container),"click",this.previewHandler,this)}else r.bi.add(this.container,"click",this.paletteClickHandler,this),r.bi.add(this.container,"keydown",this.paletteKeyDown,this)},t.prototype.formResetHandler=function(){this.value=this.initialInputValue,(0,r.Y4)(this.element,{value:this.initialInputValue})},t.prototype.addCtrlSwitchEvent=function(){var e=(0,r.Ys)("."+cu,this.container);e&&r.bi.add(e,"click",this.btnClickHandler,this)},t.prototype.ctrlBtnKeyDown=function(e){if(13===e.keyCode){if((0,r.Ys)("."+wd,this.container)){var s=this.rgbToHex(this.rgb);this.triggerChangeEvent(s)}this.splitBtn.element.focus()}},t.prototype.pickerKeyDown=function(e){switch(e.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,e);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,e);break;case 38:this.handlerDragPosition(2,1,e);break;case 40:this.handlerDragPosition(2,-1,e);break;case 13:e.preventDefault();var i=this.rgbToHex(this.rgb);this.enterKeyHandler(i,e)}},t.prototype.enterKeyHandler=function(e,i){this.triggerChangeEvent(e),this.inline||this.splitBtn.element.focus()},t.prototype.closePopup=function(e){var i=this;this.trigger("beforeClose",{element:this.container,event:e,cancel:!1},function(n){n.cancel||(i.splitBtn.toggle(),i.onPopupClose())})},t.prototype.triggerChangeEvent=function(e){var i=e.slice(0,7);this.trigger("change",{currentValue:{hex:i,rgba:this.convertToRgbString(this.rgb)},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?e:i}),this.setProperties(this.enableOpacity?{value:e}:{value:i},!0),this.element.value=i||"#000000"},t.prototype.handlerDragPosition=function(e,i,s){s.preventDefault(),this.hsv[e]+=i*(s.ctrlKey?1:3),this.hsv[e]<0&&(this.hsv[e]=0),this.updateHsv(),this.convertToOtherFormat(!0)},t.prototype.handlerDown=function(e){e.preventDefault(),"mousedown"===e.type?(this.clientX=Math.abs(e.pageX-pageXOffset),this.clientY=Math.abs(e.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(e.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(e.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(),this.getDragHandler().focus(),r.bi.add(document,"mousemove touchmove",this.handlerMove,this),r.bi.add(document,"mouseup touchend",this.handlerEnd,this)},t.prototype.handlerMove=function(e){var i,s;"touchmove"!==e.type&&e.preventDefault(),"mousemove"===e.type?(i=Math.abs(e.pageX-pageXOffset),s=Math.abs(e.pageY-pageYOffset)):(i=Math.abs(e.changedTouches[0].pageX-pageXOffset),s=Math.abs(e.changedTouches[0].pageY-pageYOffset)),this.setHsv(i,s);var n=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(),this.getTooltipInst().refresh(n),this.tooltipEle.style.transform||(Math.abs(this.clientX-i)>8||Math.abs(this.clientY-s)>8)&&((0,r.Ys)("."+Id,this.container).style.cursor="pointer",n.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",n.classList.add("e-hide-handler"))},t.prototype.setHsv=function(e,i){var s=(0,r.Ys)("."+Id,this.container),n=s.getBoundingClientRect();e=this.enableRtl?e>n.right?0:Math.abs(e-n.right):e>n.left?Math.abs(e-n.left):0,i=i>n.top?Math.abs(i-n.top):0,this.hsv[2]=Math.round(10*Number(100*(s.offsetHeight-Math.max(0,Math.min(s.offsetHeight,i-s.offsetTop)))/s.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(s.offsetWidth,e-s.offsetLeft))/s.offsetWidth))/10},t.prototype.handlerEnd=function(e){"touchend"!==e.type&&e.preventDefault(),r.bi.remove(document,"mousemove touchmove",this.handlerMove),r.bi.remove(document,"mouseup touchend",this.handlerEnd);var i=this.getDragHandler();(0,r.Ys)("."+Id,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",i.classList.remove("e-hide-handler")),!this.inline&&!this.showButtons&&this.closePopup(e)},t.prototype.btnClickHandler=function(e){var i=e.target;(0,r.oq)(i,"."+iv)?(e.stopPropagation(),this.switchToPalette()):(i.classList.contains(wd)||i.classList.contains(tv))&&this.ctrlBtnClick(i,e)},t.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),(0,r.og)((0,r.Ys)(".e-slider-preview",this.container)),this.getWrapper().classList.contains(Ph)||(0,r.Od)((0,r.Ys)("."+pu,this.container)),(0,r.og)(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},t.prototype.refreshImageEditorPopupPos=function(){if(r.AR.isDevice){var e=this.getPopupEle();e.style.left=(0,r.Ac)(0+pageXOffset),e.style.top=(0,r.Ac)(0+pageYOffset);var i=document.querySelector("#"+this.element.parentElement.parentElement.id.split("-popup")[0]);i&&e.parentElement.ej2_instances[0].refreshPosition(i)}},t.prototype.refreshPopupPos=function(){if(!this.inline){var e=this.getPopupEle();e.style.left=(0,r.Ac)(0+pageXOffset),e.style.top=(0,r.Ac)(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},t.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},t.prototype.updateValue=function(e,i,s,n){for(var l,o=["e-rh-value","e-gs-value","e-bv-value"],h=0,c=o.length;h<c;h++)(l=(0,r.s8)((0,r.Ys)("."+o[h],this.container),wr)).value=Math.round(e[h]),i&&(l.placeholder=o[h].substr(s,1).toUpperCase(),l.max=n?n[h]:255),l.dataBind()},t.prototype.previewHandler=function(e){var i=e.target,s=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(i.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var n=this.rgbToHex(this.rgb),o=this.rgbToHsv.apply(this,this.rgb);o[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:o[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(o[0]),this.enableOpacity&&o[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*o[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=o,this.setHandlerPosition(),this.updateInput(n),(0,r.Ys)("."+nv+" ."+ow,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(n,s,this.convertToRgbString(this.rgb))},t.prototype.paletteClickHandler=function(e){e.preventDefault();var i=e.target;if(i.classList.contains(ov)){if(this.removeTileSelection(),this.addTileSelection(i),i.classList.contains(cw))this.noColorTile();else{var s=i.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(s)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(du)&&this.updateInput(s),this.triggerEvent(s,n,this.convertToRgbString(this.rgb))}!this.inline&&!this.showButtons&&this.closePopup(e)}else(0,r.oq)(i,"."+iv)?this.switchToPicker():i.classList.contains(wd)||i.classList.contains(tv)?this.ctrlBtnClick(i,e):this.getWrapper().classList.contains(du)&&(0,r.oq)(i,"."+s1)&&this.formatSwitchHandler()},t.prototype.noColorTile=function(e){void 0===e&&(e=!1);var i=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",i,"",e)},t.prototype.switchToPicker=function(){var e=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call((0,r.td)("."+xd,this.container)).forEach(function(s){(0,r.og)(s)}),e.classList.contains(du)&&(0,r.og)((0,r.Ys)("."+pu,this.container)),this.container.style.width="";var i=(0,r.Ys)(".e-custom-palette",this.container);this.presetColors&&(0,r.Od)(i),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},t.prototype.ctrlBtnClick=function(e,i){if(e.classList.contains(wd)){var s=this.rgbToHex(this.rgb);this.triggerChangeEvent(s)}this.inline?e.classList.contains(tv)&&this.trigger("beforeClose",{element:this.container,event:i,cancel:!1}):(this.closePopup(i),this.splitBtn.element.focus())},t.prototype.paletteKeyDown=function(e){var i=e.target;if(i.classList.contains(xd)){var s,n,o=[].slice.call((0,r.td)("."+ov,i)),l=o.filter(function(c){return c.classList.contains("e-selected")}).pop();switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),s=l?o[this.tilePosition(o,l,this.enableRtl?-1:1)]:o[this.enableRtl?o.length-1:0],this.keySelectionChanges(s);break;case 37:e.preventDefault(),s=l?o[this.tilePosition(o,l,this.enableRtl?1:-1)]:o[this.enableRtl?0:o.length-1],this.keySelectionChanges(s);break;case 38:e.preventDefault(),n=l?this.tilePosition(o,l,-this.columns):0,this.keySelectionChanges(s=o[n]?o[n]:o[n-this.columns]);break;case 40:e.preventDefault(),o[n=l?this.tilePosition(o,l,this.columns):o.length-1]||(n%=o.length,n+=o[o.length-1].parentElement.childElementCount),this.keySelectionChanges(s=o[n]);break;case 13:if(e.preventDefault(),l){var h=l.getAttribute("aria-label");this.enterKeyHandler(h||"",e)}}}},t.prototype.keySelectionChanges=function(e){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(cw))this.noColorTile(!0);else{var i=e.getAttribute("aria-label"),s=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(i),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(du)&&this.updateInput(i),this.triggerEvent(i,s,this.convertToRgbString(this.rgb),!0)}},t.prototype.tilePosition=function(e,i,s){var n=(e=Array.prototype.slice.call(e)).length,o=this.columns-e[n-1].parentElement.childElementCount,l=e.indexOf(i);return(l+=s)<0?l+=n+o:l%=n+o,l},t.prototype.inputHandler=function(e){var s,n,i=e.target;if(i.value.length)switch((0,r.Ys)(".e-float-text",i.parentElement).textContent){case"HEX":var l="";if(("#"===i.value[0]&&5!==i.value.length||"#"!==i.value[0]&&4!==i.value.length)&&(l=this.roundValue(i.value)),9!==l.length)return;n=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(l+l.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),n,i.value);break;case"R":this.rgb[0]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[0]=Number(i.value),s=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(s,n));break;case"G":this.rgb[1]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[1]=Number(i.value),s=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(s,n));break;case"B":this.rgb[2]!==Number(i.value)&&(n=this.rgbToHex(this.rgb),this.rgb[2]=Number(i.value),s=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(s,n));break;case"H":this.hueSlider.value=Number(i.value);break;case"S":this.hsv[1]!==Number(i.value)&&(this.hsv[1]=Number(i.value),this.updateHsv(),this.convertToOtherFormat());break;case"V":this.hsv[2]!==Number(i.value)&&(this.hsv[2]=Number(i.value),this.updateHsv(),this.convertToOtherFormat());break;case"A":this.opacitySlider.value=Number(i.value)}},t.prototype.inputValueChange=function(e,i,s){e[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:e[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(e[0])),this.hsv=e;var n=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(s||n);var o=this.convertToRgbString(this.rgb);this.updatePreview(o),this.triggerEvent(n,i,o)},t.prototype.triggerEvent=function(e,i,s,n){void 0===n&&(n=!1);var o=e.slice(0,7);this.showButtons||n?this.trigger("select",{currentValue:{hex:o,rgba:s},previousValue:{hex:i.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(i))}}):(this.trigger("change",{currentValue:{hex:o,rgba:s},previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:e}),this.setProperties(this.enableOpacity?{value:e}:{value:o},!0),this.element.value=o||"#000000")},t.prototype.destroy=function(){var e=this,i=this.getWrapper();a.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(s){e.element.removeAttribute(s)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&(0,r.og)(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),(0,r.og)(i)),this.container=null,this.formElement&&r.bi.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.destroyOtherComp=function(){if(this.isPicker()){for(var i=(0,r.oq)(this.hueSlider.element,".e-color-picker").querySelectorAll(".e-numerictextbox"),s=0;s<i.length;s++)(0,r.s8)(i[s],wr).destroy();this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var n=this.getTooltipInst();n.close(),n.destroy(),this.tooltipEle=null}},t.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},t.prototype.unWireEvents=function(){if(this.isPicker()){var e=this.getDragHandler();r.bi.remove(e,"keydown",this.pickerKeyDown);var i=(0,r.Ys)("."+Ed,this.container);i&&r.bi.remove(i,"keydown",this.ctrlBtnKeyDown),r.bi.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&r.bi.remove((0,r.Ys)("."+cu,this.container),"click",this.btnClickHandler),r.bi.remove((0,r.Ys)("."+rv,this.container),"click",this.previewHandler)}else r.bi.remove(this.container,"click",this.paletteClickHandler),r.bi.remove(this.container,"keydown",this.paletteKeyDown)},t.prototype.roundValue=function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var i=e.length;if(4===i&&(e+="f",i=5),5===i){for(var s="",n=1,o=e.length;n<o;n++)s+=e.charAt(n)+e.charAt(n);e="#"+s,i=9}return 7===i&&(e+="ff"),e},t.prototype.hexToRgb=function(e){if(!e)return[];9!==(e=e.trim()).length&&(e=this.roundValue(e));var i=Number((parseInt(e.slice(-2),16)/255).toFixed(2));e=e.slice(1,7);var s=parseInt(e,16),n=[];return n.push(s>>16&255),n.push(s>>8&255),n.push(255&s),n.push(i),n},t.prototype.rgbToHsv=function(e,i,s,n){if(this.rgb&&!this.rgb.length)return[];e/=255,i/=255,s/=255;var h,o=Math.max(e,i,s),l=Math.min(e,i,s),c=o,u=o-l,p=0===o?0:u/o;if(o===l)h=0;else{switch(o){case e:h=(i-s)/u+(i<s?6:0);break;case i:h=(s-e)/u+2;break;case s:h=(e-i)/u+4}h/=6}var d=[Math.round(360*h),Math.round(1e3*p)/10,Math.round(1e3*c)/10];return(0,r.le)(n)||d.push(n),d},t.prototype.hsvToRgb=function(e,i,s,n){var o,l,h;if(s/=100,0==(i/=100))return o=l=h=s,[Math.round(255*o),Math.round(255*l),Math.round(255*h),n];e/=60;var c=Math.floor(e),u=e-c,p=s*(1-i),d=s*(1-i*u),f=s*(1-i*(1-u));switch(c){case 0:o=s,l=f,h=p;break;case 1:o=d,l=s,h=p;break;case 2:o=p,l=s,h=f;break;case 3:o=p,l=d,h=s;break;case 4:o=f,l=p,h=s;break;default:o=s,l=p,h=d}var g=[Math.round(255*o),Math.round(255*l),Math.round(255*h)];return(0,r.le)(n)||g.push(n),g},t.prototype.rgbToHex=function(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+((0,r.le)(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substr(-2):"00"):""},t.prototype.hex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype.changeModeSwitcherProp=function(e){var i=(0,r.Ys)("."+cu,this.container);e?i?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):i&&(this.showButtons?(0,r.og)((0,r.Ys)("."+iv,i)):(0,r.Od)(i))},t.prototype.changeShowBtnProps=function(e){var i=(0,r.Ys)("."+cu,this.container);e?(i&&(0,r.Od)(i),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?(0,r.og)((0,r.Ys)("."+Ed,i)):(0,r.Od)(i)},t.prototype.changeValueProp=function(e){if(this.isPicker())this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),(0,r.og)((0,r.oq)(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(e),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var i=this.container.querySelector('span[aria-label="'+this.roundValue(e)+'"]');i&&this.addTileSelection(i)}},t.prototype.setInputEleProps=function(){(0,r.Od)((0,r.Ys)("."+pu,this.container)),this.createInput()},t.prototype.changeDisabledProp=function(e){this.isPicker()&&(this.hueSlider.enabled=!e,this.opacitySlider.enabled=!e,this.setInputEleProps()),e?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},t.prototype.changeCssClassProps=function(e,i){var s=this.getWrapper(),n=this.getPopupEle();i&&(0,r.IV)([s,n],i.split(" ")),e&&(0,r.cn)([s,n],e.replace(/\s+/g," ").trim().split(" "))},t.prototype.changeRtlProps=function(e){e?(0,r.cn)([this.getWrapper()],"e-rtl"):(0,r.IV)([this.getWrapper()],"e-rtl")},t.prototype.changePaletteProps=function(){(0,r.og)(this.container.children[0]),this.container.style.width="",this.createPalette()},t.prototype.changeOpacityProps=function(e){var i=this.getWrapper();e?((0,r.IV)([this.container.parentElement],hw),this.createOpacitySlider((0,r.Ys)(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),!i.classList.contains(Ph)&&!i.classList.contains(uu)&&this.appendOpacityValue((0,r.Ys)(".e-input-container",this.container))):((0,r.cn)([this.container.parentElement],hw),this.opacitySlider.destroy(),(0,r.Od)(this.opacitySlider.element),this.opacitySlider=null,!i.classList.contains(Ph)&&!i.classList.contains(uu)&&(0,r.Od)((0,r.Ys)("."+uw,this.container).parentElement))},t.prototype.onPropertyChanged=function(e,i){var s=this;if(!(0,r.le)(e.value)){var n=this.roundValue(e.value);if(9===n.length)this.element.value=this.roundValue(n).slice(0,7),(o=this.splitBtn&&(0,r.Ys)("."+av,this.splitBtn.element))&&(o.style.backgroundColor=this.convertToRgbString(this.hexToRgb(e.value)));else if(this.noColor&&"Palette"===this.mode&&""===this.value){var o;(o=this.splitBtn&&(0,r.Ys)("."+av,this.splitBtn.element)).style.backgroundColor=""}else this.value=i.value}if(!this.inline&&(0,r.le)(e.inline)&&(this.splitBtn.setProperties(gd(e,["disabled","enableRtl"])),!this.isPopupOpen()))return this.changeCssClassProps(e.cssClass,i.cssClass),void this.changeRtlProps(e.enableRtl);for(var h=function(f){switch(f){case"inline":e.inline?(c.getWrapper().appendChild(c.container),c.splitBtn.destroy(),(0,r.og)(c.element.nextElementSibling),c.container.children.length||c.createWidget()):(c.destroyOtherComp(),c.unWireEvents(),c.container.innerHTML="",c.createSplitBtn());break;case"cssClass":c.changeCssClassProps(e.cssClass,i.cssClass);var g=e.cssClass.split(" ").concat(i.cssClass.split(" "));g=g.reduce(function(v,y){return v.indexOf(y)<0&&v.push(y),v},[]);var m=0;g.forEach(function(v){0!==m||v!==Ph&&v!==a1&&v!==du&&v!==lw&&v!==uu||((0,r.Ys)("."+pu,s.container)&&(0,r.Od)((0,r.Ys)("."+pu,s.container)),s.createInput(),m++)});break;case"enableRtl":c.isPicker()&&(c.hueSlider.enableRtl=e.enableRtl,c.enableOpacity&&(c.opacitySlider.enableRtl=e.enableRtl),c.setInputEleProps()),c.changeRtlProps(e.enableRtl);break;case"disabled":c.changeDisabledProp(e.disabled);break;case"value":c.value!==i.value&&c.changeValueProp(e.value);break;case"showButtons":c.changeShowBtnProps(e.showButtons);break;case"mode":"Picker"===e.mode?c.switchToPicker():c.switchToPalette();break;case"modeSwitcher":c.changeModeSwitcherProp(e.modeSwitcher);break;case"columns":case"presetColors":c.isPicker()||c.changePaletteProps();break;case"noColor":e.noColor?"Palette"===c.mode&&!c.modeSwitcher&&c.setNoColor():c.changePaletteProps();break;case"enableOpacity":c.changeOpacityProps(e.enableOpacity)}},c=this,u=0,p=Object.keys(e);u<p.length;u++)h(p[u])},t.prototype.focusIn=function(){this.element.parentElement.focus()},xi([(0,r.Z9)("#008000ff")],t.prototype,"value",void 0),xi([(0,r.Z9)("")],t.prototype,"cssClass",void 0),xi([(0,r.Z9)(!1)],t.prototype,"disabled",void 0),xi([(0,r.Z9)("Picker")],t.prototype,"mode",void 0),xi([(0,r.Z9)(!0)],t.prototype,"modeSwitcher",void 0),xi([(0,r.Z9)(null)],t.prototype,"presetColors",void 0),xi([(0,r.Z9)(!0)],t.prototype,"showButtons",void 0),xi([(0,r.Z9)(10)],t.prototype,"columns",void 0),xi([(0,r.Z9)(!1)],t.prototype,"inline",void 0),xi([(0,r.Z9)(!1)],t.prototype,"noColor",void 0),xi([(0,r.Z9)(!1)],t.prototype,"enablePersistence",void 0),xi([(0,r.Z9)(!0)],t.prototype,"enableOpacity",void 0),xi([(0,r.Z9)(!1)],t.prototype,"createPopupOnClick",void 0),xi([(0,r.ju)()],t.prototype,"select",void 0),xi([(0,r.ju)()],t.prototype,"change",void 0),xi([(0,r.ju)()],t.prototype,"beforeTileRender",void 0),xi([(0,r.ju)()],t.prototype,"beforeOpen",void 0),xi([(0,r.ju)()],t.prototype,"open",void 0),xi([(0,r.ju)()],t.prototype,"beforeClose",void 0),xi([(0,r.ju)()],t.prototype,"beforeModeSwitch",void 0),xi([(0,r.ju)()],t.prototype,"onModeSwitch",void 0),xi([(0,r.ju)()],t.prototype,"created",void 0),xi([r.Zl],t)}(r.wA),Qq=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$i=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},h1="e-input-focus",dw=["title","style","class"],vl=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.previousValue=null,s.isAngular=!1,s.isHiddenInput=!1,s.isForm=!1,s.inputPreviousValue=null,s.isVue=!1,s.textboxOptions=e,s}return Qq(t,a),t.prototype.onPropertyChanged=function(e,i){for(var s=0,n=Object.keys(e);s<n.length;s++)switch(n[s]){case"floatLabelType":N.removeFloating(this.textboxWrapper),N.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":N.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":N.setWidth(e.width,this.textboxWrapper.container);break;case"value":var l=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=l,N.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):((0,r.le)(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&(0,r.le)(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),this.multiline&&!(0,r.le)(this.textarea)?N.validateInputType(this.textboxWrapper.container,this.textarea):N.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":N.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),N.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":N.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent();break;case"enableRtl":N.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":N.setPlaceholder(this.placeholder,this.respectiveElement),N.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"locale":this.globalize=new r.eC(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),N.setPlaceholder(this.placeholder,this.respectiveElement)}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=(0,r.oq)(this.element,"form"),(0,r.le)(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var e=(0,r.NA)("ej2_instances",this.element),i=this.createElement(this.multiline?"textarea":"input"),s=0;s<this.element.attributes.length;s++)"id"!==(n=this.element.attributes[s].nodeName)&&"class"!==n?(i.setAttribute(n,this.element.attributes[s].nodeValue),i.innerHTML=this.element.innerHTML,"name"===n&&this.element.removeAttribute("name")):"class"===n&&i.setAttribute(n,this.element.className.split(" ").filter(function(h){return 0!==h.indexOf("ng-")}).join(" "));this.element.appendChild(i),this.element=i,(0,r.sO)("ej2_instances",e,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),((0,r.le)(this.textboxOptions)||void 0===this.textboxOptions.value)&&""!==this.element.value&&this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),"text"===this.type&&this.element.setAttribute("role","textbox"),this.globalize=new r.eC(this.locale),this.l10n=new r.E7("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",(0,r.QI)("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",(0,r.QI)("textarea"));var l=["placeholder","disabled","value","readonly","type","autocomplete"];for(s=0;s<this.element.attributes.length;s++){var n;this.element.hasAttribute(n=this.element.attributes[s].nodeName)&&dw.indexOf(n)<0&&"id"!==n&&"type"!==n&&"e-mappinguid"!==n&&(this.textarea.setAttribute(n,this.element.attributes[s].nodeValue),l.indexOf(n)<0&&(this.element.removeAttribute(n),s--))}}},t.prototype.checkAttributes=function(e){for(var s=0,n=e?(0,r.le)(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];s<n.length;s++){var o=n[s];if(!(0,r.le)(this.element.getAttribute(o)))switch(o){case"disabled":if((0,r.le)(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){var l=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:l},!e)}break;case"readonly":if((0,r.le)(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){var h="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:h},!e)}break;case"placeholder":((0,r.le)(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":((0,r.le)(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!e);break;case"value":((0,r.le)(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&""!==this.element.value&&this.setProperties({value:this.element.value},!e);break;case"type":((0,r.le)(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}},t.prototype.render=function(){var e=this.cssClass;!(0,r.le)(this.cssClass)&&""!==this.cssClass&&(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=N.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),(0,r.le)(this.value)||(N.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),(0,r.le)(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:!(0,r.le)(this.textboxOptions)&&void 0!==this.textboxOptions.autocomplete&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,N.setWidth(this.width,this.textboxWrapper.container),!(0,r.le)((0,r.oq)(this.element,"fieldset"))&&(0,r.oq)(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!(0,r.le)(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];if(dw.indexOf(s)>-1)if("class"===s){var n=this.getInputValidClassList(this.htmlAttributes[""+s]);""!==n&&(0,r.cn)([this.textboxWrapper.container],n.split(" "))}else if("style"===s){var o=this.textboxWrapper.container.getAttribute(s);o=(0,r.le)(o)?this.htmlAttributes[""+s]:o+this.htmlAttributes[""+s],this.textboxWrapper.container.setAttribute(s,o)}else this.textboxWrapper.container.setAttribute(s,this.htmlAttributes[""+s])}},t.prototype.updateHTMLAttrToElement=function(){if(!(0,r.le)(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var s=i[e];dw.indexOf(s)<0&&(this.multiline&&!(0,r.le)(this.textarea)?this.textarea.setAttribute(s,this.htmlAttributes[""+s]):this.element.setAttribute(s,this.htmlAttributes[""+s]))}},t.prototype.updateCssClass=function(e,i){N.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(i))},t.prototype.getInputValidClassList=function(e){var i=e;return!(0,r.le)(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){r.bi.add(this.respectiveElement,"focus",this.focusHandler,this),r.bi.add(this.respectiveElement,"blur",this.focusOutHandler,this),r.bi.add(this.respectiveElement,"keydown",this.keydownHandler,this),r.bi.add(this.respectiveElement,"input",this.inputHandler,this),r.bi.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&r.bi.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!(0,r.le)(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&r.bi.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");(0,r.le)(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,null==e&&this.textboxWrapper.container.classList.contains("e-valid-input")&&this.textboxWrapper.container.classList.remove("e-valid-input"),this.isProtectedOnChange=i},t.prototype.resetForm=function(){if(this.resetValue(this.isAngular?"":this.initialValue),!(0,r.le)(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");!(0,r.le)(e)&&"Always"!==this.floatLabelType&&((0,r.le)(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){this.trigger("focus",{container:this.textboxWrapper.container,event:e,value:this.value})},t.prototype.focusOutHandler=function(e){(null!==this.previousValue||null!==this.value||""!==this.respectiveElement.value)&&this.previousValue!==this.value&&this.raiseChangeEvent(e,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:e,value:this.value})},t.prototype.keydownHandler=function(e){(13===e.keyCode||9===e.keyCode)&&(null!==this.previousValue&&""!==this.previousValue||null!==this.value&&""!==this.value||""!==this.respectiveElement.value)&&this.setProperties({value:this.respectiveElement.value},!0)},t.prototype.inputHandler=function(e){var s={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",s),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.previousValue!=this.value&&this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,i){var s={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:i||!1,isInteracted:i||!1};this.preventChange=!1,this.trigger("change",s),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===r.AR.info.name&&(this.element.value=this.respectiveElement.value)},t.prototype.bindClearEvent=function(){this.showClearButton&&(this.enabled?r.bi.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):r.bi.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&(N.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0),(0,r.oq)(this.element,"form"))){var s=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),s.dispatchEvent(n)}},t.prototype.unWireEvents=function(){r.bi.remove(this.respectiveElement,"focus",this.focusHandler),r.bi.remove(this.respectiveElement,"blur",this.focusOutHandler),r.bi.remove(this.respectiveElement,"keydown",this.keydownHandler),r.bi.remove(this.respectiveElement,"input",this.inputHandler),r.bi.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&r.bi.remove(this.formElement,"reset",this.resetForm),!(0,r.le)(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&r.bi.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&((0,r.og)(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),(0,r.le)(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),(0,r.og)(this.textboxWrapper.container)),this.textboxWrapper=null,N.destroy(),a.prototype.destroy.call(this)},t.prototype.addIcon=function(e,i){N.addIcon(e,i,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.addAttributes=function(e){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];"disabled"===n?(this.setProperties({enabled:!1},!0),N.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!0},!0),N.setReadonly(this.readonly,this.respectiveElement)):"class"===n?this.respectiveElement.classList.add(e[""+n]):"placeholder"===n?(this.setProperties({placeholder:e[""+n]},!0),N.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(n,e[""+n])}},t.prototype.removeAttributes=function(e){for(var i=0,s=e;i<s.length;i++){var n=s[i];"disabled"===n?(this.setProperties({enabled:!0},!0),N.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!1},!0),N.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===n?(this.setProperties({placeholder:null},!0),N.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(n)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&(0,r.cn)([this.textboxWrapper.container],[h1]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&(0,r.IV)([this.textboxWrapper.container],[h1]))},$i([(0,r.Z9)("text")],t.prototype,"type",void 0),$i([(0,r.Z9)(!1)],t.prototype,"readonly",void 0),$i([(0,r.Z9)(null)],t.prototype,"value",void 0),$i([(0,r.Z9)("Never")],t.prototype,"floatLabelType",void 0),$i([(0,r.Z9)("")],t.prototype,"cssClass",void 0),$i([(0,r.Z9)(null)],t.prototype,"placeholder",void 0),$i([(0,r.Z9)("on")],t.prototype,"autocomplete",void 0),$i([(0,r.Z9)({})],t.prototype,"htmlAttributes",void 0),$i([(0,r.Z9)(!1)],t.prototype,"multiline",void 0),$i([(0,r.Z9)(!0)],t.prototype,"enabled",void 0),$i([(0,r.Z9)(!1)],t.prototype,"showClearButton",void 0),$i([(0,r.Z9)(!1)],t.prototype,"enablePersistence",void 0),$i([(0,r.Z9)(null)],t.prototype,"width",void 0),$i([(0,r.ju)()],t.prototype,"created",void 0),$i([(0,r.ju)()],t.prototype,"destroyed",void 0),$i([(0,r.ju)()],t.prototype,"change",void 0),$i([(0,r.ju)()],t.prototype,"blur",void 0),$i([(0,r.ju)()],t.prototype,"focus",void 0),$i([(0,r.ju)()],t.prototype,"input",void 0),$i([r.Zl],t)}(r.wA),o2=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),b1=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},yl="e-rtl",bl="e-overlay",kd="e-nav-arrow",Ad="e-nav-right-arrow",uv="e-nav-left-arrow",Mh="e-scroll-nav",gw="e-scroll-right-nav",C1="e-scroll-left-nav",S1="e-scroll-device",pv="e-scroll-overlay",mw="e-scroll-right-overlay",vw="e-scroll-left-overlay",dv=function(a){function t(e,i){return a.call(this,e,i)||this}return o2(t,a),t.prototype.preRender=function(){this.browser=r.AR.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=r.AR.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=(0,r.QI)("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(yl)},t.prototype.render=function(){this.touchModule=new r.Xh(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),r.bi.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(S1),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){(0,r.le)(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),i=this.createElement("div",{className:"e-hscroll-bar"});i.setAttribute("tabindex","-1");for(var s=this.element,o=0,l=[].slice.call(s.children);o<l.length;o++)e.appendChild(l[o]);i.appendChild(e),s.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove(S1),e.classList.remove(yl);var i=(0,r.td)(".e-"+e.id+"_nav."+Mh,e),s=(0,r.td)("."+pv,e);[].slice.call(s).forEach(function(h){(0,r.og)(h)});for(var n=0,o=[].slice.call(this.scrollItems.children);n<o.length;n++)e.appendChild(o[n]);this.uniqueId&&this.element.removeAttribute("id"),(0,r.og)(this.scrollEle),i.length>0&&((0,r.og)(i[0]),(0,r.le)(i[1])||(0,r.og)(i[1])),r.bi.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,a.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=(0,r.td)(".e-scroll-nav:not(."+bl+")",this.element);e?this.element.classList.add(bl):this.element.classList.remove(bl),[].slice.call(i).forEach(function(s){s.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var i=e.id.concat("_nav"),s=this.createElement("div",{className:pv+" "+mw}),n="e-"+e.id.concat("_nav "+Mh+" "+gw),o=this.createElement("div",{id:i.concat("_right"),className:n}),l=this.createElement("div",{className:Ad+" "+kd+" e-icons"});o.appendChild(l);var h=this.createElement("div",{className:pv+" "+vw});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(s),e.appendChild(o),e.insertBefore(h,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),s="e-"+e.id.concat("_nav "+Mh+" "+gw),n={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:s,attrs:n});o.setAttribute("aria-disabled","false");var l=this.createElement("div",{className:Ad+" "+kd+" e-icons"}),h="e-"+e.id.concat("_nav "+Mh+" "+C1),c={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},u=this.createElement("div",{className:h+" "+bl,attrs:c});u.setAttribute("aria-disabled","true");var p=this.createElement("div",{className:uv+" "+kd+" e-icons"});u.appendChild(p),o.appendChild(l),e.appendChild(o),e.insertBefore(u,e.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),u.classList.add("e-ie-align")),this.eventBinding([o,u])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(s){new r.Xh(s,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),s.addEventListener("keydown",i.onKeyPress.bind(i)),s.addEventListener("keyup",i.onKeyUp.bind(i)),s.addEventListener("mouseup",i.repeatScroll.bind(i)),s.addEventListener("touchend",i.repeatScroll.bind(i)),s.addEventListener("contextmenu",function(n){n.preventDefault()}),r.bi.add(s,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,s=e.originalEvent.target;s=this.contains(s,Mh)?s.firstElementChild:s,this.timeout=window.setInterval(function(){i.eleScrolling(10,s,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,s){var n=this.element,o=i.classList;o.contains(Mh)&&(o=i.querySelector("."+kd).classList),this.contains(n,yl)&&this.browserCheck&&(e=-e),!this.contains(n,yl)||this.browserCheck||this.ieCheck?o.contains(Ad)?this.frameScrollRequest(e,"add",s):this.frameScrollRequest(e,"",s):o.contains(uv)?this.frameScrollRequest(e,"add",s):this.frameScrollRequest(e,"",s)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var s,i=this.scrollEle;s=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5,o=function(){var l=Math.sin(n);l<=0?window.cancelAnimationFrame(l):("Left"===e.swipeDirection?i.scrollLeft+=s*l:"Right"===e.swipeDirection&&(i.scrollLeft-=s*l),n-=.5,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},t.prototype.frameScrollRequest=function(e,i,s){var n=this;if(s)this.scrollUpdating(e,i);else{this.customStep||[].slice.call((0,r.td)("."+pv,this.element)).forEach(function(h){e-=h.offsetWidth});var l=function(){var h,c;n.contains(n.element,yl)&&n.browserCheck?(h=-e,c=-10):(h=e,c=10),h<10?window.cancelAnimationFrame(c):(n.scrollUpdating(c,i),e-=c,window.requestAnimationFrame(l))};l()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,s=e.distanceX;this.ieCheck&&this.contains(this.element,yl)&&(s=-s),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+s:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-s)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var n=((0,r.le)(e)?i:e).querySelector("."+kd);(0,r.le)(e)?(0,r.s1)(n,[Ad],[uv]):(0,r.s1)(n,[uv],[Ad])}else e&&i&&(e.classList.add(bl),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(bl),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var i=e.target,s=i.offsetWidth,o=this.element.querySelector("."+C1),l=this.element.querySelector("."+gw),h=this.element.querySelector("."+vw),c=this.element.querySelector("."+mw),u=i.scrollLeft;if(u<=0&&(u=-u),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(h=this.element.querySelector("."+mw),c=this.element.querySelector("."+vw)),h.style.width=u<40?u+"px":"40px",c.style.width=i.scrollWidth-Math.ceil(s+u)<40?i.scrollWidth-Math.ceil(s+u)+"px":"40px"),0===u)this.arrowDisabling(o,l);else if(Math.ceil(s+u+.1)>=i.scrollWidth)this.arrowDisabling(l,o);else{var p=this.element.querySelector("."+Mh+"."+bl);p&&(p.classList.remove(bl),p.setAttribute("aria-disabled","false"),p.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var s=0,n=Object.keys(e);s<n.length;s++)switch(n[s]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(yl):this.element.classList.remove(yl)}},b1([(0,r.Z9)(null)],t.prototype,"scrollStep",void 0),b1([r.Zl],t)}(r.wA),u2=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),E1=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},fv="e-rtl",Cl="e-overlay",Dd="e-nav-arrow",gv="e-nav-up-arrow",Ld="e-nav-down-arrow",Bh="e-scroll-nav",I1="e-scroll-up-nav",yw="e-scroll-down-nav",x1="e-scroll-device",mv="e-scroll-overlay",T1="e-scroll-up-overlay",k1="e-scroll-down-overlay",fu=function(a){function t(e,i){return a.call(this,e,i)||this}return u2(t,a),t.prototype.preRender=function(){this.browser=r.AR.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=r.AR.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=(0,r.QI)("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(fv)},t.prototype.render=function(){this.touchModule=new r.Xh(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),r.bi.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(x1),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),r.bi.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){(0,r.le)(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=(0,r.az)("div",{className:"e-vscroll-content"}),i=(0,r.az)("div",{className:"e-vscroll-bar"});i.setAttribute("tabindex","-1");for(var s=this.element,o=0,l=[].slice.call(s.children);o<l.length;o++)e.appendChild(l[o]);i.appendChild(e),s.appendChild(i),i.style.overflow="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",(0,r.IV)([this.element],["e-vscroll",x1,fv]);var i=(0,r.td)(".e-"+e.id+"_nav."+Bh,e),s=(0,r.td)("."+mv,e);[].slice.call(s).forEach(function(h){(0,r.og)(h)});for(var n=0,o=[].slice.call(this.scrollItems.children);n<o.length;n++)e.appendChild(o[n]);this.uniqueId&&this.element.removeAttribute("id"),(0,r.og)(this.scrollEle),i.length>0&&((0,r.og)(i[0]),(0,r.le)(i[1])||(0,r.og)(i[1])),r.bi.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,a.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=(0,r.td)(".e-scroll-nav:not(."+Cl+")",this.element);e?this.element.classList.add(Cl):this.element.classList.remove(Cl),[].slice.call(i).forEach(function(s){s.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var i=e.id.concat("_nav"),s=(0,r.az)("div",{className:mv+" "+k1}),n="e-"+e.id.concat("_nav "+Bh+" "+yw),o=(0,r.az)("div",{id:i.concat("down"),className:n}),l=(0,r.az)("div",{className:Ld+" "+Dd+" e-icons"});o.appendChild(l);var h=(0,r.az)("div",{className:mv+" "+T1});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(s),e.appendChild(o),e.insertBefore(h,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),s="e-"+e.id.concat("_nav "+Bh+" "+yw),n=(0,r.az)("div",{id:i.concat("_down"),className:s});n.setAttribute("aria-disabled","false");var o=(0,r.az)("div",{className:Ld+" "+Dd+" e-icons"}),l="e-"+e.id.concat("_nav "+Bh+" "+I1),h=(0,r.az)("div",{id:i.concat("_up"),className:l+" "+Cl});h.setAttribute("aria-disabled","true");var c=(0,r.az)("div",{className:gv+" "+Dd+" e-icons"});h.appendChild(c),n.appendChild(o),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(h,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),h.classList.add("e-ie-align")),this.eventBinding([n,h])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(s){new r.Xh(s,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),s.addEventListener("keydown",i.onKeyPress.bind(i)),s.addEventListener("keyup",i.onKeyUp.bind(i)),s.addEventListener("mouseup",i.repeatScroll.bind(i)),s.addEventListener("touchend",i.repeatScroll.bind(i)),s.addEventListener("contextmenu",function(n){n.preventDefault()}),r.bi.add(s,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,s=e.originalEvent.target;s=this.contains(s,Bh)?s.firstElementChild:s,this.timeout=window.setInterval(function(){i.eleScrolling(10,s,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,s){var n=i.classList;n.contains(Bh)&&(n=i.querySelector("."+Dd).classList),n.contains(Ld)?this.frameScrollRequest(e,"add",s):n.contains(gv)&&this.frameScrollRequest(e,"",s)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var s,i=this.scrollEle;s=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5,o=function(){var l=Math.sin(n);l<=0?window.cancelAnimationFrame(l):("Up"===e.swipeDirection?i.scrollTop+=s*l:"Down"===e.swipeDirection&&(i.scrollTop-=s*l),n-=.02,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,i,s){var n=this;if(s)this.scrollUpdating(e,i);else{this.customStep||[].slice.call((0,r.td)("."+mv,this.element)).forEach(function(h){e-=h.offsetHeight});var l=function(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,i),e-=10,window.requestAnimationFrame(l))};l()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,s=e.distanceY;"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+s:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-s)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var n=((0,r.le)(e)?i:e).querySelector("."+Dd);(0,r.le)(e)?(0,r.s1)(n,[Ld],[gv]):(0,r.s1)(n,[gv],[Ld])}else e.classList.add(Cl),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(Cl),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var i=e.target,s=i.offsetHeight,n=this.element.querySelector("."+I1),o=this.element.querySelector("."+yw),l=this.element.querySelector("."+T1),h=this.element.querySelector("."+k1),c=i.scrollTop;if(c<=0&&(c=-c),this.isDevice&&(l.style.height=c<40?c+"px":"40px",h.style.height=i.scrollHeight-Math.ceil(s+c)<40?i.scrollHeight-Math.ceil(s+c)+"px":"40px"),0===c)this.arrowDisabling(n,o);else if(Math.ceil(s+c+.1)>=i.scrollHeight)this.arrowDisabling(o,n);else{var u=this.element.querySelector("."+Bh+"."+Cl);u&&(u.classList.remove(Cl),u.setAttribute("aria-disabled","false"),u.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var s=0,n=Object.keys(e);s<n.length;s++)switch(n[s]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(fv):this.element.classList.remove(fv)}},E1([(0,r.Z9)(null)],t.prototype,"scrollStep",void 0),E1([r.Zl],t)}(r.wA),M1=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),kt=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},ww="e-vertical",Gt="e-toolbar-items",Jt="e-toolbar-item",Aa="e-rtl",mi="e-separator",xv="e-popup-up-icon",Od="e-popup-down-icon",B1="e-popup-open",N1="e-template",nn="e-overlay",F1="e-toolbar-text",Ew="e-popup-text",Xr="e-overflow-show",Tv="e-overflow-hide",In="e-hor-nav",V1="e-scroll-nav",H1="e-toolbar-center",Qr="e-tbar-pos",Iw="e-hscroll-bar",Rd="e-toolbar-pop",Sl="e-toolbar-popup",Pd="e-nav-active",Md="e-ignore",xw="e-popup-alone",mo="e-hidden",z1="e-toolbar-multirow",j1="e-multirow-pos",Tw="e-multirow-separator",kw="e-extended-separator",q1="e-extended-toolbar",kv="e-toolbar-extended",Aw="e-tbar-extended",x2=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return M1(t,a),kt([(0,r.Z9)("")],t.prototype,"id",void 0),kt([(0,r.Z9)("")],t.prototype,"text",void 0),kt([(0,r.Z9)("auto")],t.prototype,"width",void 0),kt([(0,r.Z9)("")],t.prototype,"cssClass",void 0),kt([(0,r.Z9)(!1)],t.prototype,"showAlwaysInPopup",void 0),kt([(0,r.Z9)(!1)],t.prototype,"disabled",void 0),kt([(0,r.Z9)("")],t.prototype,"prefixIcon",void 0),kt([(0,r.Z9)("")],t.prototype,"suffixIcon",void 0),kt([(0,r.Z9)(!0)],t.prototype,"visible",void 0),kt([(0,r.Z9)("None")],t.prototype,"overflow",void 0),kt([(0,r.Z9)("")],t.prototype,"template",void 0),kt([(0,r.Z9)("Button")],t.prototype,"type",void 0),kt([(0,r.Z9)("Both")],t.prototype,"showTextOn",void 0),kt([(0,r.Z9)(null)],t.prototype,"htmlAttributes",void 0),kt([(0,r.Z9)("")],t.prototype,"tooltipText",void 0),kt([(0,r.Z9)("Left")],t.prototype,"align",void 0),kt([(0,r.ju)()],t.prototype,"click",void 0),kt([(0,r.Z9)(-1)],t.prototype,"tabIndex",void 0),t}(r.rt),Bd=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.resizeContext=s.resize.bind(s),s.orientationChangeContext=s.orientationChange.bind(s),s.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},s}return M1(t,a),t.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(s){!(0,r.le)(s)&&!(0,r.le)(s.ej2_instances)&&!(0,r.le)(s.ej2_instances[0])&&!s.ej2_instances[0].isDestroyed&&s.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(s){(0,r.le)(e.element.querySelector(s))||(document.body.appendChild(e.element.querySelector(s)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),(0,r.og)(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&(0,r.IV)([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach(function(s){return e.element.removeAttribute(s)}),a.prototype.destroy.call(this)},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(ww),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,Aa)},t.prototype.wireEvents=function(){r.bi.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),window.addEventListener("orientationchange",this.orientationChangeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new r.nv(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),r.bi.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},t.prototype.updateTabIndex=function(e){var i=this.element.querySelector("."+Jt+":not(."+nn+" ):not(."+mi+" ):not(."+mo+" )");if(!(0,r.le)(i)&&!(0,r.le)(i.firstElementChild)){var s=i.firstElementChild.getAttribute("data-tabindex");s&&"-1"===s&&"INPUT"!==i.firstElementChild.tagName&&i.firstElementChild.setAttribute("tabindex",e)}},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(r.bi.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var i=!(0,r.le)(this.popObj)&&(0,r.pn)(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&i&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){r.bi.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),window.removeEventListener("orientationchange",this.orientationChangeContext),r.bi.remove(document,"scroll",this.docEvent),r.bi.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var i=(0,r.oq)(e.target,".e-popup");this.popObj&&(0,r.pn)(this.popObj.element)&&!i&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,Qr),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+Jt)).forEach(function(i){(0,r.og)(i)}),this.tbarAlign){var e=this.element.querySelector("."+Gt);[].slice.call(e.children).forEach(function(i){(0,r.og)(i)}),this.tbarAlign=!1,this.remove(e,Qr)}this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,Aa),this.destroyScroll()),this.remove(this.element,Aw),this.remove(this.element,q1);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,z1),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,i){e.classList.add(i)},t.prototype.remove=function(e,i){e.classList.remove(i)},t.prototype.elementFocus=function(e){var i=e.firstElementChild;i?(i.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,i){return e&&this.popObj&&(0,r.pn)(this.popObj.element)?this.popObj.element.querySelector("."+Jt):this.element===i||e?this.element.querySelector("."+Jt+":not(."+nn+" ):not(."+mi+" ):not(."+mo+" )"):(0,r.oq)(i,"."+Jt)},t.prototype.keyHandling=function(e,i,s,n,o){var p,d,l=this.popObj,h=this.element,c={name:"FadeOut",duration:100},u="moveUp"===i.action?"previous":"next";switch(i.action){case"moveRight":if(this.isVertical)return;h===s?this.elementFocus(e):n||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var f=(0,r.oq)(e,".e-popup"),g=this.element.querySelector("."+kv);"Extended"===this.overflowMode&&g&&g.classList.contains("e-popup-open")&&(f="end"===i.action?g:null),f?(0,r.pn)(this.popObj.element)&&(d=[].slice.call(f.children),p="home"===i.action?this.focusFirstVisibleEle(d):this.focusLastVisibleEle(d)):(d=this.element.querySelectorAll("."+Gt+" ."+Jt+":not(."+mi+")"),p="home"===i.action?this.focusFirstVisibleEle(d):this.focusLastVisibleEle(d)),p&&this.elementFocus(p)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===i.action?"previous":"next");else if(l&&(0,r.oq)(s,".e-popup")){var m=l.element,v=m.firstElementChild;"previous"===u&&v===e?m.lastElementChild.firstChild.focus():"next"===u&&m.lastElementChild===e?v.firstChild.focus():this.eleFocus(e,u)}else"moveDown"===i.action&&l&&(0,r.pn)(l.element)&&this.elementFocus(e);break;case"tab":if(!o&&!n){var y=e.firstElementChild;h===s&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(y),y.focus()))}break;case"popupClose":l&&"Extended"!==this.overflowMode&&l.hide(c);break;case"popupOpen":if(!n)return;l&&!(0,r.pn)(l.element)?(l.element.style.top=h.offsetHeight+"px",l.show({name:"FadeIn",duration:100})):l.hide(c)}},t.prototype.keyActionHandler=function(e){var i=e.target;if("INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!this.element.classList.contains(nn)){e.preventDefault();var s=i.classList.contains(In),n=i.classList.contains(V1),o=this.clstElement(s,i);(o||n)&&this.keyHandling(o,e,i,s,n)}},t.prototype.disable=function(e){var i=this.element;e?i.classList.add(nn):i.classList.remove(nn),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&((0,r.pn)(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),i.querySelector("#"+i.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains(mi)||e.classList.contains(nn)||e.getAttribute("disabled")||e.classList.contains(mo)||!(0,r.pn)(e)||!e.classList.contains(Jt)},t.prototype.focusFirstVisibleEle=function(e){for(var s=0;s<e.length;){var n=e[parseInt(s.toString(),10)];if(!n.classList.contains(mo)&&!n.classList.contains(nn))return n;s++}},t.prototype.focusLastVisibleEle=function(e){for(var s=e.length-1;s>=0;){var n=e[parseInt(s.toString(),10)];if(!n.classList.contains(mo)&&!n.classList.contains(nn))return n;s--}},t.prototype.eleFocus=function(e,i){var s=Object(e)[i+"ElementSibling"];if(s){if(this.eleContains(s))return void this.eleFocus(s,i);this.elementFocus(s)}else if(this.tbarAlign){var o=Object(e.parentElement)[i+"ElementSibling"];if(!(0,r.le)(o)&&0===o.children.length&&(o=Object(o)[i+"ElementSibling"]),!(0,r.le)(o)&&o.children.length>0)if("next"===i){var l=o.querySelector("."+Jt);this.eleContains(l)?this.eleFocus(l,i):(l.firstElementChild.focus(),this.activeEleSwitch(l))}else this.eleContains(l=o.lastElementChild)?this.eleFocus(l,i):this.elementFocus(l)}else if(!(0,r.le)(e)){var h=this.element.querySelectorAll("."+Gt+" ."+Jt+":not(."+mi+"):not(."+nn+"):not(."+mo+")");"next"===i&&h?this.elementFocus(h[0]):"previous"===i&&h&&this.elementFocus(h[h.length-1])}},t.prototype.clickHandler=function(e){var i=this,s=e.target,n=this.element,o=!(0,r.le)((0,r.oq)(s,"."+Rd)),l=s.classList,h=(0,r.oq)(s,"."+In);h||(h=s),!n.children[0].classList.contains("e-hscroll")&&!n.children[0].classList.contains("e-vscroll")&&l.contains(In)&&(l=s.querySelector(".e-icons").classList),(l.contains(xv)||l.contains(Od))&&this.popupClickHandler(n,h,Aa);var c,u=(0,r.oq)(e.target,"."+Jt);if(!(0,r.le)(u)&&!u.classList.contains(nn)||h.classList.contains(In)){u&&(c=this.items[this.tbarEle.indexOf(u)]);var d={originalEvent:e,item:c};c&&!(0,r.le)(c.click)&&this.trigger("items["+this.tbarEle.indexOf(u)+"].click",d),d.cancel||this.trigger("clicked",d,function(f){!(0,r.le)(i.popObj)&&o&&!f.cancel&&"Popup"===i.overflowMode&&f.item&&"Input"!==f.item.type&&i.popObj.hide({name:"FadeOut",duration:100})})}},t.prototype.popupClickHandler=function(e,i,s){var n=this.popObj;(0,r.pn)(n.element)?(i.classList.remove(Pd),n.hide({name:"FadeOut",duration:100})):(e.classList.contains(s)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),0===n.offsetX&&!e.classList.contains(s)&&(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(n.element.style.minHeight="0px"),i.classList.add(Pd),n.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){var e=this;this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete(),this.isReact&&this.portals&&this.portals.length>0&&this.renderReactTemplates(function(){e.refreshOverflow()})},t.prototype.initialize=function(){var e=(0,r.Ac)(this.width),i=(0,r.Ac)(this.height);("msie"!==r.AR.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&(0,r.V7)(this.element,{height:i}),(0,r.V7)(this.element,{width:e}),(0,r.Y4)(this.element,{role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&(0,r.cn)([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,i){var s,n;this.tbarEle||(this.tbarEle=[]);for(var o=0;o<e.length;o++)s=this.renderSubComponent(e[parseInt(o.toString(),10)],o),-1===this.tbarEle.indexOf(s)&&this.tbarEle.push(s),this.tbarAlign||this.tbarItemAlign(e[parseInt(o.toString(),10)],i,o),(n=i.querySelector(".e-toolbar-"+e[parseInt(o.toString(),10)].align.toLowerCase()))?(e[parseInt(o.toString(),10)].showAlwaysInPopup&&"Show"!==e[parseInt(o.toString(),10)].overflow||this.tbarAlgEle[(e[parseInt(o.toString(),10)].align+"s").toLowerCase()].push(s),n.appendChild(s)):i.appendChild(s);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(ww),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(ww),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),(0,r.V7)(this.element,{height:(0,r.Ac)(this.height),width:(0,r.Ac)(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,i){if(!this.scrollModule&&this.checkOverflow(e,i[0])){this.tbarAlign&&this.element.querySelector("."+Gt+" ."+H1).removeAttribute("style"),this.scrollModule=this.isVertical?new fu({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]):new dv({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]),this.cssClass&&(0,r.cn)([i[0]],this.cssClass.split(" "));var s=this.scrollModule.element.querySelector("."+Iw+", .e-vscroll-bar");s&&s.removeAttribute("tabindex"),this.remove(this.scrollModule.element,Qr),(0,r.V7)(this.element,{overflow:"hidden"})}},t.prototype.itemWidthCal=function(e){var n,i=this,s=0;return[].slice.call((0,r.td)("."+Jt,e)).forEach(function(o){(0,r.pn)(o)&&(n=window.getComputedStyle(o),s+=i.isVertical?o.offsetHeight:o.offsetWidth,s+=parseFloat(i.isVertical?n.marginTop:n.marginRight),s+=parseFloat(i.isVertical?n.marginBottom:n.marginLeft))}),s},t.prototype.getScrollCntEle=function(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")},t.prototype.checkOverflow=function(e,i){if((0,r.le)(e)||(0,r.le)(i)||!(0,r.pn)(e))return!1;var s=this.isVertical?e.offsetHeight:e.offsetWidth,n=this.isVertical?i.offsetHeight:i.offsetWidth;(this.tbarAlign||this.scrollModule||s===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(i):i));var o=e.querySelector("."+In),l=e.querySelector("."+V1),h=0;return o?h=this.isVertical?o.offsetHeight:o.offsetWidth:l&&(h=this.isVertical?2*l.offsetHeight:2*l.offsetWidth),n>s-h},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,Qr),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,i=e.querySelector("."+Gt),s=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===r.AR.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":(0,r.le)(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(Gt)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,i)||s)&&this.setOverflowAttributes(e),this.toolbarAlign(i);break;case"MultiRow":this.add(i,z1),this.checkOverflow(e,i)&&this.tbarAlign&&(this.removePositioning(),this.add(i,j1)),"hidden"===e.style.overflow&&(e.style.overflow=""),("msie"===r.AR.info.name||"auto"!==e.style.height)&&(e.style.height="auto");break;case"Extended":this.add(this.element,q1),(this.checkOverflow(e,i)||s)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(i)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call((0,r.td)("."+Gt+" ."+Jt,e))),(0,r.Y4)(this.element.querySelector("."+In),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},t.prototype.separator=function(){var e=this.element,i=[].slice.call(e.querySelectorAll("."+mi)),s=e.querySelector("."+Tw),n=e.querySelector("."+kw),o="MultiRow"===this.overflowMode?s:n;null!==o&&("MultiRow"===this.overflowMode?o.classList.remove(Tw):"Extended"===this.overflowMode&&o.classList.remove(kw));for(var l=0;l<=i.length-1;l++)i[parseInt(l.toString(),10)].offsetLeft<30&&0!==i[parseInt(l.toString(),10)].offsetLeft&&("MultiRow"===this.overflowMode?i[parseInt(l.toString(),10)].classList.add(Tw):"Extended"===this.overflowMode&&i[parseInt(l.toString(),10)].classList.add(kw))},t.prototype.createPopupEle=function(e,i){var s=e.querySelector("."+In),n=this.isVertical;s||this.createPopupIcon(e),s=e.querySelector("."+In);var l=(n?e.offsetHeight:e.offsetWidth)-(n?s.offsetHeight:s.offsetWidth);this.element.classList.remove("e-rtl"),(0,r.V7)(this.element,{direction:"initial"}),this.checkPriority(e,i,l,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,i,s,n,o){var l=e.element,h=[].slice.call((0,r.td)("."+Sl,l.querySelector("."+Gt))),c=(0,r.td)("."+Xr,s),u=0,p=0;h.forEach(function(m,v){c=(0,r.td)("."+Xr,s),m.classList.contains(Xr)&&c.length>0?e.tbResize&&c.length>v?(s.insertBefore(m,c[parseInt(v.toString(),10)]),++p):(s.insertBefore(m,s.children[c.length]),++p):m.classList.contains(Xr)||e.tbResize&&m.classList.contains(Tv)&&s.children.length>0&&0===c.length?(s.insertBefore(m,s.firstChild),++p):m.classList.contains(Tv)?i.push(m):e.tbResize?(s.insertBefore(m,s.childNodes[u+p]),++u):s.appendChild(m),m.classList.contains(mi)?(0,r.V7)(m,{display:"",height:o+"px"}):(0,r.V7)(m,{display:"",height:n+"px"})}),i.forEach(function(m){s.appendChild(m)});for(var d=(0,r.td)("."+Jt,l.querySelector("."+Gt)),f=d.length-1;f>=0;f--){var g=d[parseInt(f.toString(),10)];if(!g.classList.contains(mi)||"Extended"===this.overflowMode)break;(0,r.V7)(g,{display:"none"})}},t.prototype.createPopup=function(){var i,s,e=this.element;"Extended"===this.overflowMode&&(s=e.querySelector("."+mi),i="auto"===e.style.height||""===e.style.height?null:s&&s.offsetHeight);var l,n=e.querySelector("."+Jt+":not(."+mi+"):not(."+Sl+")"),o="auto"===e.style.height||""===e.style.height?null:n&&n.offsetHeight;if((0,r.Ys)("#"+e.id+"_popup."+Rd,e))l=(0,r.Ys)("#"+e.id+"_popup."+Rd,e);else{var c=this.createElement("div",{id:e.id+"_popup",className:Rd+" "+kv}),u=this.createElement("div",{id:e.id+"_popup",className:Rd});l="Extended"===this.overflowMode?c:u}this.pushingPoppedEle(this,[],l,o,i),this.popupInit(e,l)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,i){if(this.popObj){var l=this.popObj.element;(0,r.V7)(l,{maxHeight:"",display:"block"}),(0,r.V7)(l,{maxHeight:l.offsetHeight+"px",display:""})}else{e.appendChild(i),this.cssClass&&(0,r.cn)([i],this.cssClass.split(" ")),(0,r.V7)(this.element,{overflow:""});var s=window.getComputedStyle(this.element),n=new Ni(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.overflowMode&&(n.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth),n.offsetX=0),n.appendTo(i),r.bi.add(document,"scroll",this.docEvent.bind(this)),r.bi.add(document,"click ",this.docEvent.bind(this)),n.element.style.maxHeight=n.element.offsetHeight+"px",this.isVertical&&(n.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector("."+In);o.classList.add(Pd),(0,r.s1)(o.firstElementChild,[xv],[Od]),this.element.querySelector("."+kv).classList.add(B1)}else n.hide();this.popObj=n}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,Aw):this.remove(this.element,Aw))},t.prototype.popupOpen=function(e){var i=this.popObj;this.isVertical||(i.offsetY=this.getElementOffsetY(),i.dataBind());var s=this.popObj.element,n=this.popObj.element.parentElement,o=n.querySelector("."+In);o.setAttribute("aria-expanded","true"),(0,r.V7)(i.element,{height:"auto",maxHeight:""}),i.element.style.maxHeight=i.element.offsetHeight+"px","Extended"===this.overflowMode&&(i.element.style.minHeight="");var l=s.offsetTop+s.offsetHeight+fi(n).top,h=o.firstElementChild;o.classList.add(Pd),(0,r.s1)(h,[xv],[Od]),this.tbarPopupHandler(!0);var c=(0,r.le)(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+c<l&&this.element.offsetTop<s.offsetHeight){var u=s.offsetHeight-(l-window.innerHeight-c+5);i.height=u+"px";for(var p=0;p<=s.childElementCount;p++){var d=s.children[parseInt(p.toString(),10)];if(d.offsetTop+d.offsetHeight>u){u=d.offsetTop;break}}(0,r.V7)(i.element,{maxHeight:u+"px"})}else if(this.isVertical){var f=this.element.getBoundingClientRect();(0,r.V7)(i.element,{maxHeight:f.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(i){var g=s.getBoundingClientRect();g.right>document.documentElement.clientWidth&&g.width>n.getBoundingClientRect().width&&(i.collision={Y:"none"},i.dataBind()),i.refreshPosition()}},t.prototype.popupClose=function(e){var s=this.element.querySelector("."+In);s.setAttribute("aria-expanded","false");var n=s.firstElementChild;s.classList.remove(Pd),(0,r.s1)(n,[Od],[xv]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,i,s,n){for(var c,o=this.popupPriCount>0,h=s,p=0,d=0,f=0,g=function(x,T){var O=!1;return T.forEach(function(A){x.classList.contains(A)&&(O=!0)}),O},m=i.length-1;m>=0;m--){var v=void 0,y=window.getComputedStyle(i[parseInt(m.toString(),10)]);this.isVertical?(v=parseFloat(y.marginTop),v+=parseFloat(y.marginBottom)):(v=parseFloat(y.marginRight),v+=parseFloat(y.marginLeft));var C=i[parseInt(m.toString(),10)]===this.tbarEle[0];C&&(this.tbarEleMrgn=v),c=this.isVertical?i[parseInt(m.toString(),10)].offsetHeight:i[parseInt(m.toString(),10)].offsetWidth;var b=C?c+v:c;if(g(i[parseInt(m.toString(),10)],[xw])&&o&&(i[parseInt(m.toString(),10)].classList.add(Sl),(0,r.V7)(i[parseInt(m.toString(),10)],this.isVertical?{display:"none",minHeight:b+"px"}:{display:"none",minWidth:b+"px"}),f++),this.isVertical?i[parseInt(m.toString(),10)].offsetTop+i[parseInt(m.toString(),10)].offsetHeight+v>s:i[parseInt(m.toString(),10)].offsetLeft+i[parseInt(m.toString(),10)].offsetWidth+v>s){if(i[parseInt(m.toString(),10)].classList.contains(mi)){if("Extended"===this.overflowMode)g(S=i[parseInt(m.toString(),10)],[mi,Md])&&(i[parseInt(m.toString(),10)].classList.add(Sl),f++),d++;else if("Popup"===this.overflowMode){var S;p>0&&d===f&&g(S=i[m+d+(p-1)],[mi,Md])&&(0,r.V7)(S,{display:"none"}),p++,d=0,f=0}}else d++;i[parseInt(m.toString(),10)].classList.contains(Xr)&&n||g(i[parseInt(m.toString(),10)],[mi,Md])?s-=(this.isVertical?i[parseInt(m.toString(),10)].offsetHeight:i[parseInt(m.toString(),10)].offsetWidth)+v:(i[parseInt(m.toString(),10)].classList.add(Sl),(0,r.V7)(i[parseInt(m.toString(),10)],this.isVertical?{display:"none",minHeight:b+"px"}:{display:"none",minWidth:b+"px"}),f++)}}if(n){var I=(0,r.td)("."+Jt+":not(."+Sl+")",this.element);this.checkPriority(e,I,h,!1)}},t.prototype.createPopupIcon=function(e){var i=e.id.concat("_nav"),s="e-"+e.id.concat("_nav e-hor-nav"),n=this.createElement("div",{id:i,className:s="Extended"===this.overflowMode?s+" e-expended-nav":s});("msie"===r.AR.info.name||"edge"===r.AR.info.name)&&n.classList.add("e-ie-align");var o=this.createElement("div",{className:Od+" e-icons"});n.appendChild(o),n.setAttribute("tabindex","0"),n.setAttribute("role","button"),e.appendChild(n)},t.prototype.tbarPriRef=function(e,i,s,n,o,l,h,c,u){var p=c,g=(0,r.td)("."+Sl+":not(."+Xr+")",this.popObj.element).length,m=function(S,I){return S.classList.contains(I)};if(0===(0,r.td)(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var v=e.children[i-(i-s)-1],y=!(0,r.le)(v)&&m(v,Md);if(!(0,r.le)(v)&&m(v,mi)&&!(0,r.pn)(v)||y){v.style.display="unset";var C=v.offsetWidth+2*parseFloat(window.getComputedStyle(v).marginRight),b=v.previousElementSibling;l+C<h||o?(e.insertBefore(n,e.children[i+p-(i-s)]),(0,r.le)(b)||(b.style.display="")):((0,r.V7)(n,u),b.classList.contains(mi)&&(b.style.display="none")),v.style.display=""}else e.insertBefore(n,e.children[i+p-(i-s)])}else e.insertBefore(n,e.children[i+p-g])},t.prototype.popupRefresh=function(e,i){var s=this,n=this.element,o=this.isVertical,l=n.querySelector("."+Gt),h=n.querySelector("."+In);if(!(0,r.le)(h)){var c;l.removeAttribute("style"),e.style.display="block",c=o?n.offsetHeight-(h.offsetHeight+l.offsetHeight):n.offsetWidth-(h.offsetWidth+l.offsetWidth);var u=0;[].slice.call(e.children).forEach(function(p){u+=s.popupEleWidth(p),(0,r.V7)(p,{position:""})}),c+(o?h.offsetHeight:h.offsetWidth)>u&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(c,e,i),e.style.display="",0===e.children.length&&h&&this.popObj&&((0,r.og)(h),h=null,this.popObj.destroy(),(0,r.og)(this.popObj.element),this.popObj=null)}},t.prototype.ignoreEleFetch=function(e,i){var s=[].slice.call(i.querySelectorAll("."+Md)),n=[],o=0;return s.length>0?(s.forEach(function(l){n.push([].slice.call(i.children).indexOf(l))}),n.forEach(function(l){l<=e&&o++}),o):0},t.prototype.checkPopupRefresh=function(e,i){i.style.display="block";var s=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var n=e.offsetWidth-e.querySelector("."+In).offsetWidth,o=e.querySelector("."+Gt).offsetWidth;return i.style.removeProperty("display"),n>s+o},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var i=this.isVertical?e.offsetHeight:e.offsetWidth,s=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(Ew)){var n=e.children[0];!(0,r.le)(s)&&e.classList.contains(Ew)?s.style.display="none":!(0,r.le)(s)&&e.classList.contains(F1)&&(s.style.display="block"),n.style.minWidth="0%",i=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",(0,r.le)(s)||(s.style.display="")}return i},t.prototype.popupEleRefresh=function(e,i,s){for(var l,h,n=this.popupPriCount>0,o=this.tbarEle,c=this.element.querySelector("."+Gt),u=0,p=function(C){if(C.classList.contains(xw)&&n&&!s)return"continue";var b=d.popupEleWidth(C);if(C===d.tbarEle[0]&&(b+=d.tbarEleMrgn),C.style.position="",!(b<e||s))return"break";var S={minWidth:C.style.minWidth,height:C.style.height,minHeight:C.style.minHeight};if((0,r.V7)(C,{minWidth:"",height:"",minHeight:""}),C.classList.contains(Tv)||C.classList.remove(Sl),h=d.tbarEle.indexOf(C),d.tbarAlign){var I=d.items[parseInt(h.toString(),10)].align;h=d.tbarAlgEle[(I+"s").toLowerCase()].indexOf(C),o=d.tbarAlgEle[(I+"s").toLowerCase()],c=d.element.querySelector("."+Gt+" .e-toolbar-"+I.toLowerCase())}var x=0;"Extended"!==d.overflowMode&&o.slice(0,h).forEach(function(T){(T.classList.contains(Xr)||T.classList.contains(mi))&&(T.classList.contains(mi)&&(T.style.display="",e-=T.offsetWidth),x++)}),u=d.ignoreEleFetch(h,c),C.classList.contains(Xr)?(d.tbarPriRef(c,h,x,C,s,b,e,u,S),e-=C.offsetWidth):0===h?(c.insertBefore(C,c.firstChild),e-=C.offsetWidth):(l=(0,r.td)("."+Xr,d.popObj.element).length,c.insertBefore(C,c.children[h+u-l]),e-=C.offsetWidth),C.style.height=""},d=this,f=0,g=[].slice.call(i.children);f<g.length&&"break"!==p(g[f]);f++);this.checkOverflow(this.element,this.element.getElementsByClassName(Gt)[0])&&!s&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+Gt);if(!(0,r.le)(e)&&e.classList.contains(Qr)){this.remove(e,Qr);var i=[].slice.call(e.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+Gt);this.add(e,Qr),this.itemPositioning()},t.prototype.itemPositioning=function(){var i,e=this.element.querySelector("."+Gt);if(!(0,r.le)(e)&&e.classList.contains(Qr)){var n,s=this.element.querySelector("."+In);n=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),i=this.isVertical?n[0].offsetHeight+n[2].offsetHeight:n[0].offsetWidth+n[2].offsetWidth;var l=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(s){l-=this.isVertical?s.offsetHeight:s.offsetWidth;var h=(this.isVertical?s.offsetHeight:s.offsetWidth)+"px";n[2].removeAttribute("style"),this.isVertical?this.enableRtl?n[2].style.top=h:n[2].style.bottom=h:this.enableRtl?n[2].style.left=h:n[2].style.right=h}if(!(l<=i)){var c=(l-i-(this.isVertical?n[1].offsetHeight:n[1].offsetWidth))/2;n[1].removeAttribute("style");var u=(this.isVertical?n[0].offsetHeight:n[0].offsetWidth)+c+"px";this.isVertical?this.enableRtl?n[1].style.marginBottom=u:n[1].style.marginTop=u:this.enableRtl?n[1].style.marginRight=u:n[1].style.marginLeft=u}}},t.prototype.tbarItemAlign=function(e,i,s){var n=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var o=[];if(o.push(this.createElement("div",{className:"e-toolbar-left"})),o.push(this.createElement("div",{className:H1})),o.push(this.createElement("div",{className:"e-toolbar-right"})),0===s&&"Left"!==e.align)o.forEach(function(c){i.appendChild(c)}),this.tbarAlign=!0,this.add(i,Qr);else if("Left"!==e.align){var h=o[0];[].slice.call(i.childNodes).forEach(function(c){n.tbarAlgEle.lefts.push(c),h.appendChild(c)}),i.appendChild(h),i.appendChild(o[1]),i.appendChild(o[2]),this.tbarAlign=!0,this.add(i,Qr)}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,Gt),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(s){"DIV"===s.tagName&&(e.tbarEle.push(s),(0,r.le)(s.firstElementChild)||s.firstElementChild.setAttribute("aria-disabled","false"),e.add(s,Jt))})},t.prototype.renderItems=function(){var e=this.element,i=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&i.length>0){var s=void 0;e&&e.children.length>0&&(s=e.querySelector("."+Gt)),s||(s=this.createElement("div",{className:Gt})),this.itemsAlign(i,s),e.appendChild(s)}},t.prototype.setAttr=function(e,i){for(var n,s=Object.keys(e),o=0;o<s.length;o++)"class"===(n=s[parseInt(o.toString(),10)])?this.add(i,e[""+n]):i.setAttribute(n,e[""+n])},t.prototype.enableItems=function(e,i){var o,s=e,n=s.length;(0,r.le)(i)&&(i=!0);var l=function(p,d){p?(d.classList.remove(nn),(0,r.le)(d.firstElementChild)||d.firstElementChild.setAttribute("aria-disabled","false")):(d.classList.add(nn),(0,r.le)(d.firstElementChild)||d.firstElementChild.setAttribute("aria-disabled","true"))};if(!(0,r.le)(n)&&n>=1){for(var h=0,c=[].slice.call(s);h<n;h++){var u=c[parseInt(h.toString(),10)];if("number"==typeof u){if(o=this.getElementByIndex(u),(0,r.le)(o))return;s[parseInt(h.toString(),10)]=o}else o=u;l(i,o)}i?(0,r.IV)(s,nn):(0,r.cn)(s,nn)}else{if("number"==typeof s){if(o=this.getElementByIndex(s),(0,r.le)(o))return}else o=e;l(i,o)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[parseInt(e.toString(),10)]?this.tbarEle[parseInt(e.toString(),10)]:null},t.prototype.addItems=function(e,i){var s;this.extendedOpen();var n=this.element.querySelector("."+Gt);if((0,r.le)(n))this.itemsRerender(e);else{var o,l="Left";(0,r.le)(i)&&(i=0),e.forEach(function(f){!(0,r.le)(f.align)&&"Left"!==f.align&&"Left"===l&&(l=f.align)});for(var h=0,c=e;h<c.length;h++){var u=c[h];if((0,r.le)(u.type)&&(u.type="Button"),s=(0,r.td)("."+Jt,this.element),u.align=l,o=this.renderSubComponent(u,i),this.tbarEle.length>=i&&s.length>=0){(0,r.le)(this.scrollModule)&&this.destroyMode();var p="L"===u.align[0]?0:"C"===u.align[0]?1:2,d=void 0;this.tbarAlign||"Left"===l?this.tbarAlign?((d=(0,r.oq)(s[0],"."+Gt).children[parseInt(p.toString(),10)]).insertBefore(o,d.children[parseInt(i.toString(),10)]),this.tbarAlgEle[(u.align+"s").toLowerCase()].splice(i,0,o),this.refreshPositioning()):0===s.length?(s=(0,r.td)("."+Gt,this.element))[0].appendChild(o):s[0].parentNode.insertBefore(o,s[parseInt(i.toString(),10)]):(this.tbarItemAlign(u,n,1),this.tbarAlign=!0,(d=(0,r.oq)(s[0],"."+Gt).children[parseInt(p.toString(),10)]).appendChild(o),this.tbarAlgEle[(u.align+"s").toLowerCase()].push(o),this.refreshPositioning()),this.items.splice(i,0,u),u.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(i,0,o),i++,this.offsetWid=n.offsetWidth}}n.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},t.prototype.removeItems=function(e){var s,i=e,n=[].slice.call((0,r.td)("."+Jt,this.element));if("number"==typeof i)s=parseInt(e.toString(),10),this.removeItemByIndex(s,n);else if(i&&i.length>1)for(var o=0,l=[].slice.call(i);o<l.length;o++)s=this.tbarEle.indexOf(l[o]),this.removeItemByIndex(s,n),n=(0,r.td)("."+Jt,this.element);else s=n.indexOf(i&&i.length&&1===i.length?i[0]:e),this.removeItemByIndex(s,n);this.resize()},t.prototype.removeItemByIndex=function(e,i){if(this.tbarEle[parseInt(e.toString(),10)]&&i[parseInt(e.toString(),10)]){var s=this.tbarEle.indexOf(i[parseInt(e.toString(),10)]);if(this.tbarAlign){var n=this.tbarAlgEle[(this.items[parseInt(s.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(s.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(s.toString(),10)].align+"s").toLowerCase()].splice(parseInt(n.toString(),10),1)}this.isReact&&this.clearToolbarTemplate(i[parseInt(e.toString(),10)]);var o=i[parseInt(e.toString(),10)].querySelector(".e-control.e-btn");!(0,r.le)(o)&&!(0,r.le)(o.ej2_instances[0])&&!o.ej2_instances[0].isDestroyed&&o.ej2_instances[0].destroy(),(0,r.og)(i[parseInt(e.toString(),10)]),this.items.splice(s,1),this.tbarEle.splice(s,1)}},t.prototype.templateRender=function(e,i,s,n){var h,l=e;if("object"==typeof e&&(h="function"==typeof l.appendTo),"string"!=typeof e&&h)"Input"===s.type&&((d=this.createElement("input")).id=s.id?s.id:(0,r.QI)("tbr-ipt"),i.appendChild(d),l.appendTo(d));else{var u,c=void 0,p=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);u="string"==typeof e?e.trim():e;try{if("object"!=typeof e||(0,r.le)(e.tagName))if("string"==typeof e&&p.test(u))i.innerHTML=u;else if(document.querySelectorAll(u).length){var d,f=(d=document.querySelector(u)).outerHTML.trim();i.appendChild(d),d.style.display="",(0,r.le)(f)||this.tempId.push(u)}else c=(0,r.MY)(u);else i.appendChild(e)}catch(y){c=(0,r.MY)(u)}var g=void 0;(0,r.le)(c)||(g=c({},this,"template",this.element.id+n+"_template",this.isStringTemplate,void 0,void 0,this.root)),!(0,r.le)(g)&&g.length>0&&[].slice.call(g).forEach(function(y){(0,r.le)(y.tagName)||(y.style.display=""),i.appendChild(y)})}this.add(i,N1);var v=i.firstElementChild;(0,r.le)(v)||(v.setAttribute("tabindex",(0,r.le)(v.getAttribute("tabIndex"))?"-1":this.getDataTabindex(v)),v.setAttribute("data-tabindex",(0,r.le)(v.getAttribute("tabIndex"))?"-1":this.getDataTabindex(v))),this.tbarEle.push(i)},t.prototype.buttonRendering=function(e,i){var s=this.createElement("button",{className:"e-tbar-btn"});s.setAttribute("type","button");var o,l,n=e.text;s.id=e.id?e.id:(0,r.QI)("e-tbr-btn");var h=this.createElement("span",{className:"e-tbar-btn-text"});n?(h.innerHTML=this.enableHtmlSanitizer?r.pJ.sanitize(n):n,s.appendChild(h),s.classList.add("e-tbtn-txt")):this.add(i,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(o=e.prefixIcon+" e-icons",l="Left"):(o=e.suffixIcon+" e-icons",l="Right"));var c=new It({iconCss:o,iconPosition:l});return c.createElement=this.createElement,c.appendTo(s),e.width&&(0,r.V7)(s,{width:(0,r.Ac)(e.width)}),s},t.prototype.renderSubComponent=function(e,i){var s,n=this.createElement("div",{className:Jt}),o=this.createElement("div",{innerHTML:this.enableHtmlSanitizer&&!(0,r.le)(e.tooltipText)?r.pJ.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,n),e.tooltipText&&n.setAttribute("title",o.textContent),e.cssClass&&(n.className=n.className+" "+e.cssClass),e.template)this.templateRender(e.template,n,e,i);else switch(e.type){case"Button":(s=this.buttonRendering(e,n)).setAttribute("tabindex",(0,r.le)(e.tabIndex)?"-1":e.tabIndex.toString()),s.setAttribute("data-tabindex",(0,r.le)(e.tabIndex)?"-1":e.tabIndex.toString()),s.setAttribute("aria-label",e.text||e.tooltipText),s.setAttribute("aria-disabled","false"),n.appendChild(s),n.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(n,mi)}if(e.showTextOn){var l=e.showTextOn;"Toolbar"===l?(this.add(n,F1),this.add(n,"e-tbtn-align")):"Overflow"===l&&this.add(n,Ew)}if(e.overflow){var h=e.overflow;"Show"===h?this.add(n,Xr):"Hide"===h&&(n.classList.contains(mi)||this.add(n,Tv))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!n.classList.contains(mi)&&(this.add(n,xw),this.popupPriCount++),e.disabled&&this.add(n,nn),!1===e.visible&&this.add(n,mo),n},t.prototype.getDataTabindex=function(e){return(0,r.le)(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){if((0,r.le)(this.activeEle)||this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),this.activeEle=e,"-1"===this.getDataTabindex(this.activeEle))if((0,r.le)(this.trgtEle)&&!e.parentElement.classList.contains(N1))this.updateTabIndex("-1"),e.removeAttribute("tabindex");else{var i=parseInt(this.getDataTabindex(this.activeEle))+1;this.activeEle.setAttribute("tabindex",i.toString())}},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var i=this.checkOverflow(e,e.getElementsByClassName(Gt)[0]);if(!i){this.destroyScroll();var s=e.querySelector("."+Gt);(0,r.le)(s)||(this.remove(s,j1),this.tbarAlign&&this.add(s,Qr))}if(!i||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+Iw)&&(this.scrollStep=this.element.querySelector("."+Iw).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.orientationChange=function(){var e=this;setTimeout(function(){e.resize()},500)},t.prototype.extendedOpen=function(){var e=this.element.querySelector("."+kv);"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(B1))},t.prototype.updateHideEleTabIndex=function(e,i,s,n,o){s&&(n=o.indexOf(e));for(var l=o[++n];l;){if(!this.eleContains(l)){var c=l.firstElementChild.getAttribute("data-tabindex");i&&"-1"===c?l.firstElementChild.setAttribute("tabindex","0"):c!==l.firstElementChild.getAttribute("tabindex")&&l.firstElementChild.setAttribute("tabindex",c);break}l=o[++n]}},t.prototype.clearToolbarTemplate=function(e){if(this.registeredTemplate&&this.registeredTemplate.template)for(var i=this.registeredTemplate,s=0;s<i.template.length;s++){var n=i.template[parseInt(s.toString(),10)].rootNodes[0],o=(0,r.oq)(n,"."+Jt);if(!(0,r.le)(o)&&o===e){this.clearTemplate(["template"],[i.template[parseInt(s.toString(),10)]]);break}}else if(this.portals&&this.portals.length>0){var l=this.portals;for(s=0;s<l.length;s++){var h=l[parseInt(s.toString(),10)];if(o=(0,r.oq)(h.containerInfo,"."+Jt),!(0,r.le)(o)&&o===e){this.clearTemplate(["template"],s);break}}}},t.prototype.onPropertyChanged=function(e,i){var s=this.element;this.extendedOpen();for(var o=0,l=Object.keys(e);o<l.length;o++)switch(l[o]){case"items":if(e.items instanceof Array&&i.items instanceof Array)this.itemsRerender(e.items);else for(var c=Object.keys(e.items),u=0;u<c.length;u++){var p=parseInt(Object.keys(e.items)[parseInt(u.toString(),10)],10),d=Object.keys(e.items[parseInt(p.toString(),10)])[0],f=Object(e.items[parseInt(p.toString(),10)])[""+d];if(this.tbarAlign||"align"===d){this.refresh(),this.trigger("created");break}var m="overflow"===d&&0!==this.popupPriCount;("showAlwaysInPopup"===d&&!f||this.items[parseInt(p.toString(),10)].showAlwaysInPopup&&m)&&--this.popupPriCount,(0,r.le)(this.scrollModule)&&this.destroyMode();var v=[].slice.call((0,r.td)("."+Gt+" ."+Jt,s));this.isReact&&this.items[parseInt(p.toString(),10)].template&&this.clearToolbarTemplate(v[parseInt(p.toString(),10)]),(0,r.og)(v[parseInt(p.toString(),10)]),this.tbarEle.splice(p,1),this.addItems([this.items[parseInt(p.toString(),10)]],p),this.items.splice(p,1),this.items[parseInt(p.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":(0,r.V7)(s,{width:(0,r.Ac)(e.width)}),this.refreshOverflow();break;case"height":(0,r.V7)(this.element,{height:(0,r.Ac)(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(s,Aa),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(s,Aa):this.remove(s,Aa),(0,r.le)(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,Aa):this.remove(this.scrollModule.element,Aa)),(0,r.le)(this.popObj)||(e.enableRtl?this.add(this.popObj.element,Aa):this.remove(this.popObj.element,Aa)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":i.cssClass&&(0,r.IV)([this.element],i.cssClass.split(" ")),e.cssClass&&(0,r.cn)([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}},t.prototype.hideItem=function(e,i){var o,s="object"==typeof e,n=e;if(s||!(0,r.le)(n)){var l=[].slice.call((0,r.td)("."+Jt,this.element));s?o=e:this.tbarEle[parseInt(n.toString(),10)]&&(o=[].slice.call((0,r.td)("."+Jt,this.element))[parseInt(n.toString(),10)]),o&&(i?(o.classList.add(mo),o.classList.contains(mi)||((0,r.le)(o.firstElementChild.getAttribute("tabindex"))||"-1"!==o.firstElementChild.getAttribute("tabindex"))&&this.updateHideEleTabIndex(o,i,s,n,l)):(o.classList.remove(mo),o.classList.contains(mi)||this.updateHideEleTabIndex(o,i,s,n,l)),this.refreshOverflow())}},kt([(0,r.FE)([],x2)],t.prototype,"items",void 0),kt([(0,r.Z9)("auto")],t.prototype,"width",void 0),kt([(0,r.Z9)("auto")],t.prototype,"height",void 0),kt([(0,r.Z9)("")],t.prototype,"cssClass",void 0),kt([(0,r.Z9)("Scrollable")],t.prototype,"overflowMode",void 0),kt([(0,r.Z9)()],t.prototype,"scrollStep",void 0),kt([(0,r.Z9)(!0)],t.prototype,"enableCollision",void 0),kt([(0,r.Z9)(!0)],t.prototype,"enableHtmlSanitizer",void 0),kt([(0,r.Z9)(!0)],t.prototype,"allowKeyboard",void 0),kt([(0,r.ju)()],t.prototype,"clicked",void 0),kt([(0,r.ju)()],t.prototype,"created",void 0),kt([(0,r.ju)()],t.prototype,"destroyed",void 0),kt([(0,r.ju)()],t.prototype,"beforeCreate",void 0),kt([r.Zl],t)}(r.wA),tf=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ht=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},Ln="e-toast",Nu="e-toast-container",KO="e-toast-title",XO="e-toast-full-width",QO="e-toast-content",dy="e-toast-message",fy="e-toast-progress",CE="e-toast-close-icon",SE="e-rtl",X_=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return tf(t,a),ht([(0,r.Z9)("Left")],t.prototype,"X",void 0),ht([(0,r.Z9)("Top")],t.prototype,"Y",void 0),t}(r.rt),Q_=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return tf(t,a),ht([(0,r.Z9)(null)],t.prototype,"model",void 0),ht([(0,r.Z9)(null)],t.prototype,"click",void 0),t}(r.rt),JO=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return tf(t,a),ht([(0,r.Z9)("FadeIn")],t.prototype,"effect",void 0),ht([(0,r.Z9)(600)],t.prototype,"duration",void 0),ht([(0,r.Z9)("ease")],t.prototype,"easing",void 0),t}(r.rt),J_=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return tf(t,a),ht([(0,r.Zz)({effect:"FadeIn",duration:600,easing:"ease"},JO)],t.prototype,"show",void 0),ht([(0,r.Zz)({effect:"FadeOut",duration:600,easing:"ease"},JO)],t.prototype,"hide",void 0),t}(r.rt),$_=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.toastCollection=[],s.needsID=!0,s}return tf(t,a),t.prototype.getModuleName=function(){return"toast"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.hide("All"),this.element.classList.remove(Nu),(0,r.V7)(this.element,{position:"","z-index":""}),!(0,r.le)(this.refElement)&&!(0,r.le)(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.element,this.refElement),(0,r.og)(this.refElement),this.refElement=void 0),this.isBlazorServer()||a.prototype.destroy.call(this)},t.prototype.preRender=function(){this.isDevice=r.AR.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px"),(0,r.le)(this.target)&&(this.target=document.body),this.enableRtl&&!this.isBlazorServer()&&this.element.classList.add(SE)},t.prototype.render=function(){this.progressObj=[],this.intervalId=[],this.contentTemplate=null,this.toastTemplate=null,this.renderComplete(),this.initRenderClass=this.element.className},t.prototype.show=function(e){var i;if((0,r.le)(e)||(this.templateChanges(e),i=JSON.parse(JSON.stringify(e)),(0,r.l7)(this,this,e)),(0,r.le)(this.toastContainer)){this.toastContainer=this.getContainer();var s="string"==typeof this.target?document.querySelector(this.target):"object"==typeof this.target?this.target:document.body;if((0,r.le)(s))return;"BODY"===s.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",s.style.position="relative"),this.setPositioning(this.position),s.appendChild(this.toastContainer)}this.isBlazorServer()&&this.element.classList.contains("e-control")?this.isToastModel(e):(this.toastEle=this.createElement("div",{className:Ln,id:(0,r.QI)("toast")}),this.setWidthHeight(),this.setCSSClass(this.cssClass),(0,r.le)(this.template)||""===this.template?this.personalizeToast():this.templateRendering(),this.setProgress(),this.setCloseButton(),this.setAria(),this.appendToTarget(e),this.isDevice&&screen.width<768&&new r.Xh(this.toastEle,{swipe:this.swipeHandler.bind(this)}),(0,r.le)(i)||((0,r.l7)(i,{element:[this.toastEle]},!0),this.toastCollection.push(i)),this.isReact&&this.renderReactTemplates())},t.prototype.showToast=function(e,i){this.toastEle=this.element.querySelector("#"+e),this.show(i)},t.prototype.isToastModel=function(e){this.toastContainer=this.element,this.setPositioning(this.position),(0,r.le)(this.element.lastElementChild)||this.setProgress(),this.setAria(),this.appendToTarget(e)},t.prototype.swipeHandler=function(e){var i=(0,r.oq)(e.originalEvent.target,"."+Ln+":not(."+Nu+")"),s=this.animation.hide.effect;(0,r.le)(i)||("Right"===e.swipeDirection?(this.animation.hide.effect="SlideRightOut",this.hideToast("swipe",i)):"Left"===e.swipeDirection&&(this.animation.hide.effect="SlideLeftOut",this.hideToast("swipe",i)),this.animation.hide.effect=s)},t.prototype.templateChanges=function(e){!(0,r.o8)(e.content)&&!(0,r.le)(this.contentTemplate)&&this.content!==e.content&&this.clearContentTemplate(),!(0,r.o8)(e.template)&&!(0,r.le)(this.toastTemplate)&&this.template!==e.template&&this.clearToastTemplate()},t.prototype.setCSSClass=function(e){if(e){var i=-1!==e.indexOf(",")?",":" ";(0,r.s1)(this.toastEle,e.split(i),[]),this.toastContainer&&(0,r.s1)(this.toastContainer,e.split(i),[])}},t.prototype.setWidthHeight=function(){"300px"===this.width?this.toastEle.style.width=(0,r.Ac)(this.width):"100%"===this.width?this.toastContainer.classList.add(XO):(this.toastEle.style.width=(0,r.Ac)(this.width),this.toastContainer.classList.remove(XO)),this.toastEle.style.height=(0,r.Ac)(this.height)},t.prototype.templateRendering=function(){this.fetchEle(this.toastEle,this.template,"template")},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var i=r.pJ.beforeSanitize();(0,r.l7)(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!(0,r.le)(i.helper)?e=i.helper(e):i.cancel||(e=r.pJ.serializeValue(i,e))}return e},t.prototype.hide=function(e){this.hideToast("",e)},t.prototype.hideToast=function(e,i){if(!(0,r.le)(this.toastContainer)&&0!==this.toastContainer.childElementCount){if("string"==typeof i&&"All"===i){for(var s=0;s<this.toastContainer.childElementCount;s++)this.destroyToast(this.toastContainer.children[s],e);return}(0,r.le)(i)&&(i=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(i,e)}},t.prototype.fetchEle=function(e,i,s){var n,o,l,h;if(i="string"==typeof i?this.sanitizeHelper(i):i,h=e.classList.contains(KO)?this.element.id+"title":e.classList.contains(QO)?this.element.id+"content":this.element.id+"template",!(0,r.le)(o="content"===s?this.contentTemplate:this.toastTemplate))return e.appendChild(o.cloneNode(!0)),e;try{if("function"!=typeof i&&document.querySelectorAll(i).length>0){var c=null;"title"!==s&&(c=document.querySelector(i),e.appendChild(c),c.style.display="");var u=(0,r.le)(c)?o:c.cloneNode(!0);"content"===s?this.contentTemplate=u:this.toastTemplate=u}else n=(0,r.MY)(i)}catch(d){n=(0,r.MY)("object"==typeof i?i:(0,r.rN)(function(){return i}))}return(0,r.le)(n)||(l=this.isBlazorServer()?n({},this,s,h,!0):n({},this,s,null,!0)),(0,r.le)(l)||!(l.length>0)||(0,r.le)(l[0].tagName)&&1===l.length?"function"!=typeof i&&0===e.childElementCount&&(e.innerHTML=i):[].slice.call(l).forEach(function(d){(0,r.le)(d.tagName)||(d.style.display=""),e.appendChild(d)}),e},t.prototype.clearProgress=function(e){(0,r.le)(this.intervalId[e])||(clearInterval(this.intervalId[e]),delete this.intervalId[e]),(0,r.le)(this.progressObj[e])||(clearInterval(this.progressObj[e].intervalId),delete this.progressObj[e])},t.prototype.removeToastContainer=function(e){e&&this.toastContainer.classList.contains("e-toast-util")&&(0,r.og)(this.toastContainer)},t.prototype.clearContainerPos=function(e){var i=this;this.isBlazorServer()?this.toastContainer=null:(this.customPosition?((0,r.V7)(this.toastContainer,{left:"",top:""}),this.removeToastContainer(e),this.toastContainer=null,this.customPosition=!1):([Ln+"-top-left",Ln+"-top-right",Ln+"-bottom-left",Ln+"-bottom-right",Ln+"-bottom-center",Ln+"-top-center",Ln+"-full-width"].forEach(function(s){!(0,r.le)(i.toastContainer)&&i.toastContainer.classList.contains(s)&&i.toastContainer.classList.remove(s)}),this.removeToastContainer(e),this.toastContainer=null),(0,r.le)(this.contentTemplate)||this.clearContentTemplate(),(0,r.le)(this.toastTemplate)||this.clearToastTemplate())},t.prototype.clearContentTemplate=function(){this.contentTemplate.style.display="none",document.body.appendChild(this.contentTemplate),this.contentTemplate=null},t.prototype.clearToastTemplate=function(){this.toastTemplate.style.display="none",document.body.appendChild(this.toastTemplate),this.toastTemplate=null},t.prototype.isBlazorServer=function(){return(0,r.xr)()&&this.isServerRendered},t.prototype.destroyToast=function(e,i){for(var n,s=this,o=0;o<this.toastCollection.length;o++)this.toastCollection[o].element[0]===e&&(n=this.toastCollection[o],this.toastCollection.splice(o,1));var l={options:this,cancel:!1,type:i,element:e,toastContainer:this.toastContainer},h=this.animation.hide,c={duration:h.duration,name:"None"===h.effect&&"Enable"===r.ti?"FadeOut":h.effect,timingFunction:h.easing},u=parseInt(e.id.split("toast_")[1],10),p=this.isBlazorServer()?{options:n,toastContainer:this.toastContainer}:{options:n,toastContainer:this.toastContainer,toastObj:this};this.trigger("beforeClose",l,function(d){d.cancel||(!(0,r.le)(s.progressObj[u])&&!(0,r.le)(e.querySelector("."+fy))&&(s.progressObj[u].progressEle.style.width="0%"),c.end=function(){s.clearProgress(u),(!s.isBlazorServer()||(0,r.le)(n))&&(0,r.og)(e),s.trigger("close",p),0===s.toastContainer.childElementCount&&s.clearContainerPos(!0),h=null,c=null},new r.fw(c).animate(e))})},t.prototype.personalizeToast=function(){this.setIcon(),this.setTitle(),this.setContent(),this.actionButtons()},t.prototype.setAria=function(){(0,r.Y4)(this.toastEle,{role:"alert"})},t.prototype.setPositioning=function(e){this.isBlazorServer()||(isNaN(parseFloat(e.X))&&isNaN(parseFloat(e.Y))?this.toastContainer.classList.add(Ln+"-"+e.Y.toString().toLowerCase()+"-"+e.X.toString().toLowerCase()):(this.customPosition=!0,(0,r.V7)(this.toastContainer,{left:(0,r.Ac)(e.X),top:(0,r.Ac)(e.Y)})))},t.prototype.setCloseButton=function(){if(this.showCloseButton){this.l10n=new r.E7("toast",{close:"Close"},this.locale),this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("close"),s=this.createElement("div",{className:CE+" e-icons ",attrs:{tabindex:"0","aria-label":i,role:"button"}});this.toastEle.classList.add("e-toast-header-close-icon"),this.toastEle.appendChild(s)}},t.prototype.setProgress=function(){if(this.timeOut>0){var e=parseInt(this.toastEle.id.split("toast_")[1],10);this.intervalId[e]=window.setTimeout(this.destroyToast.bind(this,this.toastEle),this.timeOut),this.progressObj[e]={hideEta:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[e].maxHideTime=parseFloat(this.timeOut+""),this.progressObj[e].hideEta=(new Date).getTime()+this.progressObj[e].maxHideTime,this.progressObj[e].element=this.toastEle,this.extendedTimeout>0&&(r.bi.add(this.toastEle,"mouseover",this.toastHoverAction.bind(this,e)),r.bi.add(this.toastEle,"mouseleave",this.delayedToastProgress.bind(this,e)),this.progressObj[e].timeOutId=this.intervalId[e]),this.showProgressBar&&(this.progressBarEle=this.createElement("div",{className:fy}),this.toastEle.insertBefore(this.progressBarEle,this.toastEle.children[0]),this.progressObj[e].intervalId=setInterval(this.updateProgressBar.bind(this,this.progressObj[e]),10),this.progressObj[e].progressEle=this.progressBarEle)}},t.prototype.toastHoverAction=function(e){clearTimeout(this.progressObj[e].timeOutId),clearInterval(this.progressObj[e].intervalId),this.progressObj[e].hideEta=0,(0,r.le)(this.progressObj[e].element.querySelector("."+fy))||(this.progressObj[e].progressEle.style.width="0%")},t.prototype.delayedToastProgress=function(e){var i=this.progressObj[e],s=i.element;i.timeOutId=window.setTimeout(this.destroyToast.bind(this,s),this.extendedTimeout),i.maxHideTime=parseFloat(this.extendedTimeout+""),i.hideEta=(new Date).getTime()+i.maxHideTime,(0,r.le)(s.querySelector("."+fy))||(i.intervalId=setInterval(this.updateProgressBar.bind(this,i),10))},t.prototype.updateProgressBar=function(e){var i=(e.hideEta-(new Date).getTime())/e.maxHideTime*100;e.progressEle.style.width=(i="Ltr"===this.progressDirection?100-i:i)+"%"},t.prototype.setIcon=function(){if(!(0,r.le)(this.icon)&&0!==this.icon.length){var e=this.createElement("div",{className:"e-toast-icon e-icons "+this.icon});this.toastEle.classList.add("e-toast-header-icon"),this.toastEle.appendChild(e)}},t.prototype.setTitle=function(){if(!(0,r.le)(this.title)){var e=this.createElement("div",{className:KO});e=this.fetchEle(e,this.title,"title");var i=this.createElement("div",{className:dy});i.appendChild(e),this.toastEle.appendChild(i)}},t.prototype.setContent=function(){var e=this.createElement("div",{className:QO}),i=this.element;if((0,r.le)(this.content)||""===this.content){var s=""!==this.element.innerHTML.replace(/\s/g,"");if((i.children.length>0||s)&&(!i.firstElementChild||!i.firstElementChild.classList.contains(Ln))){this.innerEle=document.createDocumentFragment();for(var n=this.createElement("div");0!==i.childNodes.length;)this.innerEle.appendChild(this.element.childNodes[0]);e.appendChild(this.innerEle),[].slice.call(e.children).forEach(function(o){n.appendChild(o.cloneNode(!0))}),this.content=n,this.appendMessageContainer(e)}}else"object"!=typeof this.content||(0,r.le)(this.content.tagName)?(e=this.fetchEle(e,this.content,"content"),this.appendMessageContainer(e)):(e.appendChild(this.content),this.content=this.content.cloneNode(!0),this.appendMessageContainer(e))},t.prototype.appendMessageContainer=function(e){if(this.toastEle.querySelectorAll("."+dy).length>0)this.toastEle.querySelector("."+dy).appendChild(e);else{var i=this.createElement("div",{className:dy});i.appendChild(e),this.toastEle.appendChild(i)}},t.prototype.actionButtons=function(){var e=this,i=this.createElement("div",{className:"e-toast-actions"});[].slice.call(this.buttons).forEach(function(s){if(!(0,r.le)(s.model)){var n=e.createElement("button");n.setAttribute("type","button"),((0,r.le)(s.model.cssClass)||0===s.model.cssClass.length)&&(s.model.cssClass="e-primary "+e.cssClass),n.classList.add("e-small"),new It(s.model,n),!(0,r.le)(s.click)&&"function"==typeof s.click&&r.bi.add(n,"click",s.click),i.appendChild(n)}}),i.childElementCount>0&&this.appendMessageContainer(i)},t.prototype.appendToTarget=function(e){var i=this,s=this.isBlazorServer()?{options:e,element:this.toastEle,cancel:!1}:{options:e,toastObj:this,element:this.toastEle,cancel:!1};this.trigger("beforeOpen",s,function(n){if(n.cancel){if(i.isBlazorServer()){var o=parseInt(i.toastEle.id.split("toast_")[1],10);i.clearProgress(o),(0,r.og)(i.toastEle),0===i.toastContainer.childElementCount&&i.clearContainerPos()}}else i.isBlazorServer()||(i.toastEle.style.display="none"),i.newestOnTop&&0!==i.toastContainer.childElementCount?i.toastContainer.insertBefore(i.toastEle,i.toastContainer.children[0]):i.isBlazorServer()||i.toastContainer.appendChild(i.toastEle),(0,r.IV)([i.toastEle],"e-blazor-toast-hidden"),r.bi.add(i.toastEle,"click",i.clickHandler,i),r.bi.add(i.toastEle,"keydown",i.keyDownHandler,i),i.toastContainer.style.zIndex=wa(i.toastContainer)+"",i.displayToast(i.toastEle,e)})},t.prototype.clickHandler=function(e){var i=this;this.isBlazorServer()||e.stopPropagation();var s=e.target,n=(0,r.oq)(s,"."+Ln),o=this.isBlazorServer()?{element:n,cancel:!1,clickToClose:!1,originalEvent:e}:{element:n,cancel:!1,clickToClose:!1,originalEvent:e,toastObj:this},l=s.classList.contains(CE);this.trigger("click",o,function(h){(l&&!h.cancel||h.clickToClose)&&i.destroyToast(n,"click")})},t.prototype.keyDownHandler=function(e){if(e.target.classList.contains(CE)&&(13===e.keyCode||32===e.keyCode)){var s=(0,r.oq)(e.target,"."+Ln);this.destroyToast(s,"key")}},t.prototype.displayToast=function(e,i){var s=this,n=this.animation.show,o={duration:n.duration,name:"None"===n.effect&&"Enable"===r.ti?"FadeIn":n.effect,timingFunction:n.easing},l=this.isBlazorServer()?{options:i,element:this.toastEle}:{options:i,toastObj:this,element:this.toastEle};o.begin=function(){e.style.display=""},o.end=function(){s.trigger("open",l)},new r.fw(o).animate(e)},t.prototype.getContainer=function(){return this.element.classList.add(Nu),this.element},t.prototype.onPropertyChanged=function(e,i){for(var s=this.element,n=0,o=Object.keys(e);n<o.length;n++)switch(o[n]){case"enableRtl":e.enableRtl?s.classList.add(SE):s.classList.remove(SE)}},ht([(0,r.Z9)("300px")],t.prototype,"width",void 0),ht([(0,r.Z9)("auto")],t.prototype,"height",void 0),ht([(0,r.Z9)(null)],t.prototype,"title",void 0),ht([(0,r.Z9)(null)],t.prototype,"content",void 0),ht([(0,r.Z9)(!0)],t.prototype,"enableHtmlSanitizer",void 0),ht([(0,r.Z9)(null)],t.prototype,"icon",void 0),ht([(0,r.Z9)(null)],t.prototype,"cssClass",void 0),ht([(0,r.Z9)(null)],t.prototype,"template",void 0),ht([(0,r.Z9)(!0)],t.prototype,"newestOnTop",void 0),ht([(0,r.Z9)(!1)],t.prototype,"showCloseButton",void 0),ht([(0,r.Z9)(!1)],t.prototype,"showProgressBar",void 0),ht([(0,r.Z9)(5e3)],t.prototype,"timeOut",void 0),ht([(0,r.Z9)("Rtl")],t.prototype,"progressDirection",void 0),ht([(0,r.Z9)(1e3)],t.prototype,"extendedTimeout",void 0),ht([(0,r.Zz)({},J_)],t.prototype,"animation",void 0),ht([(0,r.Zz)({},X_)],t.prototype,"position",void 0),ht([(0,r.FE)([{}],Q_)],t.prototype,"buttons",void 0),ht([(0,r.Z9)(null)],t.prototype,"target",void 0),ht([(0,r.ju)()],t.prototype,"created",void 0),ht([(0,r.ju)()],t.prototype,"beforeSanitizeHtml",void 0),ht([(0,r.ju)()],t.prototype,"destroyed",void 0),ht([(0,r.ju)()],t.prototype,"open",void 0),ht([(0,r.ju)()],t.prototype,"beforeOpen",void 0),ht([(0,r.ju)()],t.prototype,"beforeClose",void 0),ht([(0,r.ju)()],t.prototype,"close",void 0),ht([(0,r.ju)()],t.prototype,"click",void 0),ht([r.Zl],t)}(r.wA);!function(a){a.show=function(e,i,s){var n,o;if(document.querySelector("."+Nu)?n=document.querySelector("."+Nu):(n=(0,r.az)("div",{className:Ln+" "+Nu+" e-toast-util"}),document.body.appendChild(n)),"string"==typeof e){var l=void 0,h=void 0;if((0,r.le)(i))l="",h="";else switch(i){case"Warning":l="e-toast-warning",h="e-toast-warning-icon";break;case"Success":l="e-toast-success",h="e-toast-success-icon";break;case"Error":l="e-toast-danger",h="e-toast-error-icon";break;case"Information":l="e-toast-info",h="e-toast-info-icon"}o={content:e,cssClass:l,icon:h,timeOut:(0,r.le)(s)?5e3:s}}else o=e;var c=new $_(o);return c.appendTo(n),c.show(),c}}($O||($O={}));var lI,Cf,ge={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:"e-list-item",disable:"e-disabled",base:"e-dropdownbase",focus:"e-item-focus",content:"e-content",input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden",virtualList:"e-list-item e-virtual-list"};ge.root="e-combobox",ge.root="e-autocomplete",ge.icon="e-input-group-icon e-ddl-icon e-search-icon",(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),function(a){a.createListItems=function(e,i,s,n,o,l){var h,c=6e4*l,u=[],p=[];h=+i.setMilliseconds(0);for(var d=+s.setMilliseconds(0);d>=h;)p.push(h),u.push(n.formatDate(new Date(h),{format:o,type:"time"})),h+=c;return{collection:p,list:Ee.createList(e,u,null,!0)}}}(lI||(lI={})),(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds(),(new Date).getMilliseconds(),new Int16Array(286),new Uint8Array(286),new Int16Array(30),new Uint8Array(30),function(a){var i;(i=a.ForceEncoding||(a.ForceEncoding={}))[i.None=0]="None",i[i.Ascii=1]="Ascii",i[i.Unicode=2]="Unicode"}(Cf||(Cf={}));var DG=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Q0=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},yN=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return DG(t,a),Q0([(0,r.Z9)(null)],t.prototype,"downloadUrl",void 0),Q0([(0,r.Z9)(null)],t.prototype,"getImageUrl",void 0),Q0([(0,r.Z9)(null)],t.prototype,"uploadUrl",void 0),Q0([(0,r.Z9)(null)],t.prototype,"url",void 0),t}(r.rt),bN=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ls=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},LG=["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"],CN=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return bN(t,a),ls([(0,r.Z9)(LG)],t.prototype,"items",void 0),ls([(0,r.Z9)(!0)],t.prototype,"visible",void 0),t}(r.rt),RG=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),J0=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},SN=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return RG(t,a),J0([(0,r.Z9)(!0)],t.prototype,"allowSearchOnTyping",void 0),J0([(0,r.Z9)("contains")],t.prototype,"filterType",void 0),J0([(0,r.Z9)(!0)],t.prototype,"ignoreCase",void 0),J0([(0,r.Z9)(null)],t.prototype,"placeholder",void 0),t}(r.rt),PG=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wN=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},MG=[{field:"name",headerText:"Name",minWidth:120,isPrimaryKey:!0,template:(0,r.rN)(function(a){return'<span class="e-fe-text">'+a.name+"</span>"}),customAttributes:{class:"e-fe-grid-name"}},{field:"_fm_modified",headerText:"DateModified",type:"dateTime",format:"MMMM dd, yyyy HH:mm",minWidth:120,width:"190"},{field:"size",headerText:"Size",minWidth:90,width:"110",template:(0,r.rN)(function(a){return'<span class="e-fe-size">'+a.size+"</span>"}),format:"n2"}],EN=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return PG(t,a),wN([(0,r.Z9)(!0)],t.prototype,"columnResizing",void 0),wN([(0,r.Z9)(MG)],t.prototype,"columns",void 0),t}(r.rt),BG=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$0=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},NG=["Open","|","Cut","Copy","|","Delete","Download","Rename","|","Details"],FG=["Open","|","Cut","Copy","Paste","|","Delete","Rename","Download","|","Details"],VG=["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"],IN=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return BG(t,a),$0([(0,r.Z9)(NG)],t.prototype,"file",void 0),$0([(0,r.Z9)(FG)],t.prototype,"folder",void 0),$0([(0,r.Z9)(VG)],t.prototype,"layout",void 0),$0([(0,r.Z9)(!0)],t.prototype,"visible",void 0),t}(r.rt),HG=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),eb=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},xN=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return HG(t,a),eb([(0,r.Z9)("650px")],t.prototype,"maxWidth",void 0),eb([(0,r.Z9)("240px")],t.prototype,"minWidth",void 0),eb([(0,r.Z9)(!0)],t.prototype,"visible",void 0),eb([(0,r.Z9)("None")],t.prototype,"sortOrder",void 0),t}(r.rt),zG=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sp=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},TN=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return zG(t,a),Sp([(0,r.Z9)("")],t.prototype,"allowedExtensions",void 0),Sp([(0,r.Z9)(!0)],t.prototype,"autoUpload",void 0),Sp([(0,r.Z9)(!1)],t.prototype,"autoClose",void 0),Sp([(0,r.Z9)(!1)],t.prototype,"directoryUpload",void 0),Sp([(0,r.Z9)(0)],t.prototype,"minFileSize",void 0),Sp([(0,r.Z9)(3e7)],t.prototype,"maxFileSize",void 0),t}(r.rt),Fg="tableclass",Vg="initial-load",Hg="content-changed",ui="initial-end",pr="iframe-click",Oe="destroy",zg="toolbarClick",Qo="toolbar-refresh",Ib="refresh-begin",Ja="toolbar-updated",xb="bind-on-end",Tb="render-color-picker",MT="html-toolbar-click",NT="destroy-color-picker",hs="model-changed",xs="keyUp",Mi="keyDown",MF="toolbarRenderComplete",kb="enableFullScreen",Ab="disableFullScreen",fa="dropDownSelect",VT="beforeDropDownItemRender",HT="execCommandCallBack",zT="image-toolbar-action",_T="link-toolbar-action",qg="resize",Rb="insertLink",Pb="unLink",WT="editLink",Mb="openLink",dr="actionBegin",ga="actionComplete",_g="updateToolbarItem",Wg="insertImage",Jo="insertCompleted",UT="insertImgLink",GT="imgAltText",ZT="delete",XT="caption",QT="imageSize",Vp="sourceCode",Ug="updateSource",Fb="beforeDropDownOpen",qn="selection-save",_n="selection-restore",BF="expandPopupClick",Wn="mouseDown",Gg="sourceCodeMouseDown",Un="editAreaClick",$o="scroll",Zg="colorPickerChanged",Yg="tableColorPickerChanged",Kg="focusChange",Xg="selectAll",Vb="selectRange",Qg="getSelectedHtml",Hp="paste-content",el="rtl-mode",$g="checkUndoStack",em="readOnlyMode",Bi="moduleDestroy",nk="enterHandler",tl="clearDialogObj",rk="imageUploading",ak="imageUploadSuccess",ok="imageUploadFailed",jF="afterImageDelete",tm="xhtmlValidation",hk="beforeImageUpload",ck="resizeInitialized",zb="renderFileManager",il="dynamicModule",jb="updateTbItemsStatus",uk="showLinkDialog",pk="closeLinkDialog",dk="showImageDialog",mk="closeImageDialog",zi="closeTableDialog",qb="emojiPicker",im="destroyTooltip",Ek="cleanupResizeElements",Wb="e-richtexteditor",Wc="e-rtl",Ik="e-disabled",WF="rte-iframe-script-sheet",UF="rte-iframe-style-sheet",Ub="e-rte-toolbar",GF="e-rte-tb-fixed",Gb="e-rte-tb-float",xk="e-rte-tb-abs-float",ZF="e-rte-tb-expand",sm="e-rte-full-screen",Zb="e-rte-quick-toolbar",Uc="e-quick-dropdown",kk="e-rte-inline-dropdown",jr="e-rte-dropdown-popup",Ak="e-rte-dropdown-icons",$a="e-rte-dropdown-items",Cn="e-rte-dropdown-btn",yh="e-toolbar-item",Dk="e-toolbar-wrapper",JF="e-visible",Lk="e-focused",eV="e-imgright",tV="e-imgleft",iV="e-imgcenter",eo="e-imgbreak",bh="e-clickelem",sl="e-audio-wrap",zp="e-video-wrap",qr="e-img-caption",om="e-caption-inline",nl="e-imginline",Yb="e-icons",jp="e-active",Gc="e-expand-open",Xi="e-rte-elements",Bk="e-tbar-btn",aV="e-tbar-ios-fixed",Nk="e-rte-list-primary-content",lm="e-rte-color-content",hm="e-rte-readonly",oV="e-rte-hidden",Jb="e-rte-image",$b="e-rte-drag-image",Fk="e-popup-open",fV="e-rte-fixed-tb-expand",gV="e-rte-toolbar-enabled",Sh="e-rte-srctextarea",Fe=(()=>(function(a){a[a.Toolbar=0]="Toolbar",a[a.Content=1]="Content",a[a.Popup=2]="Popup",a[a.LinkToolbar=3]="LinkToolbar",a[a.TextToolbar=4]="TextToolbar",a[a.ImageToolbar=5]="ImageToolbar",a[a.AudioToolbar=6]="AudioToolbar",a[a.VideoToolbar=7]="VideoToolbar",a[a.InlineToolbar=8]="InlineToolbar",a[a.TableToolbar=9]="TableToolbar"}(Fe||(Fe={})),Fe))(),tn=(()=>(function(a){a.Expand="Expand",a.MultiRow="MultiRow",a.Scrollable="Scrollable"}(tn||(tn={})),tn))(),fr=(()=>(function(a){a.InsertLink="InsertLink",a.InsertImage="InsertImage",a.InsertAudio="InsertAudio",a.InsertVideo="InsertVideo",a.InsertTable="InsertTable"}(fr||(fr={})),fr))(),Vk=["alignments","formats","fontname","fontsize","fontcolor","backgroundcolor","align","display","audiolayoutoption","videolayoutoption","videoalign","tablerows","tablecolumns","tablecell","tablecellhorizontalalign","tablecellverticalalign","styles","numberformatlist","bulletformatlist"],Wp={alignments:{id:"Alignments",icon:"e-alignments",tooltip:"Alignments",command:"Alignments",subCommand:"Alignments"},justifyleft:{id:"JustifyLeft",icon:"e-justify-left",tooltip:"JustifyLeft",command:"Alignments",subCommand:"JustifyLeft"},justifycenter:{id:"JustifyCenter",icon:"e-justify-center",tooltip:"JustifyCenter",command:"Alignments",subCommand:"JustifyCenter"},justifyright:{id:"JustifyRight",icon:"e-justify-right",tooltip:"JustifyRight",command:"Alignments",subCommand:"JustifyRight"},justifyfull:{id:"JustifyFull",icon:"e-justify-full",tooltip:"JustifyFull",command:"Alignments",subCommand:"JustifyFull"},fontname:{id:"FontName",icon:"e-font-name",tooltip:"Font Name",command:"Font",subCommand:"FontName"},fontsize:{id:"FontSize",icon:"e-font-size",tooltip:"Font Size",command:"Font",subCommand:"FontSize"},fontcolor:{id:"FontColor",icon:"e-rte-font-color",tooltip:"Font Color",command:"Font",subCommand:"FontColor",value:"#ff0000ff"},backgroundcolor:{id:"BackgroundColor",icon:"e-background-color",tooltip:"Background Color",command:"Font",subCommand:"BackgroundColor",value:"#ffff00ff"},bold:{id:"Bold",icon:"e-bold",tooltip:"Bold",command:"Style",subCommand:"Bold"},italic:{id:"Italic",icon:"e-italic",tooltip:"Italic",command:"Style",subCommand:"Italic"},underline:{id:"Underline",icon:"e-underline",tooltip:"Underline",command:"Style",subCommand:"Underline"},strikethrough:{id:"StrikeThrough",icon:"e-strike-through",tooltip:"StrikeThrough",command:"Style",subCommand:"StrikeThrough"},clearformat:{id:"ClearFormat",icon:"e-clear-format",tooltip:"Clear Format",command:"Clear",subCommand:"ClearFormat"},clearall:{id:"ClearAll",icon:"e-clear-all",tooltip:"Clear All",command:"Clear",subCommand:"ClearAll"},cut:{id:"Cut",icon:"e-cut",tooltip:"Cut",command:"ClipBoard",subCommand:"Cut"},copy:{id:"Copy",icon:"e-copy",tooltip:"Copy",command:"ClipBoard",subCommand:"Copy"},paste:{id:"Paste",icon:"e-paste",tooltip:"Paste",command:"ClipBoard",subCommand:"Paste"},unorderedlist:{id:"UnorderedList",icon:"e-unorder-list",tooltip:"Bulleted List",command:"Lists",subCommand:"UL"},orderedlist:{id:"OrderedList",icon:"e-order-list",tooltip:"Numbered List",command:"Lists",subCommand:"OL"},numberformatlist:{id:"NumberFormatList",icon:"e-order-list",tooltip:"Number Format List",command:"NumberFormatList",subCommand:"NumberFormatList"},bulletformatlist:{id:"BulletFormatList",icon:"e-unorder-list",tooltip:"Bullet Format List",command:"BulletFormatList",subCommand:"BulletFormatList"},indent:{id:"Indent",icon:"e-indent",tooltip:"Increase Indent",command:"Indents",subCommand:"Indent"},outdent:{id:"Outdent",icon:"e-outdent",tooltip:"Decrease Indent",command:"Indents",subCommand:"Outdent"},undo:{id:"Undo",icon:"e-undo",tooltip:"Undo",command:"Actions",subCommand:"Undo"},redo:{id:"Redo",icon:"e-redo",tooltip:"Redo",command:"Actions",subCommand:"Redo"},superscript:{id:"SuperScript",icon:"e-super-script",tooltip:"Superscript",command:"Effects",subCommand:"SuperScript"},subscript:{id:"SubScript",icon:"e-sub-script",tooltip:"Subscript",command:"Effects",subCommand:"SubScript"},createlink:{id:"CreateLink",icon:"e-create-link",tooltip:"Insert Hyperlink",command:"Links",subCommand:"CreateLink"},openlink:{id:"OpenLink",icon:"e-open-link",tooltip:"Open Link",command:"Links",subCommand:"OpenLink"},editlink:{id:"EditLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Links",subCommand:"EditLink"},removelink:{id:"RemoveLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Links",subCommand:"RemoveLink"},image:{id:"Image",icon:"e-image",tooltip:"Insert Image",command:"Images",subCommand:"Image"},audio:{id:"Audio",icon:"e-audio",tooltip:"Insert Audio",command:"Audios",subCommand:"Audio"},video:{id:"Video",icon:"e-video",tooltip:"Insert Video",command:"Videos",subCommand:"Video"},filemanager:{id:"FileManager",icon:"e-rte-file-manager",tooltip:"File Manager",command:"Files",subCommand:"File"},createtable:{id:"CreateTable",icon:"e-create-table",tooltip:"Create Table",command:"Table",subCommand:"CreateTable"},removetable:{id:"removeTable",icon:"e-remove-table",tooltip:"Remove Table",command:"removeTable",subCommand:"removeTable"},replace:{id:"Replace",icon:"e-replace",tooltip:"Replace",command:"Images",subCommand:"Replace"},audioreplace:{id:"AudioReplace",icon:"e-audio-replace",tooltip:"Audio Replace",command:"Audios",subCommand:"AudioReplace"},audioremove:{id:"AudioRemove",icon:"e-audio-remove",tooltip:"Audio Remove",command:"Audios",subCommand:"AudioRemove"},audiolayoutoption:{id:"AudioLayoutOption",icon:"e-audio-display",tooltip:"Audio LayoutOption",command:"Audios",subCommand:"AudioLayoutOption"},videoreplace:{id:"VideoReplace",icon:"e-video-replace",tooltip:"Video Replace",command:"Videos",subCommand:"VideoReplace"},videoalign:{id:"VideoAlign",icon:"e-video-align",tooltip:"Video Align",command:"Videos",subCommand:"VideoAlign"},videoremove:{id:"VideoRemove",icon:"e-video-remove",tooltip:"Video Remove",command:"Videos",subCommand:"VideoRemove"},videolayoutoption:{id:"VideoLayoutOption",icon:"e-video-display",tooltip:"Video LayoutOption",command:"Videos",subCommand:"VideoLayoutOption"},videodimension:{id:"VideoDimension",icon:"e-video-dimension",tooltip:"Video Dimension",command:"Videos",subCommand:"VideoDimension"},align:{id:"Align",icon:"e-align",tooltip:"Align",command:"Images",subCommand:"Align"},caption:{id:"Caption",icon:"e-caption",tooltip:"Image Caption",command:"Images",subCommand:"Caption"},remove:{id:"Remove",icon:"e-remove",tooltip:"Remove",command:"Images",subCommand:"Remove"},openimagelink:{id:"OpenImageLink",icon:"e-open-link",tooltip:"Open Link",command:"Images",subCommand:"OpenImageLink"},editimagelink:{id:"EditImageLink",icon:"e-edit-link",tooltip:"Edit Link",command:"Images",subCommand:"EditImageLink"},removeimagelink:{id:"RemoveImageLink",icon:"e-remove-link",tooltip:"Remove Link",command:"Images",subCommand:"RemoveImageLink"},insertlink:{id:"InsertLink",icon:"e-insert-link",tooltip:"Insert Link",command:"Images",subCommand:"InsertLink"},display:{id:"Display",icon:"e-display",tooltip:"Display",command:"Images",subCommand:"Display"},alttext:{id:"AltText",icon:"e-alt-text",tooltip:"Alternative Text",command:"Images",subCommand:"AltText"},dimension:{id:"Dimension",icon:"e-img-dimension",tooltip:"Change Size",command:"Images",subCommand:"Dimension"},fullscreen:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"View",subCommand:"Maximize"},maximize:{id:"Maximize",icon:"e-maximize",tooltip:"Maximize",command:"FullScreen",subCommand:"Maximize"},minimize:{id:"Minimize",icon:"e-minimize",tooltip:"Minimize",command:"FullScreen",subCommand:"Minimize"},lowercase:{id:"LowerCase",icon:"e-lower-case",tooltip:"Lower Case",command:"Casing",subCommand:"LowerCase"},uppercase:{id:"UpperCase",icon:"e-upper-case",tooltip:"Upper Case",command:"Casing",subCommand:"UpperCase"},print:{id:"Print",icon:"e-print",tooltip:"Print",command:"Print",subCommand:"Print"},formats:{id:"Formats",icon:"e-formats",tooltip:"Formats",command:"Formats",subCommand:"Formats"},sourcecode:{id:"SourceCode",icon:"e-source-code",tooltip:"Source Code",command:"SourceCode",subCommand:"SourceCode"},preview:{id:"Preview",icon:"e-preview",tooltip:"Preview",command:"Preview",subCommand:"Preview"},viewside:{id:"ViewSide",icon:"e-view-side",tooltip:"ViewSide",command:"ViewSide",subCommand:"ViewSide"},insertcode:{id:"InsertCode",icon:"e-insert-code",tooltip:"Insert Code",command:"Formats",subCommand:"Pre"},tableheader:{id:"TableHeader",icon:"e-table-header",tooltip:"Table Header",command:"Table",subCommand:"TableHeader"},tableremove:{id:"TableRemove",icon:"e-table-remove",tooltip:"Table Remove",command:"Table",subCommand:"TableRemove"},tablerows:{id:"TableRows",icon:"e-table-rows",tooltip:"Table Rows",command:"Table",subCommand:"TableRows"},tablecolumns:{id:"TableColumns",icon:"e-table-columns",tooltip:"Table Columns",command:"Table",subCommand:"TableColumns"},tablecell:{id:"TableCell",icon:"e-table-cell",tooltip:"Table Cell",command:"Table",subCommand:"TableCell"},tablecellbackground:{id:"TableCellBackground",icon:"e-table-cell-background",tooltip:"Table Cell Background",command:"Table",subCommand:"TableCellBackground"},tablecellhorizontalalign:{id:"TableCellHorizontalAlign",icon:"e-table-cell-horizontalAlign",tooltip:"Table Cell HorizontalAlign",command:"Table",subCommand:"TableCellHorizontalAlign"},tablecellverticalalign:{id:"TableCellVerticalAlign",icon:"e-table-cell-verticalAlign",tooltip:"Table Cell VerticalAlign",command:"Table",subCommand:"TableCellVerticalAlign"},tableeditproperties:{id:"TableEditProperties",icon:"e-table-edit-properties",tooltip:"Table Edit Properties",command:"Table",subCommand:"TableEditProperties"},styles:{id:"Styles",icon:"e-table-styles",tooltip:"Styles",command:"Table",subCommand:"Styles"},formatpainter:{id:"FormatPainter",icon:"e-rte-format-painter",tooltip:"Format Painter",command:"FormatPainter",subCommand:"FormatPainter"},emojipicker:{id:"EmojiPicker",icon:"e-emoji",tooltip:"Emoji Icon",command:"EmojiPicker",subCommand:"EmojiPicker"}},HY=[{locale:"alignmentsDropDownLeft",value:"JustifyLeft"},{locale:"alignmentsDropDownCenter",value:"JustifyCenter"},{locale:"alignmentsDropDownRight",value:"JustifyRight"},{locale:"alignmentsDropDownJustify",value:"JustifyFull"}],cm=[{iconCss:"e-icons e-justify-left",text:"Align Left",command:"Alignments",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",text:"Align Center",command:"Alignments",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",text:"Align Right",command:"Alignments",subCommand:"JustifyRight"},{iconCss:"e-icons e-justify-full",text:"Align Justify",command:"Alignments",subCommand:"JustifyFull"}],zY=[{iconCss:"e-icons e-justify-left",command:"Images",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",command:"Images",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",command:"Images",subCommand:"JustifyRight"}],jY=[{iconCss:"e-icons e-justify-left",command:"Videos",subCommand:"JustifyLeft"},{iconCss:"e-icons e-justify-center",command:"Videos",subCommand:"JustifyCenter"},{iconCss:"e-icons e-justify-right",command:"Videos",subCommand:"JustifyRight"}],qY=[{locale:"imageDisplayDropDownInline",value:"Inline"},{locale:"imageDisplayDropDownBreak",value:"Break"}],_Y=[{locale:"audioLayoutOptionDropDownInline",value:"Inline"},{locale:"audioLayoutOptionDropDownBreak",value:"Break"}],WY=[{locale:"videoLayoutOptionDropDownInline",value:"Inline"},{locale:"videoLayoutOptionDropDownBreak",value:"Break"}],eC=[{text:"Inline",cssClass:"e-inline",command:"Images",subCommand:"Inline"},{text:"Break",cssClass:"e-break",command:"Images",subCommand:"Break"}],tC=[{text:"Inline",cssClass:"e-audio-inline",command:"Audios",subCommand:"Inline"},{text:"Break",cssClass:"e-audio-break",command:"Audios",subCommand:"Break"}],iC=[{text:"Inline",cssClass:"e-video-inline",command:"Videos",subCommand:"Inline"},{text:"Break",cssClass:"e-video-break",command:"Videos",subCommand:"Break"}],UY=[{iconCss:"e-icons e-cell-merge",text:"Merge cells",command:"Table",subCommand:"Merge"},{iconCss:"e-icons e-cell-horizontal-split",text:"Horizontal split",command:"Table",subCommand:"HorizontalSplit"},{iconCss:"e-icons e-cell-vertical-split",text:"Vertical split",command:"Table",subCommand:"VerticalSplit"}],GY=[{locale:"tableInsertRowDropDownBefore",value:"InsertRowBefore"},{locale:"tableInsertRowDropDownAfter",value:"InsertRowAfter"},{locale:"tableInsertRowDropDownDelete",value:"DeleteRow"}],sC=[{iconCss:"e-icons e-insert-row-before",text:"Insert row before",command:"Table",subCommand:"InsertRowBefore"},{iconCss:"e-icons e-insert-row-after",text:"Insert row after",command:"Table",subCommand:"InsertRowAfter"},{iconCss:"e-icons e-delete-row",text:"Delete row",command:"Table",subCommand:"DeleteRow"}],ZY=[{locale:"tableInsertColumnDropDownLeft",value:"InsertColumnLeft"},{locale:"tableInsertColumnDropDownRight",value:"InsertColumnRight"},{locale:"tableInsertColumnDropDownDelete",value:"DeleteColumn"}],nC=[{iconCss:"e-icons e-insert-column-left",text:"Insert column left",command:"Table",subCommand:"InsertColumnLeft"},{iconCss:"e-icons e-insert-column-right",text:"Insert column right",command:"Table",subCommand:"InsertColumnRight"},{iconCss:"e-icons e-delete-column",text:"Delete column",command:"Table",subCommand:"DeleteColumn"}],YY=[{locale:"tableVerticalAlignDropDownTop",value:"AlignTop"},{locale:"tableVerticalAlignDropDownMiddle",value:"AlignMiddle"},{locale:"tableVerticalAlignDropDownBottom",value:"AlignBottom"}],rC=[{iconCss:"e-icons e-align-top",text:"Align Top",command:"Table",subCommand:"AlignTop"},{iconCss:"e-icons e-align-middle",text:"Align Middle",command:"Table",subCommand:"AlignMiddle"},{iconCss:"e-icons e-align-bottom",text:"Align Bottom",command:"Table",subCommand:"AlignBottom"}],KY=[{locale:"tableStylesDropDownDashedBorder",value:"Dashed"},{locale:"tableStylesDropDownAlternateRows",value:"Alternate"}],aC=[{text:"Dashed Borders",cssClass:"e-dashed-borders",command:"Table",subCommand:"Dashed"},{text:"Alternate Rows",cssClass:"e-alternate-rows",command:"Table",subCommand:"Alternate"}],XY=["Bold","Italic","Underline","|","Formats","Alignments","OrderedList","UnorderedList","|","CreateLink","Image","|","SourceCode","Undo","Redo"],oC=[{cssClass:"e-segoe-ui",text:"Segoe UI",command:"Font",subCommand:"FontName",value:"Segoe UI"},{cssClass:"e-arial",text:"Arial",command:"Font",subCommand:"FontName",value:"Arial,Helvetica,sans-serif"},{cssClass:"e-georgia",text:"Georgia",command:"Font",subCommand:"FontName",value:"Georgia,serif"},{cssClass:"e-impact",text:"Impact",command:"Font",subCommand:"FontName",value:"Impact,Charcoal,sans-serif"},{cssClass:"e-tahoma",text:"Tahoma",command:"Font",subCommand:"FontName",value:"Tahoma,Geneva,sans-serif"},{cssClass:"e-times-new-roman",text:"Times New Roman",command:"Font",subCommand:"FontName",value:"Times New Roman,Times,serif"},{cssClass:"e-verdana",text:"Verdana",command:"Font",subCommand:"FontName",value:"Verdana,Geneva,sans-serif"}],QY=[{text:"8 pt",value:"8pt"},{text:"10 pt",value:"10pt"},{text:"12 pt",value:"12pt"},{text:"14 pt",value:"14pt"},{text:"18 pt",value:"18pt"},{text:"24 pt",value:"24pt"},{text:"36 pt",value:"36pt"}],lC=[{cssClass:"e-paragraph",text:"Paragraph",command:"Formats",subCommand:"P",value:"P"},{cssClass:"e-code",text:"Code",command:"Formats",subCommand:"Pre",value:"Pre"},{cssClass:"e-quote",text:"Quotation",command:"Formats",subCommand:"BlockQuote",value:"BlockQuote"},{cssClass:"e-h1",text:"Heading 1",command:"Formats",subCommand:"H1",value:"H1"},{cssClass:"e-h2",text:"Heading 2",command:"Formats",subCommand:"H2",value:"H2"},{cssClass:"e-h3",text:"Heading 3",command:"Formats",subCommand:"H3",value:"H3"},{cssClass:"e-h4",text:"Heading 4",command:"Formats",subCommand:"H4",value:"H4"}],JY={Custom:["","#000000","#e7e6e6","#44546a","#4472c4","#ed7d31","#a5a5a5","#ffc000","#70ad47","#ff0000","#f2f2f2","#808080","#cfcdcd","#d5dce4","#d9e2f3","#fbe4d5","#ededed","#fff2cc","#e2efd9","#ffcccc","#d9d9d9","#595959","#aeaaaa","#acb9ca","#b4c6e7","#f7caac","#dbdbdb","#ffe599","#c5e0b3","#ff8080","#bfbfbf","#404040","#747070","#8496b0","#8eaadb","#f4b083","#c9c9c9","#ffd966","#a8d08d","#ff3333","#a6a6a6","#262626","#3b3838","#323e4f","#2f5496","#c45911","#7b7b7b","#bf8f00","#538135","#b30000","#7f7f7f","#0d0d0d","#161616","#212934","#1f3763","#823b0b","#525252","#7f5f00","#375623","#660000"]},$Y={Custom:["","#000000","#ffff00","#00ff00","#00ffff","#0000ff","#ff0000","#000080","#800080","#996633","#f2f2f2","#808080","#ffffcc","#b3ffb3","#ccffff","#ccccff","#ffcccc","#ccccff","#ff80ff","#f2e6d9","#d9d9d9","#595959","#ffff80","#80ff80","#b3ffff","#8080ff","#ff8080","#8080ff","#ff00ff","#dfbf9f","#bfbfbf","#404040","#ffff33","#33ff33","#33ffff","#3333ff","#ff3333","#0000b3","#b300b3","#c68c53","#a6a6a6","#262626","#e6e600","#00b300","#009999","#000099","#b30000","#000066","#660066","#86592d","#7f7f7f","#0d0d0d","#999900","#006600","#006666","#000066","#660000","#00004d","#4d004d","#734d26"]},hC=[{text:"None",command:"Lists",subCommand:"NumberFormatList",value:"none"},{text:"Number",command:"Lists",subCommand:"NumberFormatList",value:"decimal"},{text:"Lower Greek",command:"Lists",subCommand:"NumberFormatList",value:"lowerGreek"},{text:"Lower Roman",command:"Lists",subCommand:"NumberFormatList",value:"lowerRoman"},{text:"Upper Alpha",command:"Lists",subCommand:"NumberFormatList",value:"upperAlpha"},{text:"Lower Alpha",command:"Lists",subCommand:"NumberFormatList",value:"lowerAlpha"},{text:"Upper Roman",command:"Lists",subCommand:"NumberFormatList",value:"upperRoman"}],cC=[{text:"None",command:"Lists",subCommand:"BulletFormatList",value:"none"},{text:"Disc",command:"Lists",subCommand:"BulletFormatList",value:"disc"},{text:"Circle",command:"Lists",subCommand:"BulletFormatList",value:"circle"},{text:"Square",command:"Lists",subCommand:"BulletFormatList",value:"square"}];function wh(a,t,e){for(var i=0;t.length>i;i++)if(t[i].value===e.subCommand)return a.localeObj.getConstant(t[i].locale);return e.text}var Hk={"Insert Link":"Ctrl+K","Insert Image":"Ctrl+Shift+I","Create Table":"Ctrl+Shift+E",Undo:"Ctrl+Z",Redo:"Ctrl+Y",Copy:"Ctrl+C",Cut:"Ctrl+X",Paste:"Ctrl+V",Bold:"Ctrl+B",Italic:"Ctrl+I",Underline:"Ctrl+U",Strikethrough:"Ctrl+Shift+S","Upper Case":"Ctrl+Shift+U","Lower Case":"Ctrl+Shift+L",Superscript:"Ctrl+Shift+=",Subscript:"Ctrl+=","Code View":"Ctrl+Shift+H",Maximize:"Ctrl+Shift+F",Minimize:"Esc","Clear Format":"Ctrl+Shift+R","Numbered List":"Ctrl+Shift+O","Bulleted List":"Ctrl+Alt+O","Number Format List":"Ctrl+Shift+O","Bullet Format List":"Ctrl+Alt+O","Insert Audio":"Ctrl+Shift+A","Insert Video":"Ctrl+Alt+V","Increase Indent":"Ctrl+]","Decrease Indent":"Ctrl+[","Decrease Fontsize":"Ctrl+Shift+<","Increase Fontsize":"Ctrl+Shift+>","Justify Center":"Ctrl+E","Justify Full":"Ctrl+J","Justify Left":"Ctrl+L","Justify Right":"Ctrl+R","Format Painter":"Alt+Shift+C, Alt+Shift+V"},tK=[{name:"Smilies & People",code:"1F600",iconCss:"e-emoji",icons:[{code:"1F600",desc:"Grinning face"},{code:"1F603",desc:"Grinning face with big eyes"},{code:"1F604",desc:"Grinning face with smiling eyes"},{code:"1F606",desc:"Grinning squinting face"},{code:"1F605",desc:"Grinning face with sweat"},{code:"1F602",desc:"Face with tears of joy"},{code:"1F923",desc:"Rolling on the floor laughing"},{code:"1F60A",desc:"Smiling face with smiling eyes"},{code:"1F607",desc:"Smiling face with halo"},{code:"1F642",desc:"Slightly smiling face"},{code:"1F643",desc:"Upside-down face"},{code:"1F60D",desc:"Smiling face with heart-eyes"},{code:"1F618",desc:"Face blowing a kiss"},{code:"1F61B",desc:"Face with tongue"},{code:"1F61C",desc:"Winking face with tongue"},{code:"1F604",desc:"Grinning face with smiling eyes"},{code:"1F469",desc:"Woman"},{code:"1F468",desc:"Man"},{code:"1F467",desc:"Girl"},{code:"1F466",desc:"Boy"},{code:"1F476",desc:"Baby"},{code:"1F475",desc:"Old woman"},{code:"1F474",desc:"Old man"},{code:"1F46E",desc:"Police officer"},{code:"1F477",desc:"Construction worker"},{code:"1F482",desc:"Guard"},{code:"1F575",desc:"Detective"},{code:"1F9D1",desc:"Cook"}]},{name:"Animals & Nature",code:"1F435",iconCss:"e-animals",icons:[{code:"1F436",desc:"Dog face"},{code:"1F431",desc:"Cat face"},{code:"1F42D",desc:"Mouse face"},{code:"1F439",desc:"Hamster face"},{code:"1F430",desc:"Rabbit face"},{code:"1F98A",desc:"Fox face"},{code:"1F43B",desc:"Bear face"},{code:"1F43C",desc:"Panda face"},{code:"1F428",desc:"Koala"},{code:"1F42F",desc:"Tiger face"},{code:"1F981",desc:"Lion face"},{code:"1F42E",desc:"Cow face"},{code:"1F437",desc:"Pig face"},{code:"1F43D",desc:"Pig nose"},{code:"1F438",desc:"Frog face"},{code:"1F435",desc:"Monkey face"},{code:"1F649",desc:"Hear-no-evil monkey"},{code:"1F64A",desc:"Speak-no-evil monkey"},{code:"1F412",desc:"Monkey"},{code:"1F414",desc:"Chicken"},{code:"1F427",desc:"Penguin"},{code:"1F426",desc:"Bird"},{code:"1F424",desc:"Baby chick"},{code:"1F986",desc:"Duck"},{code:"1F985",desc:"Eagle"}]},{name:"Food & Drink",code:"1F347",iconCss:"e-food-and-drinks",icons:[{code:"1F34E",desc:"Red apple"},{code:"1F34C",desc:"Banana"},{code:"1F347",desc:"Grapes"},{code:"1F353",desc:"Strawberry"},{code:"1F35E",desc:"Bread"},{code:"1F950",desc:"Croissant"},{code:"1F955",desc:"Carrot"},{code:"1F354",desc:"Hamburger"},{code:"1F355",desc:"Pizza"},{code:"1F32D",desc:"Hot dog"},{code:"1F35F",desc:"French fries"},{code:"1F37F",desc:"Popcorn"},{code:"1F366",desc:"Soft ice cream"},{code:"1F367",desc:"Shaved ice"},{code:"1F36A",desc:"Cookie"},{code:"1F382",desc:"Birthday cake"},{code:"1F370",desc:"Shortcake"},{code:"1F36B",desc:"Chocolate bar"},{code:"1F369",desc:"Donut"},{code:"1F36E",desc:"Custard"},{code:"1F36D",desc:"Lollipop"},{code:"1F36C",desc:"Candy"},{code:"1F377",desc:"Wine glass"},{code:"1F37A",desc:"Beer mug"},{code:"1F37E",desc:"Bottle with popping cork"}]},{name:"Activities",code:"1F383",iconCss:"e-activities",icons:[{code:"26BD",desc:"Soccer ball"},{code:"1F3C0",desc:"Basketball"},{code:"1F3C8",desc:"American football"},{code:"26BE",desc:"Baseball"},{code:"1F3BE",desc:"Tennis"},{code:"1F3D0",desc:"Volleyball"},{code:"1F3C9",desc:"Rugby football"},{code:"1F3B1",desc:"Pool 8 ball"},{code:"1F3D3",desc:"Ping pong"},{code:"1F3F8",desc:"Badminton"},{code:"1F94A",desc:"Boxing glove"},{code:"1F3CA",desc:"Swimmer"},{code:"1F3CB",desc:"Weightlifter"},{code:"1F6B4",desc:"Bicyclist"},{code:"1F6F9",desc:"Skateboard"},{code:"1F3AE",desc:"Video game"},{code:"1F579",desc:"Joystick"},{code:"1F3CF",desc:"Cricket"},{code:"1F3C7",desc:"Horse racing"},{code:"1F3AF",desc:"Direct hit"},{code:"1F3D1",desc:"Field hockey"},{code:"1F3B0",desc:"Slot machine"},{code:"1F3B3",desc:"Bowling"},{code:"1F3B2",desc:"Game die"},{code:"265F",desc:"Chess pawn"}]},{name:"Travel & Places",code:"1F30D",iconCss:"e-travel-and-places",icons:[{code:"2708",desc:"Airplane"},{code:"1F697",desc:"Automobile"},{code:"1F695",desc:"Taxi"},{code:"1F6B2",desc:"Bicycle"},{code:"1F68C",desc:"Bus"},{code:"1F682",desc:"Locomotive"},{code:"1F6F3",desc:"Passenger ship"},{code:"1F680",desc:"Rocket"},{code:"1F681",desc:"Helicopter"},{code:"1F6A2",desc:"Ship"},{code:"1F3DF",desc:"Stadium"},{code:"1F54C",desc:"Mosque"},{code:"26EA",desc:"Church"},{code:"1F6D5",desc:"Hindu Temple"},{code:"1F3D4",desc:"Snow-capped mountain"},{code:"1F3EB",desc:"School"},{code:"1F30B",desc:"Volcano"},{code:"1F3D6",desc:"Beach with umbrella"},{code:"1F3DD",desc:"Desert island"},{code:"1F3DE",desc:"National park"},{code:"1F3F0",desc:"Castle"},{code:"1F5FC",desc:"Tokyo tower"},{code:"1F5FD",desc:"Statue of liberty"},{code:"26E9",desc:"Shinto shrine"},{code:"1F3EF",desc:"Japanese castle"},{code:"1F3A2",desc:"Roller coaster"}]},{name:"Objects",code:"1F507",iconCss:"e-objects",icons:[{code:"1F4A1",desc:"Light bulb"},{code:"1F526",desc:"Flashlight"},{code:"1F4BB",desc:"Laptop computer"},{code:"1F5A5",desc:"Desktop computer"},{code:"1F5A8",desc:"Printer"},{code:"1F4F7",desc:"Camera"},{code:"1F4F8",desc:"Camera with flash"},{code:"1F4FD",desc:"Film projector"},{code:"1F3A5",desc:"Movie camera"},{code:"1F4FA",desc:"Television"},{code:"1F4FB",desc:"Radio"},{code:"1F50B",desc:"Battery"},{code:"231A",desc:"Watch"},{code:"1F4F1",desc:"Mobile phone"},{code:"260E",desc:"Telephone"},{code:"1F4BE",desc:"Floppy disk"},{code:"1F4BF",desc:"Optical disk"},{code:"1F4C0",desc:"Digital versatile disc"},{code:"1F4BD",desc:"Computer disk"},{code:"1F3A7",desc:"Headphone"},{code:"1F3A4",desc:"Microphone"},{code:"1F3B6",desc:"Multiple musical notes"},{code:"1F4DA",desc:"Books"}]},{name:"Symbols",code:"1F3E7",iconCss:"e-symbols",icons:[{code:"274C",desc:"Cross mark"},{code:"2714",desc:"Check mark"},{code:"26A0",desc:"Warning sign"},{code:"1F6AB",desc:"Prohibited"},{code:"2139",desc:"Information"},{code:"267B",desc:"Recycling symbol"},{code:"1F6AD",desc:"No smoking"},{code:"1F4F5",desc:"No mobile phones"},{code:"1F6AF",desc:"No littering"},{code:"1F6B3",desc:"No bicycles"},{code:"1F6B7",desc:"No pedestrians"},{code:"2795",desc:"Plus"},{code:"2796",desc:"Minus"},{code:"2797",desc:"Divide"},{code:"2716",desc:"Multiplication"},{code:"1F4B2",desc:"Dollar banknote"},{code:"1F4AC",desc:"Speech balloon"},{code:"2755",desc:"White exclamation mark"},{code:"2754",desc:"White question mark"},{code:"2764",desc:"Red heart"}]}],iK={alignments:"Alignments",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",fontName:"Font Name",fontSize:"Font Size",fontColor:"Font Color",backgroundColor:"Background Color",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",clearFormat:"Clear Format",clearAll:"Clear All",cut:"Cut",copy:"Copy",paste:"Paste",unorderedList:"Bulleted List",orderedList:"Numbered List",indent:"Increase Indent",outdent:"Decrease Indent",undo:"Undo",redo:"Redo",superscript:"Superscript",subscript:"Subscript",createLink:"Insert Link",openLink:"Open Link",editLink:"Edit Link",removeLink:"Remove Link",image:"Insert Image",audio:"Insert Audio",video:"Insert Video",replace:"Replace",numberFormatList:"Number Format List",bulletFormatList:"Bullet Format List",audioReplace:"Replace",videoReplace:"Replace",videoAlign:"Align",videoDimension:"Dimension",audioRemove:"Remove",videoRemove:"Remove",audioLayoutOption:"Layout option",videoLayoutOption:"Layout option",align:"Align",caption:"Image Caption",remove:"Remove",insertLink:"Insert Link",display:"Display",altText:"Alternative Text",dimension:"Change Size",fullscreen:"Maximize",maximize:"Maximize",minimize:"Minimize",lowerCase:"Lower Case",upperCase:"Upper Case",print:"Print",formats:"Formats",sourcecode:"Code View",preview:"Preview",viewside:"ViewSide",insertCode:"Insert Code",linkText:"Display Text",linkTooltipLabel:"Title",linkWebUrl:"Web Address",linkTitle:"Enter a title",linkurl:"http://example.com",linkOpenInNewWindow:"Open Link in New Window",linkHeader:"Insert Link",dialogInsert:"Insert",dialogCancel:"Cancel",dialogUpdate:"Update",imageHeader:"Insert Image",audioHeader:"Insert Audio",videoHeader:"Insert Video",imageLinkHeader:"You can also provide a link from the web",audioLinkHeader:"You can also provide a link from the web",videoLinkHeader:"Web URL",embedVideoLinkHeader:"Media Embed URL",mdimageLink:"Please provide a URL for your image",imageUploadMessage:"Drop image here or browse to upload",audioUploadMessage:"Drop an audio file or browse to upload",videoUploadMessage:"Drop a video file or browse to upload",imageDeviceUploadMessage:"Click here to upload",audioDeviceUploadMessage:"Click here to upload",videoDeviceUploadMessage:"Click here to upload",imageAlternateText:"Alternate Text",alternateHeader:"Alternative Text",browse:"Browse",imageUrl:"http://example.com/image.png",audioUrl:"http://example.com/audio.mp3",videoUrl:"http://example.com/video.mp3",webUrl:"Web URL",embedUrl:"Embed Code",imageCaption:"Caption",imageSizeHeader:"Image Size",videoSizeHeader:"Video Size",imageHeight:"Height",imageWidth:"Width",videoHeight:"Height",videoWidth:"Width",textPlaceholder:"Enter Text",inserttablebtn:"Insert Table",tabledialogHeader:"Insert Table",tableWidth:"Width",cellpadding:"Cell Padding",cellspacing:"Cell Spacing",columns:"Number of columns",rows:"Number of rows",tableRows:"Table Rows",tableColumns:"Table Columns",tableCellHorizontalAlign:"Table Cell Horizontal Align",tableCellVerticalAlign:"Table Cell Vertical Align",createTable:"Create Table",removeTable:"Remove Table",tableHeader:"Table Header",tableRemove:"Table Remove",tableCellBackground:"Table Cell Background",tableEditProperties:"Table Edit Properties",styles:"Styles",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteColumn:"Delete Column",insertRowBefore:"Insert Row Before",insertRowAfter:"Insert Row After",deleteRow:"Delete Row",tableEditHeader:"Edit Table",TableHeadingText:"Heading",TableColText:"Col",imageInsertLinkHeader:"Insert Link",editImageHeader:"Edit Image",editAudioHeader:"Edit Audio",editVideoHeader:"Edit Video",alignmentsDropDownLeft:"Align Left",alignmentsDropDownCenter:"Align Center",alignmentsDropDownRight:"Align Right",alignmentsDropDownJustify:"Align Justify",imageDisplayDropDownInline:"Inline",imageDisplayDropDownBreak:"Break",audioLayoutOptionDropDownInline:"Inline",audioLayoutOptionDropDownBreak:"Break",videoLayoutOptionDropDownInline:"Inline",videoLayoutOptionDropDownBreak:"Break",tableInsertRowDropDownBefore:"Insert row before",tableInsertRowDropDownAfter:"Insert row after",tableInsertRowDropDownDelete:"Delete row",tableInsertColumnDropDownLeft:"Insert column left",tableInsertColumnDropDownRight:"Insert column right",tableInsertColumnDropDownDelete:"Delete column",tableVerticalAlignDropDownTop:"Align Top",tableVerticalAlignDropDownMiddle:"Align Middle",tableVerticalAlignDropDownBottom:"Align Bottom",tableStylesDropDownDashedBorder:"Dashed Borders",tableStylesDropDownAlternateRows:"Alternate Rows",pasteFormat:"Paste Format",pasteFormatContent:"Choose the formatting action",plainText:"Plain Text",cleanFormat:"Clean",keepFormat:"Keep",pasteDialogOk:"OK",pasteDialogCancel:"Cancel",fileManager:"File Manager",fileDialogHeader:"File Browser",formatsDropDownParagraph:"Paragraph",formatsDropDownCode:"Code",formatsDropDownQuotation:"Quotation",formatsDropDownHeading1:"Heading 1",formatsDropDownHeading2:"Heading 2",formatsDropDownHeading3:"Heading 3",formatsDropDownHeading4:"Heading 4",fontNameSegoeUI:"Segoe UI",fontNameArial:"Arial",fontNameGeorgia:"Georgia",fontNameImpact:"Impact",fontNameTahoma:"Tahoma",fontNameTimesNewRoman:"Times New Roman",fontNameVerdana:"Verdana",numberFormatListNumber:"Number",numberFormatListLowerAlpha:"LowerAlpha",numberFormatListUpperAlpha:"UpperAlpha",numberFormatListLowerRoman:"LowerRoman",numberFormatListUpperRoman:"UpperRoman",numberFormatListLowerGreek:"LowerGreek",bulletFormatListDisc:"Disc",bulletFormatListCircle:"Circle",bulletFormatListSquare:"Square",numberFormatListNone:"None",bulletFormatListNone:"None",formatPainter:"Format Painter",emojiPicker:"Emoji Picker",embeddedCode:"Embedded Code",pasteEmbeddedCodeHere:"Paste Embedded Code here",emojiPickerTypeToFind:"Type to find",emojiPickerNoResultFound:"No results found",emojiPickerTrySomethingElse:"Try something else",linkAriaLabel:"Open in new window"},sK={alignments:"alignments",justifyleft:"justifyLeft",justifycenter:"justifyCenter",justifyright:"justifyRight",justifyfull:"justifyFull",fontname:"fontName",fontsize:"fontSize",fontcolor:"fontColor",backgroundcolor:"backgroundColor",bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough",clearformat:"clearFormat",clearall:"clearAll",cut:"cut",copy:"copy",paste:"paste",unorderedlist:"unorderedList",orderedlist:"orderedList",indent:"indent",outdent:"outdent",numberformatlist:"numberFormatList",bulletformatlist:"bulletFormatList",undo:"undo",redo:"redo",filemanager:"fileManager",superscript:"superscript",subscript:"subscript",createlink:"createLink",openlink:"openLink",editlink:"editLink",removelink:"removeLink",openimagelink:"openLink",editimagelink:"editLink",removeimagelink:"removeLink",image:"image",audio:"audio",video:"video",replace:"replace",audioreplace:"audioReplace",videoreplace:"videoReplace",videoalign:"videoAlign",videodimension:"videoDimension",audioremove:"audioRemove",videoremove:"videoRemove",audiolayoutoption:"audioLayoutOption",videolayoutoption:"videoLayoutOption",align:"align",caption:"caption",remove:"remove",insertlink:"insertLink",display:"display",alttext:"altText",dimension:"dimension",fullscreen:"fullscreen",maximize:"maximize",minimize:"minimize",lowercase:"lowerCase",uppercase:"upperCase",print:"print",formats:"formats",sourcecode:"sourcecode",preview:"preview",viewside:"viewside",insertcode:"insertCode",tablerows:"tableRows",tablecolumns:"tableColumns",tablecellhorizontalalign:"tableCellHorizontalAlign",tablecellverticalalign:"tableCellVerticalAlign",createtable:"createTable",removetable:"removeTable",tableheader:"tableHeader",tableremove:"tableRemove",tablecellbackground:"tableCellBackground",tableeditproperties:"tableEditProperties",styles:"styles",insertcolumnleft:"insertColumnLeft",insertcolumnright:"insertColumnRight",deletecolumn:"deleteColumn",aligntop:"AlignTop",alignmiddle:"AlignMiddle",alignbottom:"AlignBottom",insertrowbefore:"insertRowBefore",insertrowafter:"insertRowAfter",deleterow:"deleteRow",formatpainter:"formatPainter",emojipicker:"emojiPicker",embeddedCode:"Embedded Code",pasteEmbeddedCodeHere:"Paste Embedded Code here",emojiPickerTypeToFind:"Type to find",emojiPickerNoResultFound:"No results found",emojiPickerTrySomethingElse:"Try something else",ImageLinkAriaLabel:"Open in new window"},nK=[{locale:"fontNameSegoeUI",value:"Segoe UI"},{locale:"fontNameArial",value:"Arial,Helvetica,sans-serif"},{locale:"fontNameGeorgia",value:"Georgia,serif"},{locale:"fontNameImpact",value:"Impact,Charcoal,sans-serif"},{locale:"fontNameTahoma",value:"Tahoma,Geneva,sans-serif"},{locale:"fontNameTimesNewRoman",value:"Times New Roman,Times,serif"},{locale:"fontNameVerdana",value:"Verdana,Geneva,sans-serif"}],rK=[{locale:"formatsDropDownParagraph",value:"P"},{locale:"formatsDropDownCode",value:"Pre"},{locale:"formatsDropDownQuotation",value:"BlockQuote"},{locale:"formatsDropDownHeading1",value:"H1"},{locale:"formatsDropDownHeading2",value:"H2"},{locale:"formatsDropDownHeading3",value:"H3"},{locale:"formatsDropDownHeading4",value:"H4"}],aK=[{locale:"numberFormatListNone",value:"none"},{locale:"numberFormatListNumber",value:"decimal"},{locale:"numberFormatListLowerAlpha",value:"lower-alpha"},{locale:"numberFormatListUpperAlpha",value:"upper-alpha"},{locale:"numberFormatListLowerRoman",value:"lower-roman"},{locale:"numberFormatListUpperRoman",value:"upper-roman"},{locale:"numberFormatListLowerGreek",value:"lower-greek"}],oK=[{locale:"bulletFormatListNone",value:"none"},{locale:"bulletFormatListDisc",value:"disc"},{locale:"bulletFormatListCircle",value:"circle"},{locale:"bulletFormatListSquare",value:"square"}],lK=["Undo","Redo"],hK=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function zk(a,t){var e=-1;return t.some(function(i,s){return"string"==typeof i&&a===i.toLocaleLowerCase()&&(e=s,!0)}),e}function pi(a,t){var e=!1;return a.classList.contains(t)&&(e=!0),e}function to(a,t,e,i){for(var s,n,o=0;o<a.length;o++){if("value"===e&&a[o].value.toLocaleLowerCase()===t.toLocaleLowerCase()){s=a[o];break}if("text"===e&&a[o].text.toLocaleLowerCase()===t.toLocaleLowerCase()){s=a[o];break}if("subCommand"===e&&a[o].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){s=a[o];break}}if(!(0,r.le)(s))switch(i){case"text":n=s.text;break;case"value":n=s.value;break;case"iconCss":n=s.iconCss}return n}function di(){var a=!1;return r.AR.isDevice&&r.AR.isIos&&(a=!0),a}function jk(a){return(0,r.le)(a)?"":a}function uC(a,t){return t.getService("rteLocale").getConstant(sK[""+a])}function pC(a){return"object"==typeof a?a:[a]}function dC(a,t){for(var e=[],i=0;i<a.length;i++)for(var s=0;s<t.length;s++)if("Separator"!==t[s].type){if(("OrderedList"===a[i]||"NumberFormatList"===a[i])&&"OL"===t[s].subCommand){e.push(s);break}if(("UnorderedList"===a[i]||"BulletFormatList"===a[i])&&"UL"===t[s].subCommand){e.push(s);break}if("InsertCode"===a[i]&&"Pre"===t[s].subCommand){e.push(s);break}if("FileManager"===a[i]&&"File"===t[s].subCommand){e.push(s);break}if("object"==typeof a[i]&&"Custom"===a[i].command){e.push(i);break}if(a[i]===t[s].subCommand){e.push(s);break}}return e}function Up(a,t){for(var e=0,i=dC(pC(lK),a.toolbarObj.items),s=(0,r.td)("."+yh,a.toolbarObj.element),o=0,l=Object.keys(t);o<l.length;o++){var c=s[i[e]];c&&a.toolbarObj.enableItems(c,t[""+l[o]]),e++}}function Eh(a,t){var e=document.createEvent("HTMLEvents");e.initEvent(t,!1,!0),a.dispatchEvent(e)}function Ih(a){var t=(0,r.az)("template");return t.innerHTML=a,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(a)}function vV(a,t){var e=[];for(t=t.firstChild;t;t=t.nextSibling)3===t.nodeType?e.push(t):e=e.concat(vV(a,t));return e}function _k(a){for(var t={},e=Object.keys(a),i=0;i<Object.keys(a).length;i++)t[e[i].toLocaleLowerCase()]=a[e[i]];return t}function fC(a,t){var e;return null!==a&&""!==a?(e=function(a,t){var e=document.createElement("div"),i=document.createElement("div"),s=e.childNodes;if(e.innerHTML=a,e.setAttribute("class","tempDiv"),s.length>0){for(var n=void 0,o=void 0,l=void 0;e.firstChild;){for(var h=e.querySelectorAll("address:empty, article:empty, aside:empty, blockquote:empty,\n details:empty, dd:empty, div:empty, dl:empty, dt:empty, fieldset:empty, footer:empty,form:empty, h1:empty,\n h2:empty, h3:empty, h4:empty, h5:empty, h6:empty, header:empty, hgroup:empty, li:empty, main:empty, nav:empty,\n noscript:empty, output:empty, p:empty, pre:empty, section:empty, td:empty, th:empty"),c=0;c<h.length;c++)h[c].innerHTML="<br>";var u=e.querySelectorAll("p");for(c=0;c<u.length;c++)0===u[c].textContent.trim().length&&1===u[c].childNodes.length&&"#text"===u[c].childNodes[0].nodeName&&(0,r.le)(u[c].childNodes[0].textContent.match(/\u00a0/g))&&(u[c].innerHTML="<br>");var p=e.querySelectorAll("a:empty, abbr:empty, acronym:empty, b:empty, bdi:empty, bdo:empty, big:empty, button:empty,\ncanvas:empty, cite:empty, code:empty, data:empty, datalist:empty, del:empty, dfn:empty, em:empty, font:empty, i:empty, iframe:empty,\nins:empty, kbd:empty, label:empty, map:empty, mark:empty, meter:empty, noscript:empty, object:empty, output:empty, picture:empty, progress:empty,\nq:empty, ruby:empty, s:empty, samp:empty, script:empty, select:empty, slot:empty, small:empty, span:empty, strong:empty, strike:empty, sub:empty, sup:empty, svg:empty,\ntemplate:empty, textarea:empty, time:empty, u:empty, tt:empty, var:empty, wbr:empty");for(c=0;c<p.length;c++)p[c].innerHTML="&ZeroWidthSpace;";"BR"!==t.enterKey&&("#text"===e.firstChild.nodeName&&(e.firstChild.textContent.indexOf("\n")<0||""!==e.firstChild.textContent.trim())||hK.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0)?(n?o.appendChild(e.firstChild):(l=(0,r.az)("DIV"===t.enterKey?"div":"p"),i.appendChild(l),l.appendChild(e.firstChild)),o=l,n=!0):"#text"===e.firstChild.nodeName&&("\n"===e.firstChild.textContent||e.firstChild.textContent.indexOf("\n")>=0&&""===e.firstChild.textContent.trim())?(0,r.og)(e.firstChild):(i.appendChild(e.firstChild),n=!1)}var d=i.querySelectorAll("img");for(c=0;c<d.length;c++)d[c].classList.contains(Jb)||d[c].classList.add(Jb),d[c].classList.contains(nl)||d[c].classList.contains(eo)||d[c].classList.add(nl)}return i.innerHTML}(t.enableHtmlEncode?io(a):a,t),t.setProperties({value:e},!0)):e="DIV"===t.enterKey?t.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":"BR"===t.enterKey?t.enableHtmlEncode?"&lt;br/&gt;":"<br/>":t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",e}function Wk(a){return"DIV"===a.enterKey?a.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":"BR"===a.enterKey?a.enableHtmlEncode?"&lt;br/&gt;":"<br/>":a.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>"}function cK(a){return"<p><br></p>"===a||"&lt;p&gt;&lt;br&gt;&lt;/p&gt;"===a||"<div><br></div>"===a||"&lt;div&gt;&lt;br&gt;&lt;/div&gt;"===a||"<br>"===a||"&lt;br&gt;"===a||""===a}function io(a){return a.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}function Gp(a){for(var t=a.split(","),e=t[0].match(/:(.*?);/)[1],i=atob(t[1]),s=i.length,n=new Uint8Array(s);s--;)n[s]=i.charCodeAt(s);return new Blob([n],{type:e})}function gC(a,t,e){for(var i=0;t.length>i;i++)if(t[i].value===e.value||t[i].value===e.subCommand)return a.localeObj.getConstant(t[i].locale);return e.text}function CV(a){oC.forEach(function(t,e){oC[e].text=gC(a,nK,oC[e])}),lC.forEach(function(t,e){lC[e].text=gC(a,rK,lC[e])}),hC.forEach(function(t,e){hC[e].text=gC(a,aK,hC[e])}),cC.forEach(function(t,e){cC[e].text=gC(a,oK,cC[e])})}var uK=function(){function a(t,e){this.parent=t,e&&(this.l10n=e.getService("rteLocale")),this.wireEvent()}return a.prototype.wireEvent=function(){this.parent.on(Oe,this.unWireEvent,this),this.parent.on(im,this.destroyTooltip,this)},a.prototype.destroyTooltip=function(){var t=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().ownerDocument:this.parent.contentModule.getDocument();if(!(0,r.le)(t.querySelector(".e-tooltip-wrap"))&&!(0,r.le)(t.querySelector("[data-tooltip-id]"))){var e=t.querySelector("[data-tooltip-id]"),i=new MouseEvent("mouseleave",{bubbles:!0,cancelable:!0});e.dispatchEvent(i)}},a.prototype.unWireEvent=function(){this.parent.off(Oe,this.unWireEvent)},a.prototype.toolbarBeforeCreate=function(t){"Extended"===this.mode&&(t.enableCollision=!1)},a.prototype.toolbarCreated=function(){this.parent.notify("toolbarCreated",this)},a.prototype.toolbarClicked=function(t){!this.parent.enabled||(this.parent.trigger("toolbarClick",t),(!this.parent.readonly||(0,r.le)(t.item))&&this.parent.notify(zg,t))},a.prototype.dropDownSelected=function(t){this.parent.notify(fa,t)},a.prototype.beforeDropDownItemRender=function(t){this.parent.readonly||!this.parent.enabled||this.parent.notify(VT,t)},a.prototype.tooltipBeforeRender=function(t){if(!(0,r.le)(t.target.getAttribute("title"))){var i=void 0;switch(t.target.getAttribute("title")){case"Minimize":i=this.l10n.getConstant("minimize"),t.target.setAttribute("title",i+" (Esc)");break;case"Maximize":i=this.l10n.getConstant("maximize"),t.target.setAttribute("title",i+" (Ctrl+Shift+F)")}}},a.prototype.dropDownOpen=function(t){if(t.element.parentElement.getAttribute("id").indexOf("TableCell")>-1&&!(0,r.le)(t.element.parentElement.querySelector(".e-cell-merge"))&&(!(0,r.le)(t.element.parentElement.querySelector(".e-cell-horizontal-split"))||!(0,r.le)(t.element.parentElement.querySelector(".e-cell-vertical-split")))){var e=t.element.querySelectorAll("li");1===this.parent.inputElement.querySelectorAll(".e-cell-select").length?((0,r.cn)([e[0]],"e-disabled"),(0,r.IV)([e[1],e[2]],"e-disabled")):this.parent.inputElement.querySelectorAll(".e-cell-select").length>1&&((0,r.IV)([e[0]],"e-disabled"),(0,r.cn)([e[1],e[2]],"e-disabled"))}this.parent.notify(qn,t)},a.prototype.dropDownClose=function(t){this.parent.notify(_n,t)},a.prototype.renderToolbar=function(t){this.setPanel(t.target),this.renderPanel(),this.mode=t.overflowMode,t.rteToolbarObj.toolbarObj=new Bd({items:t.items,width:"100%",overflowMode:t.overflowMode,beforeCreate:this.toolbarBeforeCreate.bind(this),created:this.toolbarCreated.bind(this),clicked:this.toolbarClicked.bind(this),enablePersistence:t.enablePersistence,enableRtl:t.enableRtl,cssClass:t.cssClass}),t.rteToolbarObj.toolbarObj.isStringTemplate=!0,t.rteToolbarObj.toolbarObj.createElement=this.parent.createElement,t.rteToolbarObj.toolbarObj.appendTo(t.target),this.parent.showTooltip&&(this.tooltip=new fl({target:"#"+this.parent.getID()+"_toolbar_wrapper [title]",showTipPointer:!0,openDelay:400,opensOn:"Hover",beforeRender:this.tooltipBeforeRender.bind(this),cssClass:this.parent.getCssClass(),windowCollision:!0,position:"BottomCenter"}),this.tooltip.appendTo(t.target))},a.prototype.renderDropDownButton=function(t){var i,e=this;t.element.classList.add(Cn),i=t.cssClass+" "+Xi+" "+Bk,this.parent.inlineMode.enable&&r.AR.isDevice&&(i=i+" "+kk);var s=this,n=new gl({items:t.items,iconCss:t.iconCss,cssClass:i,content:t.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:function(l){if(!s.parent.readonly&&s.parent.enabled){if("Markdown"!==s.parent.editorMode){var h=s.parent.getRange().startContainer.parentElement,c=h.closest("table"),u=h.closest("tr");if(!(0,r.le)(c)&&c.classList.contains("e-dashed-border"))for(var p=0;p<l.element.childNodes.length;p++)l.element.childNodes[p].classList.contains("e-dashed-borders")&&(0,r.cn)([l.element.childNodes[p]],"e-active");else if(!(0,r.le)(c)&&!c.classList.contains("e-dashed-border")&&c.classList.contains("e-alternate-rows")&&""!==window.getComputedStyle(u).backgroundColor)for(p=0;p<l.element.childNodes.length;p++)l.element.childNodes[p].classList.contains("e-alternate-rows")&&(0,r.cn)([l.element.childNodes[p]],"e-active");for(var d=s.parent.getRange().startContainer;d!==s.parent.inputElement&&!(0,r.le)(d.parentElement);){"#text"===d.nodeName&&(d=d.parentElement);var f=window.getComputedStyle(d).textAlign;if("Alignments"===l.items[0].command){if("Align Left"===l.items[0].text&&"left"===f||"start"===f){(0,r.cn)([l.element.childNodes[0]],"e-active");break}if("Align Center"===l.items[1].text&&"center"===f){(0,r.cn)([l.element.childNodes[1]],"e-active");break}if("Align Right"===l.items[2].text&&"right"===f){(0,r.cn)([l.element.childNodes[2]],"e-active");break}if("Align Justify"===l.items[3].text&&"justify"===f){(0,r.cn)([l.element.childNodes[3]],"e-active");break}}d=d.parentElement}var m=h.closest("img")||h.querySelector("img");if("Images"!==l.items[0].command||(0,r.le)(m)||(p=void 0,m.classList.contains("e-imgleft")||m.classList.contains("e-imginline")?p=0:m.classList.contains("e-imgcenter")||m.classList.contains("e-imgbreak")?p=1:m.classList.contains("e-imgright")&&(p=2),(0,r.le)(l.element.childNodes[p])||(0,r.cn)([l.element.childNodes[p]],"e-active")),"Formats"===l.items[0].command)for(p=0;p<l.element.childNodes.length;p++){var v=e.parent.createElement("div");v.innerHTML=n.content.trim(),""!==v.textContent.trim()&&l.element.childNodes[p].textContent.trim()===v.textContent.trim()?l.element.childNodes[p].classList.contains("e-active")||(0,r.cn)([l.element.childNodes[p]],"e-active"):(0,r.IV)([l.element.childNodes[p]],"e-active")}}s.parent.notify(Fb,l)}else l.cancel=!0},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});return n.isStringTemplate=!0,n.createElement=s.parent.createElement,n.appendTo(t.element),t.element.tabIndex=-1,document.getElementById(n.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),n},a.prototype.renderListDropDown=function(t){var e=this,i=Xi+" "+Bk+(this.parent.inlineMode?" "+kk:"");i+=" "+("NumberFormatList"===t.itemName?"e-rte-numberformatlist-dropdown":"e-rte-bulletformatlist-dropdown");var s=e.parent.createElement("span",{className:Nk}),n=e.parent.createElement("span",{className:t.cssClass});s.appendChild(n);var o=new gl({items:t.items,cssClass:i,content:t.content,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,select:this.dropDownSelected.bind(this),beforeOpen:function(h){if(!e.parent.readonly&&e.parent.enabled){e.parent.notify(_n,{});var c=h.event?h.event.target:null;e.currentElement=o.element,e.currentDropdown=o,h.event&&"click"===h.event.type&&(c.classList.contains(Nk)||c.parentElement.classList.contains(Nk))?h.cancel=!0:e.parent.notify(Fb,h)}else h.cancel=!0},close:this.dropDownClose.bind(this),open:this.dropDownOpen.bind(this),beforeItemRender:this.beforeDropDownItemRender.bind(this)});return o.isStringTemplate=!0,o.createElement=e.parent.createElement,o.appendTo(t.element),t.element.tabIndex=-1,t.element.setAttribute("role","button"),document.getElementById(o.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),1===t.element.childElementCount&&o.element.insertBefore(s,o.element.querySelector(".e-caret")),t.element.tabIndex=-1,o.element.removeAttribute("type"),o.element.onmousedown=function(){e.parent.notify(qn,{})},o.element.onkeydown=function(){e.parent.notify(qn,{})},o},a.prototype.paletteSelection=function(t,e){var i=t.element.querySelector(".e-control.e-colorpicker"),s=[].slice.call((0,r.td)(".e-tile",i.parentElement));(0,r.IV)(s,"e-selected");var n=e.querySelector("."+Xi).style.borderBottomColor;s.filter(function(o){o.style.backgroundColor===n&&(0,r.cn)([o],"e-selected")})},a.prototype.renderColorPickerDropDown=function(t,e,i,s){var n=this,o=this,l=Xi+" "+Bk+(this.parent.inlineMode?" "+kk:"");l+=" "+("backgroundcolor"===e?"e-rte-backgroundcolor-dropdown":"e-rte-fontcolor-dropdown"),l+=this.parent.getCssClass(!0);var u,h=o.parent.createElement("span",{className:lm}),c=o.parent.createElement("span",{className:t.cssClass}),p=(0,r.le)(s)?o.parent.backgroundColor.default:s;c.style.borderBottomColor="backgroundcolor"===e?p:o.parent.fontColor.default,h.appendChild(c);var d=new gl({target:i.element.parentElement,cssClass:l,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,beforeOpen:function(g){if(i.inline=!0,i.dataBind(),!o.parent.readonly&&o.parent.enabled){var m=g.event?g.event.target:null;if(o.currentElement=d.element,o.currentDropdown=d,o.paletteSelection(g,o.currentElement),g.event&&"click"===g.event.type&&(m.classList.contains(lm)||m.parentElement.classList.contains(lm))){g.cancel=!0;var v=m.classList.contains(Xi)?m.style.borderBottomColor:m.querySelector("."+Xi).style.borderBottomColor;o.parent.notify(_n,{});var y=(u=o.parent.formatter.editorManager.nodeSelection.getRange(o.parent.contentModule.getDocument())).startContainer.parentNode,C=(0,r.oq)(u.startContainer.parentNode,"table");("TD"===u.startContainer.nodeName||"TH"===u.startContainer.nodeName||(0,r.oq)(u.startContainer.parentNode,"td,th")||o.parent.iframeSettings.enable&&!pi(y.ownerDocument.querySelector("body"),"e-lib"))&&u.collapsed&&"BackgroundColor"===t.subCommand&&(0,r.oq)(C,"."+Wb)?o.parent.notify(Yg,{item:{command:t.command,subCommand:t.subCommand,value:v}}):o.parent.notify(Zg,{item:{command:t.command,subCommand:t.subCommand,value:v}})}else{var b=g.element.querySelector(".e-control.e-colorpicker"),S=(0,r.s8)(b,l1);S.showButtons=!g.element.querySelector(".e-color-palette"),S.dataBind(),g.element.onclick=function(I){I.target.classList.contains("e-cancel")&&d.toggle()}}}else g.cancel=!0},open:function(g){n.setColorPickerContentWidth(i);var m,v=g.element.querySelector(".e-control.e-colorpicker");(m=g.element.querySelector(".e-color-palette")?v.parentElement.querySelector(".e-palette"):v.parentElement.querySelector("e-handler"))&&m.focus(),n.pickerRefresh(g)},beforeClose:function(g){var m=g.event?g.event.target:null;if(g.event&&"click"===g.event.type&&(m.classList.contains(lm)||m.parentElement.classList.contains(lm))){var v=m.classList.contains(Xi)?m.style.borderBottomColor:m.querySelector("."+Xi).style.borderBottomColor;("TD"===(u=o.parent.formatter.editorManager.nodeSelection.getRange(o.parent.contentModule.getDocument())).startContainer.nodeName||"TH"===u.startContainer.nodeName||(0,r.oq)(u.startContainer.parentNode,"td,th"))&&u.collapsed?o.parent.notify(Yg,{item:{command:t.command,subCommand:t.subCommand,value:v}}):o.parent.notify(Zg,{item:{command:t.command,subCommand:t.subCommand,value:v}})}},close:function(g){o.parent.notify(_n,{})}});return d.isStringTemplate=!0,d.createElement=o.parent.createElement,t.element.setAttribute("role","button"),d.appendTo(t.element),document.getElementById(d.element.id+"-popup").setAttribute("aria-owns",this.parent.getID()),d.element.insertBefore(h,d.element.querySelector(".e-caret")),t.element.tabIndex=-1,d.element.removeAttribute("type"),d.element.onmousedown=function(){o.parent.notify(qn,{})},d.element.onkeydown=function(){o.parent.notify(qn,{})},d},a.prototype.pickerRefresh=function(t){if("Picker"===this.parent.backgroundColor.mode){var e=t.element.parentElement;e.style.width=(e.offsetWidth+5).toString()+"px",(0,r.s8)(e,Ni).refreshPosition(e),e.style.width=(e.offsetWidth-5).toString()+"px"}},a.prototype.setColorPickerContentWidth=function(t){var e=t.element.nextSibling;if("0px"===e.style.width){e.style.width="";var i=parseInt(getComputedStyle(e).borderBottomWidth,10);e.style.width=(0,r.Ac)(e.children[0].offsetWidth+i+i)}},a.prototype.renderColorPicker=function(t,e){var i=this,s=this,o=new l1({enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,inline:!1,value:"#fff",created:function(){o.setProperties({value:"backgroundcolor"===e?s.parent.backgroundColor.default:s.parent.fontColor.default})},mode:"backgroundcolor"===e?s.parent.backgroundColor.mode:s.parent.fontColor.mode,modeSwitcher:"backgroundcolor"===e?s.parent.backgroundColor.modeSwitcher:s.parent.fontColor.modeSwitcher,beforeTileRender:function(l){if(l.element.classList.add("e-rte-square-palette"),l.element.classList.add("e-custom-tile"),!(0,r.le)(i.parent.cssClass))for(var h=i.parent.getCssClass().split(" "),c=0;c<h.length;c++)""!==h[c].trim()&&l.element.classList.add(h[c]);""===l.value&&l.element.classList.add("e-nocolor-item")},change:function(l){var h=l.currentValue.rgba;l.item={command:t.command,subCommand:t.subCommand,value:h},s.parent.notify(_n,{}),s.currentElement.querySelector("."+Xi).style.borderBottomColor=h;var c=s.parent.formatter.editorManager.nodeSelection.getRange(s.parent.contentModule.getDocument()),u=(0,r.oq)(c.startContainer.parentNode,"table");("TD"===c.startContainer.nodeName||"TH"===c.startContainer.nodeName||"BODY"===c.startContainer.nodeName||(0,r.oq)(c.startContainer.parentNode,"td,th"))&&c.collapsed&&"BackgroundColor"===t.subCommand&&(0,r.oq)(u,"."+Wb)?s.parent.notify(Yg,l):s.parent.notify(Zg,l),s.currentDropdown.toggle()},beforeModeSwitch:function(l){""===o.value&&o.setProperties({value:"Picker"===l.mode?"#008000ff":""},!0),o.showButtons="Palette"!==l.mode}});return o.isStringTemplate=!0,o.columns="backgroundcolor"===e?this.parent.backgroundColor.columns:this.parent.fontColor.columns,o.presetColors="backgroundcolor"===e?this.parent.backgroundColor.colorCode:this.parent.fontColor.colorCode,o.cssClass=("backgroundcolor"===e?"e-rte-backgroundcolor-colorpicker":"e-rte-fontcolor-colorpicker")+" "+t.cssClass,o.createElement=this.parent.createElement,o.appendTo(document.getElementById(t.target)),o},a.prototype.renderPanel=function(){this.getPanel().classList.add(Ub)},a.prototype.getPanel=function(){return this.toolbarPanel},a.prototype.setPanel=function(t){this.toolbarPanel=t},a}(),Uk=function(){function a(t,e){this.tools={},this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?(0,r.l7)(this.tools,Wp,_k(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Wp}return a.prototype.addEventListener=function(){this.parent.on(el,this.setRtl,this),this.parent.on(zi,this.setCssClass,this),this.parent.on(Oe,this.removeEventListener,this)},a.prototype.removeEventListener=function(){this.parent.off(el,this.setRtl),this.parent.off(zi,this.setCssClass),this.parent.off(Oe,this.removeEventListener)},a.prototype.setCssClass=function(t){(0,r.le)(this.toolbarObj)||((0,r.le)(t.oldCssClass)?this.toolbarObj.setProperties({cssClass:(this.toolbarObj.cssClass+" "+t.cssClass).trim()}):this.toolbarObj.setProperties({cssClass:(this.toolbarObj.cssClass.replace(t.oldCssClass,"").trim()+" "+t.cssClass).trim()}))},a.prototype.setRtl=function(t){(0,r.le)(this.toolbarObj)||this.toolbarObj.setProperties({enableRtl:t.enableRtl})},a.prototype.getClass=function(t){var e;switch(t){case"fontsize":e="e-rte-inline-size-template";break;case"fontcolor":case"backgroundcolor":e="e-rte-inline-color-template";break;default:e="e-rte-inline-template"}return e},a.prototype.getTemplateObject=function(t,e){var i;switch(t){case"fontcolor":case"backgroundcolor":case"numberformatlist":case"bulletformatlist":i="span";break;default:i="button"}return{command:this.tools[t.toLocaleLowerCase()].command,subCommand:this.tools[t.toLocaleLowerCase()].subCommand,template:this.parent.createElement(i,{id:this.parent.getID()+"_"+e+"_"+this.tools[t.toLocaleLowerCase()].id}).outerHTML,cssClass:this.parent.inlineMode.enable?this.getClass(t):"",tooltipText:uC(t,this.locator)}},a.prototype.getObject=function(t,e){var i=t.toLowerCase();if(-1!==Vk.indexOf(i))return this.getTemplateObject(i,e);switch(i){case"|":return{type:"Separator"};case"-":return{type:"Separator",cssClass:"e-rte-horizontal-separator"};default:return this.parent.showTooltip?{id:this.parent.getID()+"_"+e+"_"+this.tools[i.toLocaleLowerCase()].id,prefixIcon:this.tools[i.toLocaleLowerCase()].icon,tooltipText:uC(i,this.locator),command:this.tools[i.toLocaleLowerCase()].command,subCommand:this.tools[i.toLocaleLowerCase()].subCommand}:{id:this.parent.getID()+"_"+e+"_"+this.tools[i.toLocaleLowerCase()].id,prefixIcon:this.tools[i.toLocaleLowerCase()].icon,command:this.tools[i.toLocaleLowerCase()].command,subCommand:this.tools[i.toLocaleLowerCase()].subCommand}}},a.prototype.getItems=function(t,e){var i=this;if(this.parent.toolbarSettings.items.length<1)return[];for(var s=[],n=function(f){switch(typeof f){case"string":s.push(o.getObject(f,e));break;default:if(!(0,r.le)(f.click)){var g=f,m=g.click;g.click=function(){g.undo&&0===i.parent.formatter.getUndoRedoStack().length&&i.parent.formatter.saveData(),m.call(i);var v=i.parent.createElement("div");v.appendChild(i.parent.formatter.getUndoRedoStack()[i.parent.formatter.getUndoRedoStack().length-1].text),v.innerHTML.trim()!==i.parent.inputElement.innerHTML.trim()&&g.undo&&i.parent.formatter.saveData()}}s.push(f)}},o=this,l=0,h=t;l<h.length;l++)n(h[l]);for(var u=0;u<s.length;u++){var d,p=s[u].tooltipText;(d=Hk[""+p]?r.AR.isDevice&&di()?Hk[""+p].replace("Ctrl","Cmd"):Hk[""+p]:p)&&(s[u].tooltipText=p!==d?p+" ("+d+")":p)}return s},a.prototype.getToolbarOptions=function(t){return{target:t.target,rteToolbarObj:this,items:this.getItems(t.items,t.container),overflowMode:t.mode,enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,cssClass:t.cssClass}},a.prototype.render=function(t){this.toolbarRenderer=this.renderFactory.getRenderer(Fe.Toolbar),this.toolbarRenderer.renderToolbar(this.getToolbarOptions(t))},a}(),SV=function(){function a(t,e){this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener()}return a.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(Fe.Toolbar)},a.prototype.beforeRender=function(t){var e=t.item;e.cssClass&&(0,r.cn)([t.element],e.cssClass),("Alignments"===e.command||"JustifyLeft"===e.subCommand||"JustifyRight"===e.subCommand||"JustifyCenter"===e.subCommand)&&t.element.setAttribute("title",uC(e.subCommand.toLocaleLowerCase(),this.locator))},a.prototype.dropdownContent=function(t,e,i){return'<span style="display: inline-flex;width:'+("quick"===e?"auto":t)+'" ><span class="e-rte-dropdown-btn-text">'+i+"</span></span>"},a.prototype.renderDropDowns=function(t){var e=this;this.initializeInstance();var i=t.containerType,s=t.container;Vk.forEach(function(n){var o=void 0;if(-1!==zk(n,t.items))switch(n){case"numberformatlist":if(o=(0,r.Ys)("#"+e.parent.getID()+"_"+i+"_NumberFormatList",s),(0,r.le)(o)||o.classList.contains(Cn))return;var l=e.parent.numberFormatList.types.slice();l.forEach(function(m){Object.defineProperties(m,{command:{value:"Lists",enumerable:!0},subCommand:{value:"NumberFormatList",enumerable:!0}})}),e.numberFormatListDropDown=e.toolbarRenderer.renderListDropDown({cssClass:"e-order-list "+Xi+" "+Yb,itemName:"NumberFormatList",items:l,element:o});break;case"bulletformatlist":if(o=(0,r.Ys)("#"+e.parent.getID()+"_"+i+"_BulletFormatList",s),(0,r.le)(o)||o.classList.contains(Cn))return;var h=e.parent.bulletFormatList.types.slice();h.forEach(function(m){Object.defineProperties(m,{command:{value:"Lists",enumerable:!0},subCommand:{value:"BulletFormatList",enumerable:!0}})}),e.bulletFormatListDropDown=e.toolbarRenderer.renderListDropDown({cssClass:"e-unorder-list "+Xi+" "+Yb,itemName:"BulletFormatList",items:h,element:o});break;case"formats":if(o=(0,r.Ys)("#"+e.parent.getID()+"_"+i+"_Formats",s),(0,r.le)(o)||o.classList.contains(Cn))return;var c=e.parent.format.types.slice();c.forEach(function(m){Object.defineProperties(m,{command:{value:"Formats",enumerable:!0},subCommand:{value:m.value,enumerable:!0}})});var u=(0,r.le)(e.parent.format.default)?c[0].text:e.parent.format.default;e.formatDropDown=e.toolbarRenderer.renderDropDownButton({iconCss:"quick"===i?"e-formats e-icons":"",content:e.dropdownContent(e.parent.format.width,i,"quick"===i?"":to(c,u,"text","text")),cssClass:jr+" "+$a+" e-formats-tbar-btn",itemName:"Formats",items:c,element:o});break;case"fontname":if(o=(0,r.Ys)("#"+e.parent.getID()+"_"+i+"_FontName",s),(0,r.le)(o)||o.classList.contains(Cn))return;var p=e.parent.fontFamily.items.slice();p.forEach(function(m){Object.defineProperties(m,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontName",enumerable:!0}})});var d=(0,r.le)(e.parent.fontFamily.default)?p[0].text:e.parent.fontFamily.default;e.fontNameDropDown=e.toolbarRenderer.renderDropDownButton({iconCss:"quick"===i?"e-font-name e-icons":"",content:e.dropdownContent(e.parent.fontFamily.width,i,"quick"===i?"":to(p,d,"text","text")),cssClass:jr+" "+$a+" e-font-name-tbar-btn",itemName:"FontName",items:p,element:o}),(0,r.le)(e.parent.fontFamily.default)||(e.getEditNode().style.fontFamily=e.parent.fontFamily.default);break;case"fontsize":if(o=(0,r.Ys)("#"+e.parent.getID()+"_"+i+"_FontSize",s),(0,r.le)(o)||o.classList.contains(Cn))return;var f=e.parent.fontSize.items.slice();f.forEach(function(m){Object.defineProperties(m,{command:{value:"Font",enumerable:!0},subCommand:{value:"FontSize",enumerable:!0}})});var g=(0,r.le)(e.parent.fontSize.default)?f[1].text:e.parent.fontSize.default;e.fontSizeDropDown=e.toolbarRenderer.renderDropDownButton({content:e.dropdownContent(e.parent.fontSize.width,i,jk(to(f,g.replace(/\s/g,""),"value","text"))),cssClass:jr+" "+$a+" e-font-size-tbar-btn",itemName:"FontSize",items:f,element:o}),(0,r.le)(e.parent.fontSize.default)||(e.getEditNode().style.fontSize=e.parent.fontSize.default);break;case"alignments":if(o=(0,r.Ys)("#"+e.parent.getID()+"_"+i+"_Alignments",s),(0,r.le)(o)||o.classList.contains(Cn))return;e.alignDropDown=e.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:jr+" "+$a+" e-alignment-tbar-btn",itemName:"Alignments",items:cm,element:o});break;case"align":case"videoalign":e.renderAlignmentDropDown(i,s,o,n);break;case"display":case"audiolayoutoption":case"videolayoutoption":e.renderDisplayDropDown(i,s,o,n);break;case"tablerows":e.rowDropDown(i,s,o);break;case"tablecolumns":e.columnDropDown(i,s,o);break;case"tablecell":e.cellDropDown(i,s,o);break;case"tablecellverticalalign":e.verticalAlignDropDown(i,s,o);break;case"styles":e.tableStylesDropDown(i,s,o)}}),this.parent.inlineMode.enable&&this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.getUpdateItems=function(t,e){var i=t.slice();return i.forEach(function(s){Object.defineProperties(s,{command:{value:"Format"===e?"Formats":"Font",enumerable:!0},subCommand:{value:"Format"===e?s.value:e,enumerable:!0}})}),i},a.prototype.onPropertyChanged=function(t){for(var i,s,e=t.newProp,n=0,o=Object.keys(e);n<o.length;n++)switch(o[n]){case"fontFamily":if(this.fontNameDropDown)for(var h=0,c=Object.keys(e.fontFamily);h<c.length;h++)switch(c[h]){case"default":case"width":var p=this.fontNameDropDown.items;i=(0,r.le)((0,r.oq)(this.fontNameDropDown.element,"."+Zb))?"toolbar":"quick";var d=(0,r.le)(this.parent.fontFamily.default)?p[0].text:this.parent.fontFamily.default;s=this.dropdownContent(this.parent.fontFamily.width,i,"quick"===i?"":to(p,d,"text","text")),this.fontNameDropDown.setProperties({content:s}),(0,r.le)(this.parent.fontFamily.default)?this.getEditNode().style.removeProperty("font-family"):this.getEditNode().style.fontFamily=this.parent.fontFamily.default;break;case"items":this.fontNameDropDown.setProperties({items:this.getUpdateItems(e.fontFamily.items,"FontName")})}break;case"fontSize":if(this.fontSizeDropDown)for(var f=0,g=Object.keys(e.fontSize);f<g.length;f++)switch(g[f]){case"default":case"width":var v=this.fontSizeDropDown.items;i=(0,r.le)((0,r.oq)(this.fontSizeDropDown.element,"."+Zb))?"toolbar":"quick";var y=(0,r.le)(this.parent.fontSize.default)?v[1].text:this.parent.fontSize.default;s=this.dropdownContent(this.parent.fontSize.width,i,jk(to(v,y.replace(/\s/g,""),"value","text"))),this.fontSizeDropDown.setProperties({content:s}),(0,r.le)(this.parent.fontSize.default)?this.getEditNode().style.removeProperty("font-size"):this.getEditNode().style.fontSize=this.parent.fontSize.default;break;case"items":this.fontSizeDropDown.setProperties({items:this.getUpdateItems(e.fontSize.items,"FontSize")})}break;case"format":if(this.formatDropDown)for(var C=0,b=Object.keys(e.format);C<b.length;C++)switch(b[C]){case"default":case"width":var I=this.formatDropDown.items;i=(0,r.le)((0,r.oq)(this.formatDropDown.element,"."+Zb))?"toolbar":"quick";var x=(0,r.le)(this.parent.format.default)?I[0].text:this.parent.format.default;s=this.dropdownContent(this.parent.format.width,i,"quick"===i?"":to(I,x,"text","text")),this.formatDropDown.setProperties({content:s});break;case"types":this.formatDropDown.setProperties({items:this.getUpdateItems(e.format.types,"Format")})}}},a.prototype.getEditNode=function(){return this.parent.contentModule.getEditPanel()},a.prototype.rowDropDown=function(t,e,i){!(i=(0,r.Ys)("#"+this.parent.getID()+"_"+t+"_TableRows",e)).classList.contains(Cn)&&(this.tableRowsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-rows e-icons",cssClass:jr+" "+$a+" "+Uc,itemName:"TableRows",items:sC,element:i}))},a.prototype.columnDropDown=function(t,e,i){!(i=(0,r.Ys)("#"+this.parent.getID()+"_"+t+"_TableColumns",e)).classList.contains(Cn)&&(this.tableColumnsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-columns e-icons",cssClass:jr+" "+$a+" "+Uc,itemName:"TableColumns",items:nC,element:i}))},a.prototype.cellDropDown=function(t,e,i){!(i=(0,r.Ys)("#"+this.parent.getID()+"_"+t+"_TableCell",e)).classList.contains(Cn)&&(this.tableRowsDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-cell e-icons",cssClass:jr+" "+$a+" "+Uc,itemName:"TableCell",items:UY,element:i}))},a.prototype.verticalAlignDropDown=function(t,e,i){!(i=(0,r.Ys)("#"+this.parent.getID()+"_"+t+"_TableCellVerticalAlign",e)).classList.contains(Cn)&&(this.tableCellVerticalAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-table-cell-ver-align e-icons",cssClass:jr+" "+$a+" "+Uc,itemName:"TableCellVerticalAlign",items:rC,element:i}))},a.prototype.renderDisplayDropDown=function(t,e,i,s){!(i=(0,r.Ys)("#"+this.parent.getID()+"_"+t+("display"===s?"_Display":"videolayoutoption"===s?"_VideoLayoutOption":"_AudioLayoutOption"),e)).classList.contains(Cn)&&(this.displayDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"display"===s?"e-display e-icons":"videolayoutoption"===s?"e-video-display e-icons":"e-audio-display e-icons",cssClass:jr+" "+$a+" "+Uc,itemName:"display"===s?"Display":"videolayoutoption"===s?"VideoLayoutOption":"AudioLayoutOption",items:"display"===s?eC:"videolayoutoption"===s?iC:tC,element:i}))},a.prototype.renderAlignmentDropDown=function(t,e,i,s){!(i=(0,r.Ys)("#"+this.parent.getID()+"_"+t+("align"===s?"_Align":"_VideoAlign"),e)).classList.contains(Cn)&&(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-justify-left e-icons",cssClass:jr+" "+Ak+" "+Uc,itemName:"align"===s?"Align":"VideoAlign",items:"align"===s?zY:jY,element:i}))},a.prototype.tableStylesDropDown=function(t,e,i){!(i=(0,r.Ys)("#"+this.parent.getID()+"_"+t+"_Styles",e)).classList.contains(Cn)&&(this.imageAlignDropDown=this.toolbarRenderer.renderDropDownButton({iconCss:"e-style e-icons",cssClass:jr+" "+Ak+" "+Uc,itemName:"Styles",items:this.parent.tableSettings.styles,element:i}))},a.prototype.removeDropDownClasses=function(t){(0,r.IV)([t],[Cn,jr,Ak,$a])},a.prototype.destroyDropDowns=function(){this.formatDropDown&&(this.removeDropDownClasses(this.formatDropDown.element),this.formatDropDown.destroy()),this.fontNameDropDown&&(this.removeDropDownClasses(this.fontNameDropDown.element),this.fontNameDropDown.destroy()),this.fontSizeDropDown&&(this.removeDropDownClasses(this.fontSizeDropDown.element),this.fontSizeDropDown.destroy()),this.alignDropDown&&(this.removeDropDownClasses(this.alignDropDown.element),this.alignDropDown.destroy()),this.imageAlignDropDown&&(this.removeDropDownClasses(this.imageAlignDropDown.element),this.imageAlignDropDown.destroy()),this.displayDropDown&&(this.removeDropDownClasses(this.displayDropDown.element),this.displayDropDown.destroy()),this.tableRowsDropDown&&(this.removeDropDownClasses(this.tableRowsDropDown.element),this.tableRowsDropDown.destroy()),this.tableColumnsDropDown&&(this.removeDropDownClasses(this.tableColumnsDropDown.element),this.tableColumnsDropDown.destroy()),this.tableCellVerticalAlignDropDown&&(this.removeDropDownClasses(this.tableCellVerticalAlignDropDown.element),this.tableCellVerticalAlignDropDown.destroy()),this.numberFormatListDropDown&&(this.removeDropDownClasses(this.numberFormatListDropDown.element),this.numberFormatListDropDown.destroy()),this.bulletFormatListDropDown&&(this.removeDropDownClasses(this.bulletFormatListDropDown.element),this.bulletFormatListDropDown.destroy())},a.prototype.setRtl=function(t){this.formatDropDown&&this.formatDropDown.setProperties({enableRtl:t.enableRtl}),this.fontNameDropDown&&this.fontNameDropDown.setProperties({enableRtl:t.enableRtl}),this.fontSizeDropDown&&this.fontSizeDropDown.setProperties({enableRtl:t.enableRtl}),this.alignDropDown&&this.alignDropDown.setProperties({enableRtl:t.enableRtl}),this.imageAlignDropDown&&this.imageAlignDropDown.setProperties({enableRtl:t.enableRtl}),this.displayDropDown&&this.displayDropDown.setProperties({enableRtl:t.enableRtl}),this.numberFormatListDropDown&&this.numberFormatListDropDown.setProperties({enableRtl:t.enableRtl}),this.bulletFormatListDropDown&&this.bulletFormatListDropDown.setProperties({enableRtl:t.enableRtl})},a.prototype.updateCss=function(t,e){t&&e.cssClass&&((0,r.le)(e.oldCssClass)?t.setProperties({cssClass:(t.cssClass+" "+e.cssClass).trim()}):t.setProperties({cssClass:(t.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){for(var e=[this.formatDropDown,this.fontNameDropDown,this.fontSizeDropDown,this.alignDropDown,this.imageAlignDropDown,this.displayDropDown,this.numberFormatListDropDown,this.bulletFormatListDropDown,this.tableRowsDropDown,this.tableColumnsDropDown,this.tableCellVerticalAlignDropDown],i=0;i<e.length;i++)this.updateCss(e[i],t)},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(VT,this.beforeRender,this),this.parent.on(pr,this.onIframeMouseDown,this),this.parent.on(el,this.setRtl,this),this.parent.on(Oe,this.removeEventListener,this),this.parent.on(hs,this.onPropertyChanged,this),this.parent.on(zi,this.setCssClass,this))},a.prototype.onIframeMouseDown=function(){this.parent.getToolbarElement().querySelectorAll('.e-rte-dropdown-btn[aria-expanded="true"]').length>0&&Eh(document,"mousedown")},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(pr,this.onIframeMouseDown),this.parent.off(el,this.setRtl),this.parent.off(VT,this.beforeRender),this.parent.off(Oe,this.removeEventListener),this.parent.off(hs,this.onPropertyChanged),this.parent.off(zi,this.setCssClass))},a}(),wV=function(){function a(){this.services={}}return a.prototype.register=function(t,e){(0,r.le)(this.services[""+t])&&(this.services[""+t]=e)},a.prototype.getService=function(t){if((0,r.le)(this.services[""+t]))throw"The service "+t+" is not registered";return this.services[""+t]},a}(),EV=function(){function a(){this.rendererMap={}}return a.prototype.addRenderer=function(t,e){var i=(0,r.I$)(Fe,t);(0,r.le)(this.rendererMap[""+i])&&(this.rendererMap[""+i]=e)},a.prototype.getRenderer=function(t){var e=(0,r.I$)(Fe,t);if((0,r.le)(this.rendererMap[""+e]))throw"The renderer "+e+" is not found";return this.rendererMap[""+e]},a}(),pK=function(){function a(t){this.parent=t,this.addEventListener(),this.serviceLocator=new wV,this.serviceLocator.register("rendererFactory",new EV)}return a.prototype.addEventListener=function(){this.parent.on(zg,this.toolbarClick,this),this.parent.on(fa,this.dropDownSelect,this),this.parent.on(Zg,this.renderSelection,this),this.parent.on(Oe,this.removeEventListener,this)},a.prototype.toolbarClick=function(t){if(!(0,r.le)(t.item)){if(!(0,r.le)(t.item.controlParent)){var e=t.item.controlParent.activeEle;e&&(e.tabIndex=-1)}("NumberFormatList"===t.item.command||"BulletFormatList"===t.item.command)&&(t.originalEvent.target.classList.contains("e-order-list")||t.originalEvent.target.classList.contains("e-unorder-list"))&&(t.item.command="Lists",t.item.subCommand="NumberFormatList"===t.item.subCommand?"OL":"UL"),"Lists"===t.item.command&&t.originalEvent.target.classList.contains("e-caret")&&(t.originalEvent.target.parentElement.classList.contains("e-rte-bulletformatlist-dropdown")||t.originalEvent.target.parentElement.classList.contains("e-rte-numberformatlist-dropdown"))&&(t.item.command=t.item.subCommand=null),this.parent.notify(MT,t),this.parent.notify("markdown-toolbar-click",t)}},a.prototype.dropDownSelect=function(t){if(this.parent.notify(_n,{}),!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||!t.item||"Images"!==t.item.command&&"Audios"!==t.item.command&&"Videos"!==t.item.command&&"VideoLayoutOption"!==t.item.command&&"Display"!==t.item.command&&"Table"!==t.item.command){var e=t.item.controlParent&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.tableQTBar&&this.parent.quickToolbarModule.tableQTBar.element.contains(t.item.controlParent.element)?"Table":null;this.parent.formatter.process(this.parent,t,t.originalEvent,"Lists"===t.item.command?{listStyle:t.item.value,listImage:t.item.listImage,type:t.item.subCommand}:e)}this.parent.notify(qn,{})},a.prototype.renderSelection=function(t){this.parent.notify(_n,{}),this.parent.formatter.process(this.parent,t,t.originalEvent,null),this.parent.notify(qn,{})},a.prototype.removeEventListener=function(){this.parent.off(zg,this.toolbarClick),this.parent.off(fa,this.dropDownSelect),this.parent.off(Zg,this.renderSelection),this.parent.off(Oe,this.removeEventListener)},a}(),dK=function(){function a(t,e){this.tools={},this.parent=t,this.isToolbar=!1,this.locator=e,this.isTransformChild=!1,this.renderFactory=this.locator.getService("rendererFactory"),function(a){cm.forEach(function(t,e){cm[e].text=wh(a,HY,cm[e])}),eC.forEach(function(t,e){eC[e].text=wh(a,qY,eC[e])}),tC.forEach(function(t,e){tC[e].text=wh(a,_Y,tC[e])}),iC.forEach(function(t,e){iC[e].text=wh(a,WY,iC[e])}),sC.forEach(function(t,e){sC[e].text=wh(a,GY,sC[e])}),nC.forEach(function(t,e){nC[e].text=wh(a,ZY,nC[e])}),rC.forEach(function(t,e){rC[e].text=wh(a,YY,rC[e])}),aC.forEach(function(t,e){aC[e].text=wh(a,KY,aC[e])})}(this.parent),CV(this.parent),this.renderFactory.addRenderer(Fe.Toolbar,new uK(this.parent,this.locator)),this.toolbarRenderer=this.renderFactory.getRenderer(Fe.Toolbar),this.baseToolbar=new Uk(this.parent,this.locator),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?(0,r.l7)(this.tools,Wp,_k(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Wp}return a.prototype.initializeInstance=function(){this.contentRenderer=this.renderFactory.getRenderer(Fe.Content),this.editableElement=this.contentRenderer.getEditPanel(),this.editPanel=this.contentRenderer.getPanel()},a.prototype.toolbarBindEvent=function(){this.parent.inlineMode.enable||(this.keyBoardModule=new r.nv(this.getToolbarElement(),{keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}))},a.prototype.toolBarKeyDown=function(t){switch(t.action){case"escape":this.parent.contentModule.getEditPanel().focus();break;case"enter":t.target.classList.contains("e-hor-nav")&&this.adjustContentHeight(t.target,!0)}},a.prototype.createToolbarElement=function(){this.tbElement=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar"}),(r.AR.isDevice||!this.parent.inlineMode.enable||!di())&&(this.parent.toolbarSettings.enableFloating&&!this.parent.inlineMode.enable?(this.tbWrapper=this.parent.createElement("div",{id:this.parent.getID()+"_toolbar_wrapper",innerHTML:this.tbElement.outerHTML,className:Dk}),this.tbElement=this.tbWrapper.firstElementChild,this.parent.element.insertBefore(this.tbWrapper,this.editPanel)):this.parent.element.insertBefore(this.tbElement,this.editPanel))},a.prototype.getToolbarMode=function(){var t;switch(this.parent.toolbarSettings.type){case tn.Expand:t="Extended";break;case tn.Scrollable:t="Scrollable";break;default:t="MultiRow"}return di()&&this.parent.toolbarSettings.type===tn.Expand&&(t=tn.Scrollable),t},a.prototype.checkToolbarResponsive=function(t){return!(!r.AR.isDevice||di()||(this.baseToolbar.render({container:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items,mode:this.parent.toolbarSettings.type===tn.Expand?tn.MultiRow:this.parent.toolbarSettings.type,target:t,cssClass:this.parent.getCssClass()}),this.parent.toolbarSettings.type===tn.Expand&&((0,r.cn)([t],["e-rte-tb-mobile"]),this.parent.inlineMode.enable?this.addFixedTBarClass():(0,r.cn)([t],["e-tb-static"])),this.wireEvents(),this.dropDownModule.renderDropDowns({container:t,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),this.parent.notify(Tb,{container:this.tbElement,containerType:this.parent.inlineMode.enable?"quick":"toolbar",items:this.parent.toolbarSettings.items}),0))},a.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var t=(0,r.td)('[style*="transform"]',document),e=0;e<t.length;e++)if(!(0,r.le)(t[e].contains)&&t[e].contains(this.parent.element)){this.isTransformChild=!0;break}},a.prototype.toggleFloatClass=function(t){var e,n,i=!1,s=!1,o=this.parent.floatingToolbarOffset;t&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===t.target?n=t.target.body:t&&t.target!==document?n=t.target:(i=!0,n=document.body);var l=this.getToolbarHeight()+this.getExpandTBarPopHeight();if(this.isTransformChild){e=0;var h=0,c=this.parent.element.offsetHeight;if(i){var u=window.getComputedStyle(n);h=parseFloat(u.marginTop.split("px")[0])+parseFloat(u.paddingTop.split("px")[0])}var p=this.parent.element.getBoundingClientRect().top,d=r.AR.isMSPointer&&i?window.pageYOffset:n.parentElement.scrollTop,f=n.getBoundingClientRect(),g=i?f.top+d:f.top;p>g+o||p<-c||p<0&&!(p-(i?0:g)+c>l+o)?(s=!1,(0,r.IV)([this.tbElement],[xk])):p<g+o&&(e=p<0?-p+g:g-p,e=i?e-h:e,(0,r.cn)([this.tbElement],[xk]),s=!0)}else{var v=this.parent.element.getBoundingClientRect();if(window.innerHeight<v.top)return;e=t&&t.target!==document?n.getBoundingClientRect().top:0,v.bottom<o+l+e||v.bottom<0||v.top>o+e?s=!1:(v.top<o||v.top<o+e)&&(s=!0)}s?((0,r.cn)([this.tbElement],[Gb]),(0,r.V7)(this.tbElement,{width:this.parent.element.offsetWidth+"px",top:o+e+"px"})):((0,r.IV)([this.tbElement],[Gb]),(0,r.V7)(this.tbElement,{top:"0px",width:"100%"}))},a.prototype.renderToolbar=function(){if(this.initializeInstance(),this.createToolbarElement(),!this.checkToolbarResponsive(this.tbElement)){this.parent.inlineMode.enable?this.parent.notify("renderInlineToolbar",{}):(this.baseToolbar.render({container:"toolbar",items:this.parent.toolbarSettings.items,mode:this.getToolbarMode(),target:this.tbElement,cssClass:this.parent.getCssClass()}),this.parent.inlineMode.enable||(this.parent.toolbarSettings.enableFloating&&(this.checkIsTransformChild(),this.toggleFloatClass()),(0,r.cn)([this.parent.element],[gV]),this.parent.toolbarSettings.type===tn.Expand&&(0,r.cn)([this.parent.element],[ZF]))),this.wireEvents(),this.parent.inlineMode.enable&&!di()&&this.addFixedTBarClass(),this.parent.inlineMode.enable||(this.dropDownModule.renderDropDowns({container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.parent.notify(Tb,{container:this.tbElement,containerType:"toolbar",items:this.parent.toolbarSettings.items}),this.refreshToolbarOverflow());var t=this.parent.element.querySelector("."+Sh),e=this.parent.element.querySelector(".e-source-content");(!this.parent.iframeSettings.enable&&!(0,r.le)(t)&&"block"===t.style.display||this.parent.iframeSettings.enable&&!(0,r.le)(e)&&"block"===e.style.display)&&(this.parent.notify(_g,{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),this.parent.disableToolbarItem(this.parent.toolbarSettings.items))}},a.prototype.addFixedTBarClass=function(){(0,r.cn)([this.tbElement],[GF])},a.prototype.removeFixedTBarClass=function(){(0,r.IV)([this.tbElement],[GF])},a.prototype.showFixedTBar=function(){(0,r.cn)([this.tbElement],["e-show"]),r.AR.isIos&&(0,r.cn)([this.tbElement],[aV])},a.prototype.hideFixedTBar=function(){this.isToolbar?this.isToolbar=!1:(0,r.IV)([this.tbElement],["e-show",aV])},a.prototype.updateItem=function(t){var e=this.tools[t.updateItem.toLocaleLowerCase()];"en-US"!==this.parent.locale&&(e.tooltip=uC(t.updateItem.toLocaleLowerCase(),this.locator));var s=dC(pC(this.tools[t.targetItem.toLocaleLowerCase()].subCommand),t.baseToolbar.toolbarObj.items)[0];if((0,r.le)(s))this.addTBarItem(t,0);else{var n=this.parent.inlineMode.enable?"_quick_":"_toolbar_";t.baseToolbar.toolbarObj.items[s].id=this.parent.getID()+n+e.id,t.baseToolbar.toolbarObj.items[s].prefixIcon=e.icon,t.baseToolbar.toolbarObj.items[s].tooltipText=e.tooltip,t.baseToolbar.toolbarObj.items[s].subCommand=e.subCommand,t.baseToolbar.toolbarObj.dataBind(),t.baseToolbar.toolbarObj.refreshOverflow()}},a.prototype.updateToolbarStatus=function(t){this.tbElement&&(!this.parent.inlineMode.enable||!di()&&r.AR.isDevice)&&function(a,t,e){CV(e);for(var i=a.dropDownModule,s=a.args,o=0,l=Object.keys(a.args);o<l.length;o++)for(var h=l[o],c=0;c<a.tbItems.length;c++){var u=a.tbItems[c].subCommand,p=u&&u.toLocaleLowerCase();if(u&&p===h||"UL"===u&&"unorderedlist"===h||"OL"===u&&"orderedlist"===h||"pre"===p&&"insertcode"===h||"NumberFormatList"===u&&"numberFormatList"===h||"BulletFormatList"===u&&"bulletFormatList"===h)if("boolean"==typeof s[""+h])!0===s[""+h]?(0,r.cn)([a.tbElements[c]],[jp]):(0,r.IV)([a.tbElements[c]],[jp]);else if(("string"==typeof s[""+h]||null===s[""+h])&&zk(h,a.parent.toolbarSettings.items)>=-1){var d=s[""+h]?s[""+h]:"",f="";switch(h){case"formats":if((0,r.le)(i.formatDropDown)||t||!(0,r.le)(i.formatDropDown)&&i.formatDropDown.isDestroyed)break;var g=a.parent.format.types,m=(0,r.le)(a.parent.format.default)?g[0].text:a.parent.format.default;f="empty"===d?"":to(g,d,"subCommand","text"),i.formatDropDown.content='<span style="display: inline-flex;width:'+a.parent.format.width+'" ><span class="e-rte-dropdown-btn-text'+((0,r.le)(a.parent.cssClass)?"":" "+a.parent.cssClass)+'">'+((0,r.le)(f)?m:f)+"</span></span>",i.formatDropDown.dataBind();break;case"alignments":if((0,r.le)(i.alignDropDown)||!(0,r.le)(i.alignDropDown)&&i.alignDropDown.isDestroyed)break;f=to(cm,d,"subCommand","iconCss"),i.alignDropDown.iconCss=(0,r.le)(f)?"e-icons e-justify-left":f,i.alignDropDown.dataBind();break;case"fontname":if((0,r.le)(i.fontNameDropDown)||t||!(0,r.le)(i.fontNameDropDown)&&i.fontNameDropDown.isDestroyed)break;var y=a.parent.fontFamily.items;f="empty"===d?"":to(y,d,"value","text");var C=(0,r.le)(a.parent.fontFamily.default)?y[0].text:a.parent.fontFamily.default,b=(0,r.le)(f)?C:f;i.fontNameDropDown.content='<span style="display: inline-flex;width:'+a.parent.fontFamily.width+'" ><span class="e-rte-dropdown-btn-text'+((0,r.le)(a.parent.cssClass)?"":" "+a.parent.cssClass)+'">'+b+"</span></span>",i.fontNameDropDown.dataBind();break;case"fontsize":if((0,r.le)(i.fontSizeDropDown)||!(0,r.le)(i.fontSizeDropDown)&&i.fontSizeDropDown.isDestroyed)break;var S=a.parent.fontSize.items,I=(0,r.le)(a.parent.fontSize.default)?S[1].text:a.parent.fontSize.default;f="empty"===d?"":to(S,""===d?I.replace(/\s/g,""):d,"value","text"),i.fontSizeDropDown.content='<span style="display: inline-flex;width:'+a.parent.fontSize.width+'" ><span class="e-rte-dropdown-btn-text'+((0,r.le)(a.parent.cssClass)?"":" "+a.parent.cssClass)+'">'+jk(f)+"</span></span>",i.fontSizeDropDown.dataBind();break;case"bulletFormatList":case"numberFormatList":(0,r.IV)([a.tbElements[c]],[jp])}}}}({args:t,dropDownModule:this.dropDownModule,parent:this.parent,tbElements:(0,r.td)("."+yh,this.tbElement),tbItems:this.baseToolbar.toolbarObj.items},!!this.parent.inlineMode.enable,this.parent)},a.prototype.fullScreen=function(t){this.parent.fullScreenModule.showFullScreen(t)},a.prototype.hideScreen=function(t){this.parent.fullScreenModule.hideFullScreen(t)},a.prototype.getBaseToolbar=function(){return this.baseToolbar},a.prototype.addTBarItem=function(t,e){t.baseToolbar.toolbarObj.addItems([t.baseToolbar.getObject(t.updateItem,"toolbar")],e)},a.prototype.enableTBarItems=function(t,e,i,s){var n=dC(pC(e),t.toolbarObj.items);this.tbItems=(0,r.td)("."+yh,t.toolbarObj.element);for(var o=0;o<n.length;o++){var l=this.tbItems[n[o]];l&&t.toolbarObj.enableItems(l,i)}!(0,r.Ys)("."+Sh,this.parent.element)&&!s&&Up(t,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus())},a.prototype.removeTBarItems=function(t){(0,r.le)(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var e=dC(pC(t),this.baseToolbar.toolbarObj.items);this.tbItems=(0,r.td)("."+yh,this.parent.inlineMode.enable?this.baseToolbar.toolbarObj.element:this.parent.element);for(var i=0;i<e.length;i++)this.baseToolbar.toolbarObj.removeItems(this.tbItems[e[i]])},a.prototype.getExpandTBarPopHeight=function(){var t=0;if(this.parent.toolbarSettings.type===tn.Expand&&this.tbElement.classList.contains("e-extended-toolbar")){var e=(0,r.Ys)(".e-toolbar-extended",this.tbElement);e&&this.tbElement.classList.contains("e-expand-open")||e&&e.classList.contains("e-popup-open")?((0,r.cn)([e],[JF]),t+=e.offsetHeight,(0,r.IV)([e],[JF])):(0,r.IV)([this.tbElement],[Gc])}return t},a.prototype.getToolbarHeight=function(){return this.tbElement.offsetHeight},a.prototype.getToolbarElement=function(){return(0,r.Ys)("."+Ub,this.parent.element)},a.prototype.refreshToolbarOverflow=function(){this.parent.element.classList.remove(Wc),this.baseToolbar.toolbarObj.refreshOverflow(),this.parent.enableRtl&&this.parent.element.classList.add(Wc)},a.prototype.isToolbarDestroyed=function(){return this.baseToolbar.toolbarObj&&!this.baseToolbar.toolbarObj.isDestroyed},a.prototype.destroyToolbar=function(){if(this.isToolbarDestroyed()){this.parent.unWireScrollElementsEvents(),this.unWireEvents(),this.parent.notify(NT,{}),this.dropDownModule.destroyDropDowns(),this.baseToolbar.toolbarObj.destroy(),this.removeEventListener(),(0,r.IV)([this.parent.element],[gV]),(0,r.IV)([this.parent.element],[ZF]);var t=(0,r.Ys)("."+Dk,this.parent.element),e=(0,r.Ys)("."+Ub,this.parent.element);(0,r.le)(t)?(0,r.le)(e)||(0,r.og)(e):(0,r.og)(t)}},a.prototype.destroy=function(){(0,r.le)(this.parent)||this.isToolbarDestroyed()&&(this.destroyToolbar(),this.keyBoardModule&&this.keyBoardModule.destroy())},a.prototype.moduleDestroy=function(){this.parent=null,this.baseToolbar.parent=null,this.toolbarActionModule.parent=null,this.dropDownModule.parent=null},a.prototype.scrollHandler=function(t){this.parent.inlineMode.enable||this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(t.args)},a.prototype.getDOMVisibility=function(t){return!(!t.offsetParent&&0===t.offsetWidth&&0===t.offsetHeight)},a.prototype.mouseDownHandler=function(){r.AR.isDevice&&this.parent.inlineMode.enable&&!di()&&this.showFixedTBar()},a.prototype.focusChangeHandler=function(){r.AR.isDevice&&this.parent.inlineMode.enable&&!di()&&(this.isToolbar=!1,this.hideFixedTBar())},a.prototype.dropDownBeforeOpenHandler=function(){this.isToolbar=!0},a.prototype.tbFocusHandler=function(t){var e=document.activeElement,i=(0,r.oq)(e,".e-rte-toolbar");if(e===this.parent.getToolbarElement()||i===this.parent.getToolbarElement())for(var s=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav"),n=0;n<s.length;n++)(0,r.le)(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?s[n].setAttribute("tabindex","0"):s[n].setAttribute("tabindex","1")},a.prototype.toolbarClickHandler=function(t){var e=(0,r.oq)(t.originalEvent.target,".e-hor-nav");this.adjustContentHeight(e,!1)},a.prototype.adjustContentHeight=function(t,e){if(t&&this.parent.toolbarSettings.type===tn.Expand&&!(0,r.le)(t)){var i=this.tbElement.querySelector(".e-toolbar-extended");(0,r.le)(i)||((0,r.V7)(i,{maxHeight:"",display:"block"}),(0,r.V7)(i,{maxHeight:i.offsetHeight+"px",display:""}));var s=t.classList.contains("e-nav-active"),n=e?!s:!!s;n?(0,r.cn)([this.tbElement],[Gc]):(0,r.IV)([this.tbElement],[Gc]),this.parent.setContentHeight("toolbar",n)}else(r.AR.isDevice||this.parent.inlineMode.enable)&&(this.isToolbar=!0);(0,r.le)(t)&&this.parent.toolbarSettings.type===tn.Expand&&(0,r.IV)([this.tbElement],[Gc])},a.prototype.wireEvents=function(){this.parent.inlineMode.enable&&di()||r.bi.add(this.tbElement,"focusin",this.tbFocusHandler,this)},a.prototype.unWireEvents=function(){r.bi.remove(this.tbElement,"focusin",this.tbFocusHandler)},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.dropDownModule=new SV(this.parent,this.locator),this.toolbarActionModule=new pK(this.parent),this.parent.on(ui,this.renderToolbar,this),this.parent.on($o,this.scrollHandler,this),this.parent.on(xb,this.toolbarBindEvent,this),this.parent.on(Ja,this.updateToolbarStatus,this),this.parent.on(hs,this.onPropertyChanged,this),this.parent.on(Ib,this.onRefresh,this),this.parent.on(Oe,this.destroy,this),this.parent.on(kb,this.fullScreen,this),this.parent.on(Ab,this.hideScreen,this),this.parent.on(_g,this.updateItem,this),this.parent.on(Fb,this.dropDownBeforeOpenHandler,this),this.parent.on(BF,this.parent.setContentHeight,this.parent),this.parent.on(Kg,this.focusChangeHandler,this),this.parent.on(Wn,this.mouseDownHandler,this),this.parent.on(Gg,this.mouseDownHandler,this),this.parent.on(zi,this.setCssClass,this),this.parent.on(Bi,this.moduleDestroy,this),!this.parent.inlineMode.enable&&!di()&&this.parent.on(zg,this.toolbarClickHandler,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ui,this.renderToolbar),this.parent.off($o,this.scrollHandler),this.parent.off(xb,this.toolbarBindEvent),this.parent.off(Ja,this.updateToolbarStatus),this.parent.off(hs,this.onPropertyChanged),this.parent.off(Ib,this.onRefresh),this.parent.off(Oe,this.destroy),this.parent.off(kb,this.parent.fullScreenModule.showFullScreen),this.parent.off(Ab,this.parent.fullScreenModule.hideFullScreen),this.parent.off(_g,this.updateItem),this.parent.off(Fb,this.dropDownBeforeOpenHandler),this.parent.off(BF,this.parent.setContentHeight),this.parent.off(Kg,this.focusChangeHandler),this.parent.off(Wn,this.mouseDownHandler),this.parent.off(Gg,this.mouseDownHandler),this.parent.off(zi,this.setCssClass),this.parent.off(Bi,this.moduleDestroy),!this.parent.inlineMode.enable&&!di()&&this.parent.off(zg,this.toolbarClickHandler))},a.prototype.setCssClass=function(t){this.toolbarObj&&t.cssClass&&((0,r.le)(t.oldCssClass)?this.toolbarObj.setProperties({cssClass:(this.toolbarObj.cssClass+" "+t.cssClass).trim()}):this.toolbarObj.setProperties({cssClass:(this.toolbarObj.cssClass.replace(t.oldCssClass,"").trim()+" "+t.cssClass).trim()}))},a.prototype.onRefresh=function(){this.parent.inlineMode.enable||this.refreshToolbarOverflow(),this.parent.setContentHeight("",!0)},a.prototype.onPropertyChanged=function(t){if(!(0,r.le)(t.newProp.inlineMode))for(var e=0,i=Object.keys(t.newProp.inlineMode);e<i.length;e++)switch(i[e]){case"enable":this.refreshToolbar()}t.module===this.getModuleName()&&this.refreshToolbar()},a.prototype.refreshToolbar=function(){(0,r.le)(this.baseToolbar.toolbarObj)&&(this.baseToolbar=this.parent.getBaseToolbarObject());var t=(0,r.Ys)("."+Dk,this.parent.element);((0,r.Ys)("."+Ub,this.parent.element)||t)&&this.destroyToolbar(),this.parent.toolbarSettings.enable&&(this.addEventListener(),this.renderToolbar(),this.parent.wireScrollElementsEvents(),(0,r.Ys)("."+Sh,this.parent.element)||Up(this.baseToolbar,this.parent.formatter.editorManager.undoRedoManager.getUndoStatus()),this.parent.notify(il,{}))},a.prototype.getModuleName=function(){return"toolbar"},a}(),fK=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),mC=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},gK={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},Gk=function(a){function t(i,s){var n=a.call(this,s,i)||this;return n.keyPressHandler=function(o){for(var l=o.altKey,h=o.ctrlKey,c=o.shiftKey,u=o.metaKey,p=o.which,f=0,g=Object.keys(n.keyConfigs);f<g.length;f++)for(var m=g[f],y=0,C=n.keyConfigs[""+m].split(",");y<C.length;y++){var S=e.getKeyConfigData(C[y].trim());l===S.altKey&&(h===S.ctrlKey||u)&&c===S.shiftKey&&p===S.keyCode&&(o.action=m)}n.keyAction&&n.keyAction(o)},n.bind(),n}var e;return fK(t,a),e=t,t.prototype.destroy=function(){this.unwireEvents(),a.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(i,s){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(i){if(i in this.configCache)return this.configCache[""+i];var s=i.toLowerCase().split("+"),n={altKey:-1!==s.indexOf("alt"),ctrlKey:-1!==s.indexOf("ctrl"),shiftKey:-1!==s.indexOf("shift"),keyCode:null};return n.keyCode=s[s.length-1].length>1&&Number(s[s.length-1])?Number(s[s.length-1]):e.getKeyCode(s[s.length-1]),e.configCache[""+i]=n,n},t.getKeyCode=function(i){return gK[""+i]||i.toUpperCase().charCodeAt(0)},t.configCache={},mC([(0,r.Z9)({})],t.prototype,"keyConfigs",void 0),mC([(0,r.Z9)("keyup")],t.prototype,"eventName",void 0),mC([(0,r.ju)()],t.prototype,"keyAction",void 0),e=mC([r.Zl],t)}(r.XY),IV=function(){function a(t,e){this.tools={},this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.addEventListener(),this.parent.toolbarSettings&&Object.keys(this.parent.toolbarSettings.itemConfigs).length>0?(0,r.l7)(this.tools,Wp,_k(this.parent.toolbarSettings.itemConfigs),!0):this.tools=Wp}return a.prototype.initializeInstance=function(){this.toolbarRenderer=this.renderFactory.getRenderer(Fe.Toolbar)},a.prototype.renderColorPickerInput=function(t){var e=this;this.initializeInstance();var n,o,i=t.containerType,s=t.container;Vk.forEach(function(l){if(-1!==zk(l,t.items))switch(l){case"fontcolor":n=e.parent.getID()+"_"+i+"_FontColor_Target";var h=e.parent.createElement("input");if(h.id=n,h.classList.add("e-rte-fontcolor-element"),!(0,r.le)(e.parent.cssClass))for(var c=e.parent.cssClass.split(" "),u=0;u<c.length;u++)""!==c[u].trim()&&h.classList.add(c[u]);document.body.appendChild(h),o={cssClass:e.tools[l.toLocaleLowerCase()].icon+" "+Xi+" "+Yb+e.parent.getCssClass(!0),value:e.tools[l.toLocaleLowerCase()].value,command:e.tools[l.toLocaleLowerCase()].command,subCommand:e.tools[l.toLocaleLowerCase()].subCommand,element:(0,r.Ys)("#"+e.parent.getID()+"_"+i+"_FontColor",s),target:n},e.fontColorPicker=e.toolbarRenderer.renderColorPicker(o,"fontcolor"),e.fontColorDropDown=e.toolbarRenderer.renderColorPickerDropDown(o,"fontcolor",e.fontColorPicker);break;case"backgroundcolor":n=e.parent.getID()+"_"+i+"_BackgroundColor_Target";var p=e.parent.createElement("input");if(p.id=n,p.classList.add("e-rte-backgroundcolor-element"),!(0,r.le)(e.parent.cssClass))for(c=e.parent.cssClass.split(" "),u=0;u<c.length;u++)""!==c[u].trim()&&p.classList.add(c[u]);document.body.appendChild(p),o={cssClass:e.tools[l.toLocaleLowerCase()].icon+" "+Xi+" "+Yb+e.parent.getCssClass(!0),value:e.tools[l.toLocaleLowerCase()].value,command:e.tools[l.toLocaleLowerCase()].command,subCommand:e.tools[l.toLocaleLowerCase()].subCommand,element:(0,r.Ys)("#"+e.parent.getID()+"_"+i+"_BackgroundColor",s),target:n},e.backgroundColorPicker=e.toolbarRenderer.renderColorPicker(o,"backgroundcolor"),e.backgroundColorDropDown=e.toolbarRenderer.renderColorPickerDropDown(o,"backgroundcolor",e.backgroundColorPicker,e.defaultColorPicker)}}),this.parent.inlineMode.enable&&this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.destroy=function(){this.removeEventListener(),this.destroyColorPicker()},a.prototype.destroyColorPicker=function(){var t;this.fontColorPicker&&!this.fontColorPicker.isDestroyed&&this.fontColorPicker.destroy(),this.backgroundColorPicker&&!this.backgroundColorPicker.isDestroyed&&this.backgroundColorPicker.destroy(),this.fontColorDropDown&&!this.fontColorDropDown.isDestroyed&&((t=this.fontColorDropDown.element.querySelector(".e-rte-color-content"))&&(0,r.og)(t),this.fontColorDropDown.destroy()),this.backgroundColorDropDown&&!this.backgroundColorDropDown.isDestroyed&&((t=this.backgroundColorDropDown.element.querySelector(".e-rte-color-content"))&&(this.defaultColorPicker=t.children[0].style.borderBottomColor,(0,r.og)(t)),this.backgroundColorDropDown.destroy())},a.prototype.setRtl=function(t){this.fontColorPicker&&(this.fontColorPicker.setProperties({enableRtl:t.enableRtl}),this.fontColorDropDown.setProperties({enableRtl:t.enableRtl})),this.backgroundColorPicker&&(this.backgroundColorPicker.setProperties({enableRtl:t.enableRtl}),this.backgroundColorDropDown.setProperties({enableRtl:t.enableRtl}))},a.prototype.setCssClass=function(t){this.updateCss(this.fontColorPicker,this.fontColorDropDown,t),this.updateCss(this.backgroundColorPicker,this.backgroundColorDropDown,t)},a.prototype.updateCss=function(t,e,i){t&&i.cssClass&&((0,r.le)(i.oldCssClass)?(t.setProperties({cssClass:(t.cssClass+" "+i.cssClass).trim()}),e.setProperties({cssClass:(e.cssClass+" "+i.cssClass).trim()})):(t.setProperties({cssClass:(t.cssClass.replace(i.oldCssClass,"").replace("  "," ").trim()+" "+i.cssClass).trim()}),e.setProperties({cssClass:(e.cssClass.replace(i.oldCssClass,"").replace("  "," ").trim()+" "+i.cssClass).trim()})))},a.prototype.addEventListener=function(){this.parent.on(MF,this.renderColorPickerInput,this),this.parent.on(el,this.setRtl,this),this.parent.on(Oe,this.destroy,this),this.parent.on(NT,this.destroyColorPicker,this),this.parent.on(hs,this.onPropertyChanged,this),this.parent.on(zi,this.setCssClass,this)},a.prototype.onPropertyChanged=function(t){for(var e=t.newProp,s=0,n=Object.keys(e);s<n.length;s++)switch(n[s]){case"fontColor":if(this.fontColorPicker)for(var l=0,h=Object.keys(e.fontColor);l<h.length;l++)switch(h[l]){case"default":this.fontColorPicker.setProperties({value:e.fontColor.default}),this.fontColorDropDown.element.querySelector("."+this.tools.fontcolor.icon).style.borderBottomColor=e.fontColor.default;break;case"mode":this.fontColorPicker.setProperties({mode:e.fontColor.mode});break;case"columns":this.fontColorPicker.setProperties({columns:e.fontColor.columns});break;case"colorCode":this.fontColorPicker.setProperties({presetColors:e.fontColor.colorCode});break;case"modeSwitcher":this.fontColorPicker.setProperties({modeSwitcher:e.fontColor.modeSwitcher})}break;case"backgroundColor":if(this.backgroundColorPicker)for(var p=0,d=Object.keys(e.backgroundColor);p<d.length;p++)switch(d[p]){case"default":this.backgroundColorPicker.setProperties({value:e.backgroundColor.default}),this.backgroundColorDropDown.element.querySelector("."+this.tools.backgroundcolor.icon).style.borderBottomColor=e.backgroundColor.default;break;case"mode":this.backgroundColorPicker.setProperties({mode:e.backgroundColor.mode});break;case"columns":this.backgroundColorPicker.setProperties({columns:e.backgroundColor.columns});break;case"colorCode":this.backgroundColorPicker.setProperties({presetColors:e.backgroundColor.colorCode});break;case"modeSwitcher":this.backgroundColorPicker.setProperties({modeSwitcher:e.backgroundColor.modeSwitcher})}}},a.prototype.removeEventListener=function(){this.parent.off(MF,this.renderColorPickerInput),this.parent.off(Oe,this.destroy),this.parent.off(el,this.setRtl),this.parent.off(NT,this.destroyColorPicker),this.parent.off(hs,this.onPropertyChanged),this.parent.off(zi,this.setCssClass)},a}(),CK=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function Ts(){var a=!1;return r.AR.isDevice&&r.AR.isIos&&(a=!0),a}function xh(a,t){if("BODY"===a.nodeName&&!(0,r.le)(t)){var e=top.window.document.querySelector(t);(0,r.le)(e)||e.contentWindow.focus()}}var xK=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(HT,this.commandCallBack,this),this.parent.on(Oe,this.removeEventListener,this)},a.prototype.commandCallBack=function(t){var e=!(0,r.le)(t.requestType)&&"FormatPainter"===t.requestType&&"format-copy"===t.action;!(0,r.le)(t)&&!(0,r.le)(t.requestType)&&"Undo"!==t.requestType&&"Redo"!==t.requestType&&!e&&this.parent.formatter.saveData(),this.parent.notify(Qo,{args:t}),this.parent.notify("count",{})},a.prototype.removeEventListener=function(){this.parent.off(HT,this.commandCallBack),this.parent.off(Oe,this.removeEventListener)},a}(),Yk="keydown",Zp="action",vC="format-type",Qi="keydown-handler",TV="list-type",al="keyup-handler",um="keyup",Yc="model_changed_plugin",yC="model_changed",kV="ms_word_cleanup_plugin",DV="onBegin",LV="actionBegin",Kk="format_painter_actions",OV="emoji_picker_actions",RV=function(){function a(){}return a.prototype.process=function(t,e,i,s){var h,n=this,o=t.contentModule.getDocument().getSelection(),l=o.rangeCount>0?o.getRangeAt(o.rangeCount-1):null,c=!(0,r.le)(s)&&!(0,r.le)(s.cssClass)&&"e-video-inline"!==s.cssClass;if("HTML"===t.editorMode&&!(0,r.le)(e)&&!c&&((0,r.le)(e.name)||!(0,r.le)(e.name)&&"showDialog"!==e.name)&&(h=this.editorManager.nodeSelection.save(l,t.contentModule.getDocument())),(0,r.le)(e)||!e.item.command||"Table"===e.item.command||"Actions"===e.item.command||"Links"===e.item.command||"Images"===e.item.command||"Files"===e.item.command||"Audios"===e.item.command||"Videos"===e.item.command||"EmojiPicker"===e.item.command||!l||t.contentModule.getEditPanel().contains(this.getAncestorNode(l.commonAncestorContainer))||t.contentModule.getEditPanel()===l.commonAncestorContainer||t.contentModule.getPanel()===l.commonAncestorContainer){if(!(0,r.le)(e)&&-1!==t.maxLength&&!(0,r.le)(e.item.command)){var u=0;"Links"===e.item.command&&(u=0===s.text.length?s.url.length:s.text.length),("Images"===e.item.command||"Videos"===e.item.command||"Table"===e.item.command||"Files"===e.item.command)&&(u=1);var p=t.getText().trim().replace(/(\r\n|\n|\r)/gm,"").replace(/\u200B/g,"").length,d=t.getSelection().length;if(!(-1===t.maxLength||p-d+u<=t.maxLength))return}if((0,r.le)(e)){var g=i.action;if((0,r.l7)(e={},e,{originalEvent:i,cancel:!1,requestType:g||i.key+"Key",itemCollection:s},!0),"tab"!==g&&"enter"!==g&&"space"!==g&&"escape"!==g&&("Markdown"===t.editorMode&&"insert-table"===g&&(s={headingText:t.localeObj.getConstant("TableHeadingText"),colText:t.localeObj.getConstant("TableColText")}),t.trigger(dr,e,function(y){y.cancel&&("paste"===g||"cut"===g||"copy"===g)&&i.preventDefault()})),!e.cancel){var v=!!(0,r.le)(t.tableModule)||!!t.tableModule&&t.tableModule.ensureInsideTableList;(9===i.which&&v||9!==i.which)&&(13===i.which&&"HTML"===t.editorMode&&(s={enterAction:t.enterKey}),this.editorManager.observer.notify("keydown"===i.type?Yk:um,{event:i,callBack:this.onSuccess.bind(this,t),value:s,enterAction:t.enterKey}))}}else!(0,r.le)(e)&&e.item.command&&e.item.subCommand&&(e.item.command!==e.item.subCommand&&"Font"!==e.item.command||("FontName"===e.item.subCommand||"FontSize"===e.item.subCommand)&&"dropDownSelect"===e.name||("BackgroundColor"===e.item.subCommand||"FontColor"===e.item.subCommand)&&"colorPickerChanged"===e.name||"FormatPainter"===e.item.subCommand||"EmojiPicker"===e.item.subCommand)&&((0,r.l7)(e,e,{requestType:e.item.subCommand,cancel:!1,itemCollection:s,selectType:e.name},!0),t.trigger(dr,e,function(y){if(!y.cancel){var C=!(0,r.le)(y.requestType)&&"FormatPainter"===y.requestType&&"format-copy"===y.name,b=!(0,r.le)(y.requestType)&&"FormatPainter"===y.requestType&&"format-paste"===y.name;(0===n.getUndoRedoStack().length&&"Links"!==y.item.command&&"Images"!==y.item.command&&!C||b)&&n.saveData(),t.isBlur=!1,t.contentModule.getEditPanel().focus(),"HTML"===t.editorMode&&!c&&((0,r.le)(e.selectType)||!(0,r.le)(e.selectType)&&"showDialog"!==e.selectType)&&h.restore();var S=y.item.subCommand.toLocaleLowerCase();"paste"===S||"cut"===S||"copy"===S?t.clipboardAction(S,i):(n.editorManager.observer.notify($g,{subCommand:y.item.subCommand}),n.editorManager.execCommand(y.item.command,y.item.subCommand,i,n.onSuccess.bind(n,t),y.item.value,"Pre"===y.item.subCommand&&"dropDownSelect"===y.selectType?{name:y.selectType}:s,"#"+t.getID()+" iframe",t.enterKey))}}));((0,r.le)(i)||i&&"copy"!==i.action)&&this.enableUndo(t)}},a.prototype.getAncestorNode=function(t){return 3===t.nodeType?t.parentNode:t},a.prototype.onKeyHandler=function(t,e){var i=this;this.editorManager.observer.notify(um,{event:e,callBack:function(){t.notify(Hg,{}),i.enableUndo(t)}})},a.prototype.onSuccess=function(t,e){t.notify(Hg,{}),e&&((0,r.le)(e.event)||"copy"!==e.event.action)&&(this.enableUndo(t),t.notify(HT,e)),t.trigger(ga,e,function(i){if(t.setPlaceHolder(),("Images"===i.requestType||"Links"===i.requestType||"Audios"===i.requestType||"Videos"===i.requestType)&&"HTML"===t.editorMode){if("Links"===i.requestType&&i.event&&"keydown"===i.event.type&&32===i.event.keyCode)return;t.notify(Jo,{args:i.event,type:i.requestType,isNotify:!0,elements:i.elements})}"VideosPlayPause"===i.requestType&&t.notify("editAreaClick",{args:event}),t.autoResize()})},a.prototype.saveData=function(t){this.editorManager.undoRedoManager.saveData(t)},a.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},a.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},a.prototype.enableUndo=function(t){var e=this.getUndoStatus();!t.inlineMode.enable||r.AR.isDevice&&!di()?t.toolbarModule&&Up(t.toolbarModule.baseToolbar,e):Up(t.quickToolbarModule.inlineQTBar.quickTBarObj,e)},a}(),DK={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-audio":"ctrl+shift+a","insert-video":"ctrl+alt+v","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46","format-copy":"alt+shift+c","format-paste":"alt+shift+v"},jV=["BR","IMG"],Jk="INSERT-IMAGE",qV="INSERT-AUDIO",_V="INSERT-VIDEO",WV="INSERT-TABLE",UV="INSERT-LINK",GV="INSERT-ROW",ZV="INSERT-COLUMN",YV="DELETE-ROW",KV="DELETE-COLUMN",XV="REMOVE-TABLE",QV="TABLE-HEADER",JV="TABLE_VERTICAL_ALIGN",$V="TABLE_MERGE",eH="TABLE_VERTICAL_SPLIT",tH="TABLE_HORIZONTAL_SPLIT",iH="alignment-type",sH="indent-type",Kc=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video","body"],so=["td","th"],pm=["table","tbody","td","tfoot","th","thead","tr"],nH="selection-type",rH="inserthtml-type",aH="insert-text-type",oH="clear-type",qK=["area","base","br","embed","hr","img","input","param","source","track","wbr","iframe","td","table"],Sn=function(){function a(){this.startNodeName=[],this.endNodeName=[]}return a.prototype.saveInstance=function(t,e){return this.range=t.cloneRange(),this.rootNode=this.documentFromRange(t),this.body=e,this.startContainer=this.getNodeArray(t.startContainer,!0),this.endContainer=this.getNodeArray(t.endContainer,!1),this.startOffset=t.startOffset,this.endOffset=t.endOffset,this.html=this.body.innerHTML,this},a.prototype.documentFromRange=function(t){return 9===t.startContainer.nodeType?t.startContainer:t.startContainer.ownerDocument},a.prototype.getRange=function(t){var e=this.get(t),i=e&&e.rangeCount>0?e.getRangeAt(e.rangeCount-1):t.createRange();return i.startContainer!==t||i.endContainer!==t||i.startOffset||i.endOffset||(i.setStart(t.body,0),i.collapse(!0)),i},a.prototype.get=function(t){return t.defaultView.getSelection()},a.prototype.save=function(t,e){return t=t?t.cloneRange():this.getRange(e),this.saveInstance(t,e.body)},a.prototype.getIndex=function(t){var i=0;if(t=t.previousSibling||"BR"!==t.tagName?t.previousSibling:t)for(;t;null)i++,t=t.previousSibling;return i},a.prototype.isChildNode=function(t,e){for(var i=0;i<e.childNodes.length;i++)if(t.indexOf(e.childNodes[i])>-1)return!0;return!1},a.prototype.getNode=function(t,e,i){return e!==t||3!==t.nodeType&&t.firstChild&&-1===i.indexOf(t.firstChild)&&!this.isChildNode(i,t)?-1===i.indexOf(t.firstChild)&&t.firstChild&&!this.isChildNode(i,t)?t.firstChild:t.nextSibling?t.nextSibling:t.parentNode?t.parentNode:null:null},a.prototype.getNodeCollection=function(t){var e=t.startContainer.childNodes[t.startOffset]||t.startContainer,i=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if((e===i||"BR"===e.nodeName&&e===t.endContainer.childNodes[t.endOffset])&&0===e.childNodes.length)return[e];if(t.startOffset===t.endOffset&&0!==t.startOffset&&"PRE"===t.startContainer.nodeName)return["BR"===e.nodeName||"#text"===e.nodeName?e:e.childNodes[0]];var s=[];do{-1===s.indexOf(e)&&s.push(e),e=this.getNode(e,i,s)}while(e);return s},a.prototype.getParentNodeCollection=function(t){return this.getParentNodes(this.getNodeCollection(t),t)},a.prototype.getParentNodes=function(t,e){t=t.reverse();for(var i=0;i<t.length;i++)-1!==t.indexOf(t[i].parentNode)||3===t[i].nodeType&&e.startContainer!==e.endContainer&&e.startContainer.parentNode!==e.endContainer.parentNode?(t.splice(i,1),i--):3===t[i].nodeType&&(t[i]=t[i].parentNode);return t},a.prototype.getSelectionNodeCollection=function(t){return this.getSelectionNodes(this.getNodeCollection(t))},a.prototype.getSelectionNodeCollectionBr=function(t){return this.getSelectionNodesBr(this.getNodeCollection(t))},a.prototype.getSelectionNodes=function(t){t=t.reverse();for(var e=new RegExp(String.fromCharCode(8203),"g"),i=0;i<t.length;i++)(3!==t[i].nodeType||""===t[i].textContent.trim()||1===t[i].textContent.length&&t[i].textContent.match(e))&&(t.splice(i,1),i--);return t.reverse()},a.prototype.getSelectionNodesBr=function(t){t=t.reverse();for(var e=new RegExp(String.fromCharCode(8203),"g"),i=0;i<t.length;i++)"BR"!==t[i].nodeName&&(3!==t[i].nodeType||""===t[i].textContent.trim()||1===t[i].textContent.length&&t[i].textContent.match(e))&&(t.splice(i,1),i--);return t.reverse()},a.prototype.getInsertNodeCollection=function(t){return this.getInsertNodes(this.getNodeCollection(t))},a.prototype.getInsertNodes=function(t){t=t.reverse();for(var e=0;e<t.length;e++)(0!==t[e].childNodes.length&&3!==t[e].nodeType||3===t[e].nodeType&&""===t[e].textContent)&&(t.splice(e,1),e--);return t.reverse()},a.prototype.getNodeArray=function(t,e,i){var s=[];for(e?this.startNodeName=[]:this.endNodeName=[];t!==(i||this.rootNode)&&!(0,r.le)(t);null)e?this.startNodeName.push(t.nodeName.toLowerCase()):this.endNodeName.push(t.nodeName.toLowerCase()),s.push(this.getIndex(t)),t=t.parentNode;return s},a.prototype.setRangePoint=function(t,e,i,s){for(var n=this.rootNode,o=i.length,l=s;o--;null)n=n&&n.childNodes[i[o]];return n&&l>=0&&"html"!==n.nodeName&&(3===n.nodeType&&"&nbsp;"===n.nodeValue.replace(/\u00a0/g,"&nbsp;")&&(l=n.textContent.length),t[e?"setStart":"setEnd"](n,l)),t},a.prototype.restore=function(){var t=this.range.cloneRange();return t=this.setRangePoint(t,!0,this.startContainer,this.startOffset),t=this.setRangePoint(t,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,t),t},a.prototype.selectRange=function(t,e){this.setRange(t,e),this.save(e,t)},a.prototype.setRange=function(t,e){var i=this.get(t);i.removeAllRanges(),i.addRange(e)},a.prototype.setSelectionText=function(t,e,i,s,n){var o=t.createRange();o.setStart(e,s),o.setEnd(i,n),this.setRange(t,o)},a.prototype.setSelectionContents=function(t,e){var i=t.createRange();i.selectNode(e),this.setRange(t,i)},a.prototype.setSelectionNode=function(t,e){var i=t.createRange();i.selectNodeContents(e),this.setRange(t,i)},a.prototype.getSelectedNodes=function(t){return this.getNodeCollection(this.getRange(t))},a.prototype.Clear=function(t){this.get(t).removeAllRanges()},a.prototype.insertParentNode=function(t,e,i){i.surroundContents(e),this.selectRange(t,i)},a.prototype.setCursorPoint=function(t,e,i){var s=t.createRange(),n=t.defaultView.getSelection();s.setStart(e,i),s.collapse(!0),n.removeAllRanges(),n.addRange(s)},a}(),et_startSelection="e-editor-select-start",et_endSelection="e-editor-select-end",bC=function(){function a(t,e){this.parent=t,this.nodeSelection=new Sn,this.currentDocument=e}return a.prototype.contents=function(t){return t&&"IFRAME"!==t.tagName?Array.prototype.slice.call(t.childNodes||[]):[]},a.prototype.isBlockNode=function(t){return!!t&&t.nodeType===Node.ELEMENT_NODE&&Kc.indexOf(t.tagName.toLowerCase())>=0},a.prototype.isLink=function(t){return!!t&&t.nodeType===Node.ELEMENT_NODE&&"a"===t.tagName.toLowerCase()},a.prototype.blockParentNode=function(t){for(;t&&t.parentNode!==this.parent&&(!t.parentNode||!this.hasClass(t.parentNode,"e-node-inner"));null)if(this.isBlockNode(t=t.parentNode))return t;return t},a.prototype.rawAttributes=function(t){var e={},i=t.attributes;if(i.length>0)for(var s=0;s<i.length;s++){var n=i[s];e[n.nodeName]=n.value}return e},a.prototype.attributes=function(t){if(!t)return"";for(var e="",i=this.rawAttributes(t),s=Object.keys(i).sort(),n=0;n<s.length;n++){var o=s[n],l=i[""+o];l.indexOf("'")<0&&l.indexOf('"')>=0?e+=" "+o+"='"+l+"'":(l.indexOf('"')>=0&&l.indexOf("'")>=0&&(l=l.replace(/"/g,"&quot;")),e+=" "+o+'="'+l+'"')}return e},a.prototype.clearAttributes=function(t){for(var e=t.attributes,i=e.length-1;i>=0;i--)t.removeAttribute(e[i].nodeName)},a.prototype.openTagString=function(t){return"<"+t.tagName.toLowerCase()+this.attributes(t)+">"},a.prototype.closeTagString=function(t){return"</"+t.tagName.toLowerCase()+">"},a.prototype.createTagString=function(t,e,i){return"<"+t.toLowerCase()+this.attributes(e)+">"+i+"</"+t.toLowerCase()+">"},a.prototype.isList=function(t){return!!t&&["UL","OL"].indexOf(t.tagName)>=0},a.prototype.isElement=function(t){return t===this.parent},a.prototype.isEditable=function(t){return(!t.getAttribute||"true"===t.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(t.tagName)<0},a.prototype.hasClass=function(t,e){return t&&t.classList&&t.classList.contains(e)},a.prototype.replaceWith=function(t,e){t.parentNode.insertBefore(this.parseHTMLFragment(e),t),(0,r.og)(t)},a.prototype.parseHTMLFragment=function(t){var e=(0,r.az)("template");return e.innerHTML=t,e.content instanceof DocumentFragment?e.content:document.createRange().createContextualFragment(t)},a.prototype.wrap=function(t,e){return t.parentNode.insertBefore(e,t),(e=t.previousSibling).appendChild(t),e},a.prototype.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},a.prototype.wrapInner=function(t,e){for(t.appendChild(e),(e=t.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===e.classList.length&&e.removeAttribute("class");t.firstChild!==e;)e.appendChild(t.firstChild);return e},a.prototype.unWrap=function(t){for(var e=t.parentNode,i=[];t.firstChild;)i.push(t.firstChild),e.insertBefore(t.firstChild,t);return i=i.length>0?i:[t.parentNode],e.removeChild(t),i},a.prototype.getSelectedNode=function(t,e){return t.nodeType===Node.ELEMENT_NODE&&t.childNodes.length>0&&t.childNodes[e-1]&&t.childNodes[e-1].nodeType===Node.ELEMENT_NODE&&(t.childNodes[e-1].classList.contains(et_startSelection)||t.childNodes[e-1].classList.contains(et_endSelection))?t=t.childNodes[e-1]:t.nodeType===Node.ELEMENT_NODE&&t.childNodes.length>0&&t.childNodes[e]&&(t=t.childNodes[e]),t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),t},a.prototype.nodeFinds=function(t,e){for(var i=[],s=0;s<e.length;s++)t.contains(e[s])&&t!==e[s]&&i.push(e[s]);return i},a.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},a.prototype.getRangePoint=function(t){var e=this.getSelection(),i=[];if(e&&e.getRangeAt&&e.rangeCount){i=[];for(var s=0;s<e.rangeCount;s++)i.push(e.getRangeAt(s))}else i=[this.currentDocument.createRange()];return void 0!==t?i[t]:i},a.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},a.prototype.getPreviousNode=function(t){for(t=t.previousElementSibling;t&&"\n"===t.textContent;null)t=t.previousElementSibling;return t},a.prototype.encode=function(t){var e=document.createElement("div");return e.innerText=t,e.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},a.prototype.saveMarker=function(t,e){var n,o,i=this.parent.querySelector("."+et_startSelection),s=this.parent.querySelector("."+et_endSelection);if(this.hasClass(i,et_startSelection)&&i.classList.length>1){var l=this.createTagString("p",i,this.encode(i.textContent));this.replaceWith(i,l),(i=this.parent.querySelector("."+et_startSelection)).classList.remove(et_startSelection),n=i.childNodes[0]}else n=this.unWrap(i)[0];return this.hasClass(s,et_endSelection)&&s.classList.length>1?(l=this.createTagString("p",s,this.encode(s.textContent)),this.replaceWith(s,l),(s=this.parent.querySelector("."+et_endSelection)).classList.remove(et_endSelection),o=s.childNodes[0]):o=s?this.unWrap(s)[0]:n,t.startContainer=t.getNodeArray(n,!0),t.endContainer=t.getNodeArray(o,!1),t},a.prototype.marker=function(t,e){return'<span class="'+t+'">'+e+"</span>"},a.prototype.setMarker=function(t){var e=t.range,i=e.startContainer.childNodes,n=(i.length>1&&"TABLE"===i[0].nodeName?function(a){var t=a;do{t.childNodes.length>0&&(t=t.childNodes[0])}while(t.childNodes.length>0);return t}(i[e.startOffset+1]):i[e.startOffset>0?e.startOffset-1:e.startOffset])||e.startContainer,o=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if(n.nodeType===Node.ELEMENT_NODE&&o.nodeType===Node.ELEMENT_NODE&&(n.contains(o)||o.contains(n))){var l=n.contains(o)?n:o;if(l.nodeType!==Node.TEXT_NODE){for(var c=[],u=[],p=l;l.contains(p);null)c.indexOf(p)<0&&p.childNodes&&p.childNodes.length?(c.push(p),p=p.childNodes[0]):p.nextSibling?p=p.nextSibling:p.parentNode&&c.push(p=p.parentNode),u.indexOf(p)<0&&(p.nodeType===Node.TEXT_NODE||so.indexOf(p.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===p.tagName||"IMG"===p.tagName))&&u.push(p);u.length&&(n=n.contains(o)?u[0]:n,o=u[u.length-1])}}if(n!==o){if(n.nodeType!==Node.TEXT_NODE&&("BR"===n.tagName&&so.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===n.tagName))this.replaceWith(n,this.marker(et_startSelection,this.encode(n.textContent))),e.startContainer.querySelector("."+et_startSelection).appendChild(n);else if(3!==n.nodeType&&"#text"!==n.nodeName&&"BR"!==n.nodeName){var f=this.marker(et_startSelection,"");(0,r.R3)([this.parseHTMLFragment(f)],n)}else this.replaceWith(n,this.marker(et_startSelection,this.encode(n.textContent)));o.nodeType!==Node.TEXT_NODE&&"BR"===o.tagName&&so.indexOf(o.parentNode.tagName.toLocaleLowerCase())>=0?(this.replaceWith(o,this.marker(et_endSelection,this.encode(o.textContent))),e.endContainer.querySelector("."+et_endSelection).appendChild(o)):this.ensureSelfClosingTag(o,et_endSelection,e)}else this.ensureSelfClosingTag(n,et_startSelection,e)},a.prototype.ensureSelfClosingTag=function(t,e,i){var s=!1;if(3===t.nodeType)this.replaceWith(t,this.marker(e,this.encode(t.textContent)));else if("BR"===t.tagName)this.replaceWith(t,this.marker(e,this.encode(t.textContent))),i.startContainer.querySelector("."+e).parentElement.appendChild(t);else{if("IMG"===t.tagName){var o=document.createElement("p");t.parentElement.insertBefore(o,t),o.appendChild(t),t=o.children[0]}if("TABLE"===t.tagName)if(s=!0,""===t.textContent){var l=t.querySelectorAll("td");t=(0,r.le)((t=l[l.length-1]).childNodes[0])?t:t.childNodes[0]}else{for(var h=t.lastChild;3!==h.nodeType&&"#text"!==h.nodeName&&"BR"!==h.nodeName;)h=h.lastChild;t=h}for(var c=0;c<jV.length;c++)t=t.tagName!==jV[c]||s?t:t.parentNode;if(3===t.nodeType&&"#text"===t.nodeName)this.replaceWith(t,this.marker(e,this.encode(t.textContent)));else if("BR"===t.nodeName)this.replaceWith(t,this.marker(et_endSelection,this.encode(t.textContent))),i.endContainer.querySelector("."+et_endSelection).appendChild(t);else{var p=this.marker(e,"");(0,r.R3)([this.parseHTMLFragment(p)],t)}}},a.prototype.createTempNode=function(t){var e=t.textContent;if("BR"===t.tagName){var i="<p></p>";so.indexOf(t.parentNode.tagName.toLocaleLowerCase())>=0&&(t=this.wrap(t,this.parseHTMLFragment(i)))}else if(t.nodeType!==Node.TEXT_NODE&&(t.classList.contains(et_startSelection)||t.classList.contains(et_endSelection))||e.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||e.length&&e.indexOf("\n")<0){var n=t;t=this.wrap(t,this.parseHTMLFragment(i="<p></p>")),(n.nodeType!==Node.ELEMENT_NODE||!n.firstChild||"BR"!==n.firstChild.nodeName||!n.classList.contains(et_startSelection)&&!n.classList.contains(et_endSelection))&&t.nextElementSibling&&"BR"===t.nextElementSibling.tagName&&t.appendChild(t.nextElementSibling)}return t},a.prototype.getImageTagInSelection=function(){var t=this.getSelection();return this.isEditorArea()&&t.rangeCount?t.focusNode.querySelectorAll("img"):null},a.prototype.blockNodes=function(){var t=[],e=this.getSelection();if(this.isEditorArea()&&e.rangeCount)for(var i=this.getRangePoint(),s=0;s<i.length;s++){var n=void 0,o=i[s],l=this.getSelectedNode(o.startContainer,o.startOffset),h=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(l)&&t.indexOf(l)<0&&t.push(l),(n=this.blockParentNode(l))&&t.indexOf(n)<0)if(so.indexOf(n.tagName.toLocaleLowerCase())>=0&&("BR"===l.tagName||l.nodeType===Node.TEXT_NODE||l.classList.contains(et_startSelection)||l.classList.contains(et_endSelection))){var c=l.previousSibling&&l.previousSibling.nodeType===Node.TEXT_NODE?l.previousSibling:l;t.push(l.nextSibling||l.previousSibling||"BR"!==l.tagName?this.createTempNode(c):c)}else t.push(n);for(var u=[],p=l;p!==h&&p!==this.parent;null)u.indexOf(p)<0&&p.childNodes&&p.childNodes.length?(u.push(p),p=p.childNodes[0]):p&&8!==p.nodeType&&("BR"===p.tagName||p.nodeType===Node.TEXT_NODE&&""!==p.textContent.trim()||p.nodeType!==Node.TEXT_NODE&&(p.classList.contains(et_startSelection)||p.classList.contains(et_endSelection)))&&so.indexOf(p.parentNode.tagName.toLocaleLowerCase())>=0?p=this.createTempNode(p):p.nextSibling&&8!==p.nextSibling.nodeType&&("BR"===p.nextSibling.tagName||p.nextSibling.nodeType===Node.TEXT_NODE||p.nextSibling.classList.contains(et_startSelection)||p.nextSibling.classList.contains(et_endSelection))&&so.indexOf(p.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?p=this.createTempNode(p.nextSibling):p.nextSibling?p=p.nextSibling:p.parentNode&&u.push(p=p.parentNode),t.indexOf(p)<0&&p.nodeType===Node.ELEMENT_NODE&&so.indexOf(p.parentNode.tagName.toLocaleLowerCase())>=0&&(p.classList.contains(et_startSelection)||p.classList.contains(et_endSelection))&&t.push(this.createTempNode(p)),this.isBlockNode(p)&&this.ignoreTableTag(p)&&u.indexOf(p)<0&&t.indexOf(p)<0&&(p!==h||o.endOffset>0)&&t.push(p),"IMG"===p.nodeName&&"true"===p.parentElement.contentEditable&&t.push(p);(n=this.blockParentNode(h))&&this.ignoreTableTag(n)&&t.indexOf(n)<0&&!(0,r.le)(n.previousElementSibling)&&"IMG"!==n.previousElementSibling.tagName&&t.push(n)}for(var d=t.length-1;d>0;d--)if((u=this.nodeFinds(t[d],t)).length){var f=t[d].querySelectorAll("ul, ol");if("LI"===t[d].tagName&&f.length>0)continue;t.splice(d,1)}return t},a.prototype.ignoreTableTag=function(t){return!(pm.indexOf(t.tagName.toLocaleLowerCase())>=0)},a}(),_K=function(){function a(t){this.parent=t,this.domNode=this.parent.domNode,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(TV,this.applyListsHandler,this),this.parent.observer.on(al,this.onKeyUp,this),this.parent.observer.on(Qi,this.keyDownHandler,this),this.parent.observer.on(LV,this.spaceKeyAction,this)},a.prototype.testList=function(t){var e=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],i=(0,r.le)(t)?null:t.innerText.trim().split(".")[0]+".";if(!(0,r.le)(i))for(var s=0;s<e.length;s++)if(e[s].test(i))return!0;return!1},a.prototype.testCurrentList=function(t){var e=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!(0,r.le)(t.startContainer.textContent.slice(0,t.startOffset)))for(var i=t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim(),s=0;s<e.length;s++)if(e[s].test(i)&&2===i.length)return!0;return!1},a.prototype.spaceList=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(e,this.parent.currentDocument);var i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset),n=(this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset),i.previousElementSibling),o=i.nextElementSibling,l=(0,r.le)(n)?null:n.innerText.trim().substring(0,1),h=(0,r.le)(o)?null:o.innerText.trim().substring(0,1),c=this.testCurrentList(e),u=this.testList(n),p=this.testList(o);!u&&!p&&"*"!==l&&"*"!==h&&(c?(e.startContainer.textContent=e.startContainer.textContent.slice(e.startOffset,e.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:t.callBack}),t.event.preventDefault()):("*"===e.startContainer.textContent.replace(/\u200B/g,"").slice(0,e.startOffset).trim()||"-"===e.startContainer.textContent.replace(/\u200B/g,"").slice(0,e.startOffset).trim())&&(e.startContainer.textContent=e.startContainer.textContent.slice(e.startOffset,e.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:t.callBack}),t.event.preventDefault()))},a.prototype.enterList=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i="LI"===e.startContainer.nodeName?e.startContainer:e.startContainer.parentElement.closest("LI"),s="LI"===e.endContainer.nodeName?e.endContainer:e.endContainer.parentElement.closest("LI"),n=!1;if(!(0,r.le)(i)){var o=i.querySelectorAll(".e-video-clickelem"),l=o.length>0&&"IFRAME"===o[0].childNodes[0].nodeName;n=i.querySelectorAll("IMG").length>0||i.querySelectorAll("AUDIO").length>0||i.querySelectorAll("VIDEO").length>0||l}if(!(0,r.le)(i)&&!(0,r.le)(s)&&i===s&&"LI"===i.tagName&&""===i.textContent.trim()&&!n){if(i.innerHTML.indexOf("&nbsp;")>=0)return;65279===i.textContent.charCodeAt(0)&&(i.textContent="");var h=i.parentElement;if((0,r.le)(h.parentElement.closest("UL"))&&(0,r.le)(h.parentElement.closest("OL"))){if(!(0,r.le)(i.nextElementSibling)){var c=this.parent.domNode.blockParentNode(i);this.parent.nodeCutter.GetSpliceNode(e,c)}var u=void 0;"DIV"===t.enterAction?(u=(0,r.az)("div")).innerHTML="<br>":"P"===t.enterAction?(u=(0,r.az)("p")).innerHTML="<br>":u=(0,r.az)("br"),this.parent.domNode.insertAfter(u,h),t.event.preventDefault(),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,u,0),""===h.textContent&&0===h.querySelectorAll("audio,video").length?(0,r.og)(h):(0,r.og)(i)}}},a.prototype.backspaceList=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset),s=this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset);if((i="BR"===i.nodeName?i.parentElement:i)===(s="BR"===s.nodeName?s.parentElement:s)&&!(0,r.le)((0,r.oq)(i,"li"))&&(""===i.textContent.trim()&&65279===i.textContent.charCodeAt(0)||1===i.textContent.length&&8203===i.textContent.charCodeAt(0))&&(i.textContent=""),i===s&&"LI"===i.tagName&&0===i.textContent.length&&(0,r.le)(i.previousElementSibling)&&i.removeAttribute("style"),i===s&&""===i.textContent){if("LI"===i.parentElement.tagName&&"LI"===s.parentElement.tagName)(0,r.og)(i);else if((i.closest("ul")||i.closest("ol"))&&(n=(0,r.le)(i.closest("ul"))?i.closest("ol"):i.closest("ul")).firstElementChild===i&&!(0,r.le)(n.children[1])&&("OL"===n.children[1].tagName||"UL"===n.children[1].tagName))if(n.tagName===n.children[1].tagName){for(;n.children[1].lastChild;)this.parent.domNode.insertAfter(n.children[1].lastChild,n.children[1]);(0,r.og)(n.children[1])}else n.parentElement.insertBefore(n.children[1],n)}else if(!((0,r.le)(i.firstChild)||"BR"!==i.firstChild.nodeName||(0,r.le)(i.childNodes[1])||"UL"!==i.childNodes[1].nodeName&&"OL"!==i.childNodes[1].nodeName)){var n;if((n=(0,r.le)(i.closest("ul"))?i.closest("ol"):i.closest("ul")).tagName===i.childNodes[1].nodeName){for(;i.childNodes[1].lastChild;)this.parent.domNode.insertAfter(i.children[1].lastChild,i);(0,r.og)(i.childNodes[1])}else n.parentElement.insertBefore(i.children[1],n)}this.removeList(e,t),this.firstListBackSpace(e,t)},a.prototype.removeList=function(t,e){var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),s=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset);s="BR"===s.nodeName?s.parentElement:s,i="LI"===(i="BR"===i.nodeName?i.parentElement:i).nodeName||(0,r.le)(i.closest("LI"))?i:i.closest("LI"),s="LI"===s.nodeName||(0,r.le)(s.closest("LI"))?s:s.closest("LI"),(("OL"===t.commonAncestorContainer.nodeName||"UL"===t.commonAncestorContainer.nodeName||"LI"===t.commonAncestorContainer.nodeName)&&(0,r.le)(s.nextElementSibling)&&s.textContent.length===t.endOffset&&(0,r.le)(i.previousElementSibling)&&0===t.startOffset||-1!==r.AR.userAgent.indexOf("Firefox")&&t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement&&0===t.startOffset&&1===t.endOffset)&&(-1!==r.AR.userAgent.indexOf("Firefox")?(0,r.og)(t.commonAncestorContainer.childNodes[0]):(0,r.og)("LI"===t.commonAncestorContainer.nodeName?t.commonAncestorContainer.parentElement:t.commonAncestorContainer),e.event.preventDefault())},a.prototype.onKeyUp=function(){if(!(0,r.le)(this.commonLIParent)&&!(0,r.le)(this.commonLIParent.querySelector(".removeList"))){for(var t=this.commonLIParent.querySelector(".removeList");!(0,r.le)(t.firstChild);)this.parent.domNode.insertAfter(t.firstChild,t);(0,r.og)(t)}},a.prototype.firstListBackSpace=function(t,e){var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset);if((0,r.le)(i.closest("OL"))?(0,r.le)(i.closest("UL"))||(this.commonLIParent=i.closest("UL")):this.commonLIParent=i.closest("OL"),"LI"===i.nodeName&&0===t.startOffset&&0===t.endOffset&&(0,r.le)(i.previousSibling)&&!(0,r.le)(this.commonLIParent)&&(0,r.le)(this.commonLIParent.previousSibling)&&(0,r.le)(this.commonLIParent.parentElement.closest("OL"))&&(0,r.le)(this.commonLIParent.parentElement.closest("UL"))&&(0,r.le)(this.commonLIParent.parentElement.closest("LI"))){var s=(0,r.az)("P");s.innerHTML="&#8203;",i.classList.add("removeList"),this.commonLIParent.parentElement.insertBefore(s,this.commonLIParent)}},a.prototype.keyDownHandler=function(t){if(13===t.event.which&&this.enterList(t),32===t.event.which&&this.spaceList(t),8===t.event.which&&this.backspaceList(t),46===t.event.which&&"delete"===t.event.action){var i=(e=this.parent.nodeSelection.getRange(this.parent.currentDocument)).commonAncestorContainer,s=e.startContainer,n=e.endContainer,o=3===s.nodeType?s.parentElement:s,l=3===n.nodeType?n.parentElement:n;("UL"===i.nodeName||"OL"===i.nodeName)&&o!==l&&(!(0,r.le)((0,r.oq)(o,"ul"))||!(0,r.le)((0,r.oq)(o,"ol")))&&(!(0,r.le)((0,r.oq)(l,"ul"))||!(0,r.le)((0,r.oq)(l,"ol")))&&i.lastElementChild===(0,r.oq)(l,"li")&&!e.collapsed&&(0,r.og)(i),this.removeList(e,t)}if(9===t.event.which){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument);t.event.action&&"indent"===t.event.action||(this.saveSelection=this.parent.nodeSelection.save(e,this.parent.currentDocument));var h,c=e.startOffset,u=e.endOffset;if((o=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset))===(l=this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset))&&("BR"===o.nodeName||"#text"===o.nodeName)&&so.indexOf(o.parentNode.tagName.toLocaleLowerCase())>=0)return;t.event.action&&"indent"===t.event.action||this.domNode.setMarker(this.saveSelection),h=this.domNode.blockNodes();for(var p=[],d=!0,f=0;f<h.length;f++)"LI"===h[f].parentNode.tagName?p.push(h[f].parentNode):"LI"===h[f].tagName&&"P"!==h[f].childNodes[0].tagName&&"OL"!==h[f].childNodes[0].tagName&&"UL"!==h[f].childNodes[0].tagName&&p.push(h[f]);p.length>1||p.length&&(0===c&&0===u||t.ignoreDefault)?(t.event.preventDefault(),t.event.stopPropagation(),this.currentAction=this.getAction(p[0]),t.event.shiftKey?(this.revertList(p,t),this.revertClean()):d=this.nestedList(p),d&&(this.cleanNode(),this.parent.editableElement.focus()),t.event.action&&"indent"===t.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),t.callBack&&t.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:t.event}))):t.event.action&&"indent"===t.event.action||(t.event&&t.event.shiftKey&&"Tab"===t.event.key&&(t.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,t.event.action),this.saveSelection.restore())}else switch(t.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:t.callBack}),t.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:t.callBack}),t.event.preventDefault()}},a.prototype.spaceKeyAction=function(t){32===t.event.which&&this.spaceList(t)},a.prototype.getAction=function(t){return"OL"===t.parentNode.nodeName?"OL":"UL"},a.prototype.revertClean=function(){for(var t=this.parent.editableElement.querySelectorAll("ul, ol"),e=0;e<t.length;e++){var i=t[e].querySelectorAll("ul, ol");if(i.length>0)for(var s=0;s<i.length;s++){var n=i[s].previousSibling;n&&"LI"===n.tagName&&n.appendChild(i[s])}}},a.prototype.noPreviousElement=function(t){var e,i,s=t.querySelectorAll("ol, ul"),n=t.querySelectorAll("li"),o=this.domNode.contents(n[0])[0];if(n.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?e=n[0]:i=s[0],e)for(var l=this.domNode.contents(t)[0];l&&!this.domNode.isList(l);null){var h=l.nextSibling;(0,r.Ce)([l],e),(0,r.V7)(t,{"list-style-type":"none"}),(0,r.V7)(e,{"list-style-type":""}),l=h}else if(i){var c=(0,r.az)("li");for((0,r.Ce)([c],i),l=this.domNode.contents(t)[0];l&&!this.domNode.isList(l);null)h=l.nextSibling,c.appendChild(l),l=h;(0,r.Ce)([i],t.parentNode),(0,r.og)(t);var u=(0,r.az)("li",{styles:"list-style-type: none;"});(0,r.Ce)([u],i.parentNode),(0,r.R3)([i],u)}else u=(0,r.az)("li",{styles:"list-style-type: none;"}),(0,r.Ce)([u],t.parentNode),c=(0,r.az)(t.parentNode.tagName),(0,r.Ce)([c],u),(0,r.R3)([t],c)},a.prototype.nestedList=function(t){for(var e=!1,i=0;i<t.length;i++){var s=this.domNode.getPreviousNode(t[i]);if(s){e=!0;var n=void 0,o=void 0,l=t[i].querySelectorAll("ol, ul"),h=t[i].querySelectorAll("li"),c=this.domNode.contents(h[0])[0];if(h.length>0&&("OL"===c.nodeName||"UL"===c.nodeName)?o=h[0]:n=l[0],n){var u=(0,r.az)("li");(0,r.Ce)([u],n);for(var p=this.domNode.contents(t[i])[0];p&&!this.domNode.isList(p);null){var d=p.nextSibling;u.appendChild(p),p=d}(0,r.R3)([n],s),(0,r.og)(t[i])}else if(o){if("LI"===s.tagName){for(p=this.domNode.contents(t[i])[0];p&&!this.domNode.isList(p);null)d=p.nextSibling,(0,r.Ce)([p],o),(0,r.V7)(t[i],{"list-style-type":"none"}),(0,r.V7)(o,{"list-style-type":""}),p=d;(0,r.R3)([o.parentNode],s),(0,r.og)(t[i])}}else"LI"===s.tagName?(u=(0,r.az)(t[i].parentNode.tagName),(0,r.R3)([u],s),(0,r.R3)([t[i]],u)):("OL"===s.tagName||"UL"===s.tagName)&&(0,r.R3)([t[i]],s)}else e=!0,this.noPreviousElement(t[i])}return e},a.prototype.applyListsHandler=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument);if(-1!==r.AR.userAgent.indexOf("Firefox")&&e.startContainer===e.endContainer&&e.startContainer===this.parent.editableElement){for(var s=e.startContainer.childNodes[e.startOffset>0?e.startOffset-1:e.startOffset]||e.startContainer,n=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer,o="BR"===n.lastChild.nodeName?(0,r.le)(n.lastChild.previousSibling)?n:n.lastChild.previousSibling:n.lastChild;!(0,r.le)(o)&&"#text"!==o.nodeName&&"IMG"!==o.nodeName&&"BR"!==o.nodeName&&"HR"!==o.nodeName;)o=o.lastChild;this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,s,o,0,o.textContent.length),e=this.parent.nodeSelection.getRange(this.parent.currentDocument)}if(e.startContainer===e.endContainer&&e.startContainer===this.parent.editableElement&&e.startOffset===e.endOffset&&0===e.startOffset&&0===this.parent.editableElement.textContent.length&&"TABLE"!==this.parent.editableElement.childNodes[0].nodeName&&"IMG"!==this.parent.editableElement.childNodes[0].nodeName){var l=e.startContainer.childNodes[0];this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,l,l,0,0),e=this.parent.nodeSelection.getRange(this.parent.currentDocument)}this.saveSelection=this.parent.nodeSelection.save(e,this.parent.currentDocument),this.currentAction=t.subCommand,this.currentAction=t.subCommand="NumberFormatList"===this.currentAction?"OL":"BulletFormatList"===this.currentAction?"UL":this.currentAction,this.domNode.setMarker(this.saveSelection);var h=this.domNode.blockNodes();if("BR"===t.enterAction){this.setSelectionBRConfig();var c=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),u=this.parent.nodeSelection.getSelectionNodes(c),p=[];0===u.length&&u.push(h[0]);for(var d=0;d<u.length;d++){for(var f=u[d],g=void 0;!this.parent.domNode.isBlockNode(f)&&f!==this.parent.editableElement;)g=f,f=f.parentElement;this.parent.domNode.isBlockNode(f)&&f===this.parent.editableElement&&p.push(g)}for(d=0;d<p.length;d++)if(!this.parent.domNode.isBlockNode(p[d])){for(var m=f=p[d];f===this.parent.editableElement;)m=f,f=f.parentElement;var v=void 0;this.parent.domNode.isBlockNode(m.parentElement)&&m.parentElement===this.parent.editableElement?(v=(0,r.az)("p"),m.parentElement.insertBefore(v,m),v.appendChild(m)):v=m;for(var y=v.previousSibling;!(0,r.le)(y)&&"BR"!==y.nodeName&&!this.parent.domNode.isBlockNode(y);)v.firstChild.parentElement.insertBefore(y,v.firstChild),y=v.previousSibling;!(0,r.le)(y)&&"BR"===y.nodeName&&(0,r.og)(y);for(var C=v.nextSibling;!(0,r.le)(C)&&"BR"!==C.nodeName&&!this.parent.domNode.isBlockNode(C);)v.appendChild(C),C=v.nextSibling;!(0,r.le)(C)&&"BR"===C.nodeName&&(0,r.og)(C)}this.setSelectionBRConfig(),h=this.parent.domNode.blockNodes()}for(d=0;d<h.length;d++)"TABLE"===h[d].tagName&&!e.collapsed&&h.splice(d,1),h.length>0&&"LI"!==h[d].tagName&&"LI"===h[d].parentNode.tagName&&(h[d]=h[d].parentNode);this.applyLists(h,this.currentAction,t.selector,t.item,t),t.callBack&&t.callBack({requestType:this.currentAction,event:t.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},a.prototype.setSelectionBRConfig=function(){var t=this.parent.editableElement.querySelector("."+et_startSelection),e=this.parent.editableElement.querySelector("."+et_endSelection);(0,r.le)(e)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,t,e,0,0)},a.prototype.applyLists=function(t,e,i,s,n){if(this.isRevert(t,e,s)&&(0,r.le)(s))this.revertList(t,n),this.removeEmptyListElements();else{this.checkLists(t,e,s);for(var o=0;o<t.length;o++)if(!(0,r.le)(s)&&!(0,r.le)(s.listStyle)&&("listImage"===s.listStyle?(0,r.V7)(t[o],{"list-style-image":s.listImage}):((0,r.V7)(t[o],{"list-style-image":"none"}),(0,r.V7)(t[o],{"list-style-type":s.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),"true"===t[o].getAttribute("contenteditable")&&1===t[o].childNodes.length&&"TABLE"===t[o].childNodes[0].nodeName){var l=document.createElement(e);l.innerHTML="<li><br/></li>",t[o].appendChild(l)}else if("LI"!==t[o].tagName&&(0,r.le)(s)){var c="<"+e+">",u="</"+e+">",p="li"+("IMG"===t[o].tagName?"":this.domNode.attributes(t[o])),d="p"===t[o].tagName.toLowerCase()?t[o].innerHTML:t[o].outerHTML,f=this.domNode.createTagString(p,null,d);this.domNode.replaceWith(t[o],c+f+u)}else(0,r.le)(s)||"LI"===t[o].tagName||(c="<"+e+("IMG"===t[o].tagName?"":this.domNode.attributes(t[o]))+">",u="</"+e+">",p="li",d="p"===t[o].tagName.toLowerCase()?t[o].innerHTML:t[o].outerHTML,f=this.domNode.createTagString(p,null,d),this.domNode.replaceWith(t[o],c+f+u))}this.cleanNode(),this.parent.editableElement.focus(),Ts()&&xh(this.parent.editableElement,i),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},a.prototype.removeEmptyListElements=function(){for(var t=this.parent.editableElement.querySelectorAll("ol, ul"),e=0;e<t.length;e++)""===t[e].textContent.trim()&&(0,r.og)(t[e])},a.prototype.isRevert=function(t,e,i){for(var s=!0,n=0;n<t.length;n++){if("LI"!==t[n].tagName)return!1;(t[n].parentNode.tagName!==e||(0,r.le)(i)&&""!==t[n].parentNode.style.listStyleType)&&(s=!1)}return s},a.prototype.checkLists=function(t,e,i){for(var s=[],n=0;n<t.length;n++){var o=t[n].parentNode;!(0,r.le)(i)&&"LI"===t[n].tagName&&!(0,r.le)(i.listStyle)&&("listImage"===i.listStyle?(0,r.V7)(o,{"list-style-image":i.listImage}):((0,r.V7)(o,{"list-style-image":"none"}),(0,r.V7)(o,{"list-style-type":i.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),("LI"===t[n].tagName&&o.tagName!==e&&s.indexOf(o)<0||"LI"===t[n].tagName&&o.tagName===e&&s.indexOf(o)<0&&null!==i)&&s.push(o),(0,r.le)(i)&&(o.tagName===e||("UL"===o.tagName||"OL"===o.tagName)&&o.hasAttribute("style"))&&o.hasAttribute("style")&&o.removeAttribute("style")}for(var l=s.length-1;l>=0;l--){var h=s[l],c="<"+e.toLowerCase()+" "+this.domNode.attributes(h)+">"+h.innerHTML+"</"+e.toLowerCase()+">";this.domNode.replaceWith(s[l],c)}},a.prototype.cleanNode=function(){for(var t=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),e=0;e<t.length;e++){var i=t[e];if(this.domNode.isList(i.previousElementSibling)&&this.domNode.openTagString(i)===this.domNode.openTagString(i.previousElementSibling)){for(var s=this.domNode.contents(i),n=0;n<s.length;n++)i.previousElementSibling.appendChild(s[n]);i.parentNode.removeChild(i)}else(0,r.le)(i.getAttribute("level"))||i.tagName===i.previousElementSibling.tagName&&i.previousElementSibling.lastChild.append(i)}},a.prototype.findUnSelected=function(t,e){if((t=t.slice().reverse()).length>0){var i=[],s=[],o=[],l=[];o=e[e.length-1].childNodes;for(var h=0;h<o.length;h++)if("OL"===o[h].tagName||"UL"===o[h].tagName){var c=o[h].querySelectorAll("li");if(c.length>0)for(var u=0;u<c.length;u++)l.push(c[u])}for(var p=0;p<l.length;p++){for(var d=0,f=0;f<t.length;f++)l[p].contains(t[f])||(d+=1);d===t.length&&s.push(l[p])}if(s.length>0)for(var g=0;g<s.length;g++)"OL"!==this.domNode.contents(s[g])[0].nodeName&&"UL"!==this.domNode.contents(s[g])[0].nodeName&&i.push(s[g]);i.length>0&&this.nestedList(i)}},a.prototype.revertList=function(t,e){for(var i=[],s=t.length-1;s>=0;s--)for(var n=s-1;n>=0;n--)if(t[n].contains(t[s])||t[n]===t[s]){i.push(t[s]),t.splice(s,1);break}this.findUnSelected(i,t);var o=[];for(s=0;s<t.length;s++){var l=t[s];3===this.domNode.contents(l)[0].nodeType&&0===this.domNode.contents(l)[0].textContent.trim().length&&(0,r.og)(this.domNode.contents(l)[0]);var h=t[s].parentNode,c=l.getAttribute("class");if(0===i.length){var p=t[s].querySelectorAll("ul, ol")[0];if(p&&p.querySelectorAll("li")){var f=(0,r.az)(p.tagName);(0,r.R3)([f],p.parentNode);var g=(0,r.az)("li",{styles:"list-style-type: none;"});(0,r.R3)([g],f),(0,r.R3)([p],g)}}if(l.parentNode.insertBefore(this.closeTag(h.tagName),l),"LI"===h.parentNode.tagName||"OL"===h.parentNode.tagName||"UL"===h.parentNode.tagName)l.parentNode.insertBefore(this.closeTag("LI"),l);else{if(0===l.querySelectorAll(Kc.join(", ")).length){var v="<p"+((0,r.le)(c)?' class="e-rte-wrap-inner"':' class="'+c+' e-rte-wrap-inner"')+this.domNode.attributes(h)+"></p>";"BR"!==e.enterAction&&this.domNode.wrapInner(l,this.domNode.parseHTMLFragment(v))}else if(3===this.domNode.contents(l)[0].nodeType){var y=this.domNode.createTagString("p",h,this.parent.domNode.encode(this.domNode.contents(l)[0].textContent));this.domNode.replaceWith(this.domNode.contents(l)[0],y)}else if(this.domNode.contents(l)[0].classList.contains(et_startSelection)||this.domNode.contents(l)[0].classList.contains(et_endSelection))y=this.domNode.createTagString("p",h,this.domNode.contents(l)[0].outerHTML),this.domNode.replaceWith(this.domNode.contents(l)[0],y);else{var C=l.firstChild;c=C.getAttribute("class"),(0,r.Y4)(C,this.domNode.rawAttributes(h)),c&&C.getAttribute("class")&&(0,r.Y4)(C,{class:c+" "+C.getAttribute("class")})}(0,r.R3)([this.openTag("LI")],l),(0,r.Ce)([this.closeTag("LI")],l)}this.domNode.insertAfter(this.openTag(h.tagName),l),"LI"===h.parentNode.tagName&&(h=h.parentNode.parentNode),o.indexOf(h)<0&&o.push(h)}for(s=0;s<o.length;s++){var b=o[s],S=b.innerHTML;S=(S=S.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(b)+">"),this.domNode.replaceWith(b,this.domNode.openTagString(b)+S.trim()+this.domNode.closeTagString(b))}var T=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(s=0;s<T.length;s++)(0,r.og)(T[s]);var O=this.parent.editableElement.querySelectorAll("li:empty");for(s=0;s<O.length;s++)(0,r.og)(O[s])},a.prototype.openTag=function(t){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+t.toLowerCase()+'"></span>')},a.prototype.closeTag=function(t){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+t.toLowerCase()+'"></span>')},a}(),Ei=function(){function a(){}return a.WrapBefore=function(t,e,i){return e.innerText=t.textContent,i?this.AppendBefore(e,t,!0):this.AppendBefore(e,t),t.parentNode&&t.parentNode.removeChild(t),e.childNodes[0]},a.Wrap=function(t,e){return this.AppendBefore(e,t),e.appendChild(t),t},a.unwrap=function(t){for(var e=t.parentNode,i=[];t.firstChild;null)i.push(e.insertBefore(t.firstChild,t));return e.removeChild(t),i},a.AppendBefore=function(t,e,i){return e.parentNode?e.parentNode.insertBefore(t,i?e.nextSibling:e):e},a}(),Yp=function(){function a(){this.enterAction="P",this.position=-1,this.nodeSelection=new Sn}return a.prototype.GetSpliceNode=function(t,e){return e=this.SplitNode(t,e,!0),this.SplitNode(t,e,!1)},a.prototype.SplitNode=function(t,e,i){if(e){var s=t.cloneRange(),n=e.parentNode,o=this.nodeSelection.getIndex(e);s.collapse(i),i?s.setStartBefore(e):s.setEndAfter(e);var l=s.extractContents();if(i)e=n.childNodes[o],(l=this.spliceEmptyNode(l,!1))&&l.childNodes.length>0&&(1!==l.childNodes.length||"IMG"===l.childNodes[0].nodeName||l.querySelectorAll("img").length>0||!this.isRteElm(l)||""!==l.textContent)&&(e?Ei.AppendBefore(l,e):(n.appendChild(l),(c=document.createElement("div")).innerHTML="&#65279;&#65279;",n.appendChild(e=c.firstChild)));else if(e=n.childNodes.length>1?n.childNodes[o]:n.childNodes[0],(l=this.spliceEmptyNode(l,!0))&&l.childNodes.length>0&&(1!==l.childNodes.length||"IMG"===l.childNodes[0].nodeName||!this.isRteElm(l)||""!==l.textContent))if(e)Ei.AppendBefore(l,e,!0);else{var c;n.appendChild(l),(c=document.createElement("div")).innerHTML="&#65279;&#65279;",n.insertBefore(c.firstChild,n.firstChild),e=n.firstChild}return e}return null},a.prototype.isRteElm=function(t){var e=!0;if(1===t.childNodes.length&&"IMG"!==t.childNodes[0].nodeName)for(var i=t.childNodes[0],s=0;!(0,r.le)(i.childNodes)&&s<i.childNodes.length;s++)("IMG"===i.childNodes[s].nodeName||"SPAN"===i.childNodes[s].nodeName&&(i.childNodes[s].classList.contains("e-video-wrap")||i.childNodes[s].classList.contains("e-embed-video-wrap")||i.childNodes[s].classList.contains("e-audio-wrap")))&&(e=!1);else e=!0;return e},a.prototype.spliceEmptyNode=function(t,e){var i;return(i=1===t.childNodes.length&&"#text"===t.childNodes[0].nodeName&&""===t.childNodes[0].textContent||""===t.textContent?-1:t.childNodes.length-1)>-1&&!e?this.spliceEmptyNode(t.childNodes[i],e):i>-1?this.spliceEmptyNode(t.childNodes[0],e):3!==t.nodeType&&11!==t.nodeType&&"IMG"!==t.nodeName&&!t.classList.contains("e-video-wrap")&&!t.classList.contains("e-audio-wrap")&&t.parentNode.removeChild(t),t},a.prototype.GetCursorStart=function(t,e,i){for(var s=(t=i?t:t.reverse())[0],n=0;n<t.length&&(i?t[n]<e:t[n]>=e);n++)s=t[n];return s},a.prototype.GetCursorRange=function(t,e,i){var s=t.createRange(),n=[];n.push(0);for(var o=this.TrimLineBreak(i.data),l=o.indexOf(" ",0);-1!==l;)n.indexOf(l)<0&&n.push(l),new RegExp("\\s").test(o[l-1])&&n.indexOf(l-1)<0&&n.push(l-1),new RegExp("\\s").test(o[l+1])&&n.push(l+1),l=o.indexOf(" ",l+1);if(n.push(o.length),n.indexOf(e.startOffset)>=0||n.indexOf(e.startOffset-1)>=0&&(1!==e.startOffset||1===e.startOffset&&new RegExp("\\s").test(o[0]))||n[n.length-1]-1===e.startOffset&&!new RegExp("\\s").test(o[0]))s=e,this.position=1;else{var h=this.GetCursorStart(n,e.startOffset,!0);this.position=e.startOffset-h,s.setStart(e.startContainer,h),s.setEnd(e.startContainer,this.GetCursorStart(n,e.startOffset,!1))}return s},a.prototype.GetCursorNode=function(t,e,i){return this.GetSpliceNode(this.GetCursorRange(t,e,i),i)},a.prototype.TrimLineBreak=function(t){return t.replace(/(\r\n\t|\n|\r\t)/gm," ")},a}(),WK=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(vC,this.applyFormats,this),this.parent.observer.on(al,this.onKeyUp,this),this.parent.observer.on(Qi,this.onKeyDown,this)},a.prototype.getParentNode=function(t){for(;t.parentNode&&t.parentNode!==this.parent.editableElement;null)t=t.parentNode;return t},a.prototype.onKeyUp=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=e.endContainer,s=i.lastChild;if(13===t.event.which&&e.startContainer===i&&3!==i.nodeType){var n=(0,r.az)("p");if(n.innerHTML="<br>",!(0,r.le)(s)&&s&&"BR"===s.nodeName&&s.previousSibling&&"TABLE"===s.previousSibling.nodeName)i.replaceChild(n,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0);else{var o=this.parent.nodeSelection.getSelectionNodeCollectionBr(e)[0];!(0,r.le)(o)&&"BR"===o.nodeName&&o.previousSibling&&"TABLE"===o.previousSibling.nodeName&&(i.replaceChild(n,o),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0))}}},a.prototype.onKeyDown=function(t){if(13===t.event.which){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),s=0===e.endContainer.textContent.length||"PRE"===e.endContainer.nodeName?e.endContainer:e.endContainer.parentElement,n=(0,r.oq)(0===e.startContainer.textContent.length||"PRE"===e.startContainer.nodeName?e.startContainer:e.startContainer.parentElement,"pre"),o=(0,r.oq)(s,"pre");if(!(0,r.le)(n)&&!(0,r.le)(n.parentElement)&&"LI"===n.parentElement.tagName)return;if(((0,r.le)(n)&&!(0,r.le)(o)||!(0,r.le)(n)&&(0,r.le)(o))&&(t.event.preventDefault(),this.deleteContent(e),this.removeCodeContent(e),e=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0)),13===t.event.which&&!(0,r.le)(n)&&!(0,r.le)(o)){t.event.preventDefault(),this.deleteContent(e),this.removeCodeContent(e);var h=(e=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[e.endOffset],c=e.startContainer.childNodes[e.endOffset-1],u=e.startContainer;if((0,r.le)(h)||(0,r.le)(c)||!(0,r.le)(h.nextSibling)||"BR"!==h.nodeName||"BR"!==c.nodeName)if(8203===u.textContent.charCodeAt(0)&&1===u.textContent.length||0===u.textContent.length){for(;"PRE"!==u.parentElement.nodeName&&(1===u.textContent.length||0===u.textContent.length);)u=u.parentElement;!(0,r.le)(u.previousSibling)&&"BR"===u.previousSibling.nodeName&&(0,r.le)(u.nextSibling)?this.paraFocus(u.parentElement):this.isNotEndCursor(n,e)}else this.isNotEndCursor(n,e);else this.paraFocus(e.startContainer,t.enterAction)}}},a.prototype.removeCodeContent=function(t){var e=new RegExp(String.fromCharCode(65279),"g");if(!(0,r.le)(t.endContainer.textContent.match(e))){var i=65279===t.endContainer.textContent.charCodeAt(t.endOffset-1)?t.endOffset-2:t.endOffset;t.endContainer.textContent=t.endContainer.textContent.replace(e,""),""===t.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t.endContainer,i)}},a.prototype.deleteContent=function(t){(t.startContainer!==t.endContainer||t.startOffset!==t.endOffset)&&t.deleteContents()},a.prototype.paraFocus=function(t,e){var i;"DIV"===e?(i=(0,r.az)("div")).innerHTML="<br>":"BR"===e?i=(0,r.az)("br"):(i=(0,r.az)("p")).innerHTML="<br>",this.parent.domNode.insertAfter(i,t),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),(0,r.og)(t.lastChild)},a.prototype.isNotEndCursor=function(t,e){var i=new Yp,s=e.startOffset===t.lastChild.textContent.length&&t.lastChild.textContent===e.startContainer.textContent;if(0===t.textContent.indexOf(e.startContainer.textContent)&&(0===e.startOffset&&0===e.endOffset||"PRE"===e.startContainer.nodeName)){this.insertMarker(t,e);var n=(0,r.az)("br");t.childNodes[e.endOffset].parentElement.insertBefore(n,t.childNodes[e.endOffset])}else{var o=i.SplitNode(e,t,!0);this.insertMarker(t,e);var l=t.previousElementSibling;"PRE"===l.tagName&&(l.insertAdjacentHTML("beforeend","<br>"+o.innerHTML),(0,r.og)(t))}this.setCursorPosition(s,t)},a.prototype.setCursorPosition=function(t,e){var i=!1,s=this.parent.editableElement.querySelector(".tempSpan"),n=s.parentElement;if(""===s.parentNode.textContent?i=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),t)if(i)n===e?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),(0,r.og)(s)):this.focusSelectionParent(s,n);else{var o=(0,r.az)("br");this.parent.domNode.insertAfter(o,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),(0,r.og)(s)}else i?this.focusSelectionParent(s,n):(0,r.og)(s)},a.prototype.focusSelectionParent=function(t,e){(0,r.og)(t),e.innerHTML="\u200b",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0)},a.prototype.insertMarker=function(t,e){var i=(0,r.az)("span",{className:"tempSpan"});"PRE"===e.startContainer.nodeName?t.childNodes[e.endOffset].parentElement.insertBefore(i,t.childNodes[e.endOffset]):e.startContainer.parentElement.insertBefore(i,e.startContainer)},a.prototype.applyFormats=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=!1;this.parent.editableElement===e.endContainer&&!(0,r.le)(this.parent.editableElement.children[e.endOffset-1])&&"TABLE"===this.parent.editableElement.children[e.endOffset-1].tagName&&!e.collapsed&&(i=!0);var s=this.parent.nodeSelection.save(e,this.parent.currentDocument);this.parent.domNode.setMarker(s);var n=this.parent.domNode.blockNodes();if("BR"===t.enterAction){this.setSelectionBRConfig();var o=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),l=this.parent.nodeSelection.getSelectionNodes(o),h=[];0===l.length&&l.push(n[0]);for(var c=0;c<l.length;c++){for(var u=l[c],p=void 0;!this.parent.domNode.isBlockNode(u)&&u!==this.parent.editableElement;)p=u,u=u.parentElement;this.parent.domNode.isBlockNode(u)&&u===this.parent.editableElement&&h.push(p)}for(c=0;c<h.length;c++)if(!this.parent.domNode.isBlockNode(h[c])){for(var d=u=h[c];u===this.parent.editableElement;)d=u,u=u.parentElement;var f=void 0;this.parent.domNode.isBlockNode(d.parentElement)&&d.parentElement===this.parent.editableElement?(f=(0,r.az)("div"),d.parentElement.insertBefore(f,d),f.appendChild(d)):f=d;for(var g=f.previousSibling;!(0,r.le)(g)&&"BR"!==g.nodeName&&!this.parent.domNode.isBlockNode(g);)f.firstChild.parentElement.insertBefore(g,f.firstChild),g=f.previousSibling;!(0,r.le)(g)&&"BR"===g.nodeName&&(0,r.og)(g);for(var m=f.nextSibling;!(0,r.le)(m)&&"BR"!==m.nodeName&&!this.parent.domNode.isBlockNode(m);)f.appendChild(m),m=f.nextSibling;!(0,r.le)(m)&&"BR"===m.nodeName&&(0,r.og)(m)}this.setSelectionBRConfig(),n=this.parent.domNode.blockNodes()}for(c=0;c<n.length;c++){var v=void 0,y=void 0;if("blockquote"===t.subCommand.toLowerCase()?(v=this.getParentNode(n[c]),y=this.parent.domNode.isList(v)||"TABLE"===v.tagName?v.outerHTML:v.innerHTML):y=(v=n[c]).innerHTML,!(t.subCommand.toLowerCase()===v.tagName.toLowerCase()&&("pre"!==t.subCommand.toLowerCase()||!(0,r.le)(t.exeValue)&&"dropDownSelect"===t.exeValue.name)||(0,r.le)(v.parentNode)||"TABLE"===v.tagName&&"pre"===t.subCommand.toLowerCase())){this.cleanFormats(v,t.subCommand);var C="pre"===t.subCommand.toLowerCase()&&"pre"===v.tagName.toLowerCase()?"p":t.subCommand,b=this.parent.domNode.createTagString(C,v,y.replace(/>\s+</g,"><"));"LI"===v.tagName?(v.innerHTML="",v.insertAdjacentHTML("beforeend",b)):this.parent.domNode.replaceWith(v,b)}}this.preFormatMerge();var S=this.parent.editableElement.querySelector("."+et_startSelection),I=this.parent.editableElement.querySelector("."+et_endSelection);!(0,r.le)(S)&&!(0,r.le)(I)&&(S=S.lastChild,I=I.lastChild),s=this.parent.domNode.saveMarker(s,null),Ts()&&xh(this.parent.editableElement,t.selector),i?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,S,I,0,I.textContent.length):s.restore(),t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},a.prototype.setSelectionBRConfig=function(){var t=this.parent.editableElement.querySelector("."+et_startSelection),e=this.parent.editableElement.querySelector("."+et_endSelection);(0,r.le)(e)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,t,e,0,0)},a.prototype.preFormatMerge=function(){var t=this.parent.editableElement.querySelectorAll("PRE");if(!(0,r.le)(t))for(var e=0;e<t.length;e++){var i=t[e].previousElementSibling;!(0,r.le)(i)&&"PRE"===i.tagName&&(i.insertAdjacentHTML("beforeend","<br>"+t[e].innerHTML),(0,r.og)(t[e]))}},a.prototype.cleanFormats=function(t,e){var i=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];e=e.toLowerCase();for(var s=0;s<i.length&&"p"!==e&&"blockquote"!==e&&"pre"!==e;s++)t.style.removeProperty(i[s])},a}(),mr=function(){function a(){}return a.Insert=function(t,e,i,s,n){var o;if("string"==typeof e)(l=document.createElement("div")).innerHTML=e,o=s?l:l.firstChild;else if(s&&((0,r.le)(e)||(0,r.le)(e.classList)||!e.classList.contains("pasteContent"))){var l;(l=document.createElement("div")).appendChild(e),o=l}else o=e;var h=new Sn,c=new Yp,u=h.getRange(t);if(u.startContainer===i&&u.startContainer===u.endContainer&&0===u.startOffset&&u.startOffset===u.endOffset&&0===i.textContent.length&&("P"===i.children[0].tagName||"DIV"===i.children[0].tagName||"BR"===i.children[0].tagName)&&(h.setSelectionText(t,u.startContainer.children[0],u.startContainer.children[0],0,0),u=h.getRange(t)),u.startContainer===i&&u.startContainer===u.endContainer&&0===u.startOffset&&u.startOffset===u.endOffset&&i.textContent.trim().length>0){var p=this.findFirstTextNode(u.startContainer);(0,r.le)(p)||(h.setSelectionText(t,p,p,0,0),u=h.getRange(t))}if("BR"===u.startContainer.nodeName&&0===u.startOffset&&u.startOffset===u.endOffset&&u.startContainer===u.endContainer){var d=Array.prototype.slice.call(u.startContainer.parentElement.childNodes).indexOf(u.startContainer);h.setSelectionText(t,u.startContainer.parentElement,u.startContainer.parentElement,d,d),u=h.getRange(t)}var f=u.startOffset===u.endOffset&&0===u.startOffset&&u.startContainer===u.endContainer,g=u.collapsed,m=this.getNodeCollection(u,h,o),v="table"===o.nodeName.toLowerCase()?this.closestEle(m[0].parentNode,i):m[0];if(s||!(0,r.le)(o)&&!(0,r.le)(o.classList)&&o.classList.contains("pasteContent"))this.pasteInsertHTML(m,o,u,h,c,t,g,v,i,n);else if(i!==u.startContainer&&(!g&&(v.nodeType!==Node.ELEMENT_NODE||-1===pm.indexOf(v.tagName.toLocaleLowerCase()))||"table"===o.nodeName.toLowerCase()&&v&&-1===pm.indexOf(v.tagName.toLocaleLowerCase()))){var y=c.GetSpliceNode(u,v),C=y.previousSibling,b=y.parentNode;if(1===m.length||"table"===o.nodeName.toLowerCase()&&0===y.childElementCount)h.setSelectionContents(t,y),u=h.getRange(t);else{var S=c.GetSpliceNode(u,m[m.length-1].parentElement);S=(0,r.le)(S)?y:S,h.setSelectionText(t,y,S,0,3===S.nodeType?S.textContent.length:S.childNodes.length),u=h.getRange(t)}u.extractContents(),"TABLE"===e.tagName&&this.removeEmptyElements(i);for(var I=0;I<m.length;I++)if(3!==m[I].nodeType&&null!=m[I].parentNode){if("IMG"===m[I].nodeName)continue;m[I].parentNode.removeChild(m[I])}if(C)Ei.AppendBefore(o,C,!0);else{for(var x=null;b!==i&&b.firstChild&&""===b.textContent.trim();)x=b,b=b.parentNode;null!==x&&(b=x),b.firstChild&&(b!==i||"TABLE"===o.nodeName&&f&&b===u.startContainer&&b===u.endContainer)?""===b.textContent.trim()&&b!==i?(Ei.AppendBefore(o,b,!1),(0,r.og)(b)):Ei.AppendBefore(o,b.firstChild,!1):(0,r.le)(y.previousSibling)&&"TABLE"===e.tagName?b.prepend(o):b.appendChild(o)}"IMG"===o.nodeName?this.imageFocus(o,h,t):h.setSelectionText(t,o,o,0,3!==o.nodeType?o.childNodes.length:o.textContent.length)}else{if(u.deleteContents(),f&&""===u.startContainer.textContent&&"BR"!==u.startContainer.nodeName&&(u.startContainer.innerHTML=""),r.AR.isIE){var O=t.createDocumentFragment();O.appendChild(o),u.insertNode(O)}else if(1===u.startContainer.nodeType&&"hr"===u.startContainer.nodeName.toLowerCase()&&"hr"===u.endContainer.nodeName.toLowerCase()){var A=u.startContainer.nextElementSibling;A&&(A.querySelector("br")&&(0,r.og)(A.querySelector("br")),A.appendChild(o))}else"BR"===u.startContainer.nodeName?u.startContainer.parentElement.insertBefore(o,u.startContainer):u.insertNode(o);3!==o.nodeType&&o.childNodes.length>0?h.setSelectionText(t,o,o,1,1):"IMG"===o.nodeName?this.imageFocus(o,h,t):3!==o.nodeType?h.setSelectionContents(t,o):h.setSelectionText(t,o,o,o.textContent.length,o.textContent.length)}},a.findFirstTextNode=function(t){if(t.nodeType===Node.TEXT_NODE)return t;for(var e=0;e<t.childNodes.length;e++){var i=this.findFirstTextNode(t.childNodes[e]);if(!(0,r.le)(i))return i}return null},a.pasteInsertHTML=function(t,e,i,s,n,o,l,h,c,u){var f,g,m,v,p=i.startOffset===i.endOffset&&i.startContainer===i.endContainer;if(p&&i.startContainer===c&&""===c.textContent){var d=this.getImmediateBlockNode(t[t.length-1],c);s.setSelectionText(o,d,d,0,0),i=s.getRange(o)}c!==i.startContainer&&(!l&&(h.nodeType!==Node.ELEMENT_NODE||-1===pm.indexOf(h.tagName.toLocaleLowerCase()))||"table"===e.nodeName.toLowerCase()&&h&&-1===pm.indexOf(h.tagName.toLocaleLowerCase()))&&(v=n.GetSpliceNode(i,h),g=(0,r.le)(v.previousSibling)?v.parentNode.previousSibling:v.previousSibling,1===t.length?(s.setSelectionContents(o,v),i=s.getRange(o),m=!0):(f=n.GetSpliceNode(i,t[t.length-1].parentElement),f=(0,r.le)(f)?v:f,s.setSelectionText(o,v,f,0,3===f.nodeType?f.textContent.length:f.childNodes.length),i=s.getRange(o),m=!1));var y=!1;this.removingComments(e);for(var C=e.childNodes,b=0;b<C.length;b++)if(Kc.indexOf(C[b].nodeName.toLocaleLowerCase())>=0){y=!0;break}var S,I=document.createDocumentFragment();if(y){for(var q=i.startContainer;!(0,r.le)(q)&&"PRE"!==q.nodeName&&q!==c;)q=q.parentElement;if((0,r.le)(e)||(0,r.le)(q)||"PRE"!==q.nodeName){this.insertTempNode(i,e,t,n,c);var k=!0,R=void 0,D=void 0,z=void 0;for(this.contentsDeleted||i.deleteContents();e.firstChild;)if("#text"!==e.firstChild.nodeName||""!==e.firstChild.textContent.trim())if("#text"===e.firstChild.nodeName&&k||this.inlineNode.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0&&k){if(S=e.firstChild,(0,r.le)(e.previousElementSibling)){var Y=(0,r.az)("DIV"===u?"div":"p");e.parentElement.insertBefore(Y,e)}"BR"===e.previousElementSibling.nodeName?e.parentElement.insertBefore(e.firstChild,e):e.previousElementSibling.appendChild(e.firstChild)}else S=e.firstChild,"#text"===e.firstChild.nodeName||this.inlineNode.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0?(R?(z.appendChild(e.firstChild),I.appendChild(z)):((D=(0,r.az)("DIV"===u?"div":"p")).appendChild(e.firstChild),I.appendChild(D)),z=D,R=!0):(I.appendChild(e.firstChild),R=!1),k=!1;else(0,r.og)(e.firstChild);e.parentNode.replaceChild(I,e)}else i.insertNode(e),S=e.lastChild}else if(p){var x=(0,r.az)("span",{className:"tempSpan"}),T=(0,r.oq)(i.startContainer.parentElement,"a");if(3===i.startContainer.nodeType&&T&&(0,r.oq)(T,"span")){var O=this.getImmediateBlockNode(i.startContainer,c);O.querySelectorAll("br").length>0&&(0,r.og)(O.querySelector("br")),(0,r.oq)(T,"span").appendChild(x)}else i.insertNode(x);for(;e.firstChild;)S=e.firstChild,I.appendChild(e.firstChild);x.parentNode.replaceChild(I,x)}else{for(;e.firstChild;)S=e.firstChild,I.appendChild(e.firstChild);m?v.parentNode.replaceChild(I,v):(i.deleteContents(),(0,r.le)(f)||(0,r.og)(f),(0,r.le)(g)?c.appendChild(I):g.parentNode.appendChild(I))}"#text"===S.nodeName?this.placeCursorEnd(S,e,s,o,c):this.cursorPos(S,e,s,o,c,u)},a.placeCursorEnd=function(t,e,i,s,n){for(t="BR"===t.nodeName?(0,r.le)(t.previousSibling)?t.parentNode:t.previousSibling:t;!(0,r.le)(t)&&"#text"!==t.nodeName&&"IMG"!==t.nodeName&&"BR"!==t.nodeName&&"HR"!==t.nodeName;){if(!(0,r.le)(t.lastChild)&&"P"===t.lastChild.nodeName&&""===t.lastChild.innerHTML){var o=(0,r.az)("br");t.lastChild.appendChild(o)}t=t.lastChild}"IMG"===(t=(0,r.le)(t)?e:t).nodeName?this.imageFocus(t,i,s):i.setSelectionText(s,t,t,t.textContent.length,t.textContent.length),this.removeEmptyElements(n)},a.getNodeCollection=function(t,e,i){var s=[];return t.startOffset===t.endOffset&&t.startContainer===t.endContainer&&"BR"!==t.startContainer.nodeName&&t.startContainer.childNodes.length>0&&("TD"===t.startContainer.nodeName||3!==t.startContainer.nodeType&&i.classList&&i.classList.contains("pasteContent"))?s.push(t.startContainer.childNodes[t.endOffset]):s=e.getInsertNodeCollection(t),s},a.insertTempNode=function(t,e,i,s,n){if(t.startContainer!==n||(0,r.le)(t.startContainer.childNodes[t.endOffset-1])||"TABLE"!==t.startContainer.childNodes[t.endOffset-1].nodeName)if(t.startContainer!==n||(0,r.le)(t.startContainer.childNodes[t.endOffset])||"TABLE"!==t.startContainer.childNodes[t.endOffset].nodeName)if(t.startContainer===t.endContainer&&3!==t.startContainer.nodeType&&"HR"===e.firstChild.nodeName)t.startContainer.classList.contains("e-content")||"BODY"===t.startContainer.nodeName?t.startContainer.appendChild(e):t.startContainer.parentNode.insertBefore(e,t.startContainer);else{var o=this.getImmediateBlockNode(i[i.length-1],n);if(((0,r.le)(o)||(0,r.le)(o.parentElement))&&3!==t.endContainer.nodeType&&t.setEnd(o=t.endContainer,t.endContainer.textContent.length),"BODY"===o.nodeName&&t.startContainer===t.endContainer&&1===t.startContainer.nodeType&&(o=t.startContainer),o.closest("LI")&&e&&e.firstElementChild&&("OL"===e.firstElementChild.tagName||"UL"===e.firstElementChild.tagName))for(var l=void 0;e.firstElementChild.lastElementChild&&"LI"===e.firstElementChild.lastElementChild.tagName;)(l=e.firstElementChild.lastElementChild).style.removeProperty("margin-left"),l.style.removeProperty("margin-top"),l.style.removeProperty("margin-bottom"),e.firstElementChild.insertAdjacentElement("afterend",l);if("TD"===o.nodeName||"TH"===o.nodeName||"TR"===o.nodeName){var h=(0,r.az)("span",{className:"tempSpan"});t.insertNode(h),h.parentNode.replaceChild(e,h)}else{var c=new Sn,u=this.getNodeCollection(t,c,e)[this.getNodeCollection(t,c,e).length-1],p=void 0;if("BR"!==u.nodeName&&"HR"!==u.nodeName&&("#text"!==u.nodeName||(0,r.le)(u.parentElement)||"LI"!==u.parentElement.nodeName)||(0,r.le)(u.parentElement)||0!==u.parentElement.textContent.trim().length){if(("#text"===u.nodeName||"BR"===u.nodeName)&&!(0,r.le)(u.parentElement)&&("LI"===u.parentElement.nodeName||o===n&&u.parentElement===o)&&u.parentElement.textContent.trim().length>0)return p=u,"LI"===u.parentElement.nodeName&&!(0,r.le)(u.nextSibling)&&"BR"===u.nextSibling.nodeName&&(0,r.og)(u.nextSibling),t.collapsed||t.deleteContents(),t.insertNode(e),void(this.contentsDeleted=!0);p=s.GetSpliceNode(t,o)}else p=u,"LI"===u.parentElement.nodeName&&!(0,r.le)(u.nextSibling)&&"BR"===u.nextSibling.nodeName&&(0,r.og)(u.nextSibling);p.parentNode.replaceChild(e,p)}}else t.startContainer.insertBefore(e,t.startContainer.childNodes[t.endOffset]);else(0,r.le)(t.startContainer.childNodes[t.endOffset-1].nextSibling)?t.startContainer.appendChild(e):t.startContainer.insertBefore(e,t.startContainer.childNodes[t.endOffset-1].nextSibling)},a.cursorPos=function(t,e,i,s,n,o){t.classList.add("lastNode"),n.innerHTML=function(a,t){var e=document.createElement("div");e.innerHTML=a,e.setAttribute("class","tempDiv");var i=document.createElement("div");if(e.childNodes.length>0){for(var n=void 0,o=void 0,l=void 0;e.firstChild;)"#text"===e.firstChild.nodeName&&(e.firstChild.textContent.indexOf("\n")<0||""!==e.firstChild.textContent.trim())||CK.indexOf(e.firstChild.nodeName.toLocaleLowerCase())>=0?n?(o.appendChild(e.firstChild),o=l,n=!0):"BR"===t?(i.appendChild(e.firstChild),o=i):(l=(0,r.az)("p"),i.appendChild(l),l.appendChild(e.firstChild),o=l,n=!0):"#text"===e.firstChild.nodeName&&("\n"===e.firstChild.textContent||e.firstChild.textContent.indexOf("\n")>=0&&""===e.firstChild.textContent.trim())?(0,r.og)(e.firstChild):(i.appendChild(e.firstChild),n=!1);for(var h=i.querySelectorAll("table"),c=0;c<h.length;c++){"0"===h[c].getAttribute("border")&&h[c].removeAttribute("border");for(var u=h[c].querySelectorAll("td"),p=0;p<u.length;p++)"none"===u[p].style.borderLeft&&u[p].style.removeProperty("border-left"),"none"===u[p].style.borderRight&&u[p].style.removeProperty("border-right"),"none"===u[p].style.borderBottom&&u[p].style.removeProperty("border-bottom"),"none"===u[p].style.borderTop&&u[p].style.removeProperty("border-top"),"none"===u[p].style.border&&u[p].style.removeProperty("border");h[c].classList.contains("e-rte-table")||h[c].classList.add("e-rte-table")}var d=i.querySelectorAll("img");for(c=0;c<d.length;c++)d[c].classList.contains("e-rte-image")||d[c].classList.add("e-rte-image"),d[c].classList.contains("e-imginline")||d[c].classList.contains("e-imgbreak")||d[c].classList.add("e-imginline")}return i.innerHTML}(n.innerHTML,o),t=n.querySelector(".lastNode"),(0,r.le)(t)||(this.placeCursorEnd(t,e,i,s,n),t.classList.remove("lastNode"),0===t.classList.length&&t.removeAttribute("class"))},a.imageFocus=function(t,e,i){var s=document.createTextNode(" ");t.parentNode.insertBefore(s,t.nextSibling),e.setSelectionText(i,t.nextSibling,t.nextSibling,0,0)},a.getImmediateBlockNode=function(t,e){do{t=t.parentNode}while(t&&Kc.indexOf(t.nodeName.toLocaleLowerCase())<0);return t},a.removingComments=function(t){var e=t.innerHTML;e=e.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=e},a.findDetachEmptyElem=function(t){return(0,r.le)(t.parentElement)?null:t.parentElement.textContent.length>0&&t.parentElement.textContent.match(/\u00a0/g)&&t.parentElement.textContent.match(/\u00a0/g).length>0||""!==t.parentElement.textContent.trim()||"true"===t.parentElement.contentEditable||!(0,r.le)(t.parentElement.querySelector("img"))?t:this.findDetachEmptyElem(t.parentElement)},a.removeEmptyElements=function(t){for(var e=t.querySelectorAll(":empty"),i=Array.from(e).filter(function(l){return!l.closest("svg")&&!l.closest("canvas")}),s=0;s<i.length;s++){var n=!0;if("DIV"===i[s].tagName&&(n="none"===i[s].style.borderBottom||""===i[s].style.borderBottom),qK.indexOf(i[s].tagName.toLowerCase())<0&&n){var o=this.findDetachEmptyElem(i[s]);(0,r.le)(o)||(0,r.og)(o)}}},a.closestEle=function(t,e){for(var i=t;i&&1===i.nodeType;){if(i.parentNode===e||!(0,r.le)(i.parentNode.tagName)&&-1!==so.indexOf(i.parentNode.tagName.toLocaleLowerCase()))return i;i=i.parentNode}return null},a.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],a.contentsDeleted=!1,a}(),UK=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(UV,this.linkCommand,this)},a.prototype.linkCommand=function(t){switch(t.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(t);break;case"openlink":this.openLink(t);break;case"removelink":this.removeLink(t)}},a.prototype.createLink=function(t){var e=!(0,r.le)(t.item.selectParent)&&t.item.selectParent.length>0&&(0,r.oq)(t.item.selectParent[0],"a");if(e=(0,r.le)(e)?!(0,r.le)(t.item.selectParent)&&t.item.selectParent.length>0?t.item.selectParent[0]:null:e,(0,r.le)(e)||"A"!==e.tagName){var o=new Sn,l=o.getRange(this.parent.currentDocument);"#text"===l.endContainer.nodeName&&l.startContainer.textContent.length===l.endOffset+1&&" "===l.endContainer.textContent.charAt(l.endOffset)&&!(0,r.le)(l.endContainer.nextSibling)&&"A"===l.endContainer.nextSibling.nodeName&&(o.setSelectionText(this.parent.currentDocument,l.startContainer,l.endContainer,l.startOffset,l.endOffset+1),l=o.getRange(this.parent.currentDocument));var h=!!(0,r.le)(t.item.text)||t.item.text.replace(/ /g,"").localeCompare(l.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(t.event&&"keydown"===t.event.type&&(32===t.event.keyCode||13===t.event.keyCode)||"Paste"===t.item.action||l.collapsed||h){var c=this.createAchorNode(t);c.innerText=""===t.item.text?t.item.url:t.item.text;var p=c.innerText.replace(/  +/g,function(f){return"\xa0".repeat(f.length)});if(c.innerText=p,t.item.selection.restore(),mr.Insert(this.parent.currentDocument,c,this.parent.editableElement),!t.event||"keydown"!==t.event.type||32!==t.event.keyCode&&13!==t.event.keyCode)t.item.selection.setSelectionText(this.parent.currentDocument,c.childNodes[0],c.childNodes[0],"Paste"===t.item.action?c.childNodes[0].textContent.length:0,c.childNodes[0].textContent.length);else{var d=t.item.selection.range.startContainer;d.textContent=this.removeText(d.textContent,t.item.text)}}else this.createLinkNode(t)}else{var i=e,s="";(0,r.le)(t.item.url)||i.setAttribute("href",t.item.url),(0,r.le)(t.item.title)||i.setAttribute("title",t.item.title),!(0,r.le)(t.item.text)&&""!==t.item.text&&(s=i.innerText,i.innerText=t.item.text),(0,r.le)(t.item.target)?(i.removeAttribute("target"),i.removeAttribute("aria-label")):(i.setAttribute("target",t.item.target),i.setAttribute("aria-label",t.item.ariaLabel)),s===t.item.text?(t.item.selection.setSelectionText(this.parent.currentDocument,i,i,1,1),t.item.selection.restore()):t.item.selection.setSelectionText(this.parent.currentDocument,i.childNodes[0],i.childNodes[0],"Paste"===t.item.action?i.childNodes[0].textContent.length:0,i.childNodes[0].textContent.length)}t.callBack&&t.callBack({requestType:"Links",editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.createLinkNode=function(t){for(var c,f,e=new Sn,i=new Yp,s=e.getRange(this.parent.currentDocument),n=this.getSelectionNodes(e.getNodeCollection(s)),o=e.save(s,this.parent.currentDocument),l=[],h=[],u=[],p=[],d=[],g=0;g<n.length;g++)n[g]=i.GetSpliceNode(s,n[g]),l[g]=n[g];for(var m=0;m<l.length;m++){var v=!0;for(c=l[m];!0===v;){if("A"===c.parentNode.nodeName){var y=c.parentNode;c.parentNode.parentNode.insertBefore(y.firstChild,y),c.parentNode.removeChild(y)}this.isBlockNode(c.parentNode)||0===l.length||0===m||m===l.length-1||3===s.startContainer.nodeType?(h[m]=c,v=!1):c=c.parentNode}}m=0;for(var C=0;m<h.length;m++)if(0===m&&(d[C]=h[m]),h.length>1&&m<h.length-1){if(h[m].parentElement===h[m+1].parentElement&&h[m]===h[m+1])continue;d[C+1]=h[m+1],C++}var b=0;for(p[b]=this.createAchorNode(t),m=0;m<d.length;m++)if(0===m&&(f=d[m].cloneNode(!0),p[m].appendChild(f)),m<d.length-1)if(d[m].parentNode===d[m+1].parentNode){var S=d[m+1].cloneNode(!0);p[b].appendChild(S)}else p[b+=1]=this.createAchorNode(t),f=d[m+1].cloneNode(!0),p[b].appendChild(f);this.parent.nodeSelection.setRange(document,o.range),m=0;for(var I=0,x=0;m<=d.length;m++)0===m&&(d[m].parentNode.insertBefore(p[I],d[m].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,p[I]),u[x]=d[m],x++),m<d.length-1&&(d[m].parentNode===d[m+1].parentNode?(u[x]=d[m+1],x++):(d[m+1].parentNode.insertBefore(p[I+=1],d[m+1]),u[x]=d[m+1],x++));for(m=0;m<u.length;m++)u[m].parentNode&&u[m].parentNode.removeChild(u[m])},a.prototype.createAchorNode=function(t){var e=(0,r.az)("a",{className:"e-rte-anchor",attrs:{href:t.item.url,title:(0,r.le)(t.item.title)||""===t.item.title?t.item.url:t.item.title}});return(0,r.le)(t.item.target)||e.setAttribute("target",t.item.target),e},a.prototype.getSelectionNodes=function(t){t=t.reverse();for(var e=0;e<t.length;e++)(3!==t[e].nodeType||""===t[e].textContent.trim())&&"IMG"!==t[e].nodeName&&(t.splice(e,1),e--);return t.reverse()},a.prototype.isBlockNode=function(t){return!!t&&t.nodeType===Node.ELEMENT_NODE&&Kc.indexOf(t.tagName.toLowerCase())>=0},a.prototype.removeText=function(t,e){for(var i=t.split(" "),s=0;s<i.length;s++)i[s]===e&&(i.splice(s,1),s--);return i.join(" ")+" "},a.prototype.openLink=function(t){document.defaultView.open(t.item.url,t.item.target),this.callBack(t)},a.prototype.removeLink=function(t){var e=this.parent.domNode.blockNodes();if(e.length<2){this.parent.domNode.setMarker(t.item.selection);for(var s=(0,r.oq)(t.item.selectParent[0],"a")||t.item.selectParent[0],n=s.parentNode,o=[];s.firstChild;null)o.push(n.insertBefore(s.firstChild,s));n.removeChild(s),o&&1===o.length&&(t.item.selection.startContainer=t.item.selection.getNodeArray(o[o.length-1],!0),t.item.selection.endContainer=t.item.selection.startContainer),t.item.selection=this.parent.domNode.saveMarker(t.item.selection)}else for(var l=0;l<e.length;l++)for(var h=e[l].querySelectorAll("a"),c=0;c<h.length;c++)this.parent.currentDocument.getSelection().containsNode(h[c],!0)&&(h[c].outerHTML=h[c].innerHTML);t.item.selection.restore(),this.callBack(t)},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a}(),GK=function(){function a(t){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(iH,this.applyAlignment,this),this.parent.observer.on(Qi,this.onKeyDown,this)},a.prototype.onKeyDown=function(t){switch(t.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:t.callBack}),t.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:t.callBack}),t.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:t.callBack}),t.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:t.callBack}),t.event.preventDefault()}},a.prototype.getTableNode=function(t){var e=t.startContainer.nodeType===Node.ELEMENT_NODE?t.startContainer:t.startContainer.parentNode;return[(0,r.oq)(e,"td,th")]},a.prototype.applyAlignment=function(t){var e="Table"===t.value,i=this.parent.nodeSelection.getRange(this.parent.currentDocument),s=this.parent.nodeSelection.save(i,this.parent.currentDocument);if(e)(0,r.V7)(this.getTableNode(i)[0],{"text-align":this.alignments[t.subCommand]});else{this.parent.domNode.setMarker(s);for(var n=this.parent.domNode.blockNodes(),o=0;o<n.length;o++)(0,r.V7)(n[o],{"text-align":this.alignments[t.subCommand]});var h=this.parent.domNode.getImageTagInSelection();for(o=0;o<h.length;o++){var c=[];c.push(h[o]),this.parent.imgObj.imageCommand({item:{selectNode:c},subCommand:t.subCommand,value:t.subCommand,callBack:t.callBack,selector:t.selector})}this.parent.editableElement.focus(),s=this.parent.domNode.saveMarker(s),Ts()&&xh(this.parent.editableElement,t.selector),s.restore()}t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:e?this.getTableNode(i):this.parent.domNode.blockNodes()})},a}(),ZK=function(){function a(t){this.indentValue=20,this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(sH,this.applyIndents,this),this.parent.observer.on(Qi,this.onKeyDown,this)},a.prototype.onKeyDown=function(t){switch(t.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:t.callBack}),t.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:t.callBack}),t.event.preventDefault()}},a.prototype.applyIndents=function(t){var e=this.parent.editableElement,i=e.classList.contains("e-rtl"),s=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(s,this.parent.currentDocument);this.parent.domNode.setMarker(n);for(var o=this.parent.domNode.blockNodes(),l=o.slice(),h=[],c=0;c<l.length;c++)"LI"!==l[c].tagName&&"LI"===l[c].parentNode.tagName?(o.splice(o.indexOf(l[c]),1),h.push(l[c].parentNode)):"LI"===l[c].tagName&&(o.splice(o.indexOf(l[c]),1),h.push(l[c]));for(h.length>0&&this.parent.observer.notify(Qi,{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==t.subCommand,which:9,action:"indent"},ignoreDefault:!0}),c=0;c<o.length;c++){var u=o[c],p=i?u.style.marginRight:u.style.marginLeft,d=void 0;"Indent"===t.subCommand?(d=""===p?this.indentValue+"px":parseInt(p,null)+this.indentValue+"px",i?u.style.marginRight=d:u.style.marginLeft=d):(d=""===p||"0px"===p?"":parseInt(p,null)-this.indentValue+"px",i?u.style.marginRight=d:u.style.marginLeft=d)}e.focus(),Ts()&&xh(e,t.selector),(n=this.parent.domNode.saveMarker(n)).restore(),t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},a}(),no="e-imgright",ro="e-imgleft",Kp="e-imgcenter",$k="e-imgbreak",si="e-img-caption",lH="e-caption-inline",hH="e-audio-inline",cH="e-clickelem",CC="e-video-clickelem",eA="e-rte-audio",Xp="e-rte-video",SC="e-audio-wrap",uH="e-embed-video-wrap",pH="e-audio-focus",dH="e-video-focus",fH="e-video-inline",tX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(Jk,this.imageCommand,this)},a.prototype.imageCommand=function(t){switch(t.value.toString().toLowerCase()){case"image":case"replace":this.createImage(t);break;case"insertlink":this.insertImageLink(t);break;case"openimagelink":this.openImageLink(t);break;case"editimagelink":this.editImageLink(t);break;case"removeimagelink":this.removeImageLink(t);break;case"remove":this.removeImage(t);break;case"alttext":this.insertAltTextImage(t);break;case"dimension":this.imageDimension(t);break;case"caption":this.imageCaption(t);break;case"justifyleft":this.imageJustifyLeft(t);break;case"justifycenter":this.imageJustifyCenter(t);break;case"justifyright":this.imageJustifyRight(t);break;case"inline":this.imageInline(t);break;case"break":this.imageBreak(t)}},a.prototype.createImage=function(t){var e=this,i=!1;if(t.item.url=(0,r.le)(t.item.url)||"undefined"===t.item.url?t.item.src:t.item.url,(0,r.le)(t.item.selectParent)||"IMG"!==t.item.selectParent[0].tagName){var n=(0,r.az)("img");this.setStyle(n,t),(0,r.le)(t.item.selection)||t.item.selection.restore(),(0,r.le)(t.selector)||"pasteCleanupModule"!==t.selector?mr.Insert(this.parent.currentDocument,n,this.parent.editableElement):t.callBack({requestType:"Images",editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[n]})}else this.setStyle(t.item.selectParent[0],t,i=!0);if(t.callBack&&((0,r.le)(t.selector)||!(0,r.le)(t.selector)&&"pasteCleanupModule"!==t.selector)){var o=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],l="Replace"===t.value||i?t.item.selectParent[0]:r.AR.isIE?o.previousSibling:o.previousElementSibling;l.addEventListener("load",function(){("Replace"!==t.value||!i)&&t.callBack({requestType:"Images",editorMode:"HTML",event:t.event,range:e.parent.nodeSelection.getRange(e.parent.currentDocument),elements:[l]})})}"Replace"===t.value&&(t.item.subCommand="Replace",this.callBack(t))},a.prototype.setStyle=function(t,e,i){var s;if((0,r.le)(e.item.url)||t.setAttribute("src",e.item.url),i)for(var n={"e-imgcenter":"e-imgcenter","e-imgright":"e-imgright","e-imgleft":"e-imgleft"},o=t.classList,l=0;l<o.length;l++)(0,r.le)(n[o[l]])||(s=n[o[l]]);t.setAttribute("class","e-rte-image"+((0,r.le)(e.item.cssClass)?"":" "+e.item.cssClass)+((0,r.le)(s)?"":" "+s)),(0,r.le)(e.item.altText)||t.setAttribute("alt",e.item.altText),!(0,r.le)(e.item.width)&&!(0,r.le)(e.item.width.width)&&t.setAttribute("width",this.calculateStyleValue(e.item.width.width)),!(0,r.le)(e.item.height)&&!(0,r.le)(e.item.height.height)&&t.setAttribute("height",this.calculateStyleValue(e.item.height.height)),!(0,r.le)(e.item.width)&&!(0,r.le)(e.item.width.minWidth)&&(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),!(0,r.le)(e.item.width)&&!(0,r.le)(e.item.width.maxWidth)&&(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth)),!(0,r.le)(e.item.height)&&!(0,r.le)(e.item.height.minHeight)&&(t.style.minHeight=this.calculateStyleValue(e.item.height.minHeight)),!(0,r.le)(e.item.height)&&!(0,r.le)(e.item.height.maxHeight)&&(t.style.maxHeight=this.calculateStyleValue(e.item.height.maxHeight))},a.prototype.calculateStyleValue=function(t){return"string"==typeof t&&(t.indexOf("px")||t.indexOf("%")||t.indexOf("auto"))?t:t+"px"},a.prototype.insertImageLink=function(t){var e=(0,r.az)("a",{attrs:{href:t.item.url}});t.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(t.item.selection.restore(),e.setAttribute("contenteditable","true")),e.appendChild(t.item.selectNode[0]),(0,r.le)(t.item.target)||e.setAttribute("target",t.item.target),(0,r.le)(t.item.ariaLabel)||e.setAttribute("aria-label",t.item.ariaLabel),mr.Insert(this.parent.currentDocument,e,this.parent.editableElement),this.callBack(t)},a.prototype.openImageLink=function(t){document.defaultView.open(t.item.url,t.item.target),this.callBack(t)},a.prototype.removeImageLink=function(t){var e=t.item.selectParent[0];if(e.classList.contains("e-img-caption")){var i=(0,r.Ys)(".e-img-wrap",e),s=(0,r.Ys)(".e-img-inner",e),n=s.cloneNode(!0);(0,r.og)((0,r.Ys)("a",e)),(0,r.og)(s),i.appendChild(t.item.insertElement),i.appendChild(n)}else(0,r.og)(e),r.AR.isIE&&t.item.selection&&t.item.selection.restore(),mr.Insert(this.parent.currentDocument,t.item.insertElement,this.parent.editableElement);this.callBack(t)},a.prototype.editImageLink=function(t){t.item.selectNode[0].parentElement.href=t.item.url,(0,r.le)(t.item.target)?(t.item.selectNode[0].parentElement.removeAttribute("target"),t.item.selectNode[0].parentElement.removeAttribute("aria-label")):(t.item.selectNode[0].parentElement.target=t.item.target,t.item.selectNode[0].parentElement.ariaLabel=t.item.ariaLabel),this.callBack(t)},a.prototype.removeImage=function(t){(0,r.oq)(t.item.selectNode[0],"a")&&("A"!==t.item.selectNode[0].parentElement.nodeName||(0,r.le)(t.item.selectNode[0].parentElement.innerText))?(0,r.og)((0,r.oq)(t.item.selectNode[0],"a")):(0,r.le)((0,r.oq)(t.item.selectNode[0],"."+si))?(0,r.og)(t.item.selectNode[0]):(0,r.og)((0,r.oq)(t.item.selectNode[0],"."+si)),this.callBack(t)},a.prototype.insertAltTextImage=function(t){t.item.selectNode[0].setAttribute("alt",t.item.altText),this.callBack(t)},a.prototype.imageDimension=function(t){var e=t.item.selectNode[0];e.style.height="",e.style.width="","auto"!==t.item.width?e.style.width=(0,r.Ac)(t.item.width):e.removeAttribute("width"),"auto"!==t.item.height?e.style.height=(0,r.Ac)(t.item.height):e.removeAttribute("height"),this.callBack(t)},a.prototype.imageCaption=function(t){mr.Insert(this.parent.currentDocument,t.item.insertElement,this.parent.editableElement),this.callBack(t)},a.prototype.imageJustifyLeft=function(t){var e=t.item.selectNode[0];(0,r.le)(e)||(e.removeAttribute("class"),(0,r.cn)([e],"e-rte-image"),(0,r.le)((0,r.oq)(e,"."+si))||((0,r.IV)([(0,r.oq)(e,"."+si)],no),(0,r.cn)([(0,r.oq)(e,"."+si)],ro)),"A"===e.parentElement.nodeName?((0,r.IV)([e.parentElement],no),(0,r.cn)([e.parentElement],ro),(0,r.cn)([e],ro)):(0,r.cn)([e],ro),this.callBack(t))},a.prototype.imageJustifyCenter=function(t){var e=t.item.selectNode[0];(0,r.le)(e)||(e.removeAttribute("class"),(0,r.cn)([e],"e-rte-image"),(0,r.le)((0,r.oq)(e,"."+si))||((0,r.IV)([(0,r.oq)(e,"."+si)],ro),(0,r.IV)([(0,r.oq)(e,"."+si)],no),(0,r.cn)([(0,r.oq)(e,"."+si)],Kp)),"A"===e.parentElement.nodeName?((0,r.IV)([e.parentElement],ro),(0,r.IV)([e.parentElement],no),(0,r.cn)([e.parentElement],Kp),(0,r.cn)([e],Kp)):(0,r.cn)([e],Kp),this.callBack(t))},a.prototype.imageJustifyRight=function(t){var e=t.item.selectNode[0];(0,r.le)(e)||(e.removeAttribute("class"),(0,r.cn)([e],"e-rte-image"),(0,r.le)((0,r.oq)(e,"."+si))||((0,r.IV)([(0,r.oq)(e,"."+si)],ro),(0,r.cn)([(0,r.oq)(e,"."+si)],no)),"A"===e.parentElement.nodeName?((0,r.IV)([e.parentElement],ro),(0,r.cn)([e.parentElement],no),(0,r.cn)([e],no)):(0,r.cn)([e],no),this.callBack(t))},a.prototype.imageInline=function(t){var e=t.item.selectNode[0];e.removeAttribute("class"),(0,r.cn)([e],"e-rte-image"),(0,r.cn)([e],"e-imginline"),(0,r.le)((0,r.oq)(e,"."+si))||((0,r.IV)([(0,r.oq)(e,"."+si)],$k),(0,r.IV)([(0,r.oq)(e,"."+si)],Kp),(0,r.IV)([(0,r.oq)(e,"."+si)],ro),(0,r.IV)([(0,r.oq)(e,"."+si)],no),(0,r.cn)([(0,r.oq)(e,"."+si)],lH)),this.callBack(t)},a.prototype.imageBreak=function(t){var e=t.item.selectNode[0];e.removeAttribute("class"),(0,r.cn)([e],$k),(0,r.cn)([e],"e-rte-image"),(0,r.le)((0,r.oq)(e,"."+si))||((0,r.IV)([(0,r.oq)(e,"."+si)],lH),(0,r.IV)([(0,r.oq)(e,"."+si)],Kp),(0,r.IV)([(0,r.oq)(e,"."+si)],ro),(0,r.IV)([(0,r.oq)(e,"."+si)],no),(0,r.cn)([(0,r.oq)(e,"."+si)],$k)),this.callBack(t)},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a}(),iX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(qV,this.audioCommand,this)},a.prototype.audioCommand=function(t){var e,i=t.value.toString().toLowerCase();switch(("inline"===i||"break"===i||"audioremove"===i)&&(e=t.item.selectNode[0]),i){case"audio":case"audioreplace":this.createAudio(t);break;case"inline":e.removeAttribute("class"),e.closest("."+SC).style.display="inline-block",(0,r.cn)([e],[eA,hH,pH]),this.callBack(t);break;case"break":e.removeAttribute("class"),e.closest("."+SC).style.display="block",(0,r.cn)([e],["e-audio-break",eA,pH]),this.callBack(t);break;case"audioremove":(0,r.og)(e),this.callBack(t)}},a.prototype.createAudio=function(t){var s,e=this,i=!1;if(!(0,r.le)(t.item.selectParent)&&t.item.selectParent[0].classList&&(t.item.selectParent[0].classList.contains(cH)||t.item.selectParent[0].classList.contains(SC))){var n=t.item.selectParent[0].querySelector("source");this.setStyle(n,t),i=!0}else{s=(0,r.az)("span",{className:SC,attrs:{contentEditable:"false",title:t.item.fileName}});var o=(0,r.az)("audio",{className:eA+" "+hH,attrs:{controls:""}}),l=(0,r.az)("source"),h=(0,r.az)("span",{className:cH});if(this.setStyle(l,t),o.appendChild(l),h.appendChild(o),s.appendChild(h),(0,r.le)(t.item.selection)||t.item.selection.restore(),mr.Insert(this.parent.currentDocument,s,this.parent.editableElement),null===s.nextElementSibling){var c=(0,r.az)("br");s.parentNode.insertBefore(c,s.nextSibling)}}if(t.callBack&&((0,r.le)(t.selector)||!(0,r.le)(t.selector)&&"pasteCleanupModule"!==t.selector)){var u=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],p="AudioReplace"===t.value||i?t.item.selectParent[0].querySelector("audio"):r.AR.isIE?u:u.querySelector("audio");p.addEventListener("loadeddata",function(){("AudioReplace"!==t.value||!i)&&t.callBack({requestType:"Audios",editorMode:"HTML",event:t.event,range:e.parent.nodeSelection.getRange(e.parent.currentDocument),elements:[p]})}),i&&p.load()}},a.prototype.setStyle=function(t,e){(0,r.le)(e.item.url)||t.setAttribute("src",e.item.url);var i=e.item.fileName?e.item.fileName.split(".").pop().toLowerCase():e.item.url?e.item.url.split(".").pop().toLowerCase():"";t.type="opus"===i?"audio/ogg":"m4a"===i?"audio/mp4":e.item.fileName&&e.item.fileName.split(".").length>0?"audio/"+e.item.fileName.split(".")[e.item.fileName.split(".").length-1]:e.item.url&&e.item.url.split(".").length>0?"audio/"+e.item.url.split(".")[e.item.url.split(".").length-1]:""},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a}(),sX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(_V,this.videoCommand,this)},a.prototype.videoCommand=function(t){var e,i,s,n=t.value.toString().toLowerCase();switch("video"!==n&&"videoreplace"!==n&&(i=(e=t.item.selectNode[0]).closest("."+uH),s=e.closest("."+CC)),n){case"video":case"videoreplace":this.createVideo(t);break;case"videodimension":this.videoDimension(t);break;case"inline":e.removeAttribute("class"),i&&(i.style.display="inline-block"),s&&(e.parentElement.style.cssFloat=""),(0,r.cn)([e],[Xp,fH,dH]),this.callBack(t);break;case"break":e.removeAttribute("class"),i&&(i.style.display="block"),s&&(e.parentElement.style.cssFloat=""),(0,r.cn)([e],["e-video-break",Xp,dH]),this.callBack(t);break;case"justifyleft":e.removeAttribute("class"),i&&(i.style.display="block"),s&&(e.parentElement.style.cssFloat="left"),(0,r.cn)([e],[Xp,"e-video-left"]),this.callBack(t);break;case"justifycenter":e.removeAttribute("class"),i&&(i.style.display="block"),s&&(e.parentElement.style.cssFloat=""),(0,r.cn)([e],[Xp,"e-video-center"]),this.callBack(t);break;case"justifyright":e.removeAttribute("class"),i&&(i.style.display="block"),s&&(e.parentElement.style.cssFloat="right"),(0,r.cn)([e],[Xp,"e-video-right"]),this.callBack(t);break;case"videoremove":(0,r.og)(e.parentElement),this.callBack(t)}},a.prototype.createVideo=function(t){var s,n,o,e=this,i=!1;if("VideoReplace"!==t.value||(0,r.le)(t.item.selectParent)||"VIDEO"!==t.item.selectParent[0].tagName)if("VideoReplace"===t.value&&!(0,r.le)(t.item.selectParent)&&t.item.selectParent[0].classList&&t.item.selectParent[0].classList.contains(CC))t.item.selectParent[0].innerHTML=t.item.fileName,this.setStyle(t.item.selectParent[0].firstElementChild,t,t.item.selectParent[0].firstElementChild);else{if(t.item.isEmbedUrl){s=(0,r.az)("span",{className:uH,attrs:{contentEditable:"false"}});var h=(0,r.az)("span",{className:CC}),c=(0,r.az)("template");c.innerHTML=t.item.fileName,h.appendChild(c.content),n=o=h.firstElementChild,this.setStyle(o,t,n),s.appendChild(h)}else s=(0,r.az)("span",{className:"e-video-wrap",attrs:{contentEditable:"false",title:t.item.fileName}}),n=(0,r.az)("video",{className:Xp+" "+fH,attrs:{controls:""}}),o=(0,r.az)("source"),this.setStyle(o,t,n),n.appendChild(o),s.appendChild(n);if((0,r.le)(t.item.selection)||t.item.selection.restore(),mr.Insert(this.parent.currentDocument,s,this.parent.editableElement),null===s.nextElementSibling){var u=(0,r.az)("br");s.parentNode.insertBefore(u,s.nextSibling)}}else{var l=t.item.selectParent[0].querySelector("source");this.setStyle(l,t,l),i=!0}if(t.callBack&&((0,r.le)(t.selector)||!(0,r.le)(t.selector)&&"pasteCleanupModule"!==t.selector)){var p=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],d="VideoReplace"===t.value||i?t.item.isEmbedUrl?t.item.selectParent[0].querySelector("iframe"):t.item.selectParent[0]:r.AR.isIE?p:t.item.isEmbedUrl?p.querySelector("iframe"):p.lastElementChild;d.addEventListener("IFRAME"!==d.tagName?"loadeddata":"load",function(){("VideoReplace"!==t.value||!i)&&(t.item.isEmbedUrl&&d&&d.classList.add("e-rte-embed-url"),t.callBack({requestType:"Videos",editorMode:"HTML",event:t.event,range:e.parent.nodeSelection.getRange(e.parent.currentDocument),elements:[d]}))}),i&&d.load(),-1!==r.AR.userAgent.indexOf("Firefox")&&(n.addEventListener("play",function(){e.editAreaVideoClick(t)}),n.addEventListener("pause",function(){e.editAreaVideoClick(t)}))}},a.prototype.editAreaVideoClick=function(t){t.callBack({requestType:"VideosPlayPause",editorMode:"HTML",event:t.event})},a.prototype.setStyle=function(t,e,i){""!==e.item.url&&!(0,r.le)(e.item.url)&&t.setAttribute("src",e.item.url),e.item.isEmbedUrl||(t.type=e.item.fileName&&e.item.fileName.split(".").length>0?"video/"+e.item.fileName.split(".")[e.item.fileName.split(".").length-1]:e.item.url&&e.item.url.split(".").length>0?"video/"+e.item.url.split(".")[e.item.url.split(".").length-1]:""),!(0,r.le)(e.item.width)&&!(0,r.le)(e.item.width.width)&&i.setAttribute("width",(0,r.Ac)(e.item.width.width)),!(0,r.le)(e.item.height)&&!(0,r.le)(e.item.height.height)&&i.setAttribute("height",(0,r.Ac)(e.item.height.height)),!(0,r.le)(e.item.width)&&!(0,r.le)(e.item.width.minWidth)&&(i.style.minWidth=(0,r.Ac)(e.item.width.minWidth)),!(0,r.le)(e.item.width)&&!(0,r.le)(e.item.width.maxWidth)&&(i.style.maxWidth=(0,r.Ac)(e.item.width.maxWidth)),!(0,r.le)(e.item.height)&&!(0,r.le)(e.item.height.minHeight)&&(i.style.minHeight=(0,r.Ac)(e.item.height.minHeight)),!(0,r.le)(e.item.height)&&!(0,r.le)(e.item.height.maxHeight)&&(i.style.maxHeight=(0,r.Ac)(e.item.height.maxHeight))},a.prototype.videoDimension=function(t){var e=t.item.selectNode[0].classList.contains(CC)?t.item.selectNode[0].querySelector("iframe"):t.item.selectNode[0];e.style.height="",e.style.width="","auto"!==t.item.width?e.style.width=(0,r.Ac)(t.item.width):e.removeAttribute("width"),"auto"!==t.item.height?e.style.height=(0,r.Ac)(t.item.height):e.removeAttribute("height"),this.callBack(t)},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a}(),nX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(WV,this.createTable,this),this.parent.observer.on(GV,this.insertRow,this),this.parent.observer.on(ZV,this.insertColumn,this),this.parent.observer.on(YV,this.deleteRow,this),this.parent.observer.on(KV,this.deleteColumn,this),this.parent.observer.on(XV,this.removeTable,this),this.parent.observer.on(QV,this.tableHeader,this),this.parent.observer.on(JV,this.tableVerticalAlign,this),this.parent.observer.on($V,this.cellMerge,this),this.parent.observer.on(tH,this.HorizontalSplit,this),this.parent.observer.on(eH,this.VerticalSplit,this),this.parent.observer.on("TABLE_MOVE",this.tableMove,this)},a.prototype.createTable=function(t){var e=(0,r.az)("table",{className:"e-rte-table"}),i=(0,r.az)("tbody");(0,r.le)(t.item.width.width)||(e.style.width=this.calculateStyleValue(t.item.width.width)),(0,r.le)(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),(0,r.le)(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth));for(var s=parseInt(t.item.width.width,10)>100?100/t.item.columns:parseInt(t.item.width.width,10)/t.item.columns,n=0;n<t.item.rows;n++){for(var o=(0,r.az)("tr"),l=0;l<t.item.columns;l++){var h=(0,r.az)("td");h.appendChild((0,r.az)("br")),h.style.width=s+"%",o.appendChild(h)}i.appendChild(o)}if(e.appendChild(i),t.item.selection.restore(),mr.Insert(this.parent.currentDocument,e,this.parent.editableElement),this.removeEmptyNode(),t.item.selection.setSelectionText(this.parent.currentDocument,e.querySelector("td"),e.querySelector("td"),0,0),null===e.nextElementSibling){var c=void 0;"DIV"===t.enterAction?(c=(0,r.az)("div")).appendChild((0,r.az)("br")):"BR"===t.enterAction?c=(0,r.az)("br"):(c=(0,r.az)("p")).appendChild((0,r.az)("br")),this.insertAfter(c,e)}return e.querySelector("td").classList.add("e-cell-select"),t.callBack&&t.callBack({requestType:"Table",editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[e]}),e},a.prototype.calculateStyleValue=function(t){return"string"==typeof t&&(t.indexOf("px")>=0||t.indexOf("%")>=0||t.indexOf("auto")>=0)?t:t+"px"},a.prototype.removeEmptyNode=function(){for(var t=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),e=0;e<t.length;e++)(0,r.og)(t[e]);var i=this.parent.editableElement.querySelectorAll("li *:empty:not(img)");for(e=0;e<i.length;e++)(0,r.og)(i[e]),i.length===e+1&&(i=this.parent.editableElement.querySelectorAll("li *:empty:not(img)"),e=-1);var s=this.parent.editableElement.querySelectorAll("li:empty");for(e=0;e<s.length;e++)(0,r.og)(s[e])},a.prototype.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},a.prototype.getSelectedCellMinMaxIndex=function(t){for(var e=this.curTable.querySelectorAll(".e-cell-select"),i=0,s=t.length,n=0,o=t[0].length,l=0;i<e.length;i++){var h=this.getCorrespondingIndex(e[i],t),c=this.FindIndex(h[0],h[1],t);s=Math.min(h[0],s),n=Math.max(c[0],n),o=Math.min(h[1],o),l=Math.max(c[1],l)}return{startRow:s,endRow:n,startColumn:o,endColumn:l}},a.prototype.insertRow=function(t){var e="InsertRowBefore"!==t.item.subCommand,i=t.item.selection.range.startContainer;if("TH"===i.nodeName||"TD"===i.nodeName||(i=(0,r.oq)(i.parentElement,"td,th")),"th"!==i.nodeName.toLowerCase()||"InsertRowBefore"!==t.item.subCommand){if(this.curTable=(0,r.oq)(this.parent.nodeSelection.range.startContainer.parentElement,"table"),0===this.curTable.querySelectorAll(".e-cell-select").length){var s=this.curTable.rows[this.curTable.rows.length-1],n=s.cloneNode(!0);n.removeAttribute("rowspan"),this.insertAfter(n,s)}else{for(var o=this.getCorrespondingColumns(),l=this.getSelectedCellMinMaxIndex(o),h=e?l.endRow:l.startRow,c=(0,r.az)("tr"),u=this.curTable.querySelectorAll("th.e-cell-select").length>0,p=0;p<o[h].length;p++)if(e&&h<o.length-1&&o[h][p]===o[h+1][p]||!e&&0<h&&o[h][p]===o[h-1][p])(0===p||0<p&&o[h][p]!==o[h][p-1])&&o[h][p].setAttribute("rowspan",(parseInt(o[h][p].getAttribute("rowspan"),10)+1).toString());else{var d=(0,r.az)("td");d.appendChild((0,r.az)("br")),c.appendChild(d),d.setAttribute("style",o[u&&e&&o[h+1]?h+1:h][p].getAttribute("style"))}var f=void 0;f=u&&e?this.curTable.querySelector("tbody").childNodes[0]:this.curTable.rows[h],"InsertRowBefore"===t.item.subCommand||u?f.parentElement.insertBefore(c,f):this.insertAfter(c,f)}t.item.selection.setSelectionText(this.parent.currentDocument,t.item.selection.range.startContainer,t.item.selection.range.startContainer,0,0),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.insertColumn=function(t){var e=t.item.selection.range.startContainer;"TH"===e.nodeName||"TD"===e.nodeName||(e=(0,r.oq)(e.parentElement,"td,th"));for(var s,i=(0,r.oq)(e,"tr"),n=(0,r.oq)(i,"table").rows,o=Array.prototype.slice.call(i.querySelectorAll(":scope > td, :scope > th")).indexOf(e),l=parseInt(t.item.width,10)/i.querySelectorAll(":scope > td, :scope > th").length,h=parseInt(t.item.width,10)/(i.querySelectorAll(":scope > td, :scope > th").length+1),c=(0,r.oq)(i,"table"),u=(0,r.oq)(i,"table").querySelectorAll("th,td"),p=0;p<u.length;p++)u[p].dataset.oldWidth=u[p].offsetWidth/c.offsetWidth*100+"%";for(p=0;p<n.length;p++){var d=(s=n[p].querySelectorAll(":scope > td, :scope > th")[o]).cloneNode(!0);d.innerHTML="",d.appendChild((0,r.az)("br")),d.removeAttribute("class"),d.removeAttribute("colspan"),d.removeAttribute("rowspan"),"InsertColumnLeft"===t.item.subCommand?s.parentElement.insertBefore(d,s):this.insertAfter(d,s),d.style.width=h.toFixed(4)+"%",delete d.dataset.oldWidth}for(p=0;p<u.length;p++)u[p].style.width=(Number(u[p].dataset.oldWidth.split("%")[0])*h/l).toFixed(4)+"%",delete u[p].dataset.oldWidth;t.item.selection.setSelectionText(this.parent.currentDocument,e,e,0,0),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.deleteColumn=function(t){var e=t.item.selection.range.startContainer;3===e.nodeType&&(e=(0,r.oq)(e.parentElement,"td,th"));var i=(0,r.oq)(e,"TH"===e.tagName?"thead":"tbody"),s=i&&Array.prototype.indexOf.call(i.childNodes,e.parentNode);if(this.curTable=(0,r.oq)(e,"table"),1===(0,r.oq)(e,"tr").querySelectorAll("th,td").length)t.item.selection.restore(),(0,r.og)((0,r.oq)(e.parentElement,"table"));else{for(var o=void 0,l=this.getCorrespondingColumns(),h=this.getSelectedCellMinMaxIndex(l),c=h.startColumn,u=h.endColumn,p=0;p<l.length;p++)for(var d=l[p],f=0;f<d.length;f++){var g=d[f],m=this.getCorrespondingIndex(g,l),v=parseInt(g.getAttribute("colspan"),10)||1;m[1]+(v-1)>=c&&m[1]<=u&&(v>1?g.setAttribute("colspan",(v-1).toString()):((0,r.og)(g),o=f,r.AR.isIE&&(t.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))))}if(o>-1){var y=i.children[s],C=y&&y.children[o<=y.children.length-1?o:o-1];C&&(t.item.selection.setSelectionText(this.parent.currentDocument,C,C,0,0),C.classList.add("e-cell-select"))}}if(t.callBack){var b=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if("TD"!==b.nodeName){var S=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,I=b.children[S];I&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,I,0)}t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.deleteRow=function(t){var e=t.item.selection.range.startContainer;3===e.nodeType&&(e=(0,r.oq)(e.parentElement,"td,th"));var i=Array.prototype.indexOf.call(e.parentNode.childNodes,e);this.curTable=(0,r.oq)(e,"table");var s,l,h,n=this.getCorrespondingColumns(),o=this.getSelectedCellMinMaxIndex(n);if(1===this.curTable.rows.length)t.item.selection.restore(),(0,r.og)((0,r.oq)(e.parentElement,"table"));else for(l=o.endRow;l>=o.startRow;l--){for(s=this.curTable.rows[l],h=0;h<n[l].length;h++){if((0===h||n[l][h]!==n[l][h-1])&&1<parseInt(n[l][h].getAttribute("rowspan"),10)){var c=parseInt(n[l][h].getAttribute("rowspan"),10)-1;if(1===c){n[l][h].removeAttribute("rowspan");var u=this.getMergedRow(this.getCorrespondingColumns())[h];if(u){var p=u.cloneNode(!0);p.innerHTML="<br>",u.parentElement&&u.parentElement.insertBefore(p,u)}}else n[l][h].setAttribute("rowspan",c.toString())}if(l<n.length-1&&n[l][h]===n[l+1][h]&&(0===l||n[l][h]!==n[l-1][h])){var d=n[l][h],f=void 0;for(f=h;0<f&&n[l][f]===n[l][f-1];f--)0===f?this.curTable.rows[l+1].prepend(d):n[l+1][f-1].insertAdjacentElement("afterend",d)}}var g=s.rowIndex;this.curTable.deleteRow(g);var m=(0,r.le)(this.curTable.rows[g])?this.curTable.querySelectorAll("tbody tr")[g-1]:this.curTable.querySelectorAll("tbody tr")[g],v=m&&m.querySelectorAll("td")[i];v?(t.item.selection.setSelectionText(this.parent.currentDocument,v,v,0,0),v.classList.add("e-cell-select")):(t.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))}t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.getMergedRow=function(t){for(var e,i=0;i<t.length;i++)t[i].length!==this.curTable.rows[0].childNodes.length&&(e=t[i]);return e},a.prototype.removeTable=function(t){var e=t.item.selection.range.startContainer,i=(0,r.oq)((e=3===e.nodeType?e.parentNode:e).parentElement,"table");i&&(t.item.selection.restore(),(0,r.og)(i)),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.tableHeader=function(t){var e=!1,i=t.item.selection.range.startContainer,s=(0,r.oq)((i=3===i.nodeType?i.parentNode:i).parentElement,"table");if([].slice.call(s.childNodes).forEach(function(d){"THEAD"===d.nodeName&&(e=!0)}),s&&!e){for(var n=s.querySelector("tr").childElementCount,o=0,l=0;l<n;l++)o+=parseInt(s.querySelector("tr").children[l].getAttribute("colspan"),10)||1;for(var c=s.createTHead().insertRow(0),u=0;u<o;u++){var p=(0,r.az)("th");p.appendChild((0,r.az)("br")),c.appendChild(p)}}else s.deleteTHead();t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.tableVerticalAlign=function(t){t.item.tableCell.style.verticalAlign="AlignTop"===t.item.subCommand?"top":"AlignMiddle"===t.item.subCommand?"middle":"bottom",t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.cellMerge=function(t){(0,r.le)(this.curTable)&&(this.curTable=(0,r.oq)(this.parent.nodeSelection.range.startContainer.parentElement,"table"));var e=this.curTable.querySelectorAll(".e-cell-select");if(!(e.length<2)){this.mergeCellContent();var i=this.getSelectedMinMaxIndexes(this.getCorrespondingColumns()),s=e[0],n=s.parentElement.querySelectorAll(".e-cell-select");i.startColumn<i.endColumn&&s.setAttribute("colspan",(i.endColumn-i.startColumn+1).toString()),i.startRow<i.endRow&&s.setAttribute("rowspan",(i.endRow-i.startRow+1).toString());for(var o=0,l=n.length-1;l>=0;l--)o+=parseFloat(n[l].style.width);s.style.width=o+"%";for(var h=1;h<=e.length-1;h++)(0,r.og)(e[h]);for(h=0;h<this.curTable.rows.length;h++)""===this.curTable.rows[h].innerHTML&&(0,r.og)(this.curTable.rows[h]);this.updateRowSpanStyle(i.startRow,i.endRow,this.getCorrespondingColumns()),this.updateColSpanStyle(i.startColumn,i.endColumn,this.getCorrespondingColumns()),t.item.selection.setSelectionText(this.parent.currentDocument,t.item.selection.range.startContainer,t.item.selection.range.startContainer,0,0),this.parent.nodeSelection&&s&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.updateColSpanStyle=function(t,e,i){var s,n,o,h,l=0,c=0,u=i;if(t<(e=Math.min(e,u[0].length-1))){for(;n<=e;n++)if(!(t<n&&u[0][n]===u[0][n-1])&&1<(l=Math.min(parseInt(u[0][n].getAttribute("colspan"),10)||1,e-t+1))&&u[0][n]===u[0][n+1])for(c=l-1,s=1;s<u.length;s++){if(u[s][n]!==u[s-1][n])for(o=n;o<n+l;o++)if(1<(h=parseInt(u[s][o].getAttribute("colspan"),10)||1)&&u[s][o]===u[s][o+1])o+=c=Math.min(c,h-1);else if(!(c=Math.max(0,c-1)))break;if(!c)break}c&&this.updateCellAttribute(u,c,"colspan",0,u.length-1,t,e)}},a.prototype.updateRowSpanStyle=function(t,e,i){var s,n,o,h,l=0,c=0,u=i;if(t<(e=Math.min(e,u.length-1))){for(s=t;s<=e;s++)if(!(t<s&&u[s][0]===u[s-1][0])&&u[s][0]&&1<(l=Math.min(parseInt(u[s][0].getAttribute("rowspan"),10)||1,e-t+1))&&u[s][0]===u[s+1][0])for(c=l-1,n=1;n<u[0].length;n++)if(u[s][n]!==u[s][n-1]){for(o=s;o<s+l;o++)if(1<(h=parseInt(u[o][n].getAttribute("rowspan"),10)||1)&&u[o][n]===u[o+1][n])o+=c=Math.min(c,h-1);else if(!(c=Math.max(0,c-1)))break;if(!c)break}c&&this.updateCellAttribute(u,c,"rowspan",t,e,0,u[0].length-1)}},a.prototype.updateCellAttribute=function(t,e,i,s,n,o,l){var h,c,u;for(h=s;h<=n;h++)for(c=o;c<=l;c++)s<h&&t[h][c]===t[h-1][c]||o<c&&t[h][c]===t[h][c-1]||1<(u=parseInt(t[h][c].getAttribute(i),10)||1)&&(1<u-e?t[h][c].setAttribute(i,(u-e).toString()):t[h][c].removeAttribute(i))},a.prototype.mergeCellContent=function(){for(var t=this.curTable.querySelectorAll(".e-cell-select"),e="<br>"===t[0].innerHTML?"":t[0].innerHTML,i=1;i<t.length;i++)"<br>"!==t[i].innerHTML&&(e=e?e+"<br>"+t[i].innerHTML:e+t[i].innerHTML);t[0].innerHTML=e},a.prototype.getSelectedMinMaxIndexes=function(t){var e=this.curTable.querySelectorAll(".e-cell-select");if(0<e.length){for(var i=t.length,s=0,n=t[0].length,o=0,l=0;l<e.length;l++){var h=this.getCorrespondingIndex(e[l],t),c=this.FindIndex(h[0],h[1],t);i=Math.min(h[0],i),s=Math.max(c[0],s),n=Math.min(h[1],n),o=Math.max(c[1],o)}return{startRow:i,endRow:s,startColumn:n,endColumn:o}}return null},a.prototype.HorizontalSplit=function(t){if(this.curTable=(0,r.oq)(t.item.selection.range.startContainer.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.activeCell.cloneNode(!0);i.removeAttribute("class"),i.innerHTML="</br>";var s=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),n=this.getCorrespondingColumns(),o=this.activeCell.getAttribute("rowspan")?parseInt(this.activeCell.getAttribute("rowspan"),10):1;if(o>1){var l=Math.ceil(o/2);1<l?this.activeCell.setAttribute("rowspan",l.toString()):this.activeCell.removeAttribute("rowspan"),1<o-l?i.setAttribute("rowspan",(o-l).toString()):i.removeAttribute("rowspan");var h,c=void 0;for(h=s[0]+Math.ceil(o/2),c=0===s[1]?s[1]:s[1]-1;0<=c&&(n[h][c]===n[h][c-1]||0<h&&n[h][c]===n[h-1][c]);)c--;-1===c?this.curTable.rows[h].firstChild?this.curTable.rows[h].prepend(i):this.curTable.appendChild(i):n[h][c].insertAdjacentElement("afterend",i)}else{var u=(0,r.az)("tr");u.appendChild(i);for(var p=n[s[0]],d=0;d<=p.length-1;d++)p[d]!==p[d-1]&&p[d]!==this.activeCell&&p[d].setAttribute("rowspan",((parseInt(p[d].getAttribute("rowspan"),10)?parseInt(p[d].getAttribute("rowspan"),10):1)+1).toString());this.activeCell.parentNode.insertAdjacentElement("afterend",u)}t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.VerticalSplit=function(t){if(this.curTable=(0,r.oq)(t.item.selection.range.startContainer.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.curTable.rows,s=this.activeCell.cloneNode(!0);s.removeAttribute("class"),s.innerHTML="</br>";var n=parseFloat(this.activeCell.style.width)/2;if("TH"===this.activeCell.tagName&&isNaN(n)){for(var o=this.curTable.querySelector("tr").childElementCount,h=0;h<o;h++)parseInt(this.curTable.querySelector("tr").children[h].getAttribute("colspan"),10);n=parseFloat((this.activeCell.offsetWidth/2/this.curTable.offsetWidth*100).toFixed(1))}var c=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),u=this.getCorrespondingColumns(),p=parseInt(this.activeCell.getAttribute("colspan"),10);if(p>1)1<Math.ceil(p/2)?this.activeCell.setAttribute("colspan",(p/2).toString()):this.activeCell.removeAttribute("colspan"),1<p-p/2?s.setAttribute("colspan",(p-p/2).toString()):s.removeAttribute("colspan");else for(h=0;h<=i.length-1;h++)if(0===h||u[h][c[1]]!==u[h-1][c[1]]){var d=u[h][c[1]];d!==this.activeCell&&d.setAttribute("colspan",((parseInt(d.getAttribute("colspan"),10)?parseInt(d.getAttribute("colspan"),10):1)+1).toString())}this.activeCell.style.width=n+"%",s.style.width=n+"%",this.activeCell.parentNode.insertBefore(s,this.activeCell.nextSibling),t.callBack&&t.callBack({requestType:t.item.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},a.prototype.getCorrespondingColumns=function(){for(var t=[],s=this.curTable.rows,n=0;n<=s.length-1;n++)for(var o=s[n],l=0,h=0;h<=o.children.length-1;h++){for(var c=o.children[h],u=c,p=parseInt(u.getAttribute("colspan"),10)||1,d=parseInt(u.getAttribute("rowspan"),10)||1,f=n;f<n+d;f++)for(var g=l;g<l+p;g++)t[f]||(t[f]=[]),t[f][g]?l++:t[f][g]=c;l+=0}return t},a.prototype.FindIndex=function(t,e,i){var s,n;for(s=t+1,n=e+1;s<i.length;){if(i[s][e]!==i[t][e]){s--;break}s++}for(s===i.length&&s--;n<i[t].length;){if(i[t][n]!==i[t][e]){n--;break}n++}return n===i[t].length&&n--,[s,n]},a.prototype.getCorrespondingIndex=function(t,e){for(var i=0;i<e.length;i++)for(var s=0;s<e[i].length;s++)if(e[i][s]===t)return[i,s];return[]},a.prototype.highlightCells=function(t,e,i,s,n){var o,l,h,c,u=t,p=e,d=i,f=s,g=new rX;for(o=u;o<=p;o++){for(((1<(parseInt(n[o][d].getAttribute("rowspan"),10)||1)||1<(parseInt(n[o][d].getAttribute("colspan"),10)||1))&&(c=this.FindIndex((h=this.getCorrespondingIndex(n[o][d],n))[0],h[1],n))||(1<(parseInt(n[o][f].getAttribute("rowspan"),10)||1)||1<(parseInt(n[o][f].getAttribute("colspan"),10)||1))&&(c=this.FindIndex((h=this.getCorrespondingIndex(n[o][f],n))[0],h[1],n)))&&(u=Math.min(h[0],u),p=Math.max(c[0],p),d=Math.min(h[1],d),f=Math.max(c[1],f)),l=d;l<=f;l++)((1<(parseInt(n[u][l].getAttribute("rowspan"),10)||1)||1<(parseInt(n[u][l].getAttribute("colspan"),10)||1))&&(c=this.FindIndex((h=this.getCorrespondingIndex(n[u][l],n))[0],h[1],n))||(1<(parseInt(n[p][l].getAttribute("rowspan"),10)||1)||1<(parseInt(n[p][l].getAttribute("colspan"),10)||1))&&(c=this.FindIndex((h=this.getCorrespondingIndex(n[p][l],n))[0],h[1],n)))&&(u=Math.min(h[0],u),p=Math.max(c[0],p),d=Math.min(h[1],d),f=Math.max(c[1],f));g=u===t&&p===e&&d===i&&f===s?{startRow:t,endRow:e,startColumn:i,endColumn:s}:this.highlightCells(u,p,d,f,n)}return g},a.prototype.tableMove=function(t){this.activeCell=t.selectNode[0];var e=t.event.target,i=this.activeCell.tagName,s=e.tagName;if(this.curTable=(0,r.oq)(e,"table"),this.curTable.querySelectorAll(".e-cell-select").length>1&&this.parent.nodeSelection.Clear(this.parent.currentDocument),"TD"===e.tagName||"TH"===e.tagName||i===s){for(var n=Array.prototype.slice.call(this.activeCell.parentElement.parentElement.children).indexOf(this.activeCell.parentElement),o=Array.prototype.slice.call(this.activeCell.parentElement.children).indexOf(this.activeCell),l=Array.prototype.slice.call(e.parentElement.parentElement.children).indexOf(e.parentElement),h=Array.prototype.slice.call(e.parentElement.children).indexOf(e),c=this.curTable.querySelectorAll(".e-cell-select"),u=c.length-1;u>=0;u--)this.activeCell!==c[u]&&c[u].classList.remove("e-cell-select");if(n!==l||o!==h){for(var p=this.getCorrespondingColumns(),d=this.getCorrespondingIndex(this.activeCell,p),f=this.getCorrespondingIndex(e,p),g=this.highlightCells(Math.min(d[0],f[0]),Math.max(d[0],f[0]),Math.min(d[1],f[1]),Math.max(d[1],f[1]),p),m=g.startRow;m<=g.endRow;m++)for(var v=g.startColumn;v<=g.endColumn;v++)p[m][v].classList.add("e-cell-select");this.parent.nodeSelection.range&&(this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,this.parent.nodeSelection.range.endContainer,0,0),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0))}}},a}(),rX=function(){return function(){}}(),ma=function(){function a(){}return a.prototype.getFormattedNode=function(t,e,i){var s=this.getFormatParent(t,e,i);return null!==s&&s!==i?s:null},a.prototype.getFormatParent=function(t,e,i){do{t=t.parentNode}while(t&&t!==i&&!this.isFormattedNode(t,e));return t},a.prototype.isFormattedNode=function(t,e){switch(e){case"bold":return a.isBold(t);case"italic":return a.isItalic(t);case"underline":return a.isUnderline(t);case"strikethrough":return a.isStrikethrough(t);case"superscript":return a.isSuperscript(t);case"subscript":return a.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},a.isBold=function(t){return-1!==["strong","b"].indexOf(t.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(t.nodeName.toLowerCase())||!t.style||"bold"!==t.style.fontWeight)},a.isItalic=function(t){return-1!==["em","i"].indexOf(t.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(t.nodeName.toLowerCase())||!t.style||"italic"!==t.style.fontStyle)},a.isUnderline=function(t){return-1!==["u"].indexOf(t.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(t.nodeName.toLowerCase())||!t.style||"underline"!==t.style.textDecoration&&"underline"!==t.style.textDecorationLine)},a.isStrikethrough=function(t){return-1!==["del","strike"].indexOf(t.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(t.nodeName.toLowerCase())||!t.style||"line-through"!==t.style.textDecoration&&"line-through"!==t.style.textDecorationLine)},a.isSuperscript=function(t){return-1!==["sup"].indexOf(t.nodeName.toLowerCase())},a.isSubscript=function(t){return-1!==["sub"].indexOf(t.nodeName.toLowerCase())},a.prototype.isFontColor=function(t){var e=t.style&&t.style.color;return-1!==a.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==e&&""!==e&&void 0!==e},a.prototype.isBackgroundColor=function(t){var e=t.style&&t.style.backgroundColor;return-1!==a.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==e&&""!==e&&void 0!==e},a.prototype.isFontSize=function(t){var e=t.style&&t.style.fontSize;return-1!==a.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==e&&""!==e&&void 0!==e},a.prototype.isFontName=function(t){var e=t.style&&t.style.fontFamily;return-1!==a.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==e&&""!==e&&void 0!==e},a.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","font","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var","del"],a}(),tA=function(){function a(){}return a.applyFormat=function(t,e,i,s,n,o,l){if(this.enterAction=s,["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(e)>-1||"formatPainter"===n){"backgroundcolor"===e&&""===n&&(n="transparent");var C,c=new Sn,u=new bC(i,t),p=new Yp,d=new ma,f=c.getRange(t),g=c.save(f,t),m=f.collapsed?c.getSelectionNodeCollection(f):c.getSelectionNodeCollectionBr(f),v=!1,y=!1,b=!1,S=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(e)>-1;if(f.collapsed){var I=d.getFormattedNode(f.startContainer,e,i),x=(0,r.le)(I)?null:null===I.getAttribute("style")?I.nodeName:I.nodeName+"[style='"+I.getAttribute("style")+"']";if(m.length>0)v=!0,f=p.GetCursorRange(t,f,m[0]);else if(3===f.startContainer.nodeType&&(f.startContainer.parentElement.childElementCount>0&&f.startOffset>0&&"br"!==f.startContainer.parentElement.firstElementChild.tagName.toLowerCase()||!(0,r.le)(I)&&I===f.startContainer.parentElement.closest(x)&&0!==f.startContainer.parentElement.closest(x).textContent.replace(new RegExp(String.fromCharCode(8203),"g"),"").trim().length))v=!0,f=p.GetCursorRange(t,f,f.startContainer),m.push(f.startContainer);else{var T=this.insertCursorNode(t,c,f,d,p,e,n,i);c.endContainer=c.startContainer=c.getNodeArray(T,!0);var O="BR"===T.nodeName&&T.parentNode.childNodes;(0,r.le)(O)||1!==O.length||"BR"!==O[0].nodeName||0!==m.length?c.endOffset=c.startOffset=1:(c.setSelectionText(t,f.startContainer,f.endContainer,0,0),b=!0),"BR"===T.nodeName&&0===T.parentNode.textContent.length&&(b=!0)}}C=f.collapsed;for(var A=!1,q=0;q<m.length;q++){var k=d.getFormattedNode(m[q],e,i);null===k&&("subscript"===e?A=null!==(k=d.getFormattedNode(m[q],"superscript",i)):"superscript"===e&&(A=null!==(k=d.getFormattedNode(m[q],"subscript",i)))),0===q&&null===k&&(y=!0),m[q]=null===k||y&&!S?this.insertFormat(t,m,q,k,C,y,S,f,p,e,n,l,u,i):this.removeFormat(m,q,k,C,y,S,f,p,e,n,c,i,u),c=this.applySelection(m,c,p,q,v)}Ts()&&xh(i,o),b||g.restore(),A&&this.applyFormat(t,e,i,s)}},a.insertCursorNode=function(t,e,i,s,n,o,l,h){var c=e.getNodeCollection(i),u=new bC(h,t),p=c.length>0?c.length>1&&i.startContainer===i.endContainer?this.getCursorFormat(s,c,o,h):s.getFormattedNode(c[0],o,h):null,d=null;if(p){if(d=c[0],8203===p.firstChild.textContent.charCodeAt(0)&&3===p.firstChild.nodeType){var f=new RegExp(String.fromCharCode(8203),"g"),g=void 0;if(p.firstChild===d?(d.textContent=p.parentElement&&(u.isBlockNode(p.parentElement)&&p.parentElement.textContent.length<=1?p.parentElement.childElementCount>1:0===p.childElementCount)&&(p.parentElement.textContent.length>1||p.parentElement.firstChild&&1===p.parentElement.firstChild.nodeType)?d.textContent:d.textContent.replace(f,""),g=d):(p.firstChild.textContent=p.firstChild.textContent.replace(f,""),g=p.firstChild),0===g.textContent.length)if((0,r.le)(g.previousSibling)){if(!(0,r.le)(g.parentElement)&&0===g.parentElement.textContent.length){var v=document.createElement("BR");g.parentElement.appendChild(v),(0,r.og)(g),e.setCursorPoint(t,(d=v).parentElement,0)}}else d=g.previousSibling,e.setCursorPoint(t,g,g.textContent.length-1)}["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(o)>-1?("fontcolor"===o?p.style.color=l:"fontname"===o?p.style.fontFamily=l:"fontsize"===o?p.style.fontSize=l:p.style.backgroundColor=l,d=p):Ei.unwrap(p)}else c.length>1&&i.startOffset>0&&c[0].firstElementChild&&"br"===c[0].firstElementChild.tagName.toLowerCase()&&(c[0].innerHTML=""),1===c.length&&0===i.startOffset&&("BR"===c[0].nodeName||"BR"===c[0].nextSibling.nodeName)&&(0,r.og)("#text"===c[0].nodeName?c[0].nextSibling:c[0]),d=this.getInsertNode(t,i,o,l).firstChild;return d},a.getCursorFormat=function(t,e,i,s){for(var n,o=0;o<e.length;o++)n=e[o].lastElementChild?e[o].lastElementChild:e[o];return t.getFormattedNode(n,i,s)},a.removeFormat=function(t,e,i,s,n,o,l,h,c,u,p,d,f){var q,k,g=null,m="#text"===l.startContainer.nodeName?l.startContainer.textContent.substring(l.startOffset,l.startContainer.textContent.length):l.startContainer.textContent,v=t[e].textContent;if(l.startContainer===l.endContainer&&0===l.startOffset&&l.endOffset===l.startContainer.length){if(o&&!t[e].contains(i)&&3===t[e].nodeType&&t[e].textContent!==i.textContent){for(var I=t[e].textContent===t[e].wholeText,x=t[e],T=this.GetFormatNode(c,u);x&&x.textContent===x.parentElement.textContent;)x=x.parentElement;if(I&&i.textContent!==x.textContent){var O=[],A=this.getPriorityFormatNode(x,d);return A&&A.textContent===x.textContent&&(x=A),O.push(x),this.applyStyles(O,0,T),t[e]}}}else{var y=[],C=t[e];do{y.push(p.getIndex(C)),C=C.parentNode}while(C&&C!==i);if("BR"!==t[e].nodeName&&(C=g=s&&i.textContent.length-1===l.startOffset?h.SplitNode(l,i,!0):h.GetSpliceNode(l,i)),s){for(var S=g;null!==S.firstChild&&3!==S.firstChild.nodeType;null)S=S.firstChild;S.innerHTML="&#8203;",t[e]=S.firstChild}else{for(;C&&C.childNodes.length>0&&y.length-1>=0&&C.childNodes.length>y[y.length-1];)C=C.childNodes[y[y.length-1]],y.pop();if("BR"!==t[e].nodeName)if(3!==C.nodeType||s&&""===C.nodeValue){var b=document.createElement("div");b.innerHTML="&#8203;",3!==C.nodeType?(C.insertBefore(b.firstChild,C.firstChild),t[e]=C.firstChild):(C.parentNode.insertBefore(b.firstChild,C),t[e]=C.previousSibling,C.parentNode.removeChild(C))}else t[e]=C}}if("backgroundcolor"===c&&(q=i.style.fontSize),"fontsize"===c){var R=(0,r.oq)(t[e].parentElement,"span[style*=background-color]");(0,r.le)(R)||(k=R.style.backgroundColor)}var Y,D=i.getAttribute("style"),z=i.tagName;if("A"===z&&"underline"===c?(i.style.textDecoration="none",Y=[i]):(Y=Ei.unwrap(i),!(0,r.le)(H=t[e].parentElement)&&"li"!==H.tagName.toLowerCase()&&(H=(0,r.oq)(H,"li")),!(0,r.le)(H)&&"li"===H.tagName.toLowerCase()&&H.textContent.trim()===t[e].textContent.trim()&&("bold"===c?H.style.fontWeight="normal":"italic"===c&&(H.style.fontStyle="normal"))),Y[0]&&!o)for(var W=x=Y[e]?Y[e]:Y[0];x&&x.parentElement&&x.parentElement!==d;x=x){var Z;if(Z="SPAN"===i.nodeName?x.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&x.parentElement.getAttribute("style")===D:x.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase(),x.parentElement&&Z&&(x.parentElement.childElementCount>1||l.startOffset>1)){if(W.parentElement&&W.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&l.startOffset===l.endOffset&&1!==W.nodeType&&!(0,r.le)(W.textContent)&&W.parentElement.childElementCount>1&&(l.setStart(W,0),l.setEnd(W,W.textContent.length),h.SplitNode(l,W.parentElement,!1)),"span"===x.parentElement.tagName.toLocaleLowerCase()&&"underline"===i.style.textDecoration&&"underline"!==x.parentElement.style.textDecoration){x=x.parentElement;continue}Ei.unwrap(x.parentElement),x=(0,r.le)(x.parentElement)||f.isBlockNode(x.parentElement)?x.parentElement:W}else x=x.parentElement}if(Y.length>0&&o){for(var J=0;J<Y.length;J++)(3!==Y[J].nodeType||Y[J].textContent&&Y[J].textContent.trim().length>0)&&(Y[J]=Ei.Wrap(Y[J],this.GetFormatNode(c,u,z,D)),!(0,r.le)(H=t[e].parentElement)&&"li"!==H.tagName.toLowerCase()&&(H=(0,r.oq)(H,"li")),!(0,r.le)(H)&&"li"===H.tagName.toLowerCase()&&H.textContent.trim()===t[e].textContent.trim()&&"fontname"===c&&(H.style.fontFamily=u),Y[J].textContent===m&&(0===J?l.setStartBefore(Y[J]):J===Y.length-1&&l.setEndAfter(Y[J])));var ve=t[e].parentElement;if(!(0,r.le)(q)&&""!==q&&(ve.style.fontSize=q),!(0,r.le)(k)&&""!==k&&(ve.style.backgroundColor=k),"backgroundcolor"===c&&!(0,r.le)(q)&&""!==q&&ve.parentElement.innerHTML===ve.outerHTML){var ce=ve.parentElement;ce.parentElement.insertBefore(ve,ce),(0,r.og)(ce)}if("fontsize"===c||"fontcolor"===c){for(var H=t[e].parentElement,de=t[e].parentElement;!(0,r.le)(de)&&"li"!==de.tagName.toLowerCase();)H=de=de.parentElement;J=e;for(var me="";J>=0&&!(0,r.le)(H)&&"li"===H.tagName.toLowerCase()&&H.textContent.replace("/\u200b/g","").trim().includes(t[J].textContent.trim());)me=" "+t[J].textContent.trim()+me,J--;var ae=!1,ke=0,re=!1;if(!(0,r.le)(H)&&H.childNodes)for(var xe=0;xe<H.childNodes.length;xe++)"OL"===H.childNodes[xe].nodeName&&(ke++,ae=!0);if((0,r.le)(H)||"li"!==H.tagName.toLowerCase()||H.textContent.split("\u200b").join("").trim()!==me.split("\u200b").join("").trim()){if(!(0,r.le)(H)&&"li"===H.tagName.toLowerCase()&&ae){if(ae&&ke>0)for(var vt=0;vt<H.childNodes.length;vt++)t[e].textContent===H.childNodes[vt].textContent&&t[e].textContent===v&&H.textContent.replace("/\u200b/g","").trim().includes(me.split("\u200b").join("").trim())&&(re=!0);if(re){for(var Ce=0;Ce<H.childNodes.length;Ce++)"OL"===H.childNodes[Ce].nodeName&&(H.childNodes[Ce].style.fontSize="initial");"fontsize"===c?H.style.fontSize=u:(H.style.color=u,H.style.textDecoration="inherit")}}}else"fontsize"===c?H.style.fontSize=u:(H.style.color=u,H.style.textDecoration="inherit")}}return t[e]},a.insertFormat=function(t,e,i,s,n,o,l,h,c,u,p,d,f,g){if(n)if("uppercase"!==u&&"lowercase"!==u){var m=this.getInsertNode(t,h,u,p);e[i]=m.firstChild,c.position=1}else c.position=h.startOffset;else if(null===s&&o||l){if("BR"!==e[i].nodeName&&(e[i]=c.GetSpliceNode(h,e[i]),e[i].textContent=c.TrimLineBreak(e[i].textContent)),"uppercase"===u||"lowercase"===u)e[i].textContent="uppercase"===u?e[i].textContent.toLocaleUpperCase():e[i].textContent.toLocaleLowerCase();else if(!0!==l||""!==p)if(m=this.GetFormatNode(u,p),"formatPainter"===p||l){for(var v=e[i].parentElement,y=e[i].parentElement;!(0,r.le)(y)&&"li"!==y.tagName.toLowerCase();)v=y=y.parentElement;if(!(0,r.le)(v)&&"li"===v.tagName.toLowerCase()&&v.textContent.trim()===e[i].textContent.trim()&&("fontsize"===u?v.style.fontSize=p:"fontcolor"===u?(v.style.color=p,v.style.textDecoration="inherit"):"fontname"===u&&(v.style.fontFamily=p)),"formatPainter"===p)return this.insertFormatPainterElem(e,i,h,c,d,f);var C=e[i],b=this.getPriorityFormatNode(C,g);if(!(0,r.le)(b)||l){var S=(0,r.le)(b)?C:b;if(S=(0,r.le)(b)||""===b.style.fontSize?S:S.firstChild,(0,r.le)(b)||"fontsize"===u)for(;S;){var I=S.parentElement.textContent.trim()===e[i].textContent.trim(),x=S.parentElement;if(f.isBlockNode(x)||!I||"SPAN"===x.nodeName&&x.classList.contains("e-img-inner"))break;S=x}var T=[];if("fontcolor"===u){var O=(0,r.oq)(e[i].parentElement,"A");!(0,r.le)(O)&&O.firstChild.textContent.trim()===e[i].textContent.trim()&&(S=e[i])}e[i].textContent.trim()!==S.textContent.trim()&&(S=e[i]),T[0]=S,this.applyStyles(T,0,m)}else e[i]=this.applyStyles(e,i,m)}else e[i]=this.applyStyles(e,i,m),!(0,r.le)(v=e[i].parentElement)&&"li"!==v.tagName.toLowerCase()&&(v=(0,r.oq)(v,"li")),!(0,r.le)(v)&&"li"===v.tagName.toLowerCase()&&v.textContent.trim()===e[i].textContent.trim()&&("bold"===u?v.style.fontWeight="bold":"italic"===u&&(v.style.fontStyle="italic"))}else e[i]=c.GetSpliceNode(h,e[i]);return e[i]},a.applyStyles=function(t,e,i){return"BR"===t[e].nodeName&&"BR"===this.enterAction||(t[e]=e===t.length-1||"BR"===t[e].nodeName?Ei.Wrap(t[e],i):Ei.WrapBefore(t[e],i,!0),t[e]=this.getChildNode(t[e],i)),t[e]},a.getPriorityFormatNode=function(t,e){var n,o,l,i=new ma,s=i.getFormattedNode(t,"fontsize",e);return(0,r.le)(s)?(o=i.getFormattedNode(t,"backgroundcolor",e),(0,r.le)(o)?(l=i.getFormattedNode(t,"fontname",e),(0,r.le)(l)?(n=i.getFormattedNode(t,"fontcolor",e),(0,r.le)(n)?null:n):l):o):s},a.getInsertNode=function(t,e,i,s){var n=this.GetFormatNode(i,s);if(n.innerHTML="&#8203;",r.AR.isIE){var o=t.createDocumentFragment();o.appendChild(n),e.insertNode(o)}else e.insertNode(n);return n},a.getChildNode=function(t,e){return null==t&&(e.innerHTML="&#8203;",t=e.firstChild),t},a.applySelection=function(t,e,i,s,n){return 1!==t.length||n?1===t.length&&n?(e.startContainer=e.getNodeArray(t[s],!0),e.endContainer=e.startContainer,e.startOffset=i.position,e.endOffset=i.position):0===s?(e.startContainer=e.getNodeArray(t[s],!0),e.startOffset=0):s===t.length-1&&(e.endContainer=e.getNodeArray(t[s],!1),e.endOffset=t[s].textContent.length):(e.startContainer=e.getNodeArray(t[s],!0),e.endContainer=e.startContainer,e.startOffset=0,e.endOffset=t[s].textContent.length),e},a.GetFormatNode=function(t,e,i,s){var n;switch(t){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.textDecoration="underline",n;case"strikethrough":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.textDecoration="line-through",n;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.color=e,n.style.textDecoration="inherit",n;case"fontname":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.fontFamily=e,n;case"fontsize":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.fontSize=e,n;default:return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.backgroundColor=e,n}},a.updateStyles=function(t,e,i){null!==i&&"SPAN"===e&&t.setAttribute("style",i)},a.insertFormatPainterElem=function(t,e,i,s,n,o){var l=o.isBlockNode(t[e].parentElement)?t[e]:t[e].parentElement;if(!o.isBlockNode(l))for(;l.textContent.trim()===l.parentElement.textContent.trim()&&!o.isBlockNode(l.parentElement);)l=l.parentElement;!(0,r.le)(l)&&1===l.nodeType&&!l.classList.contains("e-rte-img-caption")&&!l.classList.contains("e-img-inner")&&this.formatPainterCleanup(e,t,l,i,s,o);var h=n.element;if(!(0,r.le)(h)){var c=h.cloneNode(!0),u=c.querySelectorAll(n.lastChild.nodeName),p=void 0;u.length>0?p=u[u.length-1]:!(0,r.le)(c)&&c.nodeName===n.lastChild.nodeName&&(p=c),p.textContent=t[e].textContent;var d=p.childNodes[0];t[e]=Ei.Wrap(t[e],c),t[e].textContent="",t[e]=d}return t[e]},a.formatPainterCleanup=function(t,e,i,s,n,o){var l=["A","AUDIO","IMG","VIDEO","IFRAME"];if(0===t&&i.textContent.trim()!==e[t].textContent.trim()){n.SplitNode(s,i,!0);for(var h=e[t].parentElement.childNodes,c=0;c<h.length;c++)if(h[c].textContent.trim()===e[c].textContent.trim()){i.parentNode.insertBefore(h[c],i);break}for(var u=i.parentElement.childNodes,p=0;p<u.length;p++)(""===u[p].textContent.trim()||0===u[p].textContent.length)&&(0,r.og)(u[p])}else if(i.textContent.trim()!==e[t].textContent.trim())i.parentElement.insertBefore(e[t],i);else for(;!(0,r.le)(i)&&3!==i.nodeType&&!o.isBlockNode(i);){var d=void 0;for(c=0;c<i.childNodes.length;c++){var f=i.childNodes[c];0!==f.textContent.trim().length&&3!==f.nodeType&&(d=i.childNodes[c])}-1===l.indexOf(i.tagName)&&Ei.unwrap(i),i=d}},a.enterAction="P",a}(),aX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(nH,this.applySelection,this),this.parent.observer.on(Qi,this.keyDownHandler,this)},a.prototype.keyDownHandler=function(t){(t.event.ctrlKey||t.event.metaKey)&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(t.event.action)>-1&&(t.event.preventDefault(),tA.applyFormat(this.parent.currentDocument,t.event.action,this.parent.editableElement,t.enterAction),this.callBack(t,t.event.action))},a.prototype.applySelection=function(t){tA.applyFormat(this.parent.currentDocument,t.subCommand.toLocaleLowerCase(),this.parent.editableElement,t.enterAction,t.value,t.selector),this.callBack(t,t.subCommand)},a.prototype.callBack=function(t,e){t.callBack&&t.callBack({requestType:e,event:t.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a}(),oX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(rH,this.applyHtml,this)},a.prototype.applyHtml=function(t){if(mr.Insert(this.parent.currentDocument,t.value,this.parent.editableElement,!0,t.enterAction),"pasteCleanup"===t.subCommand){var e=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(e),s=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),n=[].slice.call(s);t.callBack({requestType:t.subCommand,editorMode:"HTML",elements:i,imgElem:n})}else t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a}(),lX=function(){function a(){}return a.clear=function(t,e,i,s,n){this.domNode=new bC(e,t),this.defaultTag="P"===i?this.defaultTag:"div";var o=new Sn,l=new Yp,h=o.getRange(t),c=h.collapsed?o.getSelectionNodeCollection(h):o.getSelectionNodeCollectionBr(h),u=o.save(h,t),p=!1;if(h.collapsed&&"ClearFormat"!==n&&(p=!0,h=l.GetCursorRange(t,h,c[0])),!h.collapsed){var f;if(f=c.length>0&&"BR"===c[0].nodeName&&(0,r.oq)(c[0],"table")?l.GetSpliceNode(h,(0,r.oq)(c[0],"table")):l.GetSpliceNode(h,c[c.length>1&&"IMG"===c[0].nodeName?1:0]),1===c.length)o.setSelectionContents(t,f),h=o.getRange(t);else if(c.length>1){for(var g=1,m=c[c.length-g];c.length<=g&&"BR"===c[c.length-g].nodeName;)g++,m=c[c.length-g];var v=l.GetSpliceNode(h,m);o.setSelectionText(t,f,v,0,3===v.nodeType?v.textContent.length:v.childNodes.length),h=o.getRange(t)}var y=o.getNodeCollection(h),C=y.slice();this.clearInlines(o.getSelectionNodes(C),C,o.getRange(t),l,e),this.reSelection(t,u,y),h=o.getRange(t);var b=(y=o.getNodeCollection(h)).slice();this.clearBlocks(t,b,e,l,o),Ts()&&xh(e,s),this.reSelection(t,u,y)}p&&o.setCursorPoint(t,h.endContainer,h.endOffset)},a.reSelection=function(t,e,i){var s=e.getInsertNodes(i);e.startContainer=e.getNodeArray(s[0],!0,t),e.startOffset=0,e.endContainer=e.getNodeArray(s[s.length-1],!1,t);var n=s[s.length-1];e.endOffset=3===n.nodeType?n.textContent.length:n.childNodes.length,e.restore()},a.clearBlocks=function(t,e,i,s,n){for(var o=[],l=0;l<e.length;l++)this.BLOCK_TAGS.indexOf(e[l].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(e[l])?o.push(e[l]):this.BLOCK_TAGS.indexOf(e[l].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(e[l].parentNode)&&i!==e[l].parentNode&&o.push(e[l].parentNode);o=this.spliceParent(o,e)[0],o=this.removeParent(o),this.unWrap(t,o,s,n)},a.spliceParent=function(t,e){for(var i=0;i<t.length;i++)for(var s=t[i].childNodes.length,n=0;n<s;n++)if(e.indexOf(t[i].childNodes[n])>0&&t[i].childNodes[n].childNodes.length>0&&(e=this.spliceParent([t[i].childNodes[n]],e)[1]),e.indexOf(t[i].childNodes[n])<=-1&&""!==t[i].childNodes[n].textContent.trim()){for(var o=0;o<s;o++)e.indexOf(t[i].childNodes[o])>-1&&e.splice(e.indexOf(t[i].childNodes[o]),1);n=t[i].childNodes.length;var l=t.indexOf(t[i].parentNode),h=e.indexOf(t[i].parentNode);l>-1&&t.splice(l,1),h>-1&&e.splice(h,1);var c=e.indexOf(t[i]);c>-1&&e.splice(c,1),t.splice(i,1),i--}return[t,e]},a.removeChild=function(t,e){var i=e.childNodes.length;if(i>0)for(var s=0;s<i;s++)t.indexOf(e.childNodes[s])>-1&&(t=this.removeChild(t,e.childNodes[s])).splice(t.indexOf(e.childNodes[s]),1);return t},a.removeParent=function(t){for(var e=0;e<t.length;e++)t.indexOf(t[e].parentNode)>-1&&((t=this.removeChild(t,t[e])).splice(e,1),e--);return t},a.unWrap=function(t,e,i,s){for(var n=0;n<e.length;n++)if(this.NONVALID_TAGS.indexOf(e[n].nodeName.toLowerCase())>-1&&e[n].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(e[n].parentNode.nodeName.toLowerCase())>-1&&(s.setSelectionText(t,e[n],e[n],0,e[n].childNodes.length),Ei.unwrap(i.GetSpliceNode(s.getRange(t),e[n].parentNode))),"p"!==e[n].nodeName.toLocaleLowerCase()){this.NONVALID_PARENT_TAGS.indexOf(e[n].nodeName.toLowerCase())<0&&"p"!==e[n].parentNode.nodeName.toLocaleLowerCase()&&("blockquote"!==e[n].nodeName.toLocaleLowerCase()&&"li"!==e[n].nodeName.toLocaleLowerCase()||!(this.IGNORE_PARENT_TAGS.indexOf(e[n].childNodes[0].nodeName.toLocaleLowerCase())>-1))&&(1!==e[n].childNodes.length||"p"!==e[n].childNodes[0].nodeName.toLocaleLowerCase())&&Ei.Wrap(e[n],t.createElement(this.defaultTag));var o=Ei.unwrap(e[n]);1===o.length&&"p"===o[0].parentNode.nodeName.toLocaleLowerCase()&&(Ei.Wrap(e[n],t.createElement(this.defaultTag)),Ei.unwrap(e[n]));for(var l=0;l<o.length;l++)if(this.NONVALID_TAGS.indexOf(o[l].nodeName.toLowerCase())>-1)this.unWrap(t,[o[l]],i,s);else if(this.BLOCK_TAGS.indexOf(o[l].nodeName.toLocaleLowerCase())>-1&&"p"!==o[l].nodeName.toLocaleLowerCase()){var h=this.removeParent([o[l]]);this.unWrap(t,h,i,s)}else this.BLOCK_TAGS.indexOf(o[l].nodeName.toLocaleLowerCase())>-1&&o[l].parentNode.nodeName.toLocaleLowerCase()===o[l].nodeName.toLocaleLowerCase()?Ei.unwrap(o[l]):this.BLOCK_TAGS.indexOf(o[l].nodeName.toLocaleLowerCase())>-1&&"p"===o[l].nodeName.toLocaleLowerCase()&&(Ei.Wrap(o[l],t.createElement(this.defaultTag)),Ei.unwrap(o[l]))}else Ei.Wrap(e[n],t.createElement(this.defaultTag)),Ei.unwrap(e[n])},a.clearInlines=function(t,e,i,s,n){for(var o=0;o<t.length;o++){for(var l=t[o],h=void 0;!this.domNode.isBlockNode(l)&&l.parentElement&&!l.parentElement.classList.contains("e-img-inner");)h=l,l=l.parentElement;h&&ma.inlineTags.indexOf(h.nodeName.toLocaleLowerCase())>-1&&(s.GetSpliceNode(i,h),this.removeInlineParent(h))}},a.removeInlineParent=function(t){for(var e=Ei.unwrap(t),i=0;i<e.length;i++)1===e[i].parentNode.childNodes.length&&!e[i].parentNode.classList.contains("e-img-inner")&&ma.inlineTags.indexOf(e[i].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(e[i].parentNode):ma.inlineTags.indexOf(e[i].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(e[i])},a.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","ul"],a.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],a.IGNORE_PARENT_TAGS=["ul","ol","table"],a.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],a.defaultTag="p",a}(),hX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(oH,this.applyClear,this),this.parent.observer.on(Qi,this.onKeyDown,this)},a.prototype.onKeyDown=function(t){switch(t.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:t.callBack,enterAction:t.enterAction}),t.event.preventDefault()}},a.prototype.applyClear=function(t){"ClearFormat"===t.subCommand&&(lX.clear(this.parent.currentDocument,this.parent.editableElement,t.enterAction,t.selector,t.subCommand),t.callBack&&t.callBack({requestType:t.subCommand,event:t.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},a}(),cX=function(){function a(t,e){this.undoRedoStack=[],this.parent=t,this.undoRedoSteps=(0,r.le)(e)?30:e.undoRedoSteps,this.undoRedoTimer=(0,r.le)(e)?300:e.undoRedoTimer,this.addEventListener()}return a.prototype.addEventListener=function(){var t=(0,r.Ds)(this.keyUp,this.undoRedoTimer);this.parent.observer.on(al,t,this),this.parent.observer.on(Qi,this.keyDown,this),this.parent.observer.on(Zp,this.onAction,this),this.parent.observer.on(Yc,this.onPropertyChanged,this)},a.prototype.onPropertyChanged=function(t){for(var e=0,i=Object.keys(t.newProp);e<i.length;e++)switch(i[e]){case"undoRedoSteps":this.undoRedoSteps=t.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=t.newProp.undoRedoTimer}},a.prototype.removeEventListener=function(){this.parent.observer.off(al,this.keyUp),this.parent.observer.off(Qi,this.keyDown),this.parent.observer.off(Zp,this.onAction)},a.prototype.onAction=function(t){"Undo"===t.subCommand?this.undo(t):this.redo(t)},a.prototype.destroy=function(){this.removeEventListener()},a.prototype.keyDown=function(t){var e=t.event;switch(e.action){case"undo":e.preventDefault(),this.undo(t);break;case"redo":e.preventDefault(),this.redo(t)}},a.prototype.keyUp=function(t){17!==t.event.keyCode&&!t.event.ctrlKey&&this.saveData(t)},a.prototype.getTextContentFromFragment=function(t){for(var e="",i=0;i<t.childNodes.length;i++){var s=t.childNodes[i];s.nodeType===Node.TEXT_NODE?e+=s.textContent:s.nodeType===Node.ELEMENT_NODE&&(e+=this.getTextContentFromFragment(s))}return e},a.prototype.saveData=function(t){for(var e=(new Sn).getRange(this.parent.currentDocument),i=this.parent.editableElement===e.startContainer.parentElement?e.startContainer.parentElement:e.startContainer,s=i.childNodes.length-1;s>=0;s--)!(0,r.le)(i.childNodes[s])&&"#text"===i.childNodes[s].nodeName&&0===i.childNodes[s].textContent.length&&"IMG"!==i.childNodes[s].nodeName&&"BR"!==i.childNodes[s].nodeName&&i.childNodes[s].nodeName&&(0,r.og)(i.childNodes[s]);e=(new Sn).getRange(this.parent.currentDocument);for(var n=(new Sn).save(e,this.parent.currentDocument),o=this.parent.editableElement.cloneNode(!0),l=document.createDocumentFragment();o.firstChild;)l.appendChild(o.firstChild);var h={text:l,range:n};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),!(this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===e.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===n.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===n.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===n.range.startContainer&&this.getTextContentFromFragment(this.undoRedoStack[this.undoRedoStack.length-1].text).trim()===this.getTextContentFromFragment(h.text).trim())&&(this.undoRedoStack.push(h),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),t&&t.callBack&&t.callBack())},a.prototype.undo=function(t){if(this.steps>0){var e=this.undoRedoStack[this.steps-1].range,i=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML="",this.parent.editableElement.appendChild(i.cloneNode(!0)),this.parent.editableElement.focus(),Ts()&&xh(this.parent.editableElement,t.selector),e.restore(),this.steps--,t.callBack&&t.callBack({requestType:"Undo",editorMode:"HTML",range:e,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:t.event})}},a.prototype.redo=function(t){if(null!=this.undoRedoStack[this.steps+1]){var e=this.undoRedoStack[this.steps+1].range,i=this.undoRedoStack[this.steps+1].text;this.parent.editableElement.innerHTML="",this.parent.editableElement.appendChild(i.cloneNode(!0)),this.parent.editableElement.focus(),Ts()&&xh(this.parent.editableElement,t.selector),e.restore(),this.steps++,t.callBack&&t.callBack({requestType:"Redo",editorMode:"HTML",range:e,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:t.event})}},a.prototype.getUndoStatus=function(){var t={undo:!1,redo:!1};return this.steps>0&&(t.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(t.redo=!0),t},a}(),uX=function(){function a(t){this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"],this.ulData=["disc","square","circle","disc","square","circle"],this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"],this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.borderStyle=["border-top","border-right","border-bottom","border-left"],this.upperRomanNumber=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX"],this.lowerRomanNumber=["i","ii","iii","iv","v","vi","vii","viii","ix","x","xi","xii","xiii","xiv","xv","xvi","xvii","xviii","xix","xx"],this.lowerGreekNumber=["\u03b1","\u03b2","\u03b3","\u03b4","\u03b5","\u03b6","\u03b7","\u03b8","\u03b9","\u03ba","\u03bb","\u03bc","\u03bd","\u03be","\u03bf","\u03c0","\u03c1","\u03c3","\u03c4","\u03c5","\u03c6","\u03c7","\u03c8","\u03c9"],this.removableElements=["o:p","style"],this.listContents=[],this.cropImageDimensions=[],this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(kV,this.wordCleanup,this)},a.prototype.wordCleanup=function(t){var e=(0,r.le)(t.allowedStylePropertiesArray)?[]:t.allowedStylePropertiesArray,i=[],s=t.args.clipboardData.getData("text/HTML"),n=t.args.clipboardData.getData("text/rtf"),o=(0,r.az)("p");o.setAttribute("id","MSWord-Content"),o.innerHTML=s;var u=/style='mso-width-source:/i;if(/class='?Mso|style='[^ ]*\bmso-/i.test(s)||/class="?Mso|style="[^ ]*\bmso-/i.test(s)||/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi.test(s)||u.test(s)){this.imageConversion(o,n),s=s.replace(/<img[^>]+>/i,""),this.addListClass(o),i=this.cleanUp(o,i),!(0,r.le)(i[0])&&"UL"!==i[0].parentElement.tagName&&"OL"!==i[0].parentElement.tagName&&this.listConverter(i),this.cleanList(o,"UL"),this.cleanList(o,"OL"),this.styleCorrection(o,e),this.removingComments(o),this.removeUnwantedElements(o),this.removeEmptyElements(o),this.removeEmptyAnchorTag(o),this.breakLineAddition(o),this.removeClassName(o),u.test(s)&&this.addTableBorderClass(o);var p=o.querySelectorAll("li");if(p.length>0)for(var d=0;d<p.length;d++)(0,r.le)(p[d].style.marginLeft)||(p[d].style.marginLeft="");t.callBack(o.innerHTML,this.cropImageDimensions)}else t.callBack(o.innerHTML)},a.prototype.cleanList=function(t,e){for(var i=t.querySelectorAll(e+" div"),s=i.length-1;s>=0;s--){for(var n=i[s].parentNode;i[s].firstChild;)n.insertBefore(i[s].firstChild,i[s]);var o=this.findClosestListElem(i[s]);o&&this.insertAfter(i[s],o)}},a.prototype.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},a.prototype.findClosestListElem=function(t){for(var e;!(0,r.le)(t);)t=(0,r.le)(t.closest("ul"))||"UL"===t.tagName?"OL"!==t.tagName?t.closest("ol"):null:t.closest("ul"),e=(0,r.le)(t)?e:t;return e},a.prototype.addListClass=function(t){for(var e=t.querySelectorAll("*"),i=0;i<e.length;i++)!(0,r.le)(e[i].getAttribute("style"))&&e[i].getAttribute("style").replace(/ /g,"").replace("\n","").indexOf("mso-list:l")>=0&&-1===e[i].className.toLowerCase().indexOf("msolistparagraph")&&"H"!==e[i].tagName.charAt(0)&&"LI"!==e[i].tagName&&"OL"!==e[i].tagName&&"UL"!==e[i].tagName&&e[i].classList.add("msolistparagraph")},a.prototype.addTableBorderClass=function(t){for(var e=t.querySelectorAll("table"),i=!1,s=0;s<e.length;s++){for(var n=0;n<this.borderStyle.length;n++)if(e[s].innerHTML.indexOf(this.borderStyle[n])>=0){i=!0;break}i&&(e[s].classList.add("e-rte-table-border"),i=!1)}},a.prototype.imageConversion=function(t,e){this.checkVShape(t);for(var i=t.querySelectorAll("img"),s=0;s<i.length;s++)!(0,r.le)(i[s].getAttribute("v:shapes"))&&i[s].getAttribute("v:shapes").indexOf("Picture")<0&&i[s].getAttribute("v:shapes").indexOf("\u5716\u7247")<0&&i[s].getAttribute("v:shapes").indexOf("Grafik")<0&&i[s].getAttribute("v:shapes").toLowerCase().indexOf("image")<0&&i[s].getAttribute("v:shapes").indexOf("Graphic")<0&&i[s].getAttribute("v:shapes").indexOf("_x0000_s")<0&&i[s].getAttribute("v:shapes").indexOf("_x0000_i")<0&&(0,r.og)(i[s]);i=t.querySelectorAll("img");var n=[],o=[],l=[],h=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(i.length>0){for(s=0;s<i.length;s++)n.push(i[s].getAttribute("src")),l.push(i[s].getAttribute("src").split("/")[i[s].getAttribute("src").split("/").length-1].split(".")[0]);var c=this.hexConversion(e);for(s=0;s<c.length;s++)o.push({base64Data:(0,r.le)(c[s].hex)?null:this.convertToBase64(c[s]),isCroppedImage:c[s].isCroppedImage}),c[s].isCroppedImage&&this.cropImageDimensions.push({goalWidth:c[s].goalWidth,goalHeight:c[s].goalHeight,cropLength:c[s].cropLength,cropTop:c[s].cropTop,cropR:c[s].cropR,cropB:c[s].cropB});for(s=0;s<i.length;s++)n[s].match(h)?i[s].setAttribute("src",n[s]):((0,r.le)(o[s])||(0,r.le)(o[s].base64Data)?(i[s].removeAttribute("src"),i[s].setAttribute("alt","Unsupported file format")):i[s].setAttribute("src",o[s].base64Data),!(0,r.le)(o[s])&&o[s].isCroppedImage&&i[s].classList.add("e-img-cropped")),i[s].setAttribute("id","msWordImg-"+l[s])}},a.prototype.checkVShape=function(t){for(var e=t.querySelectorAll("*"),i=0;i<e.length;i++)switch(e[i].nodeName){case"V:SHAPETYPE":(0,r.og)(e[i]);break;case"V:SHAPE":if("V:IMAGEDATA"===e[i].firstElementChild.nodeName){var s=e[i].firstElementChild.getAttribute("src"),n=(0,r.az)("img");n.setAttribute("src",s),e[i].parentElement.insertBefore(n,e[i]),(0,r.og)(e[i])}}},a.prototype.convertToBase64=function(t){var e=this.conHexStringToBytes(t.hex),i=this.conBytesToBase64(e);return t.type?"data:"+t.type+";base64,"+i:null},a.prototype.conBytesToBase64=function(t){for(var e="",s=t.length,n=0;n<s;n+=3){var o=t.slice(n,n+3),l=o.length,h=[];if(l<3)for(var c=l;c<3;c++)o[c]=0;for(h[0]=(252&o[0])>>2,h[1]=(3&o[0])<<4|o[1]>>4,h[2]=(15&o[1])<<2|(192&o[2])>>6,h[3]=63&o[2],c=0;c<4;c++)e+=c<=l?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h[c]):"="}return e},a.prototype.conHexStringToBytes=function(t){for(var e=[],i=t.length/2,s=0;s<i;s++)e.push(parseInt(t.substr(2*s,2),16));return e},a.prototype.hexConversion=function(t){var n,e=/\{\\pict[\s\S]+?\\bliptag\-?\d+(\\blipupi\-?\d+)?(\{\\\*\\blipuid\s?[\da-fA-F]+)?[\s\}]*?/,i=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),s=t.match(i),o=[];if(!(0,r.le)(s))for(var l=0;l<s.length;l++){var h=!1,c=0,u=0,p=0,d=0,f=0,g=0;if(e.test(s[l])){if(-1!==s[l].indexOf("\\pngblip"))n="image/png";else if(-1!==s[l].indexOf("\\jpegblip"))n="image/jpeg";else{if(-1===s[l].indexOf("\\picprop"))continue;n=null}(h=!!(this.extractCropValue("cropl",s[l])>0&&this.extractCropValue("cropt",s[l])>0||this.extractCropValue("cropr",s[l])>0||this.extractCropValue("cropb",s[l])))&&(c=this.extractCropValue("wgoal",s[l]),u=this.extractCropValue("hgoal",s[l]),p=this.extractCropValue("cropl",s[l]),d=this.extractCropValue("cropt",s[l]),f=this.extractCropValue("cropr",s[l]),g=this.extractCropValue("cropb",s[l])),o.push({hex:n?s[l].replace(e,"").replace(/[^\da-fA-F]/g,""):null,type:n,isCroppedImage:h,goalWidth:c,goalHeight:u,cropLength:p,cropTop:d,cropR:f,cropB:g})}}return o},a.prototype.extractCropValue=function(t,e){var i=new RegExp("\\\\pic"+t+"(\\-?\\d+)\\\\").exec(e.replace(/\r\n\\/g,"\\").replace(/\n/g,"\\"))[1];return parseInt(i,10)},a.prototype.removeClassName=function(t){for(var e=t.querySelectorAll("*[class]:not(.e-img-cropped)"),i=0;i<e.length;i++)e[i].removeAttribute("class")},a.prototype.breakLineAddition=function(t){for(var e=t.querySelectorAll("*"),i=0;i<e.length;i++)if(0===e[i].children.length&&"&nbsp;"===e[i].innerHTML&&"&nbsp;"===e[i].innerHTML&&!e[i].closest("li")&&!e[i].closest("td")&&("SPAN"!==e[i].nodeName||"SPAN"===e[i].nodeName&&(0,r.le)(e[i].previousElementSibling)&&(0,r.le)(e[i].nextElementSibling))){var s=this.findDetachElem(e[i]),n=(0,r.az)("br");!(s.textContent.length>0&&s.textContent.match(/\u00a0/g)&&s.textContent.match(/\u00a0/g).length>0)&&!(0,r.le)(s.parentElement)&&(s.parentElement.insertBefore(n,s),(0,r.og)(s))}},a.prototype.findDetachElem=function(t){return!(0,r.le)(t.parentElement)&&""===t.parentElement.textContent.trim()&&"TD"!==t.parentElement.tagName&&(0,r.le)(t.parentElement.querySelector("img"))?this.findDetachElem(t.parentElement):t},a.prototype.removeUnwantedElements=function(t){var e=t.querySelector("style");(0,r.le)(e)||(0,r.og)(e);for(var i=t.innerHTML,s=0;s<this.removableElements.length;s++){var n=new RegExp("<"+this.removableElements[s]+">","g"),o=new RegExp("</"+this.removableElements[s]+">","g");i=(i=i.replace(n,"")).replace(o,"")}t.innerHTML=i,t.querySelectorAll(":empty")},a.prototype.findDetachEmptyElem=function(t){return(0,r.le)(t.parentElement)?null:t.parentElement.textContent.length>0&&t.parentElement.textContent.match(/\u00a0/g)&&t.parentElement.textContent.match(/\u00a0/g).length>0||""!==t.parentElement.textContent.trim()||"MSWord-Content"===t.parentElement.getAttribute("id")||this.hasParentWithClass(t,"MsoListParagraph")||!(0,r.le)(t.parentElement.querySelector("img"))?t:this.findDetachEmptyElem(t.parentElement)},a.prototype.hasParentWithClass=function(t,e){for(var i=t.parentElement;!(0,r.le)(i);){if(i.classList.contains(e))return!0;i=i.parentElement}return!1},a.prototype.removeEmptyElements=function(t){for(var e=t.querySelectorAll(":empty"),i=0;i<e.length;i++){!(0,r.le)(e[i].closest("td"))&&!(0,r.le)(e[i].closest("td").querySelector(".MsoNormal"))&&(e[i].innerHTML="-");var s=!0;if("DIV"===e[i].tagName&&(s="none"===e[i].style.borderBottom||""===e[i].style.borderBottom),"IMG"!==e[i].tagName&&"BR"!==e[i].tagName&&"IFRAME"!==e[i].tagName&&"TD"!==e[i].tagName&&"HR"!==e[i].tagName&&s){var n=this.findDetachEmptyElem(e[i]);(0,r.le)(n)||(0,r.og)(n)}}},a.prototype.styleCorrection=function(t,e){var i=t.querySelectorAll("style");if(i.length>0){var s=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi),n=(0,r.le)(s)?null:this.findStyleObject(s),o=Object.keys(n),l=o.map(function(S){return n[""+S]});l=this.removeUnwantedStyle(l,e),this.filterStyles(t,e);for(var h=void 0,c=!1,u=0;u<o.length;u++){if(""===o[u].split(".")[0])h=t.getElementsByClassName(o[u].split(".")[1]),c=!0;else{if(1===o[u].split(".").length&&o[u].split(".")[0].indexOf("@")>=0)continue;h=1===o[u].split(".").length&&o[u].split(".")[0].indexOf("@")<0?t.getElementsByTagName(o[u]):t.querySelectorAll(o[u])}for(var p=0;p<h.length;p++)if(!h[p].closest("li")||"p"!==o[u]){var d=h[p].getAttribute("style");if((0,r.le)(d)||""===d.trim())l[u]=l[u].replace(/text-indent:-(.*?)(?=;|$)/gm,""),h[p].setAttribute("style",l[u]);else{var f=l[u].split(";");if(!c)for(var g=0;g<f.length;g++)d.indexOf(f[g].split(":")[0])>=0&&(f.splice(g,1),g--);var m=d+f.join(";")+";";h[p].setAttribute("style",m)}}c=!1}var v=["MsoListParagraphCxSpFirst","MsoListParagraphCxSpMiddle","MsoListParagraphCxSpLast"];for(u=0;u<v.length;u++)if(o.indexOf("li."+v[u])>-1){var y=t.querySelectorAll("ol."+v[u]+", ul."+v[u]);for(p=0;p<y.length;p++)if(d=y[p].getAttribute("style"),!(0,r.le)(d)&&""!==d.trim()&&""!==y[p].style.marginLeft)for(f=l[o.indexOf("li."+v[u])].split(";"),g=0;g<f.length;g++)if("margin-left".indexOf(f[g].split(":")[0])>=0&&!(0,r.le)(f[g].split(":")[1])&&f[g].split(":")[1].indexOf("in")>=0&&y[p].style.marginLeft.indexOf("in")>=0){var C=parseFloat(f[g].split(":")[1].split("in")[0]),b=parseFloat(y[p].style.marginLeft.split("in")[0]);y[p].style.marginLeft=b-C+"in"}}}},a.prototype.filterStyles=function(t,e){for(var i=t.querySelectorAll("*[style]"),s=0;s<i.length;s++){for(var n=i[s].getAttribute("style").split(";"),o="",l=0;l<n.length;l++)e.indexOf(n[l].split(":")[0].trim())>=0&&(o+=n[l]+";");i[s].setAttribute("style",o)}},a.prototype.removeUnwantedStyle=function(t,e){for(var i=0;i<t.length;i++){var s=t[i].split(";");t[i]="";for(var n=0;n<s.length;n++)e.indexOf(s[n].split(":")[0])>=0&&(t[i]+=s[n]+";")}return t},a.prototype.findStyleObject=function(t){for(var e={},i=0;i<t.length;i++){var s=t[i],n=s.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),o=s.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");n=n.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/^[\s]|[\s]$/gm,""),n=n.replace(/\n|\r|\n\r/g,""),o=o.replace(/\n|\r|\n\r/g,"");for(var l=n.split(", "),h=0;h<l.length;h++)e[l[h]]=o}return e},a.prototype.removingComments=function(t){var e=t.innerHTML;e=e.replace(/<!--[\s\S]*?-->/g,""),t.innerHTML=e},a.prototype.cleanUp=function(t,e){for(var s,i=[],n=t.querySelectorAll("*"),o=0;o<n.length;o++)-1===this.ignorableNodes.indexOf(n[o].nodeName)||3===n[o].nodeType&&""===n[o].textContent.trim()?i.push(n[o]):(n[o].className&&-1!==n[o].className.toLowerCase().indexOf("msolistparagraph")&&!(0,r.le)(n[o].getAttribute("style"))&&n[o].getAttribute("style").indexOf("mso-list:")>=0&&(n[o].className.indexOf("MsoListParagraphCxSpFirst")>=0&&e.length>0&&null!==e[e.length-1]&&e.push(null),e.push(n[o])),s&&-1!==this.blockNode.indexOf(n[o].nodeName.toLowerCase())&&!(n[o].className&&-1!==n[o].className.toLowerCase().indexOf("msolistparagraph")&&!(0,r.le)(n[o].getAttribute("style"))&&n[o].getAttribute("style").indexOf("mso-list:")>=0)&&e.push(null),-1!==this.blockNode.indexOf(n[o].nodeName.toLowerCase())&&(s=!!(n[o].className&&-1!==n[o].className.toLowerCase().indexOf("msolistparagraph")&&!(0,r.le)(n[o].getAttribute("style"))&&n[o].getAttribute("style").indexOf("mso-list:")>=0)));return e.length&&null!==e[e.length-1]&&e.push(null),e},a.prototype.listConverter=function(t){for(var e,o,i=[],s=[],n="",l="",h=0;h<t.length;h++)if(null!==t[h]){t[h].getAttribute("style")&&-1!==t[h].getAttribute("style").indexOf("mso-outline-level")&&t[h].setAttribute("style",t[h].getAttribute("style").replace("mso-outline-level","mso-outline")),e=(n=t[h].getAttribute("style"))&&-1!==n.indexOf("level")?parseInt(n.charAt(n.indexOf("level")+5),null):1,this.listContents=[],this.getListContent(t[h]);var c=void 0,u=void 0,p=void 0,d=void 0;if(!(0,r.le)(this.listContents[0])){if(c=this.listContents[0].trim().length>1?"ol":"ul",u=this.getlistStyleType(this.listContents[0],c),"ol"===c&&(0===h||null===t[h-1])){var f=this.listContents[0].split(".")[0];-1===["A","a","I","i","\u03b1","1","1-"].indexOf(f)&&("decimal"===u?isNaN(parseInt(f,10))||(p=parseInt(f,10)):"upper-alpha"===u?p=f.split(".")[0].charCodeAt(0)-64:"lower-alpha"===u?p=f.split(".")[0].charCodeAt(0)-96:"upper-roman"===u?p=this.upperRomanNumber.indexOf(this.listContents[0].split(".")[0])+1:"lower-roman"===u?p=this.lowerRomanNumber.indexOf(this.listContents[0].split(".")[0])+1:"lower-greek"===u&&(p=this.lowerGreekNumber.indexOf(this.listContents[0].split(".")[0])+1)),""!==t[h].style.marginLeft&&(d=t[h].style.marginLeft)}for(var m=[],v=1;v<this.listContents.length;v++)m.push(this.listContents[v]);var y=void 0;(0,r.le)(t[h].className)||(y=t[h].className),(0,r.le)(t[h].getAttribute("style"))||(t[h].setAttribute("style",t[h].getAttribute("style").replace("text-align:start;","")),t[h].style.textIndent="",l=t[h].getAttribute("style")),s.push({listType:c,content:m,nestedLevel:e,class:y,listStyle:l,listStyleTypeName:u,start:p,styleMarginLeft:d})}}else i.push({content:this.makeConversion(s),node:t[h-1]}),s=[];for(o=t.shift();o;){for(var C=[],b=0;b<i.length;b++)if(i[b].node===o){for(var S=0;S<i[b].content.childNodes.length;S++)C.push(i[b].content.childNodes[S]);for(S=0;S<C.length;S++)o.parentElement.insertBefore(C[S],o);break}o.remove(),(o=t.shift())||(o=t.shift())}},a.prototype.getlistStyleType=function(t,e){var i;if("ol"===e){var s=t.split(".")[0].charCodeAt(0);switch(!0){case this.upperRomanNumber.indexOf(t.split(".")[0])>-1:i="upper-roman";break;case this.lowerRomanNumber.indexOf(t.split(".")[0])>-1:i="lower-roman";break;case this.lowerGreekNumber.indexOf(t.split(".")[0])>-1:i="lower-greek";break;case s>64&&s<91:i="upper-alpha";break;case s>96&&s<123:i="lower-alpha";break;default:i="decimal"}}else switch(t.split(".")[0]){case"o":i="circle";break;case"\xa7":i="square";break;default:i="disc"}return i},a.prototype.makeConversion=function(t){for(var i,n,l,e=(0,r.az)("div"),s=1,o=0,h=0;h<t.length;h++){for(var c=["MsoListParagraphCxSpFirst","MsoListParagraphCxSpMiddle","MsoListParagraphCxSpLast"],u=!1,p=0;p<c.length;p++)if(c[p].indexOf(t[h].class)>=0){u=!0;break}!(0,r.le)(n)&&0!==h&&t[h-1].listType!==t[h].listType&&!u&&(n=null);var d=(0,r.az)("p",{className:"MsoNormal"});if(d.innerHTML=t[h].content.join(" "),1===t[h].nestedLevel&&0===o&&t[h].content)e.appendChild(i=(0,r.az)(t[h].listType,{className:t[h].class})),(n=(0,r.az)("li")).appendChild(d),i.appendChild(n),i.setAttribute("level",t[h].nestedLevel.toString()),i.style.marginLeft=t[h].styleMarginLeft,i.style.listStyleType=t[h].listStyleTypeName;else if(t[h].nestedLevel===s)(0,r.le)(n)||(0,r.le)(n.parentElement)||n.parentElement.tagName.toLowerCase()!==t[h].listType?(0,r.le)(n)?((i=(0,r.az)(t[h].listType)).style.listStyleType=t[h].listStyleTypeName,(n=(0,r.az)("li")).appendChild(d),i.appendChild(n),i.setAttribute("level",t[h].nestedLevel.toString()),e.appendChild(i)):((i=(0,r.az)(t[h].listType)).style.listStyleType=t[h].listStyleTypeName,n.parentElement.parentElement.appendChild(i),(n=(0,r.az)("li")).appendChild(d),i.appendChild(n),i.setAttribute("level",t[h].nestedLevel.toString())):(n.parentElement.appendChild(n=(0,r.az)("li")),n.appendChild(d));else if(t[h].nestedLevel>s)if((0,r.le)(n))if(t[h].nestedLevel>s&&u){var g=(0,r.az)(t[h].listType);n=(0,r.az)("li"),g.appendChild(n),g.style.listStyleType="none";for(var f=0;f<t[h].nestedLevel-1;f++)n.appendChild(i=(0,r.az)(t[h].listType)),n=(0,r.az)("li"),i.appendChild(n),i.style.listStyleType="none";n.appendChild(d),e.appendChild(g),i.setAttribute("level",t[h].nestedLevel.toString()),i.style.listStyleType=t[h].listStyleTypeName}else e.appendChild(i=(0,r.az)(t[h].listType)),(n=(0,r.az)("li")).appendChild(d),i.appendChild(n),i.setAttribute("level",t[h].nestedLevel.toString()),i.style.listStyleType=t[h].listStyleTypeName;else{for(f=0;f<t[h].nestedLevel-s;f++)n.appendChild(i=(0,r.az)(t[h].listType)),n=(0,r.az)("li"),f!==t[h].nestedLevel-s-1&&t[h].nestedLevel-s>1&&(n.style.listStyleType="none"),i.appendChild(n);n.appendChild(d),i.setAttribute("level",t[h].nestedLevel.toString()),i.style.listStyleType=t[h].listStyleTypeName}else if(1===t[h].nestedLevel)e.lastChild.tagName.toLowerCase()===t[h].listType?i=e.lastChild:(e.appendChild(i=(0,r.az)(t[h].listType)),i.style.listStyleType=t[h].listStyleTypeName),(n=(0,r.az)("li")).appendChild(d),i.appendChild(n),i.setAttribute("level",t[h].nestedLevel.toString());else for(l=n;l.parentElement;)if((l=l.parentElement).attributes.getNamedItem("level")){if(parseInt(l.attributes.getNamedItem("level").textContent,null)===t[h].nestedLevel){(n=(0,r.az)("li")).appendChild(d),l.appendChild(n);break}if(t[h].nestedLevel>parseInt(l.attributes.getNamedItem("level").textContent,null)){l.appendChild(i=(0,r.az)(t[h].listType)),(n=(0,r.az)("li")).appendChild(d),i.appendChild(n),i.setAttribute("level",t[h].nestedLevel.toString()),i.style.listStyleType=t[h].listStyleTypeName;break}}n.setAttribute("class",t[h].class),n.setAttribute("style",(0,r.le)(t[h].listStyle)?"":t[h].listStyle),s=t[h].nestedLevel,o++,(0,r.le)(t[h].start)||i.setAttribute("start",t[h].start.toString())}return e},a.prototype.getListContent=function(t){var e="",i=t.firstElementChild;if(""!==i.textContent.trim()||(0,r.le)(i.firstElementChild)||"IMG"!==i.firstElementChild.nodeName){if(i.childNodes.length>0){for(var s=i.querySelectorAll('[style*="mso-list"]'),n=0;n<s.length;n++)s[n].setAttribute("style",s[n].getAttribute("style").replace(/\n/g,""));var o=i.querySelector('span[style="mso-list:Ignore"]');(0,r.le)(o)||(this.listContents.push(o.textContent.trim()),(0,r.og)(o),this.removingComments(t),this.removeUnwantedElements(t))}}else e=t.innerHTML.trim(),this.listContents.push(""),this.listContents.push(e);this.listContents.push(t.innerHTML)},a.prototype.removeEmptyAnchorTag=function(t){for(var e=t.querySelectorAll("a:not([href])"),i=e.length-1;i>=0;i--){for(var s=e[i].parentNode;e[i].firstChild;)s.insertBefore(e[i].firstChild,e[i]);s.removeChild(e[i])}},a}(),pX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(aH,this.insertText,this)},a.prototype.insertText=function(t){var e=document.createTextNode(t.value);mr.Insert(this.parent.currentDocument,e,this.parent.editableElement),t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a}(),iA={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,numberFormatList:!1,bulletFormatList:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},dX=function(){function a(){}return a.get=function(t,e,i,s,n,o){for(var l=JSON.parse(JSON.stringify(iA)),h=JSON.parse(JSON.stringify(iA)),c=new Sn,u=c.getRange(t),p=o?[o]:u.collapsed?c.getNodeCollection(u):c.getSelectionNodeCollectionBr(u),d=p.length,f=!1,g=0;g<p.length;g++){for(;3===p[g].nodeType&&3===u.startContainer.nodeType&&p[g].parentNode&&p[g].parentNode.lastElementChild&&"BR"!==p[g].parentNode.lastElementChild.nodeName&&0===this.getImmediateBlockNode(p[g].parentNode).textContent.replace(/\u200B/g,"").length&&0===u.startContainer.textContent.replace(/\u200B/g,"").length&&0===c.get(t).toString().replace(/\u200B/g,"").length;)p[g]=p[g].parentNode.lastElementChild.firstChild,f=!0;f&&p[g]&&(c.setCursorPoint(t,p[g],p[g].textContent.length),f=!1),("BR"!==p[g].nodeName&&3!==p[g].nodeType||d>1&&3===p[g].nodeType&&""===p[g].textContent.trim())&&(p.splice(g,1),g--)}for(g=0;g<p.length;g++)l=this.getFormatParent(t,l,p[g],e,i,s,n),(0===g&&l.bold||!l.bold)&&(h.bold=l.bold),(0===g&&l.insertcode||!l.insertcode)&&(h.insertcode=l.insertcode),(0===g&&l.italic||!l.italic)&&(h.italic=l.italic),(0===g&&l.underline||!l.underline)&&(h.underline=l.underline),(0===g&&l.strikethrough||!l.strikethrough)&&(h.strikethrough=l.strikethrough),(0===g&&l.superscript||!l.superscript)&&(h.superscript=l.superscript),(0===g&&l.subscript||!l.subscript)&&(h.subscript=l.subscript),(0===g&&l.fontcolor||!l.fontcolor)&&(h.fontcolor=l.fontcolor),h.fontname=0===g&&l.fontname||l.fontname===h.fontname?l.fontname:"empty",h.fontsize=0===g&&l.fontsize||l.fontsize===h.fontsize?l.fontsize:"empty",(0===g&&l.backgroundcolor||!l.backgroundcolor)&&(h.backgroundcolor=l.backgroundcolor),(0===g&&l.orderedlist||!l.orderedlist)&&(h.orderedlist=l.orderedlist),(0===g&&l.unorderedlist||!l.unorderedlist)&&(h.unorderedlist=l.unorderedlist),(0===g&&l.alignments||!l.alignments)&&(h.alignments=l.alignments),h.formats=0===g&&l.formats||l.formats===h.formats?l.formats:"empty",(0===g&&l.createlink||!l.createlink)&&(h.createlink=l.createlink),(0===g&&l.numberFormatList||!l.numberFormatList)&&(h.numberFormatList=l.numberFormatList),(0===g&&l.bulletFormatList||!l.bulletFormatList)&&(h.bulletFormatList=l.bulletFormatList),l=JSON.parse(JSON.stringify(iA));return h},a.getImmediateBlockNode=function(t){do{t=t.parentNode}while(t&&Kc.indexOf(t.nodeName.toLocaleLowerCase())<0);return t},a.getFormatParent=function(t,e,i,s,n,o,l){if(s.contains(i)||3===i.nodeType&&3!==s.nodeType&&s.contains(i.parentNode))do{e=this.isFormattedNode(t,e,i,n,o,l),i=i.parentNode}while(i&&i!==s);return e},a.isFormattedNode=function(t,e,i,s,n,o){return e.bold||(e.bold=ma.isBold(i)),e.italic||(e.italic=ma.isItalic(i)),e.underline||(e.underline=ma.isUnderline(i)),e.strikethrough||(e.strikethrough=ma.isStrikethrough(i)),e.superscript||(e.superscript=ma.isSuperscript(i)),e.subscript||(e.subscript=ma.isSubscript(i)),e.fontcolor||(e.fontcolor=this.isFontColor(t,i)),e.fontname||(e.fontname=this.isFontName(t,i,o)),e.fontsize||(e.fontsize=this.isFontSize(t,i,n)),e.backgroundcolor||(e.backgroundcolor=this.isBackgroundColor(i)),e.orderedlist||(e.orderedlist=this.isOrderedList(i)),e.unorderedlist||(e.unorderedlist=this.isUnorderedList(i)),e.alignments||(e.alignments=this.isAlignment(i)),e.formats||(e.formats=this.isFormats(i,s),"pre"===e.formats&&(e.insertcode=!0)),e.createlink||(e.createlink=this.isLink(i)),e.numberFormatList||(e.numberFormatList=this.isNumberFormatList(i)),e.bulletFormatList||(e.bulletFormatList=this.isBulletFormatList(i)),e},a.isFontColor=function(t,e){var i=e.style&&e.style.color;return(null==i||""===i)&&3!==e.nodeType&&(i=this.getComputedStyle(t,e,"color")),null!==i&&""!==i&&void 0!==i?i:null},a.isLink=function(t){return"a"===t.nodeName.toLocaleLowerCase()},a.isBackgroundColor=function(t){var e=t.style&&t.style.backgroundColor;return null!==e&&""!==e&&void 0!==e?e:null},a.isFontSize=function(t,e,i){var s=e.style&&e.style.fontSize;return(null==s||""===s)&&3!==e.nodeType&&e.parentElement.classList.contains("e-content")&&(s=this.getComputedStyle(t,e,"font-size")),null!==s&&""!==s&&void 0!==s&&(null==i||i.indexOf(s)>-1)?s:null},a.isFontName=function(t,e,i){var s=e.style&&e.style.fontFamily;(null==s||""===s)&&3!==e.nodeType&&(s=this.getComputedStyle(t,e,"font-family"));var n=null;return null!==s&&""!==s&&void 0!==s&&(null==i||i.filter(function(o,l){var h=new RegExp(s,"i");(o.replace(/"/g,"").replace(/ /g,"").toLowerCase()===s.replace(/"/g,"").replace(/ /g,"").toLowerCase()||o.split(",")[0]&&o.split(",")[0].search(h)>-1)&&(n=l)})&&null!==n)?null!==n?i[n]:s.replace(/"/g,""):null},a.isOrderedList=function(t){return"ol"===t.nodeName.toLocaleLowerCase()},a.isUnorderedList=function(t){return"ul"===t.nodeName.toLocaleLowerCase()},a.isAlignment=function(t){var e=t.style&&t.style.textAlign;return"left"===e?"justifyleft":"center"===e?"justifycenter":"right"===e?"justifyright":"justify"===e?"justifyfull":null},a.isFormats=function(t,e){return null==e&&Kc.indexOf(t.nodeName.toLocaleLowerCase())>-1||null!=e&&e.indexOf(t.nodeName.toLocaleLowerCase())>-1?t.nodeName.toLocaleLowerCase():null},a.getComputedStyle=function(t,e,i){return t.defaultView.getComputedStyle(e,null).getPropertyValue(i)},a.isNumberFormatList=function(t){var e=t.style&&t.style.listStyleType;return"lower-alpha"===e?"Lower Alpha":"number"===e?"Number":"upper-alpha"===e?"Upper Alpha":"lower-roman"===e?"Lower Roman":"upper-roman"===e?"Upper Roman":"lower-greek"===e?"Lower Greek":"none"===e?"None":!!this.isOrderedList(t)||null},a.isBulletFormatList=function(t){var e=t.style&&t.style.listStyleType;return"circle"===e?"Circle":"square"===e?"Square":"none"===e?"None":"disc"===e?"Disc":!!this.isUnorderedList(t)||null},a}(),fX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.observer.on(OV,this.emojiInsert,this)},a.prototype.emojiInsert=function(t){for(var e=document.createTextNode(t.value),i=this.parent.currentDocument.getSelection(),n=i.getRangeAt(0).startOffset,o=n-1;o>=n-15;o--){var l=i.focusNode.textContent.substring(o-1,o);if(/:$/.test(l)){this.beforeApplyFormat(!0);break}}var c=/:$/.test(i.focusNode.textContent.charAt(n-1)),u=i.focusNode.textContent.charAt(n-2),p=/\s/.test(u);c&&(p||1===i.focusOffset)&&this.beforeApplyFormat(!0),mr.Insert(this.parent.currentDocument,e,this.parent.editableElement),t.callBack&&t.callBack({requestType:t.subCommand,editorMode:"HTML",event:t.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.beforeApplyFormat=function(t){var e=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection.getNodeCollection(e)[0],s=!(":"===i.parentElement.innerHTML.replace(/&nbsp;|<br>/g,"").trim()||0===i.textContent.trim().indexOf("/")),n=i;if(s&&t)for(;n!==this.parent.editableElement;)n=n.parentElement;for(var o=e.startOffset;-1===this.parent.nodeSelection.getRange(document).toString().indexOf(":");)this.parent.nodeSelection.setSelectionText(document,i,i,o,e.endOffset),o--;var l=this.parent.nodeSelection.getRange(this.parent.currentDocument),h=this.parent.nodeCutter.GetSpliceNode(l,i);h.parentNode.removeChild(h)},a}(),gX=function(){function a(t,e){this.INVALID_TAGS=["A","AUDIO","IMG","VIDEO","IFRAME"],this.parent=t,this.settings=e,this.addEventListener(),this.setDeniedFormats()}return a.prototype.addEventListener=function(){this.parent.observer.on(Kk,this.actionHandler,this),this.parent.observer.on(Yc,this.onPropertyChanged,this)},a.prototype.onPropertyChanged=function(t){t&&"formatPainter"===t.module&&((0,r.le)(t.newProp.formatPainterSettings.allowedFormats)||(this.settings.allowedFormats=t.newProp.formatPainterSettings.allowedFormats),(0,r.le)(t.newProp.formatPainterSettings.deniedFormats)||(this.settings.deniedFormats=t.newProp.formatPainterSettings.deniedFormats,this.setDeniedFormats()))},a.prototype.removeEventListener=function(){this.parent.observer.off(Kk,this.actionHandler),this.parent.observer.off(Yc,this.onPropertyChanged)},a.prototype.destroy=function(){this.removeEventListener(),this.INVALID_TAGS=null,this.copyCollection=null,this.deniedFormatsCollection=null,this.newElem=null,this.newElemLastChild=null,this.settings=null,this.parent=null},a.prototype.actionHandler=function(t){if(this.settings.allowedContext=["Text","List","Table"],!(0,r.le)(t)&&!(0,r.le)(t.item)&&!(0,r.le)(t.item.formatPainterAction)){switch(t.item.formatPainterAction){case"format-copy":this.copyAction();break;case"format-paste":this.pasteAction();break;case"escape":this.escapeAction()}this.callBack(t)}},a.prototype.callBack=function(t){t.callBack&&t.callBack({requestType:"FormatPainter",action:t.item.formatPainterAction,event:t.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},a.prototype.generateElement=function(){var t=this.copyCollection.slice();t.reverse();for(var s,e=t.length,i=(0,r.az)("div",{className:"e-format-paste-wrapper"}),n=0;n<e;n++){var o=t[n],l=o.attrs,h=o.className,c=o.styles,p=(0,r.az)(o.tagName);""!==h&&(p.className=h);for(var d=0;d<l.length;d++)p.setAttribute(l[d].name,l[d].value);for(var m=0;m<c.length;m++)p.style.setProperty(c[m].property,c[m].value,c[m].priority);0===i.childElementCount?(i.append(p),s=p):(s.append(p),s=p)}for(var y=this.removeDeniedFormats(i),C=y;C;)null===C.firstChild?(s=C,C=void 0):C=C.firstChild;this.newElem=y,this.newElemLastChild=s},a.prototype.pasteAction=function(){(0,r.le)(this.copyCollection)||0===this.copyCollection.length?this.paintPlainTextFormat():this.insertFormatNode(this.newElem,this.newElemLastChild)},a.prototype.removeDeniedFormats=function(t){if(!(0,r.le)(this.deniedFormatsCollection)&&this.deniedFormatsCollection.length>0)for(var e=this.deniedFormatsCollection,i=e.length,s=0;s<i;s++)if(e[s].tag)for(var o=t.querySelectorAll(e[s].tag),l=0;l<o.length;l++){if(e[s].classes.length>0){for(var h=e[s].classes,c=h.length,u=0;u<c;u++)o[l].classList.contains(h[u])&&(0,r.IV)([o[l]],h[u].trim());0===o[l].classList.length&&o[l].removeAttribute("class")}if(e[s].styles.length>0){var p=e[s].styles,d=p.length;for(u=0;u<d;u++)o[l].style.removeProperty(p[u].trim());0===o[l].style.length&&o[l].removeAttribute("style")}if(e[s].attributes.length>0){var f=e[s].attributes,g=f.length;for(u=0;u<g;u++)o[l].removeAttribute(f[u].trim())}}return t.firstElementChild},a.prototype.copyAction=function(){var t=[],e=this.parent.nodeSelection.getRange(document),i=this.parent.nodeSelection,s=e.collapsed?i.getSelectionNodeCollection(e):i.getSelectionNodeCollectionBr(e);if(0!==s.length||0!==i.getSelectionNodeCollectionBr(e).length){for(var n=(s=0===s.length?i.getSelectionNodeCollectionBr(e):s)[0].parentElement,o=this.findCurrentContext(n),l=this.settings.allowedFormats.indexOf(";")>-1?this.settings.allowedFormats.split(";"):[this.settings.allowedFormats],h=0;h<l.length;h++)l[h]=l[h].trim();var c=this.getRangeParentElem(o,n),u=c[0];if(null===o&&(o=c[1]),!(0,r.le)(o)&&this.settings.allowedContext.indexOf(o)>-1){"#text"===e.startContainer.nodeName&&(n=e.startContainer.parentElement);var d=n;do{if(l.indexOf(n.nodeName.toLowerCase())>-1){var f=n.attributes,g=[];for(h=0;h<f.length;h++)"class"!==f[h].name&&"style"!==f[h].name&&g.push(f[h]);var m=n.className,v=n.style,y=[];for(h=0;h<v.length;h++){var C=v[h],b=v.getPropertyValue(C),S=v.getPropertyPriority(C);y.push({property:C,value:b,priority:S})}t.push({attrs:g,className:m,styles:y,tagName:n.nodeName})}if(u===n?n=void 0:(0,r.le)(n.parentElement)||(n=n.parentElement),d===n)break}while(!(0,r.le)(n)||n===this.parent.editableElement);this.copyCollection=t}this.generateElement()}},a.prototype.getRangeParentElem=function(t,e){var s,i=e;switch(3===i.nodeType&&(i=i.parentElement),t){case"Table":s=(0,r.oq)(i,"td"),(0,r.le)(s)&&(s=(0,r.oq)(i,"th"));break;case"List":s=(0,r.oq)(i,"li");break;case"Text":s=(0,r.oq)(i,"p")}if((0,r.le)(s)){var n=this.getNearestBlockParentElement(e);!(0,r.le)(n)&&"UL"!==n&&"OL"!==n&&"LI"!==n&&(s=(0,r.oq)(i,n),t="Text")}return"List"===t&&(s=s.parentElement),[s,t]},a.prototype.getNearestBlockParentElement=function(t){var e=t;for(3===e.nodeType&&(e=e.parentNode);e&&e!==this.parent.editableElement;){if(!(0,r.le)(e)&&this.isBlockElement(e))return e.nodeName;e=e.parentNode}return null},a.prototype.isBlockElement=function(t){return["P","DIV","UL","OL","LI","H1","H2","H3","H4","H5","H6","ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","FIGCAPTION","FIGURE","FOOTER","HEADER","HR","MAIN","NAV","SECTION","SUMMARY","PRE"].indexOf(t.nodeName)>-1},a.prototype.escapeAction=function(){this.copyCollection=[]},a.prototype.paintPlainTextFormat=function(){var s,t=this.parent.nodeSelection.getRange(this.parent.currentDocument),e=this.parent.nodeSelection,i=t.collapsed?e.getSelectionNodeCollection(t):e.getSelectionNodeCollectionBr(t);if(i.length>1)for(var n=0;n<i.length;n++)s=this.validateELementTag(i[n]);else s=this.validateELementTag(t.startContainer)&&this.validateELementTag(t.endContainer);s||this.parent.execCommand("Clear","ClearFormat",null,null)},a.prototype.validateELementTag=function(t){return 3===t.nodeType&&(t=t.parentElement),this.INVALID_TAGS.indexOf(t.tagName)>-1},a.prototype.findCurrentContext=function(t){var e=(0,r.oq)(t,"p"),i=(0,r.oq)(t,"li");return e&&!i?"Text":(0,r.oq)(t,"li")?(0,r.le)(e)||(0,r.le)(i)||e.textContent.trim()===i.textContent.trim()?"List":"Text":(0,r.oq)(t,"td")||(0,r.oq)(t,"tr")||(0,r.oq)(t,"th")?"Table":null},a.prototype.insertFormatNode=function(t,e){var i=t.cloneNode(!0);if(!this.isBlockElement(t)){var s=(0,r.az)("P");s.appendChild(t),i=s.cloneNode(!0)}for(var h,n=this.parent.editableElement,o=this.parent.currentDocument,l=i.firstChild;l;){if(!this.isBlockElement(l)){h=l.parentNode.removeChild(l);break}l=l.firstChild}tA.applyFormat(o,null,n,"P","formatPainter",null,{element:h,lastChild:e});var u=this.parent.nodeSelection.getRange(o),p=u.collapsed,d=this.parent.domNode.blockNodes(),f=!1;1===d.length&&(f=d[0].textContent.trim()===u.toString().trim()),(this.isBlockElement(i)&&p||d.length>1||f)&&this.insertBlockNode(i,u,o,d)},a.prototype.insertBlockNode=function(t,e,i,s){var o=this.parent.nodeSelection.save(e,i);this.parent.domNode.setMarker(o);var l,h,c=!1;("UL"===t.nodeName||"OL"===t.nodeName)&&(l=(h=t.cloneNode(!0)).firstChild);for(var u=(0,r.le)(h)?t:t.firstChild,p=0;p<s.length;p++)if(!(this.INVALID_TAGS.indexOf(s[p].nodeName)>-1||s[p].querySelectorAll("img,audio,video,iframe").length>0)){for(var d=u.cloneNode(!1);s[p].firstChild;)0!==s[p].textContent.trim().length?d.appendChild(s[p].firstChild):s[p].removeChild(s[p].firstChild);if("TD"===s[p].nodeName||"TH"===s[p].nodeName){if((0,r.le)(h)){s[p].appendChild(d);continue}if(0!==p||(0,r.le)(h)){s[p].appendChild(d);continue}s[p].appendChild(h),h.appendChild(d);continue}if((0,r.le)(h)||(c=this.isSameListType(t,s[p])),"LI"!==d.nodeName||c?c?this.insertSameList(s,p,h,d):s[p].parentNode.replaceChild(d,s[p]):this.insertNewList(e,s,p,h,d),"LI"!==d.nodeName&&("OL"===d.parentElement.nodeName||"UL"===d.parentElement.nodeName)){var f=d.parentElement;if(this.parent.nodeCutter.SplitNode(e,f,!0),(0,r.le)(f.previousElementSibling))f.parentElement.prepend(d);else if(f.previousElementSibling.after(d),d.childNodes.length>1)for(var g=0;g<d.childNodes.length;g++){var m=d.childNodes[g];("OL"===m.nodeName||"UL"===m.nodeName)&&d.after(m)}}}(0,r.le)(l)||(0,r.og)(l),this.cleanEmptyLists(),this.parent.domNode.saveMarker(o,null).restore()},a.prototype.insertNewList=function(t,e,i,s,n){if(0===i){var o=e[i].nodeName;e[i]=e[i].parentNode.replaceChild(s,e[i]);var l="LI"===o?s.parentElement:s;if(this.parent.nodeCutter.SplitNode(t,l,!0),"LI"!==e[i].nodeName||(0,r.le)(l))if((0,r.le)(l))s.append(n);else if((0,r.le)(l.previousElementSibling)||l.previousElementSibling.nodeName!==s.nodeName)if((0,r.le)(l.nextElementSibling)||l.nextElementSibling.nodeName!==s.nodeName)s.append(n);else for((h=l.nextElementSibling).prepend(n);h.firstChild;)s.append(h.firstChild);else{var h;for((h=l.previousElementSibling).append(n);h.firstChild;)s.append(h.firstChild)}else s.append(n),(0,r.le)(l.parentNode)||l.parentNode.insertBefore(s,l)}else s.append(n);this.detachEmptyBlockNodes(e[i])},a.prototype.insertSameList=function(t,e,i,s){if(0===e){if(!(0,r.le)(t[e].parentNode)&&("UL"===t[e].parentNode.nodeName||"OL"===t[e].parentNode.nodeName)){if(1===t.length){for(;s.firstChild;)t[e].append(s.firstChild);for(var n=0;n<t[e].parentNode.childNodes.length;n++)i.append(t[e].parentNode.childNodes[n].cloneNode(!0))}else i.append(s);t[e].parentNode.parentNode.replaceChild(i,t[e].parentNode)}}else i.append(s);this.detachEmptyBlockNodes(t[e])},a.prototype.isSameListType=function(t,e){var i=!1,s=(0,r.oq)(e,"ol, ul");return!(0,r.le)(s)&&s.querySelectorAll("li").length>0&&(i=s.nodeName===t.nodeName),i},a.prototype.cleanEmptyLists=function(){for(var t=this.parent.editableElement.querySelectorAll("ol, ul"),e=0;e<t.length;e++)""===t[e].textContent.trim()&&(0,r.og)(t[e])},a.prototype.setDeniedFormats=function(){var t=[];if(!(0,r.le)(this.settings)&&!(0,r.le)(this.settings.deniedFormats)){for(var e=this.settings.deniedFormats.indexOf(";")>-1?this.settings.deniedFormats.split(";"):[this.settings.deniedFormats],i=e.length,s=0;s<i;s++){var n=e[s];if(""!==n){n.trim();var o=this.makeDeniedFormatsCollection(n);(0,r.le)(o)||t.push(o)}}this.deniedFormatsCollection=t}},a.prototype.detachEmptyBlockNodes=function(t){!(0,r.le)(t)&&""===t.textContent.trim()&&(0,r.og)(t)},a.prototype.makeDeniedFormatsCollection=function(t){var e=t.indexOf("("),i=t.indexOf(")"),s=t.indexOf("["),n=t.indexOf("]"),o=t.indexOf("{"),l=t.indexOf("}"),d=[],f=[],g=[];e>-1&&i>-1&&(d=t.substring(e+1,i).split(" ")[0].split(")")[0].split(",")),s>-1&&n>-1&&(f=t.substring(s+1,n).split(",")),o>-1&&l>-1&&(g=t.substring(o+1,l).split(","));var y,m=[e,s,o],v=(m=m.filter(function(C){return C>-1})).length;return 1===v?y=m[0]:2===v?y=Math.min(m[0],m[1]):3===v&&(y=Math.min(m[0],m[1],m[2])),{tag:t.substring(0,y).trim(),styles:g,classes:d,attributes:f}},a}(),mX=function(){function a(t){this.currentDocument=t.document,this.editableElement=t.editableElement,this.nodeSelection=new Sn,this.nodeCutter=new Yp,this.domNode=new bC(this.editableElement,this.currentDocument),this.observer=new r.Qj(this),this.listObj=new _K(this),this.formatObj=new WK(this),this.alignmentObj=new GK(this),this.indentsObj=new ZK(this),this.linkObj=new UK(this),this.imgObj=new tX(this),this.audioObj=new iX(this),this.videoObj=new sX(this),this.selectionObj=new aX(this),this.inserthtmlObj=new oX(this),this.insertTextObj=new pX(this),this.clearObj=new hX(this),this.tableObj=new nX(this),this.undoRedoManager=new cX(this,t.options),this.msWordPaste=new uX(this),this.formatPainterEditor=new gX(this,t.formatPainterSettings),this.emojiPickerObj=new fX(this),this.wireEvents()}return a.prototype.wireEvents=function(){this.observer.on(Yk,this.editorKeyDown,this),this.observer.on(um,this.editorKeyUp,this),this.observer.on(um,this.editorKeyUp,this),this.observer.on(yC,this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this),this.observer.on(DV,this.onBegin,this)},a.prototype.onWordPaste=function(t){this.observer.notify(kV,t)},a.prototype.onPropertyChanged=function(t){this.observer.notify(Yc,t)},a.prototype.editorKeyDown=function(t){this.observer.notify(Qi,t)},a.prototype.editorKeyUp=function(t){this.observer.notify(al,t)},a.prototype.onBegin=function(t){this.observer.notify(LV,t)},a.prototype.execCommand=function(t,e,i,s,n,o,l,h){switch(t.toLowerCase()){case"lists":this.observer.notify(TV,{subCommand:e,event:i,callBack:s,selector:l,item:o,enterAction:h});break;case"formats":this.observer.notify(vC,{subCommand:e,event:i,callBack:s,selector:l,exeValue:o,enterAction:h});break;case"alignments":this.observer.notify(iH,{subCommand:e,event:i,callBack:s,selector:l,value:o});break;case"indents":this.observer.notify(sH,{subCommand:e,event:i,callBack:s,selector:l});break;case"links":this.observer.notify(UV,{command:t,value:e,item:o,event:i,callBack:s});break;case"files":this.observer.notify(Jk,{command:t,value:"Image",item:o,event:i,callBack:s,selector:l});break;case"images":this.observer.notify(Jk,{command:t,value:e,item:o,event:i,callBack:s,selector:l});break;case"audios":this.observer.notify(qV,{command:t,value:e,item:o,event:i,callBack:s,selector:l});break;case"videos":this.observer.notify(_V,{command:t,value:e,item:o,event:i,callBack:s,selector:l});break;case"table":switch(e.toString().toLocaleLowerCase()){case"createtable":this.observer.notify(WV,{item:o,event:i,callBack:s,enterAction:h});break;case"insertrowbefore":case"insertrowafter":this.observer.notify(GV,{item:o,event:i,callBack:s});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify(ZV,{item:o,event:i,callBack:s});break;case"deleterow":this.observer.notify(YV,{item:o,event:i,callBack:s});break;case"deletecolumn":this.observer.notify(KV,{item:o,event:i,callBack:s});break;case"tableremove":this.observer.notify(XV,{item:o,event:i,callBack:s});break;case"tableheader":this.observer.notify(QV,{item:o,event:i,callBack:s});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify(JV,{item:o,event:i,callBack:s});break;case"merge":this.observer.notify($V,{item:o,event:i,callBack:s});break;case"horizontalsplit":this.observer.notify(tH,{item:o,event:i,callBack:s});break;case"verticalsplit":this.observer.notify(eH,{item:o,event:i,callBack:s})}break;case"font":case"style":case"effects":case"casing":this.observer.notify(nH,{subCommand:e,event:i,callBack:s,value:n,selector:l,enterAction:h});break;case"inserthtml":this.observer.notify(rH,{subCommand:e,callBack:s,value:n,enterAction:h});break;case"inserttext":this.observer.notify(aH,{subCommand:e,callBack:s,value:n});break;case"clear":this.observer.notify(oH,{subCommand:e,event:i,callBack:s,selector:l,enterAction:h});break;case"actions":this.observer.notify(Zp,{subCommand:e,event:i,callBack:s,selector:l});break;case"formatpainter":this.observer.notify(Kk,{item:o,subCommand:e,event:i,callBack:s});break;case"emojipicker":this.observer.notify(OV,{item:o,subCommand:e,value:n,event:i,callBack:s})}},a}(),vX=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),yX=function(a){function t(e){var i=a.call(this)||this;return i.initialize(),(0,r.l7)(i,i,e,!0),i.currentDocument&&i.element&&i.updateFormatter(i.element,i.currentDocument,e.options,e.formatPainterSettings),i}return vX(t,a),t.prototype.initialize=function(){this.keyConfig=DK},t.prototype.updateFormatter=function(e,i,s,n){e&&i&&(this.editorManager=new mX({document:i,editableElement:e,options:s,formatPainterSettings:n}))},t}(RV),gH=function(){function a(t){this.parent=t,this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,numberFormatList:!1,bulletFormatList:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(Qo,this.onRefreshHandler,this),this.parent.on(Oe,this.removeEventListener,this)},a.prototype.removeEventListener=function(){this.parent.off(Qo,this.onRefreshHandler),this.parent.off(Oe,this.removeEventListener)},a.prototype.onRefreshHandler=function(t){if(!this.parent.readonly){var e=[],i=[],s=[];this.parent.fontSize.items.forEach(function(o){e.push(o.value)}),this.parent.fontFamily.items.forEach(function(o){i.push(o.value)}),this.parent.format.types.forEach(function(o){s.push(o.value.toLocaleLowerCase())}),this.toolbarStatus=dX.get(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel(),s,e,i,t.documentNode);var n=JSON.stringify(this.toolbarStatus);this.parent.notify(Ja,this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==n&&(this.parent.notify(jb,{html:JSON.parse(n),markdown:null}),this.prevToolbarStatus=JSON.parse(n))}},a}(),mH=function(){function a(t,e){this.parent=t,this.serviceLocator=e}return a.prototype.renderPanel=function(){var t=this.parent,e=this.parent.createElement("div",{className:"e-rte-content",id:this.parent.getID()+"rte-view"}),i=fC(t.value,t);this.editableElement=this.parent.createElement("div",{className:"e-content",id:this.parent.getID()+"_rte-edit-view",attrs:{contenteditable:"true"},innerHTML:i}),e.appendChild(this.editableElement),this.setPanel(e),t.element.appendChild(e)},a.prototype.getPanel=function(){return this.contentPanel},a.prototype.getEditPanel=function(){return this.editableElement},a.prototype.getText=function(){var t=this.getEditPanel().innerText;return"\n"===t?"":t},a.prototype.setPanel=function(t){this.contentPanel=t},a.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},a}(),bX=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),SX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return bX(t,a),t.prototype.renderPanel=function(){var e=this.parent,n='\n<!DOCTYPE html> \n    <html>\n         <head>\n            <meta charset=\'utf-8\' /> \n            <style>\n                @charset "UTF-8";\n                body {\n                    font-family: "Roboto", sans-serif;\n                    font-size: 14px;\n                }\n                html, body{height: 100%;margin: 0;}\n                body.e-cursor{cursor:default}\n                span.e-selected-node\t{background-color: #939393;color: white;}\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\n                .e-rte-image, .e-rte-audio, .e-rte-video  {border: 0;cursor: pointer;display:\n                    block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-imginline, .e-rte-audio.e-audio-inline, .e-rte-video.e-video-inline {display: inline-block;float: none;max-width: calc(100% - (2 * 5px));padding: 1px;vertical-align: bottom;}\n                .e-rte-image.e-imgcenter, .e-rte-video.e-video-center {cursor: pointer;display: block;float: none;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-imgright, .e-rte-video.e-video-right { float: right; margin: 0 auto;margin-left: 5px;text-align: right;}\n                .e-rte-image.e-imgleft, .e-rte-video.e-video-left {float: left;margin: 0 auto;margin-right: 5px;text-align: left;}\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;\n                    margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));\n                    position: relativetext-align: center;vertical-align: bottom;}\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;\n                    margin: auto;opacity: .9;text-align: center;width: 100%;}\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\n                .e-imgleft, .e-video-left {float: left;margin: 0 5px 0 0;text-align: left;}\n                .e-imgright, .e-video-right {float: right;margin: 0 0 0 5px;text-align: right;}\n                .e-imgcenter, .e-video-center {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\n                .e-imginline , .e-audio-inline, .e-video-inline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;\n                    max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\n                .e-imgbreak, .e-audio-break, .e-video-break {border: 0;cursor: pointer;\n                    display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-img-focus:not(.e-resize), .e-audio-focus:not(.e-resize), .e-video-focus:not(.e-resize) {border: solid 2px #4a90e2;}\n                img.e-img-focus::selection, audio.e-audio-focus::selection, .e-video-focus::selection { background: transparent;color: transparent;}\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block;\n                    background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2;\n                    border-radius: 15px; height: 20px; width: 20px; }\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-rte-content .e-content img.e-resize, .e-rte-content .e-content video.e-resize { z-index: 1000; }\n                .e-img-caption .e-img-inner { outline: 0; }\n                .e-img-caption a:focus-visible { outline: none; }\n                .e-img-caption .e-rte-image.e-imgright, .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;\n                    overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\n                p{margin: 0 0 10px;margin-bottom: 10px;}\n                li{margin-bottom: 10px;}\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;\n                    font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;\n                    white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\n                strong, b{font-weight: 700;}\n                a{text-decoration: none;user-select: auto;}\n                a:hover{text-decoration: underline;};\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\n                ul:last-child{margin-bottom: 0;}\n                table { border-collapse: collapse; empty-cells: show;}\n                table td,table th {border: 1px solid #BDBDBD; height: 20px; padding: 2px 5px; vertical-align: middle;}\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\n                table th {background-color: #E0E0E0;}\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \n                table .e-cell-select {border: 1px double #4a90e2;}\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat;\n                    bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\n                .e-row-resize { cursor: row-resize; height: 1px;}\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\n                .e-table-rhelper.e-column-helper { width: 1px; }\n                .e-table-rhelper.e-row-helper {height: 1px;}\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid;\n                    border-top: 6px solid transparent; content: \'\'; display: block; height: 0;\n                    position: absolute; right: 4px; top: 4px; width: 20px; }\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid;\n                    border-top: 6px solid transparent; content: \'\'; display: block;\n                    height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\n                .e-table-rhelper { background-color: #4a90e2;}\n                .e-rtl { direction: rtl; }\n                .e-rte-placeholder::before { content: attr(placeholder); opacity: 0.54; overflow: hidden; padding-top: 16px; position: absolute; text-align: start; top: 0; z-index: 1; }\n            </style>\n        </head><body spellcheck="false" autocorrect="off" contenteditable="true">'+fC(e.value,e)+"</body></html>",o=this.parent.createElement("iframe",{id:this.parent.getID()+"_rte-view",className:"e-rte-content",styles:"display:block;",attrs:{srcdoc:n}});this.setPanel(o),e.element.appendChild(o),o.contentDocument.body.id=this.parent.getID()+"_rte-edit-view",o.contentDocument.body.setAttribute("aria-owns",this.parent.getID()),o.contentDocument.open(),n=this.setThemeColor(n,{color:"#333"}),o.contentDocument.write(n),o.contentDocument.close(),e.enableRtl&&this.contentPanel.contentDocument.body.setAttribute("class","e-rtl")},t.prototype.setThemeColor=function(e,i){var s=getComputedStyle(this.parent.element,".e-richtexteditor").getPropertyValue("color");return e.replace(i.color,s)},t.prototype.getEditPanel=function(){return(0,r.le)(this.contentPanel.contentDocument)?this.parent.inputElement:this.contentPanel.contentDocument.body},t.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},t}(mH),wX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(tm,this.enableXhtmlValidation,this),this.parent.on(Oe,this.removeEventListener,this)},a.prototype.removeEventListener=function(){this.parent.off(tm,this.enableXhtmlValidation),this.parent.off(Oe,this.removeEventListener)},a.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(this.currentElement=(0,r.le)(this.parent.inputElement)?this.parent.element:this.parent.inputElement,this.clean(this.currentElement),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML,"\n"===this.currentElement.innerText?this.currentElement.innerText.length:this.currentElement.innerText.trim().length),this.parent.setProperties({value:this.currentElement.innerHTML},!0))},a.prototype.selfEncloseValidation=function(t,e){if(0===e&&t.indexOf("table")<0&&t.indexOf("img")<0&&t.includes("&nbsp;")){var i=t.split("&nbsp;");i[i.length-1]="&#8203;"+i[i.length-1],t=i.join("")}t=t.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/ /g," ");for(var s,n=[],o=[],l=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],h=0;h<l.length;h++){for(s=l[h].exec(t);null!==s;)n.push(s[0].toString()),s=l[h].exec(t);o=n.slice(0);for(var c=0;c<n.length;c++)(-1===n[c].indexOf("/")||n[c].lastIndexOf("/")!==n[c].length-2)&&(n[c]=n[c].substr(0,n[c].length-1)+" /"+n[c].substr(n[c].length-1,n[c].length));for(var u=0;u<=n.length-1;u++)t=t.replace(o[u],n[u])}return t},a.prototype.clean=function(t){for(var e=0;e<t.childNodes.length;e++){var i=t.childNodes[e];8===i.nodeType||"V:IMAGE"===i.nodeName?(t.removeChild(i),e--):1===i.nodeType&&this.clean(i)}return this.currentElement.innerHTML},a.prototype.ImageTags=function(){for(var t=this.currentElement.querySelectorAll("IMG"),e=t.length-1;e>=0;e--)t[e].hasAttribute("alt")||t[e].setAttribute("alt","")},a.prototype.removeTags=function(){for(var t=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],e=0;e<t.length;e++)this.RemoveElementNode(t[e][0],t[e][1])},a.prototype.RemoveElementNode=function(t,e){for(var i=this.currentElement.querySelectorAll(e),s=0;s<i.length;s++)for(var n=i[s].querySelectorAll(t),o=n.length;o>0;o--)(0,r.og)(n[o-1])},a.prototype.RemoveUnsupported=function(){for(var t=this.currentElement.querySelectorAll("u"),e=t.length-1;e>=0;e--){var i=this.parent.createElement("span");i.style.textDecoration="underline",i.innerHTML=t[e].innerHTML,t[e].parentNode.insertBefore(i,t[e]),(0,r.og)(t[e])}var s=this.currentElement.querySelectorAll("strong");for(e=s.length-1;e>=0;e--){var n=this.parent.createElement("b");n.innerHTML=s[e].innerHTML,s[e].parentNode.insertBefore(n,s[e]),(0,r.og)(s[e])}var o=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(e=0;e<=o.length;e++)this.RemoveAttributeByName(o[e])},a.prototype.RemoveAttributeByName=function(t){if(null!==this.currentElement.firstChild&&3!==this.currentElement.firstChild.nodeType)for(var e=0;e<this.currentElement.childNodes.length;e++){var i=this.currentElement.childNodes[e];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&(i.hasAttribute(t)&&i.removeAttribute(t),i.hasChildNodes()))for(var s=0;s<i.childNodes.length;s++){var n=i.childNodes[s];if(3!==n.nodeType&&"TABLE"!==n.nodeName&&"TBODY"!==n.nodeName&&"THEAD"!==n.nodeName&&"TH"!==n.nodeName&&"TR"!==n.nodeName&&"TD"!==n.nodeName&&n.hasAttribute(t)&&!n.classList.contains("e-mention-chip")&&n.removeAttribute(t),n.hasChildNodes())for(var o=0;o<n.childNodes.length;o++)3!==n.childNodes[o].nodeType&&"TABLE"!==n.childNodes[o].nodeName&&"TBODY"!==n.childNodes[o].nodeName&&"THEAD"!==n.childNodes[o].nodeName&&"TH"!==n.childNodes[o].nodeName&&"TR"!==n.childNodes[o].nodeName&&"TD"!==n.childNodes[o].nodeName&&n.childNodes[o].hasAttribute(t)&&n.childNodes[o].removeAttribute(t)}}},a}(),EX=function(){function a(t,e){this.rangeCollection=[],this.isImageDelete=!1,this.parent=t,this.locator=e,this.renderFactory=this.locator.getService("rendererFactory"),this.xhtmlValidation=new wX(t),this.addEventListener()}return a.prototype.destroy=function(){this.removeEventListener()},a.prototype.sanitizeHelper=function(t){return function(a,t){if(t.enableHtmlSanitizer){var e=r.pJ.beforeSanitize();e.selectors.tags[2]&&e.selectors.tags[2].indexOf("iframe")>-1&&(e.selectors.tags[2]="iframe:not(.e-rte-embed-url)"),(0,r.l7)(e,e,{cancel:!1,helper:null}),t.trigger("beforeSanitizeHtml",e),e.cancel&&!(0,r.le)(e.helper)?a=e.helper(a):e.cancel||(a=r.pJ.serializeValue(e,a))}return a}(t,this.parent)},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.nodeSelectionObj=new Sn,this.colorPickerModule=new IV(this.parent,this.locator),this.parent.on(Vg,this.instantiateRenderer,this),this.parent.on(MT,this.onToolbarClick,this),this.parent.on(Mi,this.onKeyDown,this),this.parent.on(xs,this.onKeyUp,this),this.parent.on(Tb,this.renderColorPicker,this),this.parent.on(ui,this.render,this),this.parent.on(hs,this.onPropertyChanged,this),this.parent.on(Oe,this.destroy,this),this.parent.on(Xg,this.selectAll,this),this.parent.on(Vb,this.selectRange,this),this.parent.on(Qg,this.getSelectedHtml,this),this.parent.on(qn,this.onSelectionSave,this),this.parent.on(_n,this.onSelectionRestore,this),this.parent.on(em,this.updateReadOnly,this),this.parent.on(Hp,this.onPaste,this),this.parent.on(Fg,this.isTableClassAdded,this))},a.prototype.updateReadOnly=function(){this.parent.readonly?((0,r.Y4)(this.parent.contentModule.getEditPanel(),{contenteditable:"false"}),(0,r.cn)([this.parent.element],hm)):((0,r.Y4)(this.parent.contentModule.getEditPanel(),{contenteditable:"true"}),(0,r.IV)([this.parent.element],hm))},a.prototype.onSelectionSave=function(){var t=this.contentRenderer.getDocument(),e=this.nodeSelectionObj.getRange(t);this.saveSelection=this.nodeSelectionObj.save(e,t)},a.prototype.onSelectionRestore=function(t){this.parent.isBlur=!1,this.contentRenderer.getEditPanel().focus(),((0,r.le)(t.items)||t.items)&&this.saveSelection.restore()},a.prototype.isTableClassAdded=function(){for(var t=this.parent.inputElement.querySelectorAll("table"),e=0;e<t.length;e++)t[e].classList.contains("e-rte-table")||t[e].classList.add("e-rte-table")},a.prototype.onKeyUp=function(t){var o,e=t.args,s=this.parent.getRange(),n=new RegExp(String.fromCharCode(8203),"g"),l=!1;if([8,9,13,16,17,18,20,27,37,38,39,40,44,45,46,91,112,113,114,115,116,117,118,119,120,121,122,123].indexOf(e.keyCode)<0&&!e.shiftKey&&!e.ctrlKey&&!e.altKey){if(o=s.startOffset,"#text"===s.startContainer.nodeName?s.startContainer.parentElement!==this.parent.inputElement?s.startContainer.parentElement.classList.add("currentStartMark"):l=!0:s.startContainer.classList.add("currentStartMark"),8203===s.startContainer.textContent.charCodeAt(0)){var h=s.startContainer.textContent.length,c=s.startOffset;s.startContainer.textContent=s.startContainer.textContent.replace(n,""),o=0===c?c:c-(h-s.startContainer.textContent.length),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),s.startContainer,o)}var u=this.parent.inputElement.innerHTML.length,p=this.parent.inputElement.innerHTML.replace(n,"").length,d=s.startContainer;if(u>p&&!l){if(0!==d.textContent.trim().length&&d.previousSibling){var f=document.createElement("span");f.className="tempSpan",s.insertNode(f)}for(var g=this.parent.inputElement.firstChild;!(0,r.le)(g)&&g.textContent.replace(n,"").trim().length>0;)g.innerHTML=g.innerHTML.replace(n,""),g=g.nextElementSibling;var m=this.parent.inputElement.querySelector(".tempSpan");m&&m.previousSibling&&0!==d.textContent.trim().length&&(d=m.previousSibling,o=m.previousSibling.textContent.length,m.parentNode.removeChild(m),m=null);var y=this.parent.inputElement.querySelector(".currentStartMark").childNodes;if(y.length>1)for(var C=0;C<y.length;C++)"#text"===y[C].nodeName&&0===y[C].textContent.length&&((0,r.og)(y[C]),C--),!(0,r.le)(y[C])&&d.textContent.replace(n,"")===y[C].textContent&&(o=d.textContent.length>1?d.textContent===y[C].textContent?o:o-(d.textContent.length-d.textContent.replace(n,"").length):d.textContent.length,d=y[C]);else 1===y.length&&d.textContent.replace(n,"")===y[0].textContent&&(d=y[0]);this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),d,o)}var b=this.parent.inputElement.querySelector(".currentStartMark");(0,r.le)(b)||(b.classList.remove("currentStartMark"),""===b.getAttribute("class").trim()&&b.removeAttribute("class")),!(0,r.le)(s.startContainer.previousSibling)&&!(0,r.le)(s.startContainer.previousSibling.parentElement)&&s.startContainer.parentElement===s.startContainer.previousSibling.parentElement&&8203===s.startContainer.previousSibling.textContent.charCodeAt(0)&&s.startContainer.previousSibling.textContent.length<=1&&(s.startContainer.previousSibling.textContent=s.startContainer.previousSibling.textContent.replace(n,"")),8203===s.endContainer.textContent.charCodeAt(s.endOffset)&&(o=s.startOffset,s.endContainer.textContent=s.endContainer.textContent.replace(n,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),s.startContainer,o))}},a.prototype.onKeyDown=function(t){var i,e=this,s=t.args;if("chrome"===r.AR.info.name&&(i=this.parent.getRange(),this.backSpaceCleanup(t,i),this.deleteCleanup(t,i)),9===s.keyCode&&this.parent.enableTabKey&&!(0,r.le)(s.target)&&(0,r.le)((0,r.oq)(s.target,".e-rte-toolbar"))){var n=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),o=this.nodeSelectionObj.getParentNodeCollection(n);if("LI"!==o[0].nodeName&&!(0,r.oq)(o[0],"li")&&!(0,r.oq)(o[0],"table")||0!==n.startOffset)if(s.preventDefault(),s.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var l=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.contentRenderer.getDocument(),l,l,0,l.textContent.length),mr.Insert(this.contentRenderer.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else mr.Insert(this.contentRenderer.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()))}if(("space"===t.args.action||"enter"===t.args.action||13===t.args.keyCode)&&(this.spaceLink(t.args),"HTML"===this.parent.editorMode&&!this.parent.readonly)){var h=this.parent.getText().trim().replace(/(\r\n|\n|\r)/gm,"").replace(/\u200B/g,"").length,c=this.parent.getSelection().length;if(!(-1===this.parent.maxLength||h-c+1<=this.parent.maxLength||13!==t.args.keyCode))return void t.args.preventDefault();this.parent.notify(nk,{args:t.args});var p=this.parent.getRange();!(0,r.le)(p.startContainer)&&p.startContainer===this.parent.inputElement.lastChild&&"#text"!==p.startContainer.nodeName&&p.startContainer.scrollIntoView({block:"end",inline:"nearest"})}if("space"===t.args.action){var d=this.parent.getRange(),f=d.startContainer.textContent.slice(0,d.startOffset),g=this.isOrderedList(f),m=this.isUnOrderedList(f);if(g&&!m||m&&!g){var v={callBack:null,event:t.args,name:"keydown-handler"};this.parent.trigger(dr,{cancel:!1,item:{command:"Lists",subCommand:g?"OL":"UL"},name:"actionBegin",originalEvent:t.args,requestType:g?"OL":"UL"},function(C){C.cancel||(e.parent.formatter.editorManager.observer.notify(DV,v),e.parent.trigger(ga,{editorMode:e.parent.editorMode,elements:e.parent.formatter.editorManager.domNode.blockNodes(),event:t.args,name:ga,range:e.parent.getRange(),requestType:g?"OL":"UL"}))})}}"chrome"===r.AR.info.name&&(!(0,r.le)(this.rangeElement)&&!(0,r.le)(this.oldRangeElement)||!(0,r.le)(this.deleteRangeElement)&&!(0,r.le)(this.deleteOldRangeElement))&&"TD"!==i.startContainer.parentElement.tagName&&"TH"!==i.startContainer.parentElement.tagName&&(this.rangeElement=null,this.oldRangeElement=null,this.deleteRangeElement=null,this.deleteOldRangeElement=null,this.isImageDelete||s.preventDefault(),s.preventDefault())},a.prototype.isOrderedList=function(t){t=t.replace(/\u200B/g,"");var e=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!(0,r.le)(t))for(var i=0;i<e.length;i++)if(e[i].test(t))return!0;return!1},a.prototype.isUnOrderedList=function(t){t=t.replace(/\u200B/g,"");var e=[/^[*]$/,/^[-]$/];if(!(0,r.le)(t))for(var i=0;i<e.length;i++)if(e[i].test(t))return!0;return!1},a.prototype.backSpaceCleanup=function(t,e){var i=!1,s=!0;if(!(0,r.le)(e.startContainer.previousSibling)&&"SPAN"===e.startContainer.previousSibling.nodeName&&(s="false"!==e.startContainer.previousSibling.contentEditable),"Backspace"===t.args.code&&8===t.args.keyCode&&0===e.startOffset&&0===e.endOffset&&0===this.parent.getSelection().length&&e.startContainer.textContent.length>0&&"TD"!==e.startContainer.parentElement.tagName&&"TH"!==e.startContainer.parentElement.tagName&&s){var n="#text"===e.startContainer.nodeName?e.startContainer.parentElement:e.startContainer;if(!this.parent.formatter.editorManager.domNode.isBlockNode(n)&&!(0,r.le)(n.previousSibling)&&"BR"===n.previousSibling.nodeName||!(0,r.le)(e.startContainer.previousSibling)&&"BR"===e.startContainer.previousSibling.nodeName)return;if(this.rangeElement=this.getRootBlockNode(e.startContainer),"OL"===this.rangeElement.tagName||"UL"===this.rangeElement.tagName){var o=this.getRangeLiNode(e.startContainer);o.previousElementSibling&&o.previousElementSibling.childElementCount>0&&(this.oldRangeElement="BR"===o.previousElementSibling.lastElementChild.nodeName?o.previousElementSibling:o.previousElementSibling.lastElementChild,(0,r.le)(o.lastElementChild)||"BR"===o.lastElementChild.nodeName?this.rangeElement=o:(this.rangeElement=o.lastElementChild,i=!0))}else{if(this.rangeElement===this.parent.inputElement||"TABLE"===this.rangeElement.tagName||!(0,r.le)(this.rangeElement.previousElementSibling)&&"TABLE"===this.rangeElement.previousElementSibling.tagName)return;this.oldRangeElement=this.rangeElement.previousElementSibling}if((0,r.le)(this.oldRangeElement))return;("OL"===this.oldRangeElement.tagName||"UL"===this.oldRangeElement.tagName)&&(this.oldRangeElement=this.oldRangeElement.lastElementChild.lastElementChild?this.oldRangeElement.lastElementChild.lastElementChild:this.oldRangeElement.lastElementChild);for(var l=this.oldRangeElement.lastChild;3!==l.nodeType&&"#text"!==l.nodeName&&"BR"!==l.nodeName;)l=l.lastChild;if(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),l,l.textContent.length),1===this.oldRangeElement.querySelectorAll("BR").length&&(0,r.og)(this.oldRangeElement.querySelector("BR")),!(0,r.le)(this.rangeElement)&&this.oldRangeElement!==this.rangeElement){for(;this.rangeElement.firstChild;)this.oldRangeElement.appendChild(this.rangeElement.childNodes[0]);(0,r.og)(i?this.rangeElement.parentElement:this.rangeElement),this.oldRangeElement.normalize()}}},a.prototype.deleteCleanup=function(t,e){var s,n,i=!1;if("Delete"===t.args.code&&46===t.args.keyCode&&0!==this.parent.contentModule.getText().trim().replace(/(\r\n|\n|\r)/gm,"").replace(/\u200B/g,"").length&&0===this.parent.getSelection().length&&"TD"!==e.startContainer.parentElement.tagName&&"TH"!==e.startContainer.parentElement.tagName){if(this.deleteRangeElement=n=this.getRootBlockNode(e.startContainer),"OL"===this.deleteRangeElement.tagName||"UL"===this.deleteRangeElement.tagName)(s=this.getRangeLiNode(e.startContainer)).nextElementSibling&&s.nextElementSibling.childElementCount>0&&!s.nextElementSibling.querySelector("BR")?(0,r.le)(s.lastElementChild)?this.deleteRangeElement=s:(this.deleteRangeElement=s.lastElementChild,i=!0):this.deleteRangeElement=this.getRangeElement(s);else if(3===this.deleteRangeElement.nodeType||"TABLE"===this.deleteRangeElement.tagName||!(0,r.le)(this.deleteRangeElement.nextElementSibling)&&"TABLE"===this.deleteRangeElement.nextElementSibling.tagName)return;if(this.getCaretIndex(e,this.deleteRangeElement)===this.deleteRangeElement.textContent.length){if(this.deleteOldRangeElement=(0,r.le)(s)?this.deleteRangeElement.nextElementSibling:i||!(0,r.le)(s.nextElementSibling)?this.getRangeElement(s.nextElementSibling):n.nextElementSibling,(0,r.le)(this.deleteOldRangeElement))return;0===e.startOffset&&1===e.endOffset&&"IMG"===this.deleteRangeElement.childNodes[0].nodeName?(this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),this.deleteRangeElement,this.deleteRangeElement,0,1),this.isImageDelete=!0):(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),this.deleteRangeElement,this.deleteRangeElement.childNodes.length),this.isImageDelete=!1);var o=this.deleteRangeElement.querySelector("BR");if(o&&o.classList.contains("e-rte-image-remove-focus"))return void(0,r.IV)([o],["e-rte-image-focus"]);if(o&&(0,r.og)(o),(0,r.le)(this.deleteRangeElement)||"OL"===this.deleteOldRangeElement.tagName||"UL"===this.deleteOldRangeElement.tagName||this.deleteOldRangeElement===this.deleteRangeElement)this.deleteRangeElement=null,this.deleteOldRangeElement=null;else{for(;this.deleteOldRangeElement.firstChild;)this.deleteRangeElement.appendChild(this.deleteOldRangeElement.childNodes[0]);(0,r.og)(i?this.deleteOldRangeElement.parentElement:this.deleteOldRangeElement),this.deleteRangeElement.normalize()}}else this.deleteRangeElement=null}},a.prototype.getCaretIndex=function(t,e){var i=0;if(0!==this.parent.contentModule.getDocument().getSelection().rangeCount){var s=t.cloneRange();s.selectNodeContents(e),s.setEnd(t.endContainer,t.endOffset),i=s.toString().length}return i},a.prototype.getRangeElement=function(t){return t.lastElementChild?"BR"===t.lastElementChild.tagName?t.lastElementChild.previousElementSibling?t.lastElementChild.previousElementSibling:t:t.lastElementChild:t},a.prototype.getRootBlockNode=function(t){for(;t&&this.parent&&this.parent.inputElement!==t&&t.parentElement!==this.parent.inputElement;t=t)t=t.parentElement;return t},a.prototype.getRangeLiNode=function(t){for(var e=t.parentElement;e!==this.parent.inputElement&&(1!==e.nodeType||"LI"!==e.tagName);)e=e.parentElement;return e},a.prototype.onPaste=function(t){var e=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(t.text.match(e)){if(t.isWordPaste)return;t.args.preventDefault();for(var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=(this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),o=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),l=t.text.split("\n"),h="",c=0;c<l.length;c++)if(""===l[c].trim())h+=Wk(this.parent);else{for(var u="",p=!0,d=l[c].split(" "),f=0;f<d.length;f++)""===d[f].trim()?u+=p?"&nbsp;":" ":(p=!1,u+=d[f]+" ");h+=0===c?"<span>"+u.trim()+"</span>":"<p>"+u.trim()+"</p>"}var g=this.parent.createElement("div");g.setAttribute("class","pasteContent"),g.style.display="inline",g.innerHTML=h.replace("&para","&amp;para");var m=g.querySelectorAll("span, p");for(c=0;c<m.length;c++){var v=m[c].innerHTML.split(" "),y="";for(f=0;f<v.length;f++)v[f].match(n)||v[f].match(o)?y+='<a class="e-rte-anchor" href="'+v[f]+'" title="'+v[f]+'"target="_blank">'+v[f]+" </a>":y+=v[f]+" ";m[c].innerHTML=y.trim()}(0,r.le)(this.parent.pasteCleanupModule)?this.parent.formatter.editorManager.execCommand("insertHTML",null,null,null,g):t.callBack(g.innerHTML)}},a.prototype.spaceLink=function(t){var e=this.nodeSelectionObj.getRange(this.contentRenderer.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(e),s=e.startContainer.textContent.substr(0,e.endOffset),n=s.split(" "),o=n[n.length-1];o=o.slice(0,e.startOffset-(s.length-n[n.length-1].length));var h=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==i[0].nodeName&&o.match(h)){var c=this.nodeSelectionObj.save(e,this.parent.contentModule.getDocument()),u=o.indexOf("http")>-1?o:"http://"+o,p=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(e);this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},t,{url:u,selection:c,selectParent:p,text:o,title:"",target:"_blank"})}},a.prototype.mouseOutHandler=function(){if((0,r.le)(this.tooltipTargetEle)){var t=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().ownerDocument:this.parent.contentModule.getDocument();this.tooltipTargetEle=t.querySelector("[data-title]"),this.tooltipTargetEle.setAttribute("title",this.tooltipTargetEle.getAttribute("data-title"))}else this.tooltipTargetEle.setAttribute("title",this.tooltipTargetEle.getAttribute("data-title"));this.tooltipTargetEle.removeAttribute("data-title"),r.bi.remove(this.tooltipTargetEle,"mouseout",this.mouseOutHandler)},a.prototype.onToolbarClick=function(t){var i,s,n,e=this,o=t.item,l=(0,r.oq)(t.originalEvent.target,".e-rte-quick-popup"),h=this.parent.iframeSettings.enable?this.parent.contentModule.getPanel().ownerDocument:this.parent.contentModule.getDocument();if(this.tooltipTargetEle=(0,r.oq)(t.originalEvent.target,"[data-tooltip-id]"),!(0,r.le)(this.tooltipTargetEle)&&this.parent.showTooltip&&!(0,r.le)(h.querySelector(".e-tooltip-wrap"))&&(this.parent.notify(im,{args:event}),this.tooltipTargetEle.setAttribute("data-title",this.tooltipTargetEle.getAttribute("title")),this.tooltipTargetEle.removeAttribute("title"),r.bi.add(this.tooltipTargetEle,"mouseout",this.mouseOutHandler,this)),"FormatPainter"!==o.command)if(!l||l.classList.contains("e-rte-inline-popup")||l.classList.contains("e-rte-text-popup")){var u=document.getElementById(this.parent.getID()+"_rtelink"),p=document.getElementById(this.parent.getID()+"_image");switch("SourceCode"!==o.subCommand&&"Preview"!==o.subCommand&&"FontColor"!==o.subCommand&&"BackgroundColor"!==o.subCommand&&(c=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument()),(0,r.le)(u)&&(0,r.le)(p)&&(i=this.nodeSelectionObj.save(c,this.parent.contentModule.getDocument())),s=this.nodeSelectionObj.getNodeCollection(c),n=this.nodeSelectionObj.getParentNodeCollection(c)),o.subCommand){case"Maximize":this.parent.notify(kb,{args:t});break;case"Minimize":this.parent.notify(Ab,{args:t});break;case"CreateLink":this.parent.notify(Rb,{member:"link",args:t,selectNode:s,selection:i,selectParent:n});break;case"RemoveLink":this.parent.notify(Pb,{member:"link",args:t,selectNode:s,selection:i,selectParent:n});break;case"Print":this.parent.print();break;case"Image":this.parent.notify(Wg,{member:"image",args:t,selectNode:s,selection:i,selectParent:n});break;case"Audio":this.parent.notify("insertAudio",{member:"audio",args:t,selectNode:s,selection:i,selectParent:n});break;case"Video":this.parent.notify("insertVideo",{member:"video",args:t,selectNode:s,selection:i,selectParent:n});break;case"CreateTable":this.parent.notify("createTable",{member:"table",args:t,selection:i});break;case"SourceCode":this.parent.notify(Vp,{member:"viewSource",args:t});break;case"Preview":this.parent.notify(Ug,{member:"updateSource",args:t});break;case"FontColor":case"BackgroundColor":break;case"File":this.parent.notify(zb,{member:"fileManager",args:t,selectNode:s,selection:i,selectParent:n});break;case"EmojiPicker":this.parent.notify(qb,{member:"emojiPicker",args:t});break;default:this.parent.formatter.process(this.parent,t,t.originalEvent,null)}}else{if("SourceCode"!==o.subCommand&&"Preview"!==o.subCommand&&"FontColor"!==o.subCommand&&"BackgroundColor"!==o.subCommand){Ts()&&"Images"===o.command&&this.nodeSelectionObj.restore();var c=this.nodeSelectionObj.getRange(this.parent.contentModule.getDocument());i=this.nodeSelectionObj.save(c,this.parent.contentModule.getDocument()),s=this.nodeSelectionObj.getNodeCollection(c),n=this.nodeSelectionObj.getParentNodeCollection(c)}"Images"===o.command&&this.parent.notify(zT,{member:"image",args:t,selectNode:s,selection:i,selectParent:n}),"Audios"===o.command&&this.parent.notify("audio-toolbar-action",{member:"audio",args:t,selectNode:s,selection:i,selectParent:n}),"Videos"===o.command&&this.parent.notify("video-toolbar-action",{member:"video",args:t,selectNode:s,selection:i,selectParent:n}),"Links"===o.command&&this.parent.notify(_T,{member:"link",args:t,selectNode:s,selection:i,selectParent:n}),"Table"===o.command&&this.parent.notify("table-toolbar-action",{member:"table",args:t,selectNode:s,selection:i,selectParent:n})}else 1===t.originalEvent.detail?(clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(function(){e.parent.notify("formatPainterClick",{member:"formatPainter",args:t})},200)):(clearTimeout(this.clickTimeout),this.parent.notify("formatPainterDoubleClick",{member:"formatPainter",args:t}))},a.prototype.renderColorPicker=function(t){this.colorPickerModule.renderColorPickerInput(t)},a.prototype.instantiateRenderer=function(){this.renderFactory.addRenderer(Fe.Content,this.parent.iframeSettings.enable?new SX(this.parent,this.locator):new mH(this.parent,this.locator))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ui,this.render),this.parent.off(hs,this.onPropertyChanged),this.parent.off(MT,this.onToolbarClick),this.parent.off(Tb,this.renderColorPicker),this.parent.off(Oe,this.destroy),this.parent.off(Mi,this.onKeyDown),this.parent.off(Vg,this.instantiateRenderer),this.parent.off(Xg,this.selectAll),this.parent.off(Vb,this.selectRange),this.parent.off(Qg,this.getSelectedHtml),this.parent.off(qn,this.onSelectionSave),this.parent.off(_n,this.onSelectionRestore),this.parent.off(em,this.updateReadOnly),this.parent.off(Hp,this.onPaste),this.parent.off(Fg,this.isTableClassAdded))},a.prototype.render=function(){this.contentRenderer=this.renderFactory.getRenderer(Fe.Content);var t=this.contentRenderer.getEditPanel(),e={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};if((0,r.le)(this.parent.formatter)){var i=new yX({currentDocument:this.contentRenderer.getDocument(),element:t,options:e,formatPainterSettings:this.parent.formatPainterSettings});this.parent.setProperties({formatter:i},!0)}else this.parent.formatter.updateFormatter(t,this.contentRenderer.getDocument(),e);this.parent.enableXhtml&&this.parent.notify(tm,{}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new gH(this.parent)),this.parent.inlineMode.enable&&((0,r.le)(this.parent.fontFamily.default)||(t.style.fontFamily=this.parent.fontFamily.default),(0,r.le)(this.parent.fontSize.default)||(t.style.fontSize=this.parent.fontSize.default)),this.parent.notify(xb,{})},a.prototype.onPropertyChanged=function(t){if(!(0,r.le)(t)&&!(0,r.le)(t.newProp.toolbarSettings)&&!(0,r.le)(t.newProp.toolbarSettings.enable)&&(this.toolbarUpdate=new gH(this.parent)),!(0,r.le)(t.newProp.formatter)){var e=this.contentRenderer.getEditPanel(),i={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter.updateFormatter(e,this.contentRenderer.getDocument(),i)}},a.prototype.getModuleName=function(){return"htmlEditor"},a.prototype.selectAll=function(){var t=vV(this.parent.contentModule.getDocument(),this.parent.contentModule.getEditPanel());t.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.contentModule.getDocument(),t[0],t[t.length-1],0,t[t.length-1].textContent.length)},a.prototype.selectRange=function(t){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.contentModule.getDocument(),t.range)},a.prototype.getSelectedHtml=function(t){t.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()).toString())},a}(),kX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.showFullScreen=function(t){var e=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&!(0,r.le)(this.parent.quickToolbarModule)&&this.parent.quickToolbarModule.hideQuickToolbars(),this.parent.showTooltip&&!(0,r.le)(document.querySelector(".e-tooltip-wrap"))&&this.parent.notify(im,{args:t}),this.scrollableParent=iu(this.parent.element),this.parent.element.classList.contains(sm)||this.parent.trigger(dr,{cancel:!1,requestType:"Maximize",targetItem:"Maximize",args:t},function(s){if(!s.cancel){e.parent.toolbarSettings.enableFloating&&!e.parent.inlineMode.enable&&e.parent.toolbarSettings.enable&&(e.parent.getToolbarElement().style.width="100%",e.parent.getToolbarElement().style.top="0px"),e.parent.element.classList.add(sm),e.toggleParentOverflow(!0);var n=e.parent.element.querySelectorAll(".e-toolbar-extended.e-popup-open").length>0;e.parent.setContentHeight(null,n),e.parent.toolbarModule&&(e.parent.getBaseToolbarObject().toolbarObj.items[0].properties||e.parent.getBaseToolbarObject().toolbarObj.removeItems(0),r.AR.isDevice&&e.parent.toolbarModule.removeFixedTBarClass(),e.parent.toolbarModule.updateItem({targetItem:"Maximize",updateItem:"Minimize",baseToolbar:e.parent.getBaseToolbarObject()})),e.parent.refreshUI(),e.parent.trigger(ga,{requestType:"Maximize",targetItem:"Maximize",args:t})}})},a.prototype.hideFullScreen=function(t){var e=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&!(0,r.le)(this.parent.quickToolbarModule)&&this.parent.quickToolbarModule.hideQuickToolbars(),this.parent.showTooltip&&!(0,r.le)(document.querySelector(".e-tooltip-wrap"))&&this.parent.notify(im,{args:t}),this.parent.element.classList.contains(sm)&&this.parent.trigger(dr,{cancel:!1,requestType:"Minimize",targetItem:"Minimize",args:t},function(s){if(!s.cancel){e.parent.element.classList.remove(sm);for(var n=document.querySelectorAll(".e-rte-overflow"),o=0;o<n.length;o++)(0,r.IV)([n[o]],["e-rte-overflow"]);var l=e.parent.element.querySelectorAll(".e-toolbar-extended.e-popup-open").length>0;e.parent.setContentHeight(null,l),e.parent.toolbarModule&&(e.parent.getBaseToolbarObject().toolbarObj.items[0].properties||e.parent.getBaseToolbarObject().toolbarObj.removeItems(0),e.parent.toolbarModule.updateItem({targetItem:"Minimize",updateItem:"Maximize",baseToolbar:e.parent.getBaseToolbarObject()}),r.AR.isDevice&&e.parent.inlineMode.enable&&e.parent.toolbarModule.addFixedTBarClass()),e.parent.trigger(ga,{requestType:"Minimize",targetItem:"Minimize",args:t})}})},a.prototype.toggleParentOverflow=function(t){if(!(0,r.le)(this.scrollableParent))for(var e=0;e<this.scrollableParent.length;e++)if("#document"===this.scrollableParent[e].nodeName){var i=document.querySelector("body");(0,r.cn)([i],["e-rte-overflow"])}else(0,r.cn)([i=this.scrollableParent[e]],["e-rte-overflow"])},a.prototype.onKeyDown=function(t){var e=t.args;switch(e.action){case"full-screen":this.showFullScreen(t.args),e.preventDefault();break;case"escape":this.hideFullScreen(t.args),e.preventDefault()}},a.prototype.addEventListener=function(){this.parent.on(Mi,this.onKeyDown,this),this.parent.on(Oe,this.destroy,this),this.parent.on(Bi,this.moduleDestroy,this)},a.prototype.removeEventListener=function(){this.parent.off(Mi,this.onKeyDown),this.parent.off(Oe,this.destroy),this.parent.off(Bi,this.moduleDestroy)},a.prototype.destroy=function(){if(!(0,r.le)(this.parent)){this.parent.element.classList.contains(sm)&&this.toggleParentOverflow(!1);for(var t=document.querySelectorAll(".e-rte-overflow"),e=0;e<t.length;e++)(0,r.IV)([t[e]],["e-rte-overflow"]);this.removeEventListener()}},a.prototype.moduleDestroy=function(){this.parent=null},a}();function sA(a,t,e,i){var s;if(s=e?t.contentModule.getDocument().querySelector("body"):t.element,Object.keys(a).length)for(var o=0,l=Object.keys(a);o<l.length;o++){var h=l[o];"class"===h?s.classList.add(a[""+h]):"disabled"===h&&"disabled"===a[""+h]?(t.enabled=!1,t.setEnable()):"readonly"===h&&"readonly"===a[""+h]?(t.readonly=!0,t.setReadOnly(i)):"style"===h?s.setAttribute("style",a[""+h]):"tabindex"===h?t.inputElement.setAttribute("tabindex",a[""+h]):"placeholder"===h?(t.placeholder=a[""+h],t.setPlaceHolder()):["name","required"].indexOf(h)>-1?t.valueContainer.setAttribute(h,a[""+h]):s.setAttribute(h,a[""+h])}}var LX=function(){function a(t,e){this.parent=t,this.locator=e,this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return a.prototype.render=function(){this.contentRenderer=this.renderer.getRenderer(Fe.Content),this.contentRenderer.renderPanel()},a.prototype.refresh=function(t){void 0===t&&(t={requestType:"refresh"}),this.parent.notify(t.requestType+"-begin",t)},a.prototype.destroy=function(){(0,r.le)(this.parent)||this.removeEventListener()},a.prototype.moduleDestroy=function(){this.parent=null},a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(hs,this.refresh,this),this.parent.on(xs,this.keyUp,this),this.parent.on(Bi,this.moduleDestroy,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(hs,this.refresh),this.parent.off(xs,this.keyUp),this.parent.off(Bi,this.moduleDestroy))},a.prototype.keyUp=function(t){if("HTML"===this.parent.editorMode)switch(t.args.which){case 46:case 8:var e=this.parent.contentModule.getEditPanel().childNodes;if(0===e.length||1===e.length&&0===e[0].childNodes.length&&("BR"===e[0].tagName||("P"===e[0].tagName||"DIV"===e[0].tagName)&&""===e[0].textContent)){var i=this.parent.contentModule.getEditPanel();i.innerHTML="DIV"===this.parent.enterKey?"<div><br/></div>":"BR"===this.parent.enterKey?"<br/>":"<p><br/></p>",this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),i.childNodes[0],0)}}},a}(),OX=function(){function a(t,e){this.parent=t,this.rteID=t.element.id,this.i10n=e.getService("rteLocale"),this.addEventListener(),this.serviceLocator=e,this.rendererFactory=e.getService("rendererFactory"),this.dialogRenderObj=e.getService("dialogRenderObject")}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Rb,this.linkDialog,this),this.parent.on(uk,this.showDialog,this),this.parent.on(pk,this.closeDialog,this),this.parent.on(Mi,this.onKeyDown,this),this.parent.on(Jo,this.showLinkQuickToolbar,this),this.parent.on(tl,this.clearDialogObj,this),this.parent.on(_T,this.onToolbarAction,this),this.parent.on(pr,this.onIframeMouseDown,this),this.parent.on(Pb,this.removeLink,this),this.parent.on(WT,this.editLink,this),this.parent.on(Mb,this.openLink,this),this.parent.on(Un,this.editAreaClickHandler,this),this.parent.on(zi,this.setCssClass,this),this.parent.on(Oe,this.destroy,this),this.parent.on(Bi,this.moduleDestroy,this))},a.prototype.onToolbarAction=function(t){switch(t.args.item.subCommand){case"OpenLink":this.parent.notify(Mb,t);break;case"EditLink":this.parent.notify(WT,t);break;case"RemoveLink":this.parent.notify(Pb,t)}},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Rb,this.linkDialog),this.parent.off(uk,this.showDialog),this.parent.off(pk,this.closeDialog),this.parent.off(Mi,this.onKeyDown),this.parent.off(Jo,this.showLinkQuickToolbar),this.parent.off(tl,this.clearDialogObj),this.parent.off(_T,this.onToolbarAction),this.parent.off(Pb,this.removeLink),this.parent.off(pr,this.onIframeMouseDown),this.parent.off(WT,this.editLink),this.parent.off(Mb,this.openLink),this.parent.off(Un,this.editAreaClickHandler),this.parent.off(zi,this.setCssClass),this.parent.off(Oe,this.destroy),this.parent.off(Bi,this.moduleDestroy))},a.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},a.prototype.updateCss=function(t,e){t&&e.cssClass&&((0,r.le)(e.oldCssClass)?t.setProperties({cssClass:(t.cssClass+" "+e.cssClass).trim()}):t.setProperties({cssClass:(t.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){this.updateCss(this.checkBoxObj,t),this.updateCss(this.dialogObj,t)},a.prototype.showLinkQuickToolbar=function(t){if(!(0,r.le)(t.args)&&"enter"!==t.args.action&&"space"!==t.args.action){var e=void 0,i=void 0;if("Links"!==t.type||(0,r.le)(this.parent.quickToolbarModule)||(0,r.le)(this.parent.quickToolbarModule.linkQTBar))return;this.quickToolObj=this.parent.quickToolbarModule;var l,s=this.parent.element.getBoundingClientRect().top,n=this.parent.element.getBoundingClientRect().left,o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());if([].forEach.call(t.elements,function(g,m){0===m&&(l="#text"===g.nodeName?g.parentNode:g)}),t.isNotify){var h=this.parent.toolbarModule.getToolbarElement(),c=l.getBoundingClientRect().top,u=l.getBoundingClientRect().left,p=c-s,d=h?h.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;e=this.parent.iframeSettings.enable?n+u:l.getBoundingClientRect().left,i=window.pageYOffset+(this.parent.iframeSettings.enable?s+d+c:s+p)}else{var f=void 0;f=t.args.touches?t.args.changedTouches[0]:f=t.args,e=this.parent.iframeSettings.enable?window.pageXOffset+n+f.clientX:f.pageX,i=this.parent.iframeSettings.enable?window.pageYOffset+s+f.clientY:f.pageY}this.quickToolObj.linkQTBar&&this.quickToolObj.linkQTBar.showPopup(e,i,o.endContainer,"link")}},a.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.linkQTBar&&document.body.contains(this.quickToolObj.linkQTBar.element)&&this.quickToolObj.linkQTBar.hidePopup()},a.prototype.editAreaClickHandler=function(t){if(this.parent.readonly)this.hideLinkQuickToolbar();else{var e=t.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===e.which||i&&1===e.which||!i&&3===e.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.linkQTBar){this.quickToolObj=this.parent.quickToolbarModule;var s=e.target;s=this.getAnchorNode(s),this.contentModule=this.rendererFactory.getRenderer(Fe.Content);var n=this.quickToolObj.linkQTBar.element.classList.contains("e-rte-pop");if("A"===s.nodeName&&s.childNodes.length>0&&"IMG"!==s.childNodes[0].nodeName&&"IMG"!==t.args.target.nodeName&&!(0,r.le)((0,r.oq)(this.parent.getRange().startContainer.parentElement,"A"))&&!(0,r.le)((0,r.oq)(this.parent.getRange().endContainer.parentElement,"A"))){if(n)return;if(!1===t.args.ctrlKey)this.showLinkQuickToolbar({args:e,isNotify:!1,type:"Links",elements:[e.target]});else{var o=this.parent.formatter.editorManager.nodeSelection,l=o.getRange(this.parent.contentModule.getDocument()),h={args:{item:{subCommand:"OpenLink",command:"Links",name:""},originalEvent:t.args},selectNode:o.getNodeCollection(l),selectParent:o.getParentNodeCollection(l),selection:o.save(l,this.parent.contentModule.getDocument())};this.parent.notify(Mb,h)}}else this.hideLinkQuickToolbar()}}},a.prototype.onKeyDown=function(t){var e=t.args;switch(e.action){case"escape":(0,r.le)(this.dialogObj)||this.dialogObj.close();break;case"insert-link":this.openDialog(!0,t),e.preventDefault()}},a.prototype.openDialog=function(t,e){if(t||this.parent.contentModule.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i);this.linkDialog({args:e?e.args:{item:{command:"Links",subCommand:"CreateLink"},originalEvent:void 0,name:t?null:"showDialog"},selectNode:n,selection:s,selectParent:o})}else{var h=this.parent.contentModule.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(h.selectionStart,h.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:e&&e.args},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertLink"})}},a.prototype.showDialog=function(){this.openDialog(!1),this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.closeDialog=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},a.prototype.clearDialogObj=function(){this.dialogObj&&(this.dialogObj.destroy(),(0,r.og)(this.dialogObj.element),this.dialogObj=null)},a.prototype.linkDialog=function(t,e){var i=this;if(this.dialogObj)this.dialogObj.hide({returnValue:!0});else if("HTML"===this.parent.editorMode&&t.selectParent.length>0&&!(0,r.le)(t.selectParent[0].classList)&&t.selectParent[0].classList.contains("e-rte-anchor")&&(0,r.le)(e))this.editLink(t);else{var s=this.i10n.getConstant("linkWebUrl"),n=this.i10n.getConstant("linkText"),o=this.i10n.getConstant("linkTooltipLabel"),l=this.i10n.getConstant("linkurl"),h=this.i10n.getConstant("textPlaceholder"),c=this.i10n.getConstant("linkTitle"),u=this.parent.createElement("div",{className:"e-rte-link-dialog"+this.parent.getCssClass(!0),id:this.rteID+"_rtelink"});this.parent.element.appendChild(u);var p=this.parent.createElement("div",{className:"e-rte-linkcontent"+this.parent.getCssClass(!0),id:this.rteID+"_linkContent"}),d="HTML"===this.parent.editorMode?"<label>"+o+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" spellcheck="false" placeholder = "'+c+'"aria-label="'+this.i10n.getConstant("linkTitle")+'" class="e-input e-rte-linkTitle'+this.parent.getCssClass(!0)+'"></div><div class="e-rte-label'+this.parent.getCssClass(!0)+'"></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="checkbox" class="e-rte-linkTarget'+this.parent.getCssClass(!0)+'"  data-role ="none"></div>':"",g=Ih('<div class="e-rte-label'+this.parent.getCssClass(!0)+'"><label>'+s+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" spellcheck="false" placeholder="'+l+'"aria-label="'+this.i10n.getConstant("linkWebUrl")+'" class="e-input e-rte-linkurl'+this.parent.getCssClass(!0)+'"/></div><div class="e-rte-label'+this.parent.getCssClass(!0)+'"><label>'+n+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"> <input type="text" data-role ="none" spellcheck="false" class="e-input e-rte-linkText'+this.parent.getCssClass(!0)+'"aria-label="'+this.i10n.getConstant("linkText")+'" placeholder="'+h+'"></div><div class="e-rte-label'+this.parent.getCssClass(!0)+'">'+d);p.appendChild(g);var m=p.querySelector(".e-rte-linkTarget"),v=p.querySelector(".e-rte-linkurl"),y=p.querySelector(".e-rte-linkText"),C=p.querySelector(".e-rte-linkTitle"),b=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new $p({label:b,checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass()}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(m);var S="HTML"===this.parent.editorMode?t.selection.getRange(this.parent.contentModule.getDocument()).toString():t.text,I=this.i10n.getConstant("dialogInsert"),x=this.i10n.getConstant("dialogCancel"),T=t.selection,O={selfLink:this,selection:t.selection,selectParent:t.selectParent,args:t.args},A={header:this.i10n.getConstant("linkHeader"),content:p,cssClass:Xi+this.parent.getCssClass(!0),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:r.AR.isDevice?"290px":"310px",isModal:r.AR.isDevice,buttons:[{click:this.insertlink.bind(O),buttonModel:{content:I,cssClass:"e-flat e-insertLink"+this.parent.getCssClass(!0),isPrimary:!0}},{click:this.cancelDialog.bind(O),buttonModel:{cssClass:"e-flat"+this.parent.getCssClass(!0),content:x}}],target:r.AR.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(q){i.parent.isBlur=!1,q&&q.event.returnValue&&("HTML"===i.parent.editorMode?T.restore():i.parent.formatter.editorManager.markdownSelection.restore(i.parent.contentModule.getEditPanel())),i.dialogObj.destroy(),(0,r.og)(i.dialogObj.element),i.dialogRenderObj.close(i.dialogObj),i.dialogObj=null}};this.dialogObj=this.dialogRenderObj.render(A),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(u),u.style.maxHeight="inherit",!(0,r.le)(this.dialogObj)&&((0,r.le)(e)||(v.value=e.url,y.value=e.text,C.value=e.title,this.checkBoxObj.checked=!!e.target,this.dialogObj.header=e.header,this.dialogObj.element.querySelector(".e-insertLink").textContent=e.btnText),this.checkUrl(!1),("HTML"===this.parent.editorMode&&(0,r.le)(e)&&(!(0,r.le)(S)&&""!==S&&0===t.selection.range.startOffset||t.selection.range.startOffset!==t.selection.range.endOffset)||"Markdown"===t.module)&&(y.value=S),r.bi.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup(),this.quickToolObj.textQTBar&&this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)&&this.quickToolObj.textQTBar.hidePopup()))}},a.prototype.insertlink=function(t){var n,e=this.selfLink.dialogObj.element,i=e.querySelector(".e-rte-linkurl").value,s=e.querySelector(".e-rte-linkText").value;"HTML"===this.selfLink.parent.editorMode&&(n=e.querySelector(".e-rte-linkTitle").value);var o=this.selfLink.checkBoxObj.checked?"_blank":null,l=this.selfLink.checkBoxObj.checked?this.selfLink.i10n.getConstant("linkAriaLabel"):null;if(""!==i){this.selfLink.isUrl(i)?this.selfLink.checkUrl(!1):(s=""===s?i:s,i=this.selfLink.parent.enableAutoUrl||i.indexOf("http")>-1?i:"http://"+i);var h=this.selfLink;if("HTML"===h.parent.editorMode&&(0,r.le)((0,r.oq)(this.selection.range.startContainer.parentNode,"[id='"+h.parent.contentModule.getPanel().id+"']"))){h.parent.contentModule.getEditPanel().focus(),r.AR.isIE&&h.parent.iframeSettings.enable&&this.selection.restore();var c=h.parent.formatter.editorManager.nodeSelection.getRange(h.parent.contentModule.getDocument());this.selection=h.parent.formatter.editorManager.nodeSelection.save(c,h.parent.contentModule.getDocument()),this.selectParent=h.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(c)}var p,u={url:i,text:s,title:n,target:o,ariaLabel:l,selection:this.selection,selectParent:this.selectParent};if(document.body.contains(h.dialogObj.element)&&this.selfLink.dialogObj.hide({returnValue:!1}),Ts()&&h.parent.iframeSettings.enable&&(0,r.Ys)("iframe",h.parent.element).contentWindow.focus(),"HTML"===h.parent.editorMode&&this.selection.restore(),0===h.parent.formatter.getUndoRedoStack().length&&h.parent.formatter.saveData(),(0,r.le)(this.args)||"KeyK"!==this.args.code)p=this.args;else{var d=this.args;(0,r.l7)(this.args,{item:{command:"Links",subCommand:"CreateLink"},originalEvent:d},!0),p={item:{command:"Links",subCommand:"CreateLink"},originalEvent:d}}this.selfLink.parent.formatter.process(this.selfLink.parent,p,!(0,r.le)(this.args)&&this.args.originalEvent,u),this.selfLink.parent.contentModule.getEditPanel().focus()}else this.selfLink.checkUrl(!0)},a.prototype.isUrl=function(t){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(t)},a.prototype.checkUrl=function(t){var i=this.dialogObj.element.querySelector(".e-rte-linkurl");t?((0,r.cn)([i],"e-error"),i.setSelectionRange(0,i.value.length),i.focus()):(0,r.IV)([i],"e-error")},a.prototype.removeLink=function(t){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();var e=this.getAnchorNode(t.selectParent[0]);this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,selectParent:t.selectParent,selection:t.selection,text:e.innerText,subCommand:t.args.item.subCommand}),Ts()&&this.parent.iframeSettings.enable?(0,r.Ys)("iframe",this.parent.element).contentWindow.focus():this.parent.contentModule.getEditPanel().focus(),this.hideLinkQuickToolbar()},a.prototype.openLink=function(t){var e=this.getAnchorNode(t.selectParent[0]);(e.classList.contains("e-rte-anchor")||"A"===e.tagName)&&this.parent.formatter.process(this.parent,t.args,t.args,{url:e.href,text:e.innerText,target:""===e.target?"_self":"_blank",selectNode:t.selectNode,subCommand:t.args.item.subCommand})},a.prototype.getAnchorNode=function(t){return(0,r.oq)(t,"a")||t},a.prototype.editLink=function(t){var e=this.getAnchorNode(t.selectNode[0]),i=this.getAnchorNode(t.selectParent[0]);if((i="A"===e.nodeName?e:i).classList.contains("e-rte-anchor")||"A"===i.tagName){var s=this.i10n.getConstant("dialogUpdate"),n={url:i.getAttribute("href"),text:i.innerText,title:i.title,target:i.target,header:this.i10n.getConstant("editLink"),btnText:s};this.linkDialog(t,n)}},a.prototype.cancelDialog=function(t){this.selfLink.parent.isBlur=!1,this.selfLink.dialogObj.hide({returnValue:!0}),Ts()?this.selection.restore():this.selfLink.parent.contentModule.getEditPanel().focus()},a.prototype.onDocumentClick=function(t){var e=t.target;!(0,r.le)(this.dialogObj)&&(!(0,r.oq)(e,"[id='"+this.dialogObj.element.id+"']")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(t.target)||(this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(t.target)||this.parent.inlineMode.enable&&!(0,r.oq)(e,"#"+this.dialogObj.element.id))&&!(0,r.oq)(e,"#"+this.parent.getID()+"_toolbar_CreateLink")&&!e.querySelector("#"+this.parent.getID()+"_toolbar_CreateLink"))&&(this.dialogObj.hide({returnValue:!0}),r.bi.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),this.parent.isBlur=!0,Eh(this.parent.element,"focusout"))},a.prototype.destroy=function(){(0,r.le)(this.parent)||this.removeEventListener()},a.prototype.moduleDestroy=function(){this.parent=null},a.prototype.getModuleName=function(){return"link"},a}(),RX=function(){function a(t,e){this.isImgUploaded=!1,this.isAllowedTypes=!0,this.pageX=null,this.pageY=null,this.mouseX=null,this.deletedImg=[],this.parent=t,this.rteID=t.element.id,this.i10n=e.getService("rteLocale"),this.rendererFactory=e.getService("rendererFactory"),this.dialogRenderObj=e.getService("dialogRenderObject"),this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Mi,this.onKeyDown,this),this.parent.on(xs,this.onKeyUp,this),this.parent.on(Wg,this.insertImage,this),this.parent.on(dk,this.showDialog,this),this.parent.on(mk,this.closeDialog,this),this.parent.on(qg,this.onWindowResize,this),this.parent.on(Jo,this.showImageQuickToolbar,this),this.parent.on(tl,this.clearDialogObj,this),this.parent.on(zT,this.onToolbarAction,this),this.parent.on(XT,this.caption,this),this.parent.on(ZT,this.deleteImg,this),this.parent.on(UT,this.insertImgLink,this),this.parent.on(GT,this.insertAltText,this),this.parent.on(Un,this.editAreaClickHandler,this),this.parent.on(pr,this.onIframeMouseDown,this),this.parent.on(QT,this.imageSize,this),this.parent.on(fa,this.alignmentSelect,this),this.parent.on(ui,this.afterRender,this),this.parent.on(il,this.afterRender,this),this.parent.on(Hp,this.imagePaste,this),this.parent.on(zi,this.setCssClass,this),this.parent.on(Oe,this.removeEventListener,this),this.parent.on(Bi,this.moduleDestroy,this))},a.prototype.removeEventListener=function(){if(!this.parent.isDestroyed){this.parent.off(Mi,this.onKeyDown),this.parent.off(xs,this.onKeyUp),this.parent.off(qg,this.onWindowResize),this.parent.off(Wg,this.insertImage),this.parent.off(dk,this.showDialog),this.parent.off(mk,this.closeDialog),this.parent.off(Jo,this.showImageQuickToolbar),this.parent.off(tl,this.clearDialogObj),this.parent.off(XT,this.caption),this.parent.off(zT,this.onToolbarAction),this.parent.off(ZT,this.deleteImg),this.parent.off(UT,this.insertImgLink),this.parent.off(GT,this.insertAltText),this.parent.off(Un,this.editAreaClickHandler),this.parent.off(pr,this.onIframeMouseDown),this.parent.off(QT,this.imageSize),this.parent.off(fa,this.alignmentSelect),this.parent.off(ui,this.afterRender),this.parent.off(il,this.afterRender),this.parent.off(Hp,this.imagePaste),this.parent.off(zi,this.setCssClass),this.parent.off(Oe,this.removeEventListener),this.parent.off(Bi,this.moduleDestroy);var t=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;t.removeEventListener("drop",this.dragDrop.bind(this),!0),t.removeEventListener("dragstart",this.dragStart.bind(this),!0),t.removeEventListener("dragenter",this.dragEnter.bind(this),!0),t.removeEventListener("dragover",this.dragOver.bind(this),!0),(0,r.le)(this.contentModule)||(r.bi.remove(this.contentModule.getEditPanel(),r.AR.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off($g,this.undoStack),this.parent.insertImageSettings.resize&&(r.bi.remove(this.parent.contentModule.getEditPanel(),r.AR.touchStartEvent,this.resizeStart),r.bi.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),r.bi.remove(this.contentModule.getEditPanel(),"cut",this.onCutHandler),r.bi.remove(this.contentModule.getDocument(),r.AR.touchMoveEvent,this.resizing)))}},a.prototype.updateCss=function(t,e){t&&e.cssClass&&((0,r.le)(e.oldCssClass)?t.setProperties({cssClass:(t.cssClass+" "+e.cssClass).trim()}):t.setProperties({cssClass:(t.cssClass.replace(e.oldCssClass,"").trim()+" "+e.cssClass).trim()}))},a.prototype.setCssClass=function(t){this.popupObj&&t.cssClass&&((0,r.le)(t.oldCssClass)||(0,r.IV)([this.popupObj.element],t.oldCssClass),(0,r.cn)([this.popupObj.element],t.cssClass)),this.updateCss(this.checkBoxObj,t),this.updateCss(this.widthNum,t),this.updateCss(this.heightNum,t),this.updateCss(this.uploadObj,t),this.updateCss(this.dialogObj,t)},a.prototype.onIframeMouseDown=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},a.prototype.afterRender=function(){this.contentModule=this.rendererFactory.getRenderer(Fe.Content),r.bi.add(this.contentModule.getEditPanel(),r.AR.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(r.bi.add(this.parent.contentModule.getEditPanel(),r.AR.touchStartEvent,this.resizeStart,this),r.bi.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),r.bi.add(this.contentModule.getEditPanel(),"cut",this.onCutHandler,this));var t=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;t.addEventListener("drop",this.dragDrop.bind(this),!0),t.addEventListener("dragstart",this.dragStart.bind(this),!0),t.addEventListener("dragenter",this.dragOver.bind(this),!0),t.addEventListener("dragover",this.dragOver.bind(this),!0)},a.prototype.undoStack=function(t){if("undo"===t.subCommand.toLowerCase()||"redo"===t.subCommand.toLowerCase())for(var e=0;e<this.parent.formatter.getUndoRedoStack().length;e++){var i=this.parent.createElement("div"),s=this.parent.formatter.getUndoRedoStack()[e].text;i.appendChild(s.cloneNode(!0));var n=i.querySelectorAll("img");if(i.querySelector(".e-img-resize")&&n.length>0){for(var o=0;o<n.length;o++)n[o].style.outline="";(0,r.og)(i.querySelector(".e-img-resize"));for(var l=i.cloneNode(!0),h=document.createDocumentFragment();l.firstChild;)h.appendChild(l.firstChild);this.parent.formatter.getUndoRedoStack()[e].text=h}}},a.prototype.resizeEnd=function(t){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor="auto",r.AR.isDevice&&(0,r.IV)([t.target.parentElement],"e-mob-span"),this.parent.trigger("resizeStop",{event:t,requestType:"images"}),this.getPointX(t),this.parent.iframeSettings.enable&&(window,this.parent.element.getBoundingClientRect()),this.parent.formatter.editorManager.observer.on($g,this.undoStack,this),this.parent.formatter.saveData()},a.prototype.resizeStart=function(t,e){var i=this;if(!this.parent.readonly){var s=e||t.target;if(this.prevSelectedImgEle=this.imgEle,"IMG"===s.tagName){this.parent.preventDefaultResize(t);var n=s;this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&(0,r.og)(this.imgResizeDiv),this.imageResize(n)}s.classList.contains("e-rte-imageboxmark")&&(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(t),this.pageY=this.getPointY(t),t.preventDefault(),t.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.imageQTBar.hidePopup(),s.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),s.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),s.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),s.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),r.AR.isDevice&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span")?(0,r.cn)([this.imgResizeDiv],"e-mob-span"):this.parent.trigger("resizeStart",{event:t,requestType:"images"},function(l){l.cancel&&i.cancelResizeAction()}),r.bi.add(this.contentModule.getDocument(),r.AR.touchEndEvent,this.resizeEnd,this))}},a.prototype.imageClick=function(t){r.AR.isDevice&&("IMG"===t.target.tagName&&"A"===t.target.parentElement.tagName||"IMG"===t.target.tagName?(this.contentModule.getEditPanel().setAttribute("contenteditable","false"),t.target.focus()):this.parent.readonly||this.contentModule.getEditPanel().setAttribute("contenteditable","true")),"IMG"===t.target.tagName&&"A"===t.target.parentElement.tagName&&t.preventDefault()},a.prototype.onCutHandler=function(){this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()},a.prototype.imageResize=function(t){this.resizeBtnInit(),this.imgEle=t,(0,r.cn)([this.imgEle],"e-resize"),this.imgResizeDiv=this.parent.createElement("span",{className:"e-img-resize"+this.parent.getCssClass(!0),id:this.rteID+"_imgResize"}),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft"+this.parent.getCssClass(!0),styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight"+this.parent.getCssClass(!0),styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft"+this.parent.getCssClass(!0),styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(this.parent.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight"+this.parent.getCssClass(!0),styles:"cursor: nwse-resize"})),r.AR.isDevice&&(0,r.cn)([this.imgResizeDiv],"e-mob-rte"),t.style.outline="2px solid #4a90e2",this.imgResizePos(t,this.imgResizeDiv),this.resizeImgDupPos(t),this.contentModule.getEditPanel().appendChild(this.imgResizeDiv),r.bi.add(this.contentModule.getDocument(),r.AR.touchMoveEvent,this.resizing,this)},a.prototype.getPointX=function(t){return t.touches&&t.touches.length?t.touches[0].pageX:t.pageX},a.prototype.getPointY=function(t){return t.touches&&t.touches.length?t.touches[0].pageY:t.pageY},a.prototype.imgResizePos=function(t,e){var i=this.calcPos(t),s=i.top,n=i.left,o=t.getBoundingClientRect().width,l=t.getBoundingClientRect().height,h=r.AR.isDevice?4*parseInt(t.style.outline.slice(-3),10)+2:2*parseInt(t.style.outline.slice(-3),10)+2,c=r.AR.isDevice?0:2;e.querySelector(".e-rte-botLeft").style.left=n-h+"px",e.querySelector(".e-rte-botLeft").style.top=l-h+s+"px",e.querySelector(".e-rte-botRight").style.left=o-(h-c)+n+"px",e.querySelector(".e-rte-botRight").style.top=l-h+s+"px",e.querySelector(".e-rte-topRight").style.left=o-(h-c)+n+"px",e.querySelector(".e-rte-topRight").style.top=s-h+"px",e.querySelector(".e-rte-topLeft").style.left=n-h+"px",e.querySelector(".e-rte-topLeft").style.top=s-h+"px"},a.prototype.calcPos=function(t){for(var s,i={top:0,left:0},n=t.ownerDocument,o=(t.offsetParent&&(t.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(t.offsetParent.tagName)>-1)?(0,r.oq)(t,"#"+this.parent.getID()+"_rte-edit-view"):t.offsetParent)||n.documentElement;o&&(o===n.body||o===n.documentElement)&&"static"===o.style.position;)o=o.parentNode;return o&&o!==t&&1===o.nodeType&&(i=o.getBoundingClientRect()),t.offsetParent&&t.offsetParent.classList.contains("e-img-caption")?{top:(s=t.getBoundingClientRect()).top-i.top,left:s.left-i.left}:{top:t.offsetTop,left:t.offsetLeft}},a.prototype.setAspectRatio=function(t,e,i,s){if(!(0,r.le)(t.width)){var n=""!==t.style.width?t.style.width.match(/^\d+(\.\d*)?%$/g)?parseFloat(t.style.width):parseInt(t.style.width,10):t.width,o=""!==t.style.height?parseInt(t.style.height,10):t.height;if(n>o)if(t.style.minWidth=0===this.parent.insertImageSettings.minWidth?"20px":(0,r.Ac)(this.parent.insertImageSettings.minWidth),this.parent.insertImageSettings.resizeByPercent){if(0!==parseInt(""+t.getBoundingClientRect().width,10)&&0!==parseInt(""+n,10)){var h=(t.offsetWidth+this.mouseX)/t.offsetWidth*("NaN"===parseFloat(t.style.width).toString()?t.offsetWidth/parseFloat(getComputedStyle(this.parent.element).width)*100:parseFloat(t.style.width));t.style.width=(h>3?h:3)+"%"}else t.style.width=this.pixToPerc(n/o*i,t.previousElementSibling||t.parentElement)+"%";t.style.height=null,t.removeAttribute("height")}else if(""===t.style.width&&""!==t.style.height)t.style.height=i+"px";else if(""!==t.style.width&&""===t.style.height){var c=n/o*i+n/o<this.parent.inputElement.getBoundingClientRect().right-32?n/o*i+n/o:this.parent.inputElement.getBoundingClientRect().right-32;t.style.width=c.toString()+"px",t.style.height=i+"px"}else""!==t.style.width?(c=n/o*i<this.parent.inputElement.getBoundingClientRect().right-32?n/o*i:this.parent.inputElement.getBoundingClientRect().right-32,t.style.width=c+"px",t.style.height=i+"px"):this.parent.iframeSettings.enable?t.setAttribute("width",(t.width+this.mouseX).toString()):(c=0===t.offsetWidth?t.width+this.mouseX+parseInt(t.style.outlineWidth.split("p")[0],10):t.offsetWidth+this.mouseX,t.setAttribute("width",c.toString()));else o>n?this.parent.insertImageSettings.resizeByPercent?(0!==parseInt(""+t.getBoundingClientRect().width,10)&&0!==parseInt(""+n,10)?(h=(t.offsetWidth+this.mouseX)/t.offsetWidth*("NaN"===parseFloat(t.style.width).toString()?t.offsetWidth/parseFloat(getComputedStyle(this.parent.element).width)*100:parseFloat(t.style.width)),t.style.width=(h>3?h:3)+"%"):t.style.width=this.pixToPerc(e/o*i,t.previousElementSibling||t.parentElement)+"%",t.style.height=null,t.removeAttribute("height")):""!==t.style.width?(t.style.width=e+"px",t.style.height=o/n*e+"px"):t.setAttribute("width",this.resizeBtnStat.botRight?(this.getPointX(s.event)-t.getBoundingClientRect().left).toString():e.toString()):this.parent.insertImageSettings.resizeByPercent?(t.style.width=this.pixToPerc(e,t.previousElementSibling||t.parentElement)+"%",t.style.height=null,t.removeAttribute("height")):(t.style.width=(e>=15?e:15)+"px",t.style.height=(e>=15?e:15)+"px")}},a.prototype.pixToPerc=function(t,e){return t/parseFloat(getComputedStyle(e).width)*100},a.prototype.imgDupMouseMove=function(t,e,i){var s=this,n={event:i,requestType:"images"};this.parent.trigger("resizing",n,function(o){if(o.cancel)s.cancelResizeAction();else{if(parseInt(s.parent.insertImageSettings.minWidth,10)>=parseInt(t,10)||parseInt(s.parent.getInsertImgMaxWidth(),10)<=parseInt(t,10)&&(0,r.le)(s.imgEle.style.width)||!s.parent.insertImageSettings.resizeByPercent&&(parseInt(s.parent.insertImageSettings.minHeight,10)>=parseInt(e,10)||parseInt(s.parent.insertImageSettings.maxHeight,10)<=parseInt(e,10)))return;s.imgEle.parentElement.style.cursor="pointer",s.setAspectRatio(s.imgEle,parseInt(t,10),parseInt(e,10),n),s.resizeImgDupPos(s.imgEle),s.imgResizePos(s.imgEle,s.imgResizeDiv)}})},a.prototype.resizing=function(t){if(this.parent){this.imgEle.offsetWidth>=this.parent.getInsertImgMaxWidth()?this.imgEle.style.maxHeight=this.imgEle.offsetHeight+"px":(0,r.le)(this.parent.insertImageSettings.maxHeight)&&(this.imgEle.style.maxHeight=""),this.imgEle.style.maxWidth=(null!=(0,r.oq)(this.imgEle,"ol,ul")?this.parent.getInsertImgMaxWidth()-parseInt(getComputedStyle((0,r.oq)(this.imgEle,"ol,ul")).paddingLeft,0):this.parent.getInsertImgMaxWidth())+"px";var e=this.getPointX(t),i=this.getPointY(t),s=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(e-this.pageX):e-this.pageX,n=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(i-this.pageY):i-this.pageY,o=parseInt(this.imgDupPos.width,10)+s,l=parseInt(this.imgDupPos.height,10)+n;this.mouseX=s,this.pageX=e,this.pageY=i,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(o+"px",l+"px",t)}else this.cancelResizeAction()},a.prototype.cancelResizeAction=function(){r.bi.remove(this.contentModule.getDocument(),r.AR.touchMoveEvent,this.resizing),r.bi.remove(this.contentModule.getDocument(),r.AR.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&((0,r.og)(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},a.prototype.resizeImgDupPos=function(t){this.imgDupPos={width:""!==t.style.width&&this.parent.insertImageSettings&&!this.parent.insertImageSettings.resizeByPercent?this.imgEle.style.width:t.width+"px",height:""!==t.style.height?this.imgEle.style.height:t.height+"px"}},a.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},a.prototype.onToolbarAction=function(t){switch(Ts()&&this.parent.notify(_n,{}),t.args.item.subCommand){case"Replace":this.parent.notify(this.parent.fileManagerSettings.enable?zb:Wg,t);break;case"Caption":this.parent.notify(XT,t);break;case"InsertLink":this.parent.notify(UT,t);break;case"AltText":this.parent.notify(GT,t);break;case"Remove":this.parent.notify(ZT,t);break;case"Dimension":this.parent.notify(QT,t);break;case"OpenImageLink":this.openImgLink(t);break;case"EditImageLink":this.editImgLink(t);break;case"RemoveImageLink":this.removeImgLink(t)}},a.prototype.openImgLink=function(t){this.parent.formatter.process(this.parent,t.args,t.args,{url:t.selectParent[0].parentNode.href,target:""===t.selectParent[0].parentNode.target?"_self":"_blank",selectNode:t.selectNode,subCommand:t.args.item.subCommand})},a.prototype.editImgLink=function(t){var e=t.selectParent[0].parentNode,i=this.i10n.getConstant("dialogUpdate");this.insertImgLink(t,{url:e.href,target:e.target,header:"Edit Link",btnText:i})},a.prototype.removeImgLink=function(t){r.AR.isIE&&this.contentModule.getEditPanel().focus(),t.selection.restore();var e=!(!this.contentModule.getEditPanel().contains(this.captionEle)||!(0,r.Ys)("a",this.captionEle));this.parent.formatter.process(this.parent,t.args,t.args,{insertElement:t.selectNode[0],selectParent:e?[this.captionEle]:[t.selectNode[0].parentElement],selection:t.selection,subCommand:t.args.item.subCommand}),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),(0,r.le)(t.selectParent)||(0,r.IV)([t.selectParent[0]],"e-img-focus")),e&&(0,r.Ys)(".e-img-inner",this.captionEle).focus()},a.prototype.onKeyDown=function(t){var i,s,n,o,l,e=t.args;if(this.deletedImg=[],"HTML"===this.parent.editorMode&&(l=(i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument())).startContainer===i.endContainer&&i.startOffset===i.endOffset),!l&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(e.which)<0)for(var c=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),u=0;u<c.length;u++)"IMG"===c[u].nodeName&&this.deletedImg.push(c[u]);if("HTML"===this.parent.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var p=i.startContainer===i.endContainer&&i.startOffset===i.endOffset;8===e.which&&"Backspace"===e.code&&p?this.checkImageBack(i):46===e.which&&"Delete"===e.code&&p&&this.checkImageDel(i)}if(!(0,r.le)(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==e.code&&(i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),!e.ctrlKey&&e.key&&(1===e.key.length||"enter"===e.action)&&!(0,r.le)(o[0])&&"IMG"===o[0].tagName&&o[0].parentElement)){var d=o[0].parentElement.childNodes[0];this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),d,d,d.textContent.length,d.textContent.length),(0,r.IV)([o[0]],"e-img-focus"),this.quickToolObj.imageQTBar.hidePopup()}switch(e.ctrlKey&&(89===e.keyCode||90===e.keyCode)&&this.undoStack({subCommand:90===e.keyCode?"undo":"redo"}),(8===e.keyCode||46===e.keyCode)&&(n&&"IMG"===n[0].nodeName&&n.length<1&&((0,r.le)(this.parent.formatter.editorManager.nodeSelection)||(s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument())),e.preventDefault(),this.deleteImg({selectNode:n,selection:s,selectParent:o,args:{item:{command:"Images",subCommand:"Remove"},originalEvent:e}},e.keyCode)),this.parent.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle()),"Backspace"===e.code&&(e.action="backspace"),e.action){case"escape":(0,r.le)(this.dialogObj)||this.dialogObj.close();break;case"backspace":case"delete":for(u=0;u<this.deletedImg.length;u++)this.imageRemovePost(this.deletedImg[u].src);if("Markdown"!==this.parent.editorMode)if(3===i.startContainer.nodeType)"Backspace"===e.code?i.startContainer.previousElementSibling&&0===i.startOffset&&i.startContainer.previousElementSibling.classList.contains(qr)&&i.startContainer.previousElementSibling.classList.contains(om)&&(0,r.og)(i.startContainer.previousElementSibling):i.startContainer.nextElementSibling&&i.endContainer.textContent.length===i.endOffset&&i.startContainer.nextElementSibling.classList.contains(qr)&&i.startContainer.nextElementSibling.classList.contains(om)&&(0,r.og)(i.startContainer.nextElementSibling);else if(1===i.startContainer.nodeType)if(i.startContainer.querySelector("."+qr+"."+om))(0,r.og)(i.startContainer.querySelector("."+qr+"."+om));else if(i.startContainer.querySelector("."+qr+"."+eo))(0,r.og)(i.startContainer.querySelector("."+qr+"."+eo));else if(i.startContainer.classList.contains("e-img-wrap")&&(0,r.oq)(i.startContainer,"."+qr)){var m=i.startContainer.parentElement.parentElement;if((0,r.og)((0,r.oq)(i.startContainer,"."+qr)),m&&""===m.textContent.trim()){var v=this.parent.createElement("br");v.classList.add("e-rte-image-remove-focus"),m.appendChild(v)}}break;case"insert-image":(0,r.le)(this.parent.formatter.editorManager.nodeSelection)||(s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.contentModule.getDocument())),this.openDialog(!0,e,s,n,o),e.preventDefault()}},a.prototype.openDialog=function(t,e,i,s,n){var o,l,h,c;t||(0,r.le)(this.parent.formatter.editorManager.nodeSelection)?(l=i,h=s,c=n):(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),l=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.contentModule.getDocument()),h=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),c=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)),this.insertImage("HTML"===this.parent.editorMode?{args:{item:{command:"Images",subCommand:"Image"},originalEvent:e,name:t?null:"showDialog"},selectNode:h,selection:l,selectParent:c}:{args:{item:{command:"Images",subCommand:"Image"},originalEvent:e,name:t?null:"showDialog"},member:"image",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.contentModule.getEditPanel()),module:"Markdown",name:"insertImage"})},a.prototype.showDialog=function(){this.openDialog(!1),this.setCssClass({cssClass:this.parent.getCssClass()})},a.prototype.closeDialog=function(){this.dialogObj&&this.dialogObj.hide({returnValue:!0})},a.prototype.onKeyUp=function(t){if(!(0,r.le)(this.deletedImg)&&this.deletedImg.length>0)for(var e=0;e<this.deletedImg.length;e++){var i={element:this.deletedImg[e],src:this.deletedImg[e].getAttribute("src")};this.parent.trigger(jF,i)}},a.prototype.checkImageBack=function(t){"#text"!==t.startContainer.nodeName||0!==t.startOffset||(0,r.le)(t.startContainer.previousSibling)||"IMG"!==t.startContainer.previousSibling.nodeName?"#text"!==t.startContainer.nodeName&&!(0,r.le)(t.startContainer.childNodes[t.startOffset-1])&&"IMG"===t.startContainer.childNodes[t.startOffset-1].nodeName&&this.deletedImg.push(t.startContainer.childNodes[t.startOffset-1]):this.deletedImg.push(t.startContainer.previousSibling)},a.prototype.checkImageDel=function(t){"#text"!==t.startContainer.nodeName||t.startOffset!==t.startContainer.textContent.length||(0,r.le)(t.startContainer.nextSibling)||"IMG"!==t.startContainer.nextSibling.nodeName?"#text"!==t.startContainer.nodeName&&!(0,r.le)(t.startContainer.childNodes[t.startOffset])&&"IMG"===t.startContainer.childNodes[t.startOffset].nodeName&&this.deletedImg.push(t.startContainer.childNodes[t.startOffset]):this.deletedImg.push(t.startContainer.nextSibling)},a.prototype.alignmentSelect=function(t){var e=t.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Images"===e.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),n={args:t,selectNode:s="IMG"===s[0].nodeName?s:[this.imgEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.subCommand){case"JustifyLeft":this.alignImage(n,"JustifyLeft");break;case"JustifyCenter":this.alignImage(n,"JustifyCenter");break;case"JustifyRight":this.alignImage(n,"JustifyRight");break;case"Inline":this.inline(n);break;case"Break":this.break(n)}this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),(0,r.IV)([s[0]],"e-img-focus")),this.cancelResizeAction()}},a.prototype.imageWithLinkQTBarItemUpdate=function(){for(var e=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item"),i=0;i<e.length;i++)e[i].getAttribute("title")===this.i10n.getConstant("openLink")||e[i].getAttribute("title")===this.i10n.getConstant("editLink")||e[i].getAttribute("title")===this.i10n.getConstant("removeLink")?((0,r.cn)([e[i]],"e-link-groups"),e[i].style.display="none"):"Insert Link"===e[i].getAttribute("title")?e[i].style.display="":e[i].classList.contains("e-rte-horizontal-separator")&&(0,r.og)(e[i]);var s=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-link-groups)");this.quickToolObj.imageQTBar.addQTBarItem(["-"],Math.round(s.length/2))},a.prototype.showImageQuickToolbar=function(t){var e=this;if(!("Images"!==t.type||(0,r.le)(this.parent.quickToolbarModule)||(0,r.le)(this.parent.quickToolbarModule.imageQTBar)||(0,r.le)(t.args))){this.quickToolObj=this.parent.quickToolbarModule;var i=t.args,s=t.elements;[].forEach.call(t.elements,function(o,l){0===l&&(s=o)}),s&&!(0,r.oq)(s,"a")&&this.imageWithLinkQTBarItemUpdate(),"IMG"===s.nodeName&&(0,r.cn)([s],["e-img-focus"]);var n=this.parent.iframeSettings.enable?window.pageYOffset+this.parent.element.getBoundingClientRect().top+i.clientY:i.pageY;this.parent.quickToolbarModule.imageQTBar&&(t.isNotify?setTimeout(function(){e.parent.formatter.editorManager.nodeSelection.Clear(e.contentModule.getDocument()),e.parent.formatter.editorManager.nodeSelection.setSelectionContents(e.contentModule.getDocument(),s),e.quickToolObj.imageQTBar.showPopup(i.pageX,n,s)},400):this.quickToolObj.imageQTBar.showPopup(i.pageX,n,s))}},a.prototype.hideImageQuickToolbar=function(){(0,r.le)(this.contentModule.getEditPanel().querySelector(".e-img-focus"))||((0,r.IV)([this.contentModule.getEditPanel().querySelector(".e-img-focus")],"e-img-focus"),this.quickToolObj&&this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup())},a.prototype.editAreaClickHandler=function(t){if(this.parent.readonly)this.hideImageQuickToolbar();else{var e=t.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===e.which||i&&1===e.which||!i&&3===e.which)i&&1===e.which&&!(0,r.le)(e.target)&&"IMG"===e.target.tagName&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),e.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule&&this.parent.quickToolbarModule.imageQTBar){this.quickToolObj=this.parent.quickToolbarModule;var s=e.target;this.contentModule=this.rendererFactory.getRenderer(Fe.Content);var n=this.quickToolObj.imageQTBar.element.classList.contains("e-rte-pop");if("IMG"===s.nodeName&&this.parent.quickToolbarModule){if(n)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.contentModule.getDocument(),s),Ts()&&this.parent.notify(qn,t),(0,r.cn)([s],"e-img-focus");var o=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item");if((0,r.oq)(s,"a")){for(var h=0;h<o.length;h++)o[h].getAttribute("title")===this.i10n.getConstant("openLink")||o[h].getAttribute("title")===this.i10n.getConstant("editLink")||o[h].getAttribute("title")===this.i10n.getConstant("removeLink")?(o[h].style.display="",(0,r.IV)([o[h]],"e-link-groups")):"Insert Link"===o[h].getAttribute("title")?o[h].style.display="none":o[h].classList.contains("e-rte-horizontal-separator")&&(0,r.og)(o[h]);var c=this.quickToolObj.imageQTBar.toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-link-groups)");this.quickToolObj.imageQTBar.addQTBarItem(["-"],Math.round(c.length/2))}else(0,r.oq)(s,"a")||this.imageWithLinkQTBarItemUpdate();this.showImageQuickToolbar({args:e,type:"Images",elements:[e.target]})}else this.hideImageQuickToolbar()}}},a.prototype.insertImgLink=function(t,e){var i=this;if("IMG"===t.selectNode[0].nodeName&&(this.imagDialog(t),!(0,r.le)(this.dialogObj))){var s=this.parent.createElement("div",{className:"e-img-linkwrap"+this.parent.getCssClass(!0)}),n=this.i10n.getConstant("linkurl"),l=Ih('<div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" data-role ="none" class="e-input e-img-link'+this.parent.getCssClass(!0)+'" spellcheck="false" placeholder="'+n+'"/></div><div class="e-rte-label"></div><div class="e-rte-field"><input type="checkbox" class="e-rte-linkTarget'+this.parent.getCssClass(!0)+'"  data-role ="none"></div>');s.appendChild(l);var h=s.querySelector(".e-rte-linkTarget"),c=s.querySelector(".e-img-link"),u=this.i10n.getConstant("linkOpenInNewWindow");this.checkBoxObj=new $p({label:u,checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass(),change:function(m){p=m.checked?"_blank":null}}),this.checkBoxObj.isStringTemplate=!0,this.checkBoxObj.createElement=this.parent.createElement,this.checkBoxObj.appendTo(h);var p=this.checkBoxObj.checked?"_blank":null,d=this.checkBoxObj.checked?this.i10n.getConstant("ImageLinkAriaLabel"):null,f=this.i10n.getConstant("dialogUpdate"),g={args:t.args,selfImage:this,selection:t.selection,selectNode:t.selectNode,selectParent:t.selectParent,link:c,target:p,ariaLabel:d};this.dialogObj.setProperties({height:"inherit",width:"290px",header:this.parent.localeObj.getConstant("imageInsertLinkHeader"),content:s,buttons:[{click:function(m){i.insertlink(g)},buttonModel:{content:f,cssClass:"e-flat e-update-link"+this.parent.getCssClass(!0),isPrimary:!0}}],cssClass:this.dialogObj.cssClass+" e-rte-img-link-dialog"}),(0,r.le)(this.parent.cssClass)||this.dialogObj.setProperties({cssClass:this.parent.cssClass}),(0,r.le)(e)||(c.value=e.url,this.checkBoxObj.checked=!!e.target,this.dialogObj.header=e.header),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}},a.prototype.insertAltText=function(t){var e=this;if("IMG"===t.selectNode[0].nodeName){this.imagDialog(t);var i=this.i10n.getConstant("altText");if(!(0,r.le)(this.dialogObj)){var s=this.parent.createElement("div",{className:"e-img-altwrap"+this.parent.getCssClass(!0)}),n=this.i10n.getConstant("alternateHeader"),o=this.i10n.getConstant("dialogUpdate"),l=null===t.selectNode[0].getAttribute("alt")?"":t.selectNode[0].getAttribute("alt"),c=Ih('<div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" spellcheck="false"  class="e-input e-img-alt'+this.parent.getCssClass(!0)+'" placeholder="'+i+'"/></div>');c.querySelector("input").setAttribute("value",l),s.appendChild(c);var u=s.querySelector(".e-img-alt"),p={args:t.args,selfImage:this,selection:t.selection,selectNode:t.selectNode,alt:u};this.dialogObj.setProperties({height:"inherit",width:"290px",header:n,content:s,buttons:[{click:function(d){e.insertAlt(p)},buttonModel:{content:o,cssClass:"e-flat e-update-alt"+this.parent.getCssClass(!0),isPrimary:!0}}],cssClass:this.dialogObj.cssClass+" e-rte-img-alt-dialog"}),(0,r.le)(this.parent.cssClass)||this.dialogObj.setProperties({cssClass:this.parent.cssClass}),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}}},a.prototype.insertAlt=function(t){(0,r.le)(t.alt)||(t.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,t.args,t.args,{altText:t.alt.value,selectNode:t.selectNode,subCommand:t.args.item.subCommand}),this.dialogObj.hide({returnValue:!1}))},a.prototype.insertlink=function(t){if("IMG"===t.selectNode[0].nodeName){var e=t.link.value;if(""===e)return(0,r.cn)([t.link],"e-error"),t.link.setSelectionRange(0,e.length),void t.link.focus();this.isUrl(e)?(0,r.IV)([t.link],"e-error"):e="http://"+e;var i=t.selfImage;if("HTML"===i.parent.editorMode&&t.selection.restore(),0===i.parent.formatter.getUndoRedoStack().length&&i.parent.formatter.saveData(),"A"===t.selectNode[0].parentElement.nodeName)return i.parent.formatter.process(i.parent,t.args,t.args,{url:e,target:i.checkBoxObj.checked?"_blank":null,ariaLabel:i.checkBoxObj.checked?this.i10n.getConstant("ImageLinkAriaLabel"):null,selectNode:t.selectNode,subCommand:t.args.item.subCommand}),void i.dialogObj.hide({returnValue:!0});i.parent.formatter.process(i.parent,t.args,t.args,{url:e,target:i.checkBoxObj.checked?"_blank":null,ariaLabel:i.checkBoxObj.checked?this.i10n.getConstant("ImageLinkAriaLabel"):null,selectNode:t.selectNode,subCommand:t.args.item.subCommand,selection:t.selection});var s=(0,r.oq)(t.selectNode[0],".e-img-caption");s&&(0,r.Ys)(".e-img-inner",s).focus(),s&&(0,r.Ys)(".e-img-inner",s).focus(),i.dialogObj.hide({returnValue:!1})}},a.prototype.isUrl=function(t){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(t)},a.prototype.deleteImg=function(t,e){if("IMG"===t.selectNode[0].nodeName){var i={element:t.selectNode[0],src:t.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.selection.restore(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,captionClass:qr,subCommand:t.args.item.subCommand}),this.imageRemovePost(i.src),this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&this.quickToolObj.imageQTBar.hidePopup(),this.cancelResizeAction(),(0,r.le)(e)&&this.parent.trigger(jF,i)}},a.prototype.imageRemovePost=function(t){var e=this,i="";if(!(0,r.le)(this.parent.insertImageSettings.removeUrl)&&""!==this.parent.insertImageSettings.removeUrl){i=t.indexOf("http://")>-1||t.indexOf("https://")>-1?t:new URL(t,document.baseURI).href,this.removingImgName=i.replace(/^.*[\\/]/,"");var s=new XMLHttpRequest;s.addEventListener("readystatechange",function(){4===this.readyState&&200===this.status&&e.triggerPost(this.response)}),s.open("GET",i),s.responseType="blob",s.send()}},a.prototype.triggerPost=function(t){var e=this.parent.insertImageSettings.removeUrl;if(!(0,r.le)(e)&&""!==e){var i=new File([t],this.removingImgName),s=new r.tk(e,"POST",!0,null),n=new FormData;n.append("UploadFiles",i),s.send(n)}},a.prototype.caption=function(t){var e=t.selectNode[0];if("IMG"===e.nodeName){t.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.cancelResizeAction(),(0,r.cn)([e],"e-rte-image");var i=t.args.item?t.args.item.subCommand:"Caption";if((0,r.le)((0,r.oq)(e,"."+qr))){this.captionEle=this.parent.createElement("span",{className:qr+" e-rte-img-caption"+this.parent.getCssClass(!0),attrs:{contenteditable:"false",draggable:"false",style:"width:"+this.parent.insertImageSettings.width}});var s=this.parent.createElement("span",{className:"e-img-wrap"+this.parent.getCssClass(!0)}),n=this.parent.createElement("span",{className:"e-img-inner"+this.parent.getCssClass(!0),attrs:{contenteditable:"true"}}),o=t.selectNode[0].parentElement;"A"===o.tagName&&o.setAttribute("contenteditable","true"),s.appendChild("A"===o.tagName?o:t.selectNode[0]),s.appendChild(n);var l=this.i10n.getConstant("imageCaption");n.innerHTML=l,this.captionEle.appendChild(s),e.classList.contains(nl)&&(0,r.cn)([this.captionEle],om),e.classList.contains(eo)&&(0,r.cn)([this.captionEle],eo),e.classList.contains(tV)&&(0,r.cn)([this.captionEle],tV),e.classList.contains(eV)&&(0,r.cn)([this.captionEle],eV),e.classList.contains(iV)&&(0,r.cn)([this.captionEle],iV),this.parent.formatter.process(this.parent,t.args,t.args,{insertElement:this.captionEle,selectNode:t.selectNode,subCommand:i}),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),n.childNodes[0],n.childNodes[0],0,n.childNodes[0].textContent.length)}else(0,r.og)((0,r.oq)(e,"."+qr)),r.AR.isIE&&(this.contentModule.getEditPanel().focus(),t.selection.restore()),this.parent.formatter.process(this.parent,t.args,t.args,"A"===e.parentElement.tagName?{insertElement:e.parentElement,selectNode:t.selectNode,subCommand:i}:{insertElement:e,selectNode:t.selectNode,subCommand:i});this.quickToolObj&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),(0,r.IV)([e],"e-img-focus"))}},a.prototype.imageSize=function(t){var e=this;if("IMG"===t.selectNode[0].nodeName&&(this.imagDialog(t),!(0,r.le)(this.dialogObj))){var i=this.i10n.getConstant("imageSizeHeader"),s=this.i10n.getConstant("dialogUpdate"),n=this.imgsizeInput(t),o={args:t.args,selfImage:this,selection:t.selection,selectNode:t.selectNode};this.dialogObj.setProperties({height:r.AR.isDevice?"300px":"inherit",width:"290px",header:i,content:n,buttons:[{click:function(l){e.insertSize(o)},buttonModel:{content:s,cssClass:"e-flat e-update-size"+this.parent.getCssClass(!0),isPrimary:!0}}],cssClass:this.dialogObj.cssClass+" e-rte-img-size-dialog"}),(0,r.le)(this.parent.cssClass)||this.dialogObj.setProperties({cssClass:this.parent.cssClass}),this.dialogObj.element.style.maxHeight="inherit",this.dialogObj.content.querySelector("input").focus()}},a.prototype.break=function(t){"IMG"===t.selectNode[0].nodeName&&this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,subCommand:t.args.item?t.args.item.subCommand:"Break"})},a.prototype.inline=function(t){"IMG"===t.selectNode[0].nodeName&&this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,subCommand:t.args.item?t.args.item.subCommand:"Inline"})},a.prototype.alignImage=function(t,e){this.parent.formatter.process(this.parent,t.args,t.args,{selectNode:t.selectNode,subCommand:t.args.item?t.args.item.subCommand:e})},a.prototype.clearDialogObj=function(){this.dialogObj&&(this.dialogObj.destroy(),(0,r.og)(this.dialogObj.element),this.dialogObj=null)},a.prototype.imagDialog=function(t){var e=this;if(this.dialogObj)this.dialogObj.hide({returnValue:!0});else{var i=this.parent.createElement("div",{className:"e-rte-img-dialog"+this.parent.getCssClass(!0),id:this.rteID+"_image"});this.parent.element.appendChild(i);var s=this.i10n.getConstant("dialogInsert"),n=this.i10n.getConstant("dialogCancel"),o=this.i10n.getConstant("imageHeader"),l=t.selection,h={selfImage:this,selection:t.selection,args:t.args,selectParent:t.selectParent},c={header:o,cssClass:Xi+this.parent.getCssClass(!0),enableRtl:this.parent.enableRtl,locale:this.parent.locale,showCloseIcon:!0,closeOnEscape:!0,width:r.AR.isDevice?"290px":"340px",isModal:r.AR.isDevice,buttons:[{click:this.insertImageUrl.bind(h),buttonModel:{content:s,cssClass:"e-flat e-insertImage"+this.parent.getCssClass(!0),isPrimary:!0,disabled:!0}},{click:function(f){e.cancelDialog(f)},buttonModel:{cssClass:"e-flat e-cancel"+this.parent.getCssClass(!0),content:n}}],target:r.AR.isDevice?document.body:this.parent.element,animationSettings:{effect:"None"},close:function(f){e.isImgUploaded&&e.uploadObj.removing(),e.parent.isBlur=!1,f&&f.event.returnValue&&("HTML"===e.parent.editorMode?l.restore():e.parent.formatter.editorManager.markdownSelection.restore(e.parent.contentModule.getEditPanel())),e.dialogObj.destroy(),(0,r.og)(e.dialogObj.element),e.dialogRenderObj.close(f),e.dialogObj=null}},u=this.parent.createElement("div",{className:"e-img-content"+this.parent.getCssClass(!0)});(!(0,r.le)(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode)&&u.appendChild(this.imgUpload(t));var p=this.parent.createElement("div",{className:"e-linkheader"+this.parent.getCssClass(!0)}),d=this.i10n.getConstant("imageLinkHeader");p.innerHTML="HTML"===this.parent.editorMode?d:this.i10n.getConstant("mdimageLink"),u.appendChild(p),u.appendChild(this.imageUrlPopup(t)),t.selectNode&&"IMG"===t.selectNode[0].nodeName&&(c.header=this.parent.localeObj.getConstant("editImageHeader")),c.content=u,this.dialogObj=this.dialogRenderObj.render(c),this.dialogObj.createElement=this.parent.createElement,this.dialogObj.appendTo(i),!(0,r.le)(this.dialogObj)&&(t.selectNode&&"IMG"===t.selectNode[0].nodeName&&"insertImage"===t.name&&(this.dialogObj.element.querySelector(".e-insertImage").textContent=this.parent.localeObj.getConstant("dialogUpdate")),i.style.maxHeight="inherit",this.quickToolObj&&(this.quickToolObj.imageQTBar&&document.body.contains(this.quickToolObj.imageQTBar.element)&&(this.quickToolObj.imageQTBar.hidePopup(),(0,r.le)(t.selectParent)||(0,r.IV)([t.selectParent[0]],"e-img-focus")),this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.inlineQTBar.hidePopup(),this.quickToolObj.textQTBar&&this.parent.element.ownerDocument.body.contains(this.quickToolObj.textQTBar.element)&&this.quickToolObj.textQTBar.hidePopup()))}},a.prototype.cancelDialog=function(t){this.parent.isBlur=!1,this.dialogObj.hide({returnValue:!0}),this.isImgUploaded&&this.uploadObj.removing()},a.prototype.onDocumentClick=function(t){var e=t.target;if("IMG"===e.nodeName&&(this.imgEle=e),this.parent&&("#document"!==e.nodeName&&(this.parent.currentTarget=t.target),!(0,r.le)(this.dialogObj)&&(!(0,r.oq)(e,"[id='"+this.dialogObj.element.id+"']")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(t.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(t.target)&&!(0,r.oq)(e,"#"+this.parent.getID()+"_toolbar_Image")&&!e.querySelector("#"+this.parent.getID()+"_toolbar_Image"))&&(t.offsetX>t.target.clientWidth||t.offsetY>t.target.clientHeight||(this.dialogObj.hide({returnValue:!0}),this.parent.isBlur=!0,Eh(this.parent.element,"focusout"))),!(this.parent.iframeSettings.enable&&!(0,r.le)(this.parent.currentTarget)&&"IMG"===this.parent.currentTarget.nodeName)&&"IMG"!==t.target.tagName&&this.imgResizeDiv&&!(this.quickToolObj&&this.quickToolObj.imageQTBar&&this.quickToolObj.imageQTBar.element.contains(t.target))&&this.contentModule.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction(),this.contentModule.getEditPanel().querySelector(".e-img-resize")&&!(this.parent.iframeSettings.enable&&"IMG"===this.parent.currentTarget.nodeName)&&("IMG"!==e.tagName&&this.removeResizeEle(),"IMG"===e.tagName||(0,r.le)(this.imgEle)?!(0,r.le)(this.prevSelectedImgEle)&&this.prevSelectedImgEle!==e&&(this.prevSelectedImgEle.style.outline=""):this.imgEle.style.outline=""),"IMG"!==e.tagName))for(var i=this.contentModule.getEditPanel().querySelectorAll("img"),s=0;s<i.length;s++)(0,r.IV)([i[s]],"e-img-focus"),(0,r.IV)([i[s]],"e-resize"),i[s].style.maxWidth=""},a.prototype.removeResizeEle=function(){r.bi.remove(this.contentModule.getDocument(),r.AR.touchMoveEvent,this.resizing),r.bi.remove(this.contentModule.getDocument(),r.AR.touchEndEvent,this.resizeEnd),(0,r.og)(this.contentModule.getEditPanel().querySelector(".e-img-resize"))},a.prototype.onWindowResize=function(){!(0,r.le)(this.contentModule)&&!(0,r.le)(this.contentModule.getEditPanel().querySelector(".e-img-resize"))&&this.cancelResizeAction()},a.prototype.imageUrlPopup=function(t){var e=this,i=this.parent.createElement("div",{className:"imgUrl"+this.parent.getCssClass(!0)}),s=this.i10n.getConstant("imageUrl");return this.inputUrl=this.parent.createElement("input",{className:"e-input e-img-url"+this.parent.getCssClass(!0),attrs:{placeholder:s,spellcheck:"false","aria-label":this.i10n.getConstant("imageLinkHeader")}}),this.inputUrl.addEventListener("input",function(){(0,r.le)(e.inputUrl)||(0===e.inputUrl.value.length?e.dialogObj.getButtons(0).element.disabled=!0:e.dialogObj.getButtons(0).element.removeAttribute("disabled"))}),i.appendChild(this.inputUrl),i},a.prototype.insertImageUrl=function(t){var e=this.selfImage;e.isImgUploaded=!1;var i=e.inputUrl.value;if(0===e.parent.formatter.getUndoRedoStack().length&&e.parent.formatter.saveData(),(0,r.le)(e.uploadUrl)||""===e.uploadUrl.url){if(""!==i){if("HTML"===e.parent.editorMode&&(0,r.le)((0,r.oq)(this.selection.range.startContainer.parentNode,"[id='"+e.contentModule.getPanel().id+"']"))){e.contentModule.getEditPanel().focus();var s=e.parent.formatter.editorManager.nodeSelection.getRange(e.contentModule.getDocument());this.selection=e.parent.formatter.editorManager.nodeSelection.save(s,e.contentModule.getDocument()),this.selectParent=e.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(s)}var n=/[\w-]+.(jpg|png|jpeg|gif)/g,o=(0,r.le)(i.match(n))||"HTML"!==e.parent.editorMode?"":i.match(n)[0],l={cssClass:"inline"===e.parent.insertImageSettings.display?nl:eo,url:i,selection:this.selection,altText:o,selectParent:this.selectParent,width:{width:e.parent.insertImageSettings.width,minWidth:e.parent.insertImageSettings.minWidth,maxWidth:e.parent.getInsertImgMaxWidth()},height:{height:e.parent.insertImageSettings.height,minHeight:e.parent.insertImageSettings.minHeight,maxHeight:e.parent.insertImageSettings.maxHeight}};e.parent.formatter.process(e.parent,this.args,this.args.originalEvent,l),e.dialogObj.hide({returnValue:!1})}}else e.uploadUrl.cssClass="inline"===e.parent.insertImageSettings.display?nl:eo,e.dialogObj.hide({returnValue:!1}),e.parent.formatter.process(e.parent,this.args,this.args.originalEvent,e.uploadUrl),e.uploadUrl.url="",e.contentModule.getEditPanel().querySelector(".e-img-resize")&&(e.imgEle.style.outline="",e.removeResizeEle())},a.prototype.imgsizeInput=function(t){var e=this,i=t.selectNode[0],s=this.i10n.getConstant("imageHeight"),n=this.i10n.getConstant("imageWidth"),o=this.parent.createElement("div",{className:"e-img-sizewrap"+this.parent.getCssClass(!0)}),l=!(0,r.le)(this.changedWidthValue)||"auto"!==i.style.width.toString()&&""===i.style.width?(0,r.le)(this.changedWidthValue)?parseInt(i.getClientRects()[0].width.toString(),10).toString():this.changedWidthValue:i.style.width,h=!(0,r.le)(this.changedHeightValue)||"auto"!==i.style.height.toString()&&""===i.style.height?(0,r.le)(this.changedHeightValue)?parseInt(i.getClientRects()[0].height.toString(),10).toString():this.changedHeightValue:i.style.height;this.changedWidthValue=null,this.changedHeightValue=null;var u=Ih('<div class="e-rte-label'+this.parent.getCssClass(!0)+'"><label>'+n+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"><input type="text" id="imgwidth" class="e-img-width'+this.parent.getCssClass(!0)+'"/></div><div class="e-rte-label'+this.parent.getCssClass(!0)+'"><label>'+s+'</label></div><div class="e-rte-field'+this.parent.getCssClass(!0)+'"> <input type="text" id="imgheight" class="e-img-height'+this.parent.getCssClass(!0)+'"/></div>');return u.getElementById("imgwidth").setAttribute("value",l),u.getElementById("imgheight").setAttribute("value",h),o.appendChild(u),this.widthNum=new vl({value:(0,r.Ac)(l),enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass(),input:function(p){e.inputWidthValue=(0,r.Ac)(e.inputValue(p.value))}}),this.widthNum.createElement=this.parent.createElement,this.widthNum.appendTo(o.querySelector("#imgwidth")),this.heightNum=new vl({value:(0,r.Ac)(h),enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass(),input:function(p){e.inputHeightValue=(0,r.Ac)(e.inputValue(p.value))}}),this.heightNum.createElement=this.parent.createElement,this.heightNum.appendTo(o.querySelector("#imgheight")),o},a.prototype.inputValue=function(t){return"auto"===t||-1!==t.indexOf("%")||-1!==t.indexOf("px")||t.match(/(\d+)/)?t:"auto"},a.prototype.insertSize=function(t){t.selection.restore();var e=t.selfImage;0===e.parent.formatter.getUndoRedoStack().length&&e.parent.formatter.saveData();var i=e.dialogObj.element;this.changedWidthValue=this.inputWidthValue,this.changedHeightValue=this.inputHeightValue;var s=i.querySelector(".e-img-width").value,n=i.parentElement.querySelector(".e-img-height").value;e.parent.formatter.process(this.parent,t.args,t.args,{width:s,height:n,selectNode:t.selectNode,subCommand:t.args.item.subCommand}),this.imgResizeDiv&&e.imgResizePos(t.selectNode[0],this.imgResizeDiv),e.dialogObj.hide({returnValue:!0})},a.prototype.insertImage=function(t){if(this.imagDialog(t),!(0,r.le)(this.dialogObj)){this.dialogObj.element.style.maxHeight="inherit";var e=this.dialogObj.element.querySelector(".e-img-content");!(0,r.le)(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?document.getElementById(this.rteID+"_insertImage").focus():e.querySelector(".e-img-url").focus()}},a.prototype.imgUpload=function(t){var i,s,e=this,n=this,o=n.parent.iframeSettings.enable;if("HTML"===n.parent.editorMode&&(!o&&(0,r.le)((0,r.oq)(t.selection.range.startContainer.parentNode,"[id='"+this.parent.contentModule.getPanel().id+"']"))||o&&!pi(t.selection.range.startContainer.parentNode.ownerDocument.querySelector("body"),"e-lib"))){this.contentModule.getEditPanel().focus();var l=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());i=this.parent.formatter.editorManager.nodeSelection.save(l,this.parent.contentModule.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(l)}else i=t.selection,s=t.selectParent;var h=this.parent.createElement("div",{className:"e-img-uploadwrap e-droparea"+this.parent.getCssClass(!0)}),c=this.i10n.getConstant("imageDeviceUploadMessage"),u=this.i10n.getConstant("imageUploadMessage"),p=this.parent.createElement("span",{className:"e-droptext"+this.parent.getCssClass(!0)}),d=this.parent.createElement("span",{className:"e-rte-upload-text"+this.parent.getCssClass(!0),innerHTML:r.AR.isDevice?c:u});p.appendChild(d);var f=this.parent.createElement("button",{className:"e-browsebtn"+this.parent.getCssClass(!0),id:this.rteID+"_insertImage",attrs:{autofocus:"true",type:"button"}});p.appendChild(f),h.appendChild(p);var g=this.i10n.getConstant("browse");this.browseButton=new It({content:g,enableRtl:this.parent.enableRtl}),this.browseButton.isStringTemplate=!0,this.browseButton.createElement=this.parent.createElement,this.browseButton.appendTo(f),r.bi.add(r.AR.isDevice?p:f,"click",this.fileSelect,this);var y,v=this.parent.createElement("input",{id:this.rteID+"_upload",attrs:{type:"File",name:"UploadFiles"},className:this.parent.getCssClass()});return h.appendChild(v),this.uploadObj=new hu({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},dropArea:p,multiple:!1,enableRtl:this.parent.enableRtl,cssClass:this.parent.getCssClass(),allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),selected:function(S){n.isImgUploaded=!0,e.parent.trigger("imageSelected",S,function(I){if(!I.cancel&&(e.checkExtension(I.filesData[0]),y=I.filesData[0].name,"HTML"===e.parent.editorMode&&(0,r.le)(e.parent.insertImageSettings.path))){var x=new FileReader;x.addEventListener("load",function(T){var O="Base64"===e.parent.insertImageSettings.saveFormat?x.result:URL.createObjectURL(Gp(x.result));n.uploadUrl={url:O,selection:i,altText:y,selectParent:s,width:{width:n.parent.insertImageSettings.width,minWidth:n.parent.insertImageSettings.minWidth,maxWidth:n.parent.getInsertImgMaxWidth()},height:{height:n.parent.insertImageSettings.height,minHeight:n.parent.insertImageSettings.minHeight,maxHeight:n.parent.insertImageSettings.maxHeight}},n.inputUrl.setAttribute("disabled","true"),(0,r.le)(n.parent.insertImageSettings.saveUrl)&&e.isAllowedTypes&&!(0,r.le)(e.dialogObj)&&e.dialogObj.getButtons(0).element.removeAttribute("disabled")}),x.readAsDataURL(I.filesData[0].rawFile)}})},beforeUpload:function(S){e.parent.trigger(hk,S)},uploading:function(S){e.parent.isServerRendered||e.parent.trigger(rk,S)},success:function(S){e.parent.trigger(ak,S,function(I){(0,r.le)(e.parent.insertImageSettings.path)||(n.uploadUrl={url:e.parent.insertImageSettings.path+I.file.name,selection:i,altText:y,selectParent:s,width:{width:n.parent.insertImageSettings.width,minWidth:n.parent.insertImageSettings.minWidth,maxWidth:n.parent.getInsertImgMaxWidth()},height:{height:n.parent.insertImageSettings.height,minHeight:n.parent.insertImageSettings.minHeight,maxHeight:n.parent.insertImageSettings.maxHeight}},n.inputUrl.setAttribute("disabled","true")),"upload"===I.operation&&!(0,r.le)(e.dialogObj)&&e.dialogObj.getButtons(0).element.removeAttribute("disabled")})},failure:function(S){e.parent.trigger(ok,S)},removing:function(S){e.parent.trigger("imageRemoving",S,function(I){n.isImgUploaded=!1,e.dialogObj.getButtons(0).element.disabled=!0,n.inputUrl.removeAttribute("disabled"),n.uploadUrl&&(n.uploadUrl.url="")})}}),this.uploadObj.isStringTemplate=!0,this.uploadObj.createElement=this.parent.createElement,this.uploadObj.appendTo(v),h},a.prototype.checkExtension=function(t){this.uploadObj.allowedExtensions&&(-1===this.uploadObj.allowedExtensions.toLocaleLowerCase().indexOf(("."+t.type).toLocaleLowerCase())?(this.dialogObj.getButtons(0).element.setAttribute("disabled","disabled"),this.isAllowedTypes=!1):this.isAllowedTypes=!0)},a.prototype.fileSelect=function(){return this.dialogObj.element.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click(),!1},a.prototype.dragStart=function(t){if("IMG"!==t.target.nodeName)return!0;this.parent.trigger(dr,t,function(e){e.cancel?t.preventDefault():(t.dataTransfer.effectAllowed="copyMove",t.target.classList.add($b))})},a.prototype.dragEnter=function(t){t.dataTransfer.dropEffect="copy",t.preventDefault()},a.prototype.dragOver=function(t){if(!("edge"===r.AR.info.name&&t.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||r.AR.isIE&&"Files"===t.dataTransfer.types[0]))return!0;t.preventDefault()},a.prototype.dragDrop=function(t){var e=this;this.parent.trigger("beforeImageDrop",t,function(i){var s=e.parent.inputElement.ownerDocument.querySelector("."+$b),n=s&&"IMG"===s.tagName||i.dataTransfer.files.length>0;!i.cancel&&n?e.parent.trigger(dr,i,function(o){if(o.cancel)i.preventDefault();else{if((0,r.oq)(i.target,"#"+e.parent.getID()+"_toolbar")||"false"===e.parent.inputElement.contentEditable)return void i.preventDefault();e.parent.element.querySelector(".e-img-resize")&&(0,r.og)(e.imgResizeDiv),i.preventDefault();var l=void 0;if(e.contentModule.getDocument().caretRangeFromPoint?l=e.contentModule.getDocument().caretRangeFromPoint(i.clientX,i.clientY):i.rangeParent?(l=e.contentModule.getDocument().createRange()).setStart(i.rangeParent,i.rangeOffset):l=e.getDropRange(i.clientX,i.clientY),e.parent.notify(Vb,{range:l}),e.parent.element.querySelector(".e-droparea"))return;e.insertDragImage(i)}}):n&&i.preventDefault()})},a.prototype.getDropRange=function(t,e){var i=this.contentModule.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),i);var s=this.contentModule.getDocument().elementFromPoint(t,e),n=s.childNodes.length>0?s.childNodes[0]:s,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(n,o),i.setEnd(n,o);else{var l=void 0;do{o++,i.setStart(n,o),i.setEnd(n,o+1),l=i.getBoundingClientRect()}while(l.left<t&&o<n.length-1)}return i},a.prototype.insertDragImage=function(t){var e=this;t.preventDefault();var i=this.parent.element.querySelector(""+Fk);this.parent.notify("drop",{args:t}),i&&i.classList.add("e-hide");var s=this.parent.inputElement.ownerDocument.querySelector("."+$b);if(t.dataTransfer.files.length>0&&null===s){if(t.dataTransfer.files.length>1)return;for(var n=t.dataTransfer.files,o=n[0].name,l=o.substring(o.lastIndexOf(".")),h=this.parent.insertImageSettings.allowedTypes,c=0;c<h.length;c++)if(l.toLocaleLowerCase()===h[c].toLowerCase())if(this.parent.insertImageSettings.saveUrl)this.onSelect(t);else{var u={args:t,text:"",file:n[0]};t.preventDefault(),this.imagePaste(u)}}else{var p=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());if(s&&"IMG"===s.tagName){s.nextElementSibling&&s.nextElementSibling.classList.contains("e-img-inner")?p.insertNode(s.parentElement.parentElement):p.insertNode(s),s.classList.remove($b);var d={elements:[s]};s.addEventListener("load",function(){e.parent.trigger(ga,d)}),this.parent.formatter.editorManager.nodeSelection.Clear(this.contentModule.getDocument()),this.resizeStart(u=t,s),this.hideImageQuickToolbar()}}},a.prototype.onSelect=function(t){var e=this,i=this,s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument()),n=this.parent.createElement("ul",{className:"e-upload-files"});this.parent.element.appendChild(n);var o={name:"",size:0,status:"",statusCode:"",type:"",rawFile:t.dataTransfer.files[0],validationMessages:{}},l=this.parent.createElement("IMG");l.style.opacity="0.5",l.classList.add(Jb),l.classList.add(nl),l.classList.add("e-resize");var h=o.rawFile,c=new FileReader;c.addEventListener("load",function(){var p=URL.createObjectURL(Gp(c.result));l.src="Blob"===i.parent.insertImageSettings.saveFormat?p:c.result}),h&&c.readAsDataURL(h),s.insertNode(l),this.uploadMethod(t,l);var u={elements:[l]};l.addEventListener("load",function(){e.parent.trigger(ga,u)}),(0,r.og)(n)},a.prototype.uploadMethod=function(t,e){var i=this,s=!1,n=this,o=this.parent.createElement("div");this.parent.element.appendChild(o);var l=this.parent.createElement("input",{id:this.rteID+"_upload",attrs:{type:"File",name:"UploadFiles"}});this.popupObj=new Ni(o,{relateTo:e,height:"85px",width:"300px",offsetY:this.parent.iframeSettings.enable?-50:-90,content:l,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(p){i.parent.isBlur=!1,i.popupObj.destroy(),(0,r.og)(i.popupObj.element),i.popupObj=null,i.parent.inlineMode.enable||i.parent.toolbarModule.baseToolbar.toolbarObj.disable(!1)}}),this.popupObj.element.style.display="none",(0,r.cn)([this.popupObj.element],Fk),(0,r.cn)([this.popupObj.element],"e-rte-upload-popup"),(0,r.le)(this.parent.cssClass)||(0,r.cn)([this.popupObj.element],this.parent.cssClass);var c=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.contentModule.getDocument());setTimeout(function(){n.refreshPopup(e)},t.dataTransfer.files[0].size>1e6?300:100),this.uploadObj=new hu({asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl,removeUrl:this.parent.insertImageSettings.removeUrl},cssClass:"e-rte-dialog-upload"+this.parent.getCssClass(!0),dropArea:this.parent.element,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString(),removing:function(){i.parent.inputElement.contentEditable="true",s=!1,(0,r.og)(e),i.popupObj.close()},canceling:function(){i.parent.inputElement.contentEditable="true",s=!1,(0,r.og)(e),i.popupObj.close(),i.quickToolObj.imageQTBar.hidePopup(),setTimeout(function(){i.uploadObj.destroy()},900)},beforeUpload:function(p){i.parent.trigger(hk,p),i.parent.inlineMode.enable||i.parent.toolbarModule.baseToolbar.toolbarObj.disable(!0)},uploading:function(p){i.parent.isServerRendered||(s=!0,i.parent.trigger(rk,p,function(d){d.cancel?((0,r.le)(e)||(0,r.og)(e),(0,r.le)(i.popupObj.element)||(0,r.og)(i.popupObj.element)):i.parent.inputElement.contentEditable="false"}))},selected:function(p){s&&(p.cancel=!0)},failure:function(p){s=!1,i.parent.inputElement.contentEditable="true";var d={args:t,type:"Images",isNotify:void 0,elements:e};setTimeout(function(){i.uploadFailure(e,d,p)},900)},success:function(p){if("cancel"!==p.operation){s=!1,i.parent.inputElement.contentEditable="true";var d={args:t,type:"Images",isNotify:void 0,elements:e};setTimeout(function(){i.uploadSuccess(e,t,d,p)},900)}}}),this.uploadObj.appendTo(this.popupObj.element.childNodes[0]),this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap").style.display="none",c.selectNodeContents(e),this.parent.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),c)},a.prototype.refreshPopup=function(t){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+t.offsetTop:t.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(this.popupObj.relateTo=this.parent.inputElement,this.popupObj.offsetY=this.parent.iframeSettings.enable?-30:-65,this.popupObj.element.style.display="block"):this.popupObj&&(this.popupObj.refreshPosition(t),this.popupObj.element.style.display="block")},a.prototype.uploadFailure=function(t,e,i){(0,r.og)(t),this.popupObj&&this.popupObj.close(),this.parent.trigger(ok,i),this.uploadObj.destroy()},a.prototype.uploadSuccess=function(t,e,i,s){var n=this;t.style.opacity="1",t.classList.add("e-img-focus"),s.element=t,this.parent.trigger(ak,s,function(o){(0,r.le)(n.parent.insertImageSettings.path)||(t.src=n.parent.insertImageSettings.path+o.file.name,t.setAttribute("alt",o.file.name))}),this.popupObj&&(this.popupObj.close(),this.uploadObj.destroy()),this.showImageQuickToolbar(i),this.resizeStart(e,t)},a.prototype.imagePaste=function(t){var e=this;if(0===t.text.length&&!(0,r.le)(t.file)){var i=this,s=new FileReader;t.args.preventDefault(),s.addEventListener("load",function(n){var o={cssClass:"inline"===i.parent.insertImageSettings.display?nl:eo,url:"Base64"!==e.parent.insertImageSettings.saveFormat&&(0,r.le)(t.callBack)?URL.createObjectURL(Gp(s.result)):s.result,width:{width:i.parent.insertImageSettings.width,minWidth:i.parent.insertImageSettings.minWidth,maxWidth:i.parent.getInsertImgMaxWidth()},height:{height:i.parent.insertImageSettings.height,minHeight:i.parent.insertImageSettings.minHeight,maxHeight:i.parent.insertImageSettings.maxHeight}};(0,r.le)(t.callBack)?(i.parent.formatter.process(i.parent,{item:{command:"Images",subCommand:"Image"}},t.args,o),e.showPopupToolBar(t,o)):t.callBack(o)}),s.readAsDataURL(t.file)}},a.prototype.showPopupToolBar=function(t,e){var i=this,n=this.parent.inputElement.querySelector('img[src="'+e.url+'"]');this.parent.quickToolbarModule.createQTBar("Image","MultiRow",this.parent.quickToolbarSettings.image,Fe.ImageToolbar);var o={args:t.args,type:"Images",isNotify:void 0,elements:n};n&&setTimeout(function(){i.showImageQuickToolbar(o),i.resizeStart(t.args,n)},0)},a.prototype.destroy=function(){(0,r.le)(this.parent)||(this.prevSelectedImgEle=void 0,this.removeEventListener())},a.prototype.moduleDestroy=function(){this.parent=null},a.prototype.getModuleName=function(){return"image"},a}(),BX=function(){function a(t,e){this.parent=t,this.rendererFactory=e.getService("rendererFactory"),this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(Vp,this.sourceCode,this),this.parent.on(ui,this.onInitialEnd,this),this.parent.on(Ug,this.updateSourceCode,this),this.parent.on(Oe,this.destroy,this),this.parent.on(Bi,this.moduleDestroy,this)},a.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on(Qi,this.onKeyDown,this)},a.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.off(Vp,this.sourceCode),this.parent.off(Ug,this.updateSourceCode),this.parent.off(ui,this.onInitialEnd),this.parent.off(Oe,this.destroy),this.parent.off(Bi,this.moduleDestroy),this.parent.formatter.editorManager.observer.off(Qi,this.onKeyDown)},a.prototype.getSourceCode=function(){return this.parent.createElement("textarea",{className:Sh+this.parent.getCssClass(!0)})},a.prototype.wireEvent=function(t){this.keyboardModule=new Gk(t,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),r.bi.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},a.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&r.bi.remove(this.previewElement,"mousedown",this.mouseDownHandler)},a.prototype.wireBaseKeyDown=function(){this.parent.keyboardModule=new Gk(this.contentModule.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},a.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},a.prototype.mouseDownHandler=function(t){this.parent.notify(Gg,{args:t})},a.prototype.previewKeyDown=function(t){switch(t.action){case"html-source":this.updateSourceCode(t),t.preventDefault();break;case"toolbar-focus":if(this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()){var e=this.parent.getToolbarElement().querySelector(".e-toolbar-item:not(.e-overlay)[title]");e.firstElementChild.removeAttribute("tabindex"),e.firstElementChild.focus()}}},a.prototype.onKeyDown=function(t){switch(t.event.action){case"html-source":t.event.preventDefault(),this.sourceCode(t),t.callBack({requestType:"SourceCode",editorMode:"HTML",event:t.event})}},a.prototype.sourceCode=function(t){this.parent.notify("hidePopup",{}),this.parent.isBlur=!1,this.parent.trigger(dr,{requestType:"SourceCode",targetItem:"SourceCode",args:t});var e=(0,r.td)("."+yh,this.parent.element);if(this.contentModule=this.rendererFactory.getRenderer(Fe.Content),this.parent.notify(_g,{targetItem:"SourceCode",updateItem:"Preview",baseToolbar:this.parent.getBaseToolbarObject()}),(0,r.le)(this.previewElement)&&(this.previewElement=this.getSourceCode()),this.parent.updateValueData(),this.parent.iframeSettings.enable){var i=void 0;(i=(0,r.le)(this.parent.element.querySelector("#"+this.parent.getID()+"_source-view"))?this.parent.createElement("div",{className:"e-source-content",id:this.parent.getID()+"_source-view"}):this.parent.element.querySelector("#"+this.parent.getID()+"_source-view")).appendChild(this.previewElement),this.parent.element.appendChild(i),i.style.height=this.contentModule.getPanel().style.height,i.style.marginTop=this.contentModule.getPanel().style.marginTop,this.getPanel().value=this.getTextAreaValue(),this.contentModule.getPanel().style.display="none",i.style.display="block",this.getPanel().style.display="block"}else{var s=this.parent.inputElement.offsetHeight;this.contentModule.getPanel().appendChild(this.previewElement),this.getPanel().value=this.getTextAreaValue(),this.previewElement.style.height=s+"px",this.contentModule.getEditPanel().style.display="none",this.previewElement.style.display="block"}this.parent.isBlur=!1,this.parent.disableToolbarItem(this.parent.toolbarSettings.items),this.parent.enableToolbarItem("SourceCode"),this.parent.getToolbar()&&(0,r.IV)([this.parent.getToolbar()],[Gc]),(0,r.IV)(e,[jp]),this.parent.setContentHeight("sourceCode",!0),this.wireEvent(this.previewElement),this.unWireBaseKeyDown(),this.previewElement.focus(),this.parent.updateValue(),(0,r.le)(this.parent.placeholder)||this.parent.iframeSettings.enable||(this.parent.element.querySelector(".rte-placeholder.e-rte-placeholder").style.display="none"),this.parent.trigger(ga,{requestType:"SourceCode",targetItem:"SourceCode",args:t}),this.parent.invokeChangeEvent()},a.prototype.updateSourceCode=function(t){this.parent.isBlur=!1,this.parent.trigger(dr,{requestType:"Preview",targetItem:"Preview",args:t});var e=this.getPanel();this.parent.notify(_g,{targetItem:"Preview",updateItem:"SourceCode",baseToolbar:this.parent.getBaseToolbarObject()});var s,i=this.parent.serializeValue(e.value);s=null===i||""===i?"DIV"===this.parent.enterKey?"<div><br/></div>":"BR"===this.parent.enterKey?"<br/>":"<p><br/></p>":i,this.parent.iframeSettings.enable?(e.parentElement.style.display="none",e.style.display="none",this.contentModule.getPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=s):(e.style.display="none",this.contentModule.getEditPanel().style.display="block",this.contentModule.getEditPanel().innerHTML=s),this.parent.isBlur=!1,this.parent.enableToolbarItem(this.parent.toolbarSettings.items),this.parent.getToolbar()&&(0,r.IV)([this.parent.getToolbar()],[Gc]),this.parent.setContentHeight("preview",!0),this.unWireEvent(),this.wireBaseKeyDown(),this.contentModule.getEditPanel().focus(),this.parent.updateValue(),(0,r.le)(this.parent.placeholder)||0!==this.contentModule.getEditPanel().innerText.length||(this.parent.element.querySelector(".rte-placeholder.e-rte-placeholder").style.display="block"),this.parent.trigger(ga,{requestType:"Preview",targetItem:"Preview",args:t}),this.parent.formatter.enableUndo(this.parent),this.parent.addAudioVideoWrapper(),this.parent.invokeChangeEvent(),this.parent.notify(Fg,{})},a.prototype.getTextAreaValue=function(){return"<p><br></p>"===this.contentModule.getEditPanel().innerHTML||"<div><br></div>"===this.contentModule.getEditPanel().innerHTML||"<br>"===this.contentModule.getEditPanel().innerHTML||1===this.contentModule.getEditPanel().childNodes.length&&"P"===this.contentModule.getEditPanel().childNodes[0].tagName&&7===this.contentModule.getEditPanel().innerHTML.length||"DIV"===this.contentModule.getEditPanel().childNodes[0].tagName&&11===this.contentModule.getEditPanel().innerHTML.length?"":this.parent.value},a.prototype.getPanel=function(){return this.parent.element&&this.parent.element.querySelector(".e-rte-srctextarea")},a.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},a.prototype.destroy=function(){(0,r.le)(this.parent)||this.removeEventListener()},a.prototype.moduleDestroy=function(){this.parent=null},a}(),FX=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Bi,this.moduleDestroy,this),this.parent.on(Oe,this.removeEventListener,this))},a.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Oe,this.removeEventListener),this.parent.off(Bi,this.moduleDestroy))},a.prototype.render=function(t){var e;return t.beforeOpen=this.beforeOpen.bind(this),t.open=this.open.bind(this),t.position={X:"center",Y:this.getDialogPosition()},(0,r.le)(t.close)&&(t.close=this.close.bind(this)),t.beforeClose=this.beforeClose.bind(this),(e=new Xn(t)).isStringTemplate=!0,e},a.prototype.beforeOpen=function(t){if(t.element.classList.contains("e-dialog")){var e=(0,r.oq)(t.target,"form");(0,r.le)(e)||(this.dialogEle=t.element,this.dialogEle.addEventListener("keydown",this.handleEnterKeyDown))}this.parent.trigger("beforeDialogOpen",t,this.beforeOpenCallback.bind(this,t))},a.prototype.handleEnterKeyDown=function(t){"Enter"===t.code&&t.preventDefault()},a.prototype.beforeOpenCallback=function(t){t.cancel&&this.parent.notify(tl,null)},a.prototype.open=function(t){this.parent.trigger("dialogOpen",t)},a.prototype.beforeClose=function(t){this.dialogEle&&this.dialogEle.removeEventListener("keydown",this.handleEnterKeyDown),this.parent.trigger("beforeDialogClose",t,function(e){e.cancel||e.container.classList.contains("e-popup-close")&&(e.cancel=!0)})},a.prototype.getDialogPosition=function(){var t=this.parent.element.getBoundingClientRect().top;if(t<0){for(var e=0,i=this.parent.element;"BODY"!==i.nodeName;){var s=i.getBoundingClientRect().top;s>0&&(e=s),i=i.parentElement}return(t=Math.abs(t)+e).toString()}return"top"},a.prototype.close=function(t){this.parent.trigger("dialogClose",t)},a.prototype.moduleDestroy=function(){this.parent=null},a}(),VX={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},insertAudio:{command:"Audios",subCommand:"Audio"},insertVideo:{command:"Videos",subCommand:"Video"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"},copyFormatPainter:{command:"FormatPainter",value:"format-copy"},applyFormatPainter:{command:"FormatPainter",value:"format-paste"},escapeFormatPainter:{command:"FormatPainter",value:"escape"}},Hs=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ne=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},HX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(!0)],t.prototype,"enable",void 0),ne([(0,r.Z9)(!0)],t.prototype,"enableFloating",void 0),ne([(0,r.Z9)(tn.Expand)],t.prototype,"type",void 0),ne([(0,r.Z9)(XY)],t.prototype,"items",void 0),ne([(0,r.Z9)({})],t.prototype,"itemConfigs",void 0),t}(r.rt),zX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)([".jpeg",".jpg",".png"])],t.prototype,"allowedTypes",void 0),ne([(0,r.Z9)("inline")],t.prototype,"display",void 0),ne([(0,r.Z9)("Blob")],t.prototype,"saveFormat",void 0),ne([(0,r.Z9)("auto")],t.prototype,"width",void 0),ne([(0,r.Z9)("auto")],t.prototype,"height",void 0),ne([(0,r.Z9)(null)],t.prototype,"saveUrl",void 0),ne([(0,r.Z9)(null)],t.prototype,"path",void 0),ne([(0,r.Z9)(!0)],t.prototype,"resize",void 0),ne([(0,r.Z9)(null)],t.prototype,"removeUrl",void 0),ne([(0,r.Z9)(0)],t.prototype,"minWidth",void 0),ne([(0,r.Z9)(null)],t.prototype,"maxWidth",void 0),ne([(0,r.Z9)(0)],t.prototype,"minHeight",void 0),ne([(0,r.Z9)(null)],t.prototype,"maxHeight",void 0),ne([(0,r.Z9)(!1)],t.prototype,"resizeByPercent",void 0),t}(r.rt),jX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)([".wav",".mp3",".m4a",".wma"])],t.prototype,"allowedTypes",void 0),ne([(0,r.Z9)("Inline")],t.prototype,"layoutOption",void 0),ne([(0,r.Z9)("Blob")],t.prototype,"saveFormat",void 0),ne([(0,r.Z9)(null)],t.prototype,"saveUrl",void 0),ne([(0,r.Z9)(null)],t.prototype,"removeUrl",void 0),ne([(0,r.Z9)(null)],t.prototype,"path",void 0),t}(r.rt),qX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)([".mp4",".mov",".wmv",".avi"])],t.prototype,"allowedTypes",void 0),ne([(0,r.Z9)("Inline")],t.prototype,"layoutOption",void 0),ne([(0,r.Z9)("Blob")],t.prototype,"saveFormat",void 0),ne([(0,r.Z9)("auto")],t.prototype,"width",void 0),ne([(0,r.Z9)("auto")],t.prototype,"height",void 0),ne([(0,r.Z9)(null)],t.prototype,"saveUrl",void 0),ne([(0,r.Z9)(null)],t.prototype,"path",void 0),ne([(0,r.Z9)(!0)],t.prototype,"resize",void 0),ne([(0,r.Z9)(null)],t.prototype,"removeUrl",void 0),ne([(0,r.Z9)(0)],t.prototype,"minWidth",void 0),ne([(0,r.Z9)(null)],t.prototype,"maxWidth",void 0),ne([(0,r.Z9)(0)],t.prototype,"minHeight",void 0),ne([(0,r.Z9)(null)],t.prototype,"maxHeight",void 0),ne([(0,r.Z9)(!1)],t.prototype,"resizeByPercent",void 0),t}(r.rt),_X=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.ju)()],t.prototype,"beforeSend",void 0),ne([(0,r.Zz)({getImageUrl:null,url:null,uploadUrl:null},yN)],t.prototype,"ajaxSettings",void 0),ne([(0,r.Z9)(!1)],t.prototype,"allowDragAndDrop",void 0),ne([(0,r.Zz)({visible:!0,file:["Open","|","Cut","Copy","|","Delete","Rename","|","Details"],folder:["Open","|","Cut","Copy","Paste","|","Delete","Rename","|","Details"],layout:["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"]},IN)],t.prototype,"contextMenuSettings",void 0),ne([(0,r.Z9)("")],t.prototype,"cssClass",void 0),ne([(0,r.Zz)({},EN)],t.prototype,"detailsViewSettings",void 0),ne([(0,r.Z9)(!1)],t.prototype,"enable",void 0),ne([(0,r.Zz)({maxWidth:"650px",minWidth:"240px",visible:!0},xN)],t.prototype,"navigationPaneSettings",void 0),ne([(0,r.Z9)("/")],t.prototype,"path",void 0),ne([(0,r.Z9)(null)],t.prototype,"rootAliasName",void 0),ne([(0,r.Zz)({},SN)],t.prototype,"searchSettings",void 0),ne([(0,r.Z9)(!0)],t.prototype,"showFileExtension",void 0),ne([(0,r.Z9)(!1)],t.prototype,"showHiddenItems",void 0),ne([(0,r.Z9)(!0)],t.prototype,"showThumbnail",void 0),ne([(0,r.Z9)("Ascending")],t.prototype,"sortOrder",void 0),ne([(0,r.Zz)({visible:!0,items:["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"]},CN)],t.prototype,"toolbarSettings",void 0),ne([(0,r.Zz)({autoUpload:!0,minFileSize:0,maxFileSize:3e7,allowedExtensions:"",autoClose:!1},TN)],t.prototype,"uploadSettings",void 0),ne([(0,r.Z9)("LargeIcons")],t.prototype,"view",void 0),t}(r.rt),WX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)("100%")],t.prototype,"width",void 0),ne([(0,r.Z9)(aC)],t.prototype,"styles",void 0),ne([(0,r.Z9)(!0)],t.prototype,"resize",void 0),ne([(0,r.Z9)(0)],t.prototype,"minWidth",void 0),ne([(0,r.Z9)(null)],t.prototype,"maxWidth",void 0),t}(r.rt),UX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(!0)],t.prototype,"enable",void 0),ne([(0,r.Z9)(!1)],t.prototype,"showOnRightClick",void 0),ne([(0,r.Z9)("hide")],t.prototype,"actionOnScroll",void 0),ne([(0,r.Z9)(["Open","Edit","UnLink"])],t.prototype,"link",void 0),ne([(0,r.Z9)(["Replace","Align","Caption","Remove","-","InsertLink","OpenImageLink","EditImageLink","RemoveImageLink","Display","AltText","Dimension"])],t.prototype,"image",void 0),ne([(0,r.Z9)(["AudioReplace","AudioRemove","AudioLayoutOption"])],t.prototype,"audio",void 0),ne([(0,r.Z9)(["VideoReplace","VideoAlign","VideoRemove","VideoLayoutOption","VideoDimension"])],t.prototype,"video",void 0),ne([(0,r.Z9)(null)],t.prototype,"text",void 0),ne([(0,r.Z9)(["TableHeader","TableRows","TableColumns","BackgroundColor","-","TableRemove","Alignments","TableCellVerticalAlign","Styles"])],t.prototype,"table",void 0),t}(r.rt),GX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)("b; em; font; sub; sup; kbd; i; s; u; code; strong; span; p; div; h1; h2; h3; h4; h5; h6; blockquote; ol; ul; li; pre;")],t.prototype,"allowedFormats",void 0),ne([(0,r.Z9)(null)],t.prototype,"deniedFormats",void 0),t}(r.rt),ZX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(tK)],t.prototype,"iconsSet",void 0),ne([(0,r.Z9)(!0)],t.prototype,"showSearchBox",void 0),t}(r.rt),YX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(!1)],t.prototype,"prompt",void 0),ne([(0,r.Z9)(null)],t.prototype,"deniedAttrs",void 0),ne([(0,r.Z9)(["background","background-color","border","border-bottom","border-left","border-radius","border-right","border-style","border-top","border-width","clear","color","cursor","direction","display","float","font","font-family","font-size","font-weight","font-style","height","left","line-height","list-style-type","margin","margin-top","margin-left","margin-right","margin-bottom","max-height","max-width","min-height","min-width","overflow","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","position","right","table-layout","text-align","text-decoration","text-indent","top","vertical-align","visibility","white-space","width"])],t.prototype,"allowedStyleProps",void 0),ne([(0,r.Z9)(null)],t.prototype,"deniedTags",void 0),ne([(0,r.Z9)(!0)],t.prototype,"keepFormat",void 0),ne([(0,r.Z9)(!1)],t.prototype,"plainText",void 0),t}(r.rt),KX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(null)],t.prototype,"default",void 0),ne([(0,r.Z9)("65px")],t.prototype,"width",void 0),ne([(0,r.Z9)(oC)],t.prototype,"items",void 0),t}(r.rt),XX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(null)],t.prototype,"default",void 0),ne([(0,r.Z9)("35px")],t.prototype,"width",void 0),ne([(0,r.Z9)(QY)],t.prototype,"items",void 0),t}(r.rt),QX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(null)],t.prototype,"default",void 0),ne([(0,r.Z9)("65px")],t.prototype,"width",void 0),ne([(0,r.Z9)(lC)],t.prototype,"types",void 0),t}(r.rt),JX=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)("#ff0000")],t.prototype,"default",void 0),ne([(0,r.Z9)("Palette")],t.prototype,"mode",void 0),ne([(0,r.Z9)(10)],t.prototype,"columns",void 0),ne([(0,r.Z9)(JY)],t.prototype,"colorCode",void 0),ne([(0,r.Z9)(!1)],t.prototype,"modeSwitcher",void 0),t}(r.rt),$X=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)("#ffff00")],t.prototype,"default",void 0),ne([(0,r.Z9)("Palette")],t.prototype,"mode",void 0),ne([(0,r.Z9)(10)],t.prototype,"columns",void 0),ne([(0,r.Z9)($Y)],t.prototype,"colorCode",void 0),ne([(0,r.Z9)(!1)],t.prototype,"modeSwitcher",void 0),t}(r.rt),eQ=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(hC)],t.prototype,"types",void 0),t}(r.rt),tQ=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return Hs(t,a),ne([(0,r.Z9)(cC)],t.prototype,"types",void 0),t}(r.rt),vH=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),dm=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},iQ=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return vH(t,a),dm([(0,r.Z9)([])],t.prototype,"styles",void 0),dm([(0,r.Z9)([])],t.prototype,"scripts",void 0),t}(r.rt),sQ=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return vH(t,a),dm([(0,r.Z9)(!1)],t.prototype,"enable",void 0),dm([(0,r.Z9)(null)],t.prototype,"attributes",void 0),dm([(0,r.Zz)({},iQ)],t.prototype,"resources",void 0),t}(r.rt),nQ=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),yH=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},rQ=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return nQ(t,a),yH([(0,r.Z9)(!1)],t.prototype,"enable",void 0),yH([(0,r.Z9)(!0)],t.prototype,"onSelection",void 0),t}(r.rt),aQ=function(){function a(t){this.parent=t,this.addEventListener()}return a.prototype.addEventListener=function(){this.parent.on(nk,this.enterHandler,this),this.parent.on(Oe,this.destroy,this),this.parent.on(Bi,this.moduleDestroy,this)},a.prototype.destroy=function(){(0,r.le)(this.parent)||this.removeEventListener()},a.prototype.moduleDestroy=function(){this.parent=null},a.prototype.removeEventListener=function(){this.parent.off(nk,this.enterHandler),this.parent.off(Oe,this.destroy),this.parent.off(Bi,this.moduleDestroy)},a.prototype.getRangeNode=function(){this.range=this.parent.getRange(),this.startNode="#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement:this.range.startContainer,this.endNode="#text"===this.range.endContainer.nodeName?this.range.endContainer.parentElement:this.range.endContainer},a.prototype.enterHandler=function(t){var e=this;this.getRangeNode();var i=!0;if(this.formatTags=["h1","h2","h3","h4","h5","h6","blockquote"],!(0,r.le)(this.startNode.closest("TABLE"))&&!(0,r.le)(this.endNode.closest("TABLE"))){i=!1;for(var s=this.startNode,n=s;!this.parent.formatter.editorManager.domNode.isBlockNode(s);)n=s=s.parentElement;i=!("TD"===n.tagName||"TBODY"===n.tagName)}if(13===t.args.which&&!t.args.ctrlKey&&(r.AR.isDevice?"Enter"===t.args.key:"Enter"===t.args.code)&&(0,r.le)(this.startNode.closest("LI, UL, OL"))&&(0,r.le)(this.endNode.closest("LI, UL, OL"))&&i&&(0,r.le)(this.startNode.closest("PRE"))&&(0,r.le)(this.endNode.closest("PRE"))){var o=t.args.shiftKey;this.parent.trigger(dr,{cancel:!1,name:dr,requestType:o?"ShiftEnterAction":"EnterAction",originalEvent:t.args},function(h){if(!h.cancel){if(e.range.startOffset!==e.range.endOffset||e.range.startContainer!==e.range.endContainer)if("SPAN"===e.range.startContainer.nodeName&&(e.range.startContainer.classList.contains("e-video-wrap")||e.range.startContainer.classList.contains("e-audio-wrap"))||e.range.deleteContents(),"#text"===e.range.startContainer.nodeName&&0===e.range.startContainer.textContent.length&&e.range.startContainer.parentElement!==e.parent.inputElement)e.range.startContainer.parentElement.innerHTML="BR"===e.parent.enterKey?"&#8203;":"<br>";else if(e.range.startContainer===e.parent.inputElement&&""===e.range.startContainer.innerHTML){e.range.startContainer.innerHTML="<br>";var c=e.range.startContainer.childNodes[e.range.startOffset];e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),c,0)}else if(e.parent.inputElement===e.range.startContainer){if("#text"===(c=e.range.startContainer.childNodes[e.range.startOffset]).nodeName&&0===c.textContent.length)e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),c,0===c.textContent.length?0:c.previousSibling.textContent.length);else if(e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),c,c.textContent.length>=0?0:1),0===c.previousSibling.textContent.length){if((0,r.og)(c.previousSibling),!o){for(var u=(0,r.le)(c.lastChild)?c:c.lastChild;!(0,r.le)(u)&&"#text"!==u.nodeName&&"BR"!==u.nodeName;)u=u.lastChild;"BR"!==u.nodeName&&0===u.parentElement.textContent.length&&0===u.parentElement.innerHTML.length&&"BR"!==u.parentElement.nodeName&&u.parentElement.appendChild(e.parent.createElement("BR")),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),"BR"===u.nodeName?u:u.parentElement,u.parentElement.textContent.length>=0||"BR"===u.nodeName?0:1)}}else if(0===c.textContent.length){for(u="#text"===c.previousSibling.nodeName?c.previousSibling:c.previousSibling.lastChild;!(0,r.le)(u)&&"#text"!==u.nodeName;)u=u.lastChild;e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),u,u.textContent.length),(0,r.og)(c)}else if("BR"!==e.parent.enterKey&&0!==c.previousSibling.textContent.length&&0!==c.textContent.length)return void t.args.preventDefault();e.getRangeNode()}if(e.range.startContainer===e.range.endContainer&&e.range.startOffset===e.range.endOffset&&e.range.startContainer===e.parent.inputElement){if(1!==e.parent.inputElement.childNodes.length||"TABLE"!==e.parent.inputElement.childNodes[0].nodeName)if((0,r.le)(e.range.startContainer.childNodes[e.range.startOffset])){for(var p=e.range.startContainer.childNodes[e.range.startOffset-1];null!==p.lastChild&&"#text"!==p.nodeName;)p=p.lastChild;e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),p,"BR"===p.nodeName?0:p.textContent.length)}else e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),e.range.startContainer.childNodes[e.range.startOffset],0);e.getRangeNode()}if("P"===e.parent.enterKey&&!o||"DIV"===e.parent.enterKey&&!o||"P"===e.parent.shiftEnterKey&&o||"DIV"===e.parent.shiftEnterKey&&o){if(1===e.range.startOffset&&1===e.parent.inputElement.childNodes.length&&"TABLE"===e.parent.inputElement.childNodes[0].nodeName)(d=e.createInsertElement(o)).appendChild(e.parent.createElement("BR")),e.parent.inputElement.appendChild(d),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),d,0);else{var f=void 0;f=i&&e.parent.formatter.editorManager.domNode.isBlockNode(e.startNode)?e.startNode:e.parent.formatter.editorManager.domNode.blockParentNode(e.startNode);var g=!1,m=!1;if(0===e.range.startOffset||0===e.range.endOffset||e.range.startContainer!==e.range.endContainer||!(0,r.le)(f.childNodes[0])&&("IMG"===f.childNodes[0].nodeName||f.querySelectorAll("img, audio, video").length>0))0===e.range.startOffset&&0===e.range.endOffset&&(m=!0);else{var y=e.range.startContainer.textContent.substring(0,e.range.startOffset);160!==y.charCodeAt(e.range.startOffset-1)&&0===y.trim().length&&(m=!0)}if(e.removeBRElement(f),(-1===r.AR.userAgent.indexOf("Firefox")||0!==e.range.startOffset||e.range.startContainer!==e.range.endContainer||"#text"!==e.range.startContainer.nodeName||e.parent.formatter.editorManager.domNode.isBlockNode(e.range.startContainer.previousSibling)||e.range.startContainer.parentElement!==e.range.startContainer.previousSibling.parentElement)&&(0===e.range.startOffset&&0===e.range.endOffset||m)&&((0,r.le)(e.range.startContainer.previousSibling)||"IMG"!==e.range.startContainer.previousSibling.nodeName&&"BR"!==e.range.startContainer.previousSibling.nodeName)){var b=void 0,d=void 0;(0,r.le)(e.range.startContainer.childNodes)||0!==e.range.startContainer.textContent.length&&("#text"===e.range.startContainer.nodeName||(0,r.le)(e.range.startContainer.querySelector(".e-video-clickelem"))||0!==e.range.startContainer.querySelector(".e-video-clickelem").textContent.length)||!(e.range.startContainer.querySelectorAll("img, audio, video").length>0)&&(0,r.le)(e.range.startContainer.querySelector(".e-video-clickelem"))&&"IMG"!==e.range.startContainer.nodeName&&"TABLE"!==e.range.startContainer.nodeName?0!==f.textContent.trim().length||"IMG"===f.childNodes[0].nodeName||""===f.textContent.trim()&&f.querySelectorAll("img, audio, video").length>0?(e.range.startOffset===e.range.endOffset&&0!==e.range.startOffset?d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!1).cloneNode(!0):(d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0).cloneNode(!0),g=!0),b=!1):(d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0).cloneNode(!0),b=!0):(d=e.createInsertElement(o),g=!0,b=!1);var S=void 0;for(S=e.formatTags.indexOf(d.nodeName.toLocaleLowerCase())<0?e.createInsertElement(o):e.parent.createElement(d.nodeName);d.firstChild;)S.appendChild(d.firstChild);if(f.parentElement.insertBefore(S,f),!b){u=S;var I=void 0;if(e.range.startOffset===e.range.endOffset&&0!==e.range.startOffset)for(;!(0,r.le)(u)&&"#text"!==u.nodeName&&"BR"!==u.nodeName;)I=u,u=u.lastChild;else I=u;I.innerHTML="<br>",g||(0,r.og)(f)}e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),S.nextElementSibling,0)}else if(0!==f.textContent.length||!(0,r.le)(f.childNodes[0])&&"IMG"===f.childNodes[0].nodeName||f.querySelectorAll("video").length>0||f.querySelectorAll("audio").length>0||f.querySelectorAll("img").length>0)if(e.range.startContainer===e.range.endContainer&&"SPAN"===e.range.startContainer.nodeName&&(e.range.startContainer.classList.contains("e-video-wrap")||e.range.startContainer.classList.contains("e-audio-wrap"))){if(f.textContent.trim().length>0){d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0);for(var x=(0,r.le)(d.previousSibling.querySelector(".e-video-wrap"))?d.previousSibling.querySelector(".e-audio-wrap"):d.previousSibling.querySelector(".e-video-wrap"),T=!1,O=x.previousSibling;!(0,r.le)(O)&&"#text"!==O.nodeName;)O=O.lastChild;if((0,r.le)(O)){var A=e.parent.createElement("br");x.parentElement.appendChild(A),T=!0}T?e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),x.parentElement,0):e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),O,O.textContent.length),(0,r.og)(x)}else{for(c=(d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0)).previousSibling;!(0,r.le)(c.firstChild);)(0,r.og)(c.firstChild);A=e.parent.createElement("br"),c.appendChild(A),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),c,0)}(0,r.le)(e.parent.audioModule)||e.parent.audioModule.hideAudioQuickToolbar(),(0,r.le)(e.parent.videoModule)||e.parent.videoModule.hideVideoQuickToolbar()}else{if(d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!0),!(0,r.le)(d.childNodes[0])&&"#text"===d.childNodes[0].nodeName&&0===d.childNodes[0].textContent.length&&(0,r.og)(d.childNodes[0]),0===d.textContent.trim().length){if(A=e.parent.createElement("br"),"A"===e.startNode.nodeName){var q=e.startNode.parentElement;e.startNode.parentElement.insertBefore(A,e.startNode),(0,r.og)(e.startNode),e.startNode=q}else"BR"!==e.startNode.nodeName&&e.startNode.appendChild(A);"\n"===d.childNodes[0].textContent&&(0,r.og)(d.childNodes[0]),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),e.startNode,0)}if(("P"===e.parent.enterKey||"DIV"===e.parent.enterKey)&&!o||("DIV"===e.parent.shiftEnterKey||"P"===e.parent.shiftEnterKey)&&o){var k=e.formatTags.indexOf(d.nodeName.toLocaleLowerCase());if(k<0||k>=0&&0===d.textContent.trim().length){for(var R=e.createInsertElement(o);d.firstChild;)R.appendChild(d.firstChild);e.parent.formatter.editorManager.domNode.insertAfter(R,d),(0,r.og)(d),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),e.parent.formatter.editorManager.domNode.isBlockNode(e.startNode)?R:e.startNode,0)}}}else if((0,r.le)(f.children[0])||"BR"===f.children[0].tagName)(S=e.createInsertElement(o)).innerHTML="<br>",e.parent.formatter.editorManager.domNode.insertAfter(S,f),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),S,0);else{d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,f,!1).cloneNode(!0);e.parent.formatter.editorManager.domNode.insertAfter(d,f),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),d,d.textContent.length>=0?0:1)}}t.args.preventDefault()}if("BR"===e.parent.enterKey&&!o||"BR"===e.parent.shiftEnterKey&&o){var D=void 0;if(e.parent.formatter.editorManager.domNode.isBlockNode(e.startNode))D=e.startNode;else{for(var z=e.startNode,Y=z;!e.parent.formatter.editorManager.domNode.isBlockNode(z);)Y=z,z=z.parentElement;D=z===e.parent.inputElement?Y:z}e.removeBRElement(D);for(var H=D.lastChild;!(0,r.le)(H)&&"#text"!==H.nodeName&&"BR"!==H.nodeName&&"IMG"!==H.nodeName;)H=H.lastChild;var W=e.range.startContainer===H?e.range.startContainer.textContent.length:D.textContent.length,Z="IMG"===e.range.startContainer.nodeName||e.range.startContainer.childNodes.length>0&&"IMG"===e.range.startContainer.childNodes[e.range.startOffset].nodeName;if(D!==e.parent.inputElement&&e.parent.formatter.editorManager.domNode.isBlockNode(D)&&e.range.startOffset===e.range.endOffset&&(e.range.startOffset===W||0===D.textContent.trim().length&&Z)){var J=e.parent.createElement("br");if(0===e.range.startOffset&&"TABLE"===e.range.startContainer.nodeName)e.range.startContainer.parentElement.insertBefore(J,e.range.startContainer);else if("BR"===H.nodeName&&0===D.textContent.length)e.parent.formatter.editorManager.domNode.insertAfter(J,H);else if(0===e.range.startOffset&&0===e.range.endOffset&&Z){var ve="IMG"===e.range.startContainer.nodeName?e.range.startContainer:e.range.startContainer.childNodes[e.range.startOffset];D.insertBefore(J,ve),J=ve}else{var ce=e.parent.createElement("br");e.parent.formatter.editorManager.domNode.insertAfter(J,e.range.startContainer),e.parent.formatter.editorManager.domNode.insertAfter(ce,e.range.startContainer)}e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),J,0)}else if((0,r.le)(D)||D===e.parent.inputElement||"BR"===D.nodeName)e.insertBRElement();else if(0===D.textContent.trim().length||1===D.textContent.trim().length&&8203===D.textContent.charCodeAt(0)){d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,D,!0).cloneNode(!0),e.parent.formatter.editorManager.domNode.insertAfter(d,D);var de=e.parent.createElement("br");d.parentElement.insertBefore(de,d),e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),d,0)}else if(d=void 0,de=e.parent.createElement("br"),0!==e.range.startOffset||0!==e.range.endOffset||(0,r.le)(D.previousSibling)||"BR"!==D.previousSibling.nodeName||"P"===D.nodeName||"DIV"===D.nodeName)e.insertBRElement();else{for(d=e.parent.formatter.editorManager.nodeCutter.SplitNode(e.range,D,!1).cloneNode(!0),e.parent.formatter.editorManager.domNode.insertAfter(de,D),e.insertFocusContent(),u=de.nextSibling;!(0,r.le)(u)&&"#text"!==u.nodeName;)u=u.lastChild;e.parent.formatter.editorManager.nodeSelection.setCursorPoint(e.parent.contentModule.getDocument(),u,0)}t.args.preventDefault()}e.parent.trigger(ga,{requestType:o?"ShiftEnterAction":"EnterAction",args:t.args})}})}},a.prototype.removeBRElement=function(t){-1!==r.AR.userAgent.indexOf("Firefox")&&this.range.endOffset===t.textContent.length&&(0!==t.textContent.length||t.querySelectorAll("BR").length>1)&&!(0,r.le)(t.lastChild)&&"BR"===t.lastChild.nodeName&&(0,r.og)(t.lastChild)},a.prototype.insertBRElement=function(){var t=!1,e=!0;0===this.range.endContainer.textContent.length&&"BR"===this.range.startContainer.nodeName&&(e=!1);var i=this.parent.createElement("br");if("BR"===this.startNode.nodeName&&"BR"===this.endNode.nodeName&&0===this.range.startOffset&&this.range.startOffset===this.range.endOffset?(this.parent.formatter.editorManager.domNode.insertAfter(i,this.startNode),t=!0):(this.startNode===this.parent.inputElement&&!(0,r.le)(this.range.startContainer.previousSibling)&&"BR"===this.range.startContainer.previousSibling.nodeName&&0===this.range.startContainer.textContent.length&&(t=!0),this.range.insertNode(i)),t||!(0,r.le)(i.nextElementSibling)&&"BR"===i.nextElementSibling.tagName||!(0,r.le)(i.nextSibling)&&i.nextSibling.textContent.length>0)this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),!(0,r.le)(i.nextSibling)&&e?i.nextSibling:i,0),t=!1;else{var s=this.parent.createElement("br");this.range.insertNode(s),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.contentModule.getDocument(),i,0)}},a.prototype.insertFocusContent=function(){0===this.range.startContainer.textContent.length&&("#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement.innerHTML="&#8203;":this.range.startContainer.innerHTML="&#8203;")},a.prototype.createInsertElement=function(t){var e;"DIV"===this.parent.enterKey&&!t||"DIV"===this.parent.shiftEnterKey&&t?e=this.parent.createElement("div"):("P"===this.parent.enterKey&&!t||"P"===this.parent.shiftEnterKey&&t)&&(e=this.parent.createElement("p"));var i=this.parent.formatter.editorManager.domNode.blockNodes()[0].previousSibling,s=this.parent.formatter.editorManager.domNode.blockNodes()[0].nextSibling;return!(0,r.le)(i)&&i.hasAttribute("style")&&e.setAttribute("style",i.getAttribute("style")),(0,r.le)(i)&&!(0,r.le)(s)&&s.hasAttribute("style")&&e.setAttribute("style",s.getAttribute("style")),e},a}(),oQ=function(){var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n])})(t,e)};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),nA=function(){return(nA=Object.assign||function(a){for(var t,e=1,i=arguments.length;e<i;e++)for(var s in t=arguments[e])Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=t[s]);return a}).apply(this,arguments)},he=function(a,t,e,i){var o,s=arguments.length,n=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(a,t,e,i);else for(var l=a.length-1;l>=0;l--)(o=a[l])&&(n=(s<3?o(n):s>3?o(t,e,n):o(t,e))||n);return s>3&&n&&Object.defineProperty(t,e,n),n},lQ=function(a){function t(e,i){var s=a.call(this,e,i)||this;return s.needsID=!0,s}return oQ(t,a),t.prototype.requiredModules=function(){var e=[];return this.toolbarSettings.enable&&(e.push({member:"toolbar",args:[this,this.serviceLocator]}),e.push({member:"link",args:[this,this.serviceLocator]}),e.push({member:"table",args:[this,this.serviceLocator]}),e.push({member:"image",args:[this,this.serviceLocator]}),this.quickToolbarSettings.enable&&e.push({member:"quickToolbar",args:[this,this.serviceLocator]})),this.showCharCount&&e.push({member:"count",args:[this,this.serviceLocator]}),"Markdown"===this.editorMode&&e.push({member:"markdownEditor",args:[this,this.serviceLocator]}),"HTML"===this.editorMode&&(e.push({member:"htmlEditor",args:[this,this.serviceLocator]}),e.push({member:"pasteCleanup",args:[this,this.serviceLocator]}),e.push({member:"audio",args:[this,this.serviceLocator]}),e.push({member:"video",args:[this,this.serviceLocator]}),e.push({member:"formatPainter",args:[this]}),e.push({member:"emojiPicker",args:[this,this.serviceLocator]})),this.fileManagerSettings.enable&&e.push({member:"fileManager",args:[this,this.serviceLocator]}),this.enableResize&&e.push({member:"resize",args:[this]}),e},t.prototype.updateEnable=function(){this.enabled?((0,r.IV)([this.element],Ik),this.element.setAttribute("aria-disabled","false"),(0,r.le)(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&((0,r.IV)(this.getToolbar().querySelectorAll("."+jp),jp),(0,r.IV)([this.getToolbar()],[Gb,xk])),(0,r.cn)([this.element],Ik),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.eventInitializer():this.unWireEvents()},t.prototype.initializeValue=function(){this.isFocusOut=!1,this.isRTE=!1,this.isBlur=!0,this.defaultResetValue=null,this.isResizeInitialized=!1},t.prototype.preRender=function(){this.initializeValue(),this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this),this.clickPoints={clientX:0,clientY:0},this.initialValue=this.value,this.serviceLocator=new wV,this.initializeServices(),this.setContainer(),this.persistData(),(0,r.V7)(this.element,{width:(0,r.Ac)(this.width)}),(0,r.Y4)(this.element,{role:"application","aria-label":"Rich Text Editor"})},t.prototype.persistData=function(){if(this.enablePersistence&&"TEXTAREA"===this.originalElement.tagName){this.element.id=this.originalElement.id+"_wrapper";var e=window.localStorage.getItem(this.getModuleName()+this.element.id);(0,r.le)(e)||""===e||this.setProperties(JSON.parse(e),!0)}},t.prototype.setContainer=function(){this.originalElement=this.element.cloneNode(!0),(null===this.value||null!==this.valueTemplate)&&this.setValue(),this.element.hasAttribute("tabindex")&&(this.htmlAttributes={tabindex:this.element.getAttribute("tabindex")},this.element.removeAttribute("tabindex")),this.element.innerHTML="";for(var e=["class","style","id","ejs-for"],i={},s=0;s<this.element.attributes.length;s++)-1===e.indexOf(this.element.attributes[s].name)&&!/^data-val/.test(this.element.attributes[s].name)&&(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));if((0,r.l7)(i,this.htmlAttributes,i),this.setProperties({htmlAttributes:i},!0),(0,r.le)(this.htmlAttributes.id)||(this.element.id=this.htmlAttributes.id),"TEXTAREA"===this.element.tagName){var n=this.createElement("div",{className:this.element.getAttribute("class")});this.element.innerHTML="",this.element.parentElement.insertBefore(n,this.element),this.valueContainer=this.element,(0,r.IV)([this.valueContainer],this.element.getAttribute("class").split(" ")),this.element=n}else this.valueContainer=this.createElement("textarea",{id:this.getID()+"-value",attrs:{"aria-labelledby":this.getID()}});if(this.valueContainer.name=this.getID(),(0,r.cn)([this.valueContainer],oV),!(0,r.le)(this.cssClass))for(var o=this.cssClass.split(" "),l=0;l<o.length;l++)(0,r.cn)([this.valueContainer],o[l]);this.element.appendChild(this.valueContainer)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.selectAll=function(){this.notify(Xg,{})},t.prototype.selectRange=function(e){this.notify(Vb,{range:e})},t.prototype.getSelection=function(){var e="";return this.notify(Qg,{callBack:function(i){e=i}}),e},t.prototype.showEmojiPicker=function(e,i){this.readonly||this.notify(qb,{x:e,y:i})},t.prototype.executeCommand=function(e,i,s){var n;if(i=this.htmlPurifier(e,i),"HTML"===this.editorMode){var o=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(this.iframeSettings.enable&&o.startContainer===this.inputElement||!this.inputElement.contains(o.startContainer))&&this.focusIn()}var h=VX[""+e];if(s&&s.undo&&s.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),-1!==this.maxLength&&!(0,r.le)(h.command)){var c=0;if("Links"===h.command&&(c=0===i.text.length?i.url.length:i.text.length),("Images"===h.command||"Table"===h.command||"Files"===h.command)&&(c=1),"InsertHTML"===h.command)if((0,r.le)(i))!(0,r.le)(h.value)&&("<hr/>"===h.value||"<br/>"===h.value)&&(c=1);else{var u=this.createElement("div");u.innerHTML=i,c=u.textContent.length}"InsertText"===h.command&&(c=i.length);var p=this.getText().trim().replace(/(\r\n|\n|\r)/gm,"").replace(/\u200B/g,"").length,d=this.getSelection().length;if(!(-1===this.maxLength||p-d+c<=this.maxLength))return}n=i,"FormatPainter"===h.command&&((0,r.le)(i)||(this.formatPainterSettings=i),n={formatPainterAction:h.value}),this.formatter.editorManager.execCommand(h.command,h.subCommand?h.subCommand:n||h.value,null,null,n||h.value,n||h.value),s&&s.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.notify(Hg,{})},t.prototype.htmlPurifier=function(e,i){if("HTML"===this.editorMode)switch(e){case"insertHTML":this.enableHtmlSanitizer&&(i=this.htmlEditorModule.sanitizeHelper("string"==typeof i?i:i.outerHTML));break;case"insertTable":(0,r.le)(i.width)&&(i.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width});break;case"insertImage":var n=(s=this.createElement("img",{attrs:{src:i.url}})).outerHTML;this.enableHtmlSanitizer&&(n=this.htmlEditorModule.sanitizeHelper(s.outerHTML));var o=""!==n&&this.createElement("div",{innerHTML:n}).firstElementChild.getAttribute("src")||null;o=(0,r.le)(o)?"":o,i.url=o,(0,r.le)(i.width)&&(i.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),(0,r.le)(i.height)&&(i.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height});break;case"insertAudio":var l=this.createElement("audio",{attrs:{controls:""}}),s=this.createElement("source",{attrs:{src:i.url,type:i.url&&i.url.split(".").length>0?"audio/"+i.url.split(".")[i.url.split(".").length-1]:""}});l.appendChild(s);var h=l.outerHTML;this.enableHtmlSanitizer&&(h=this.htmlEditorModule.sanitizeHelper(l.outerHTML)),o=""!==h&&this.createElement("div",{innerHTML:h}).firstElementChild.firstElementChild.getAttribute("src")||null,o=(0,r.le)(o)?"":o,i.url=o;break;case"insertVideo":l=this.createElement("video",{attrs:{controls:""}}),s=this.createElement("source",{attrs:{src:i.url,type:i.url&&i.url.split(".").length>0?"video/"+i.url.split(".")[i.url.split(".").length-1]:""}}),l.appendChild(s),h=l.outerHTML,this.enableHtmlSanitizer&&(h=this.htmlEditorModule.sanitizeHelper(s.outerHTML)),o=""!==h&&this.createElement("div",{innerHTML:h}).firstElementChild.getAttribute("src")||null,o=(0,r.le)(o)?"":o,i.url=o,(0,r.le)(i.width)&&(i.width={minWidth:this.insertVideoSettings.minWidth,maxWidth:this.insertVideoSettings.maxWidth,width:this.insertVideoSettings.width}),(0,r.le)(i.height)&&(i.height={minHeight:this.insertVideoSettings.minHeight,maxHeight:this.insertVideoSettings.maxHeight,height:this.insertVideoSettings.height});break;case"createLink":var c=this.createElement("a",{attrs:{href:i.url}}),u=c.outerHTML;this.enableHtmlSanitizer&&(u=this.htmlEditorModule.sanitizeHelper(c.outerHTML));var p=""!==u&&this.createElement("div",{innerHTML:u}).firstElementChild.getAttribute("href")||null;p=(0,r.le)(p)?"":p,i.url=p}return i},t.prototype.encode=function(e){var i=this.createElement("div");return i.innerText=e.trim(),i.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},t.prototype.render=function(){this.value&&!this.valueTemplate&&this.setProperties({value:this.serializeValue(this.value)},!0),this.renderModule=new LX(this,this.serviceLocator),this.sourceCodeModule=new BX(this,this.serviceLocator),this.notify(Vg,{}),this.trigger("load"),this.RTERender(),new xK(this),this.notify(ui,{}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.toolbarSettings.enable&&("Expand"===this.toolbarSettings.type||"MultiRow"===this.toolbarSettings.type||"Scrollable"===this.toolbarSettings.type)&&!(0,r.le)(this.getToolbar())&&this.toolbarSettings.items.indexOf("Undo")>-1&&this.toolbarSettings.items.indexOf("Redo")>-1&&this.disableToolbarItem(["Undo","Redo"]),this.setContentHeight(),null!==this.value&&(this.valueContainer.defaultValue=this.value),this.enabled&&!this.readonly?this.eventInitializer():this.unWireEvents(),this.notify(zi,{cssClass:this.getCssClass()}),this.addAudioVideoWrapper(),this.notify(Fg,{}),this.renderComplete()},t.prototype.addAudioVideoWrapper=function(){for(var i,e=this,s=this.element.querySelectorAll("audio"),n=0;n<s.length;n++)if(s[n].classList.contains("e-rte-audio")||(s[n].classList.add("e-rte-audio"),s[n].classList.add("e-audio-inline")),!s[n].parentElement.classList.contains(bh)&&!s[n].parentElement.classList.contains(sl)){var o=this.createElement("span",{className:sl});o.setAttribute("style","width:300px; margin:0 auto;"),o.contentEditable="false";var l=this.createElement("span",{className:bh});o.appendChild(l),s[n].parentNode.insertBefore(o,s[n].nextSibling),l.appendChild(s[n]),null===o.nextElementSibling&&(i=this.createElement("br"),o.parentNode.insertBefore(i,o.nextSibling))}var h=this.element.querySelectorAll("video");for(n=0;n<h.length;n++){if(h[n].classList.contains("e-rte-video")||(h[n].classList.add("e-rte-video"),h[n].classList.add("e-video-inline")),!h[n].parentElement.classList.contains(bh)&&!h[n].parentElement.classList.contains(zp)){var c=this.createElement("span",{className:zp});c.contentEditable="false",h[n].parentNode.insertBefore(c,h[n].nextSibling),c.appendChild(h[n]),null===c.nextElementSibling&&(i=this.createElement("br"),c.parentNode.insertBefore(i,c.nextSibling))}-1!==r.AR.userAgent.indexOf("Firefox")&&(h[n].addEventListener("play",function(p){e.notify(Wn,{args:p}),e.notify("editAreaClick",{args:p})}),h[n].addEventListener("pause",function(p){e.notify(Wn,{args:p}),e.notify("editAreaClick",{args:p})}))}},t.prototype.eventInitializer=function(){this.wireEvents()},t.prototype.cleanList=function(e){var i=this.getRange(),s=i.startContainer,n=i.endContainer,o=i.startOffset,l=s===n,c="#text"===i.endContainer.nodeName?i.endContainer.parentElement:i.endContainer,u=(0,r.oq)(c,"LI"),p=!1,d=i.endOffset;if(n.nodeType===Node.TEXT_NODE&&"\ufeff"===n.textContent.charAt(d-1)&&d--,!(0,r.le)(u)&&c.textContent.trim().length===d&&!i.collapsed&&(0,r.le)(c.nextElementSibling)){for(var f=0;f<u.childNodes.length;f++)"#text"===u.childNodes[f].nodeName&&0===u.childNodes[f].textContent.trim().length&&((0,r.og)(u.childNodes[f]),p=!0,f--);for(var g=u;null!==g.lastChild&&"#text"!==g.nodeName;)g=g.lastChild;if(p){var m="BR"!==g.nodeName||(0,r.le)(g.previousSibling)?g:g.previousSibling;this.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),l?m:s,m,o,"BR"===m.nodeName?0:m.textContent.length)}}},t.prototype.keyDown=function(e){if(this.notify(Mi,{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&this.cleanList(e),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var i=this.getRange();if((0,r.oq)("#text"===i.startContainer.nodeName?i.startContainer.parentElement:i.startContainer,"pre")&&8===e.which&&8203===i.startContainer.textContent.charCodeAt(i.startOffset-1)||46===e.which&&8203===i.startContainer.textContent.charCodeAt(i.startOffset)){var n=new RegExp(String.fromCharCode(8203),"g"),o=8===e.which?i.startOffset-1:i.startOffset;i.startContainer.textContent=i.startContainer.textContent.replace(n,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),i.startContainer,o)}else if("Backspace"===e.code&&8===e.which&&8203===i.startContainer.textContent.charCodeAt(0)&&i.collapsed){var l=i.startContainer.parentElement,h=void 0,c=void 0;for(c=0;c<l.childNodes.length;c++)l.childNodes[c]===i.startContainer&&(h=c);var u=!0,p=[];for(c=h;c>=0;c--)3===l.childNodes[c].nodeType&&8203===l.childNodes[c].textContent.charCodeAt(0)&&u?p.push(c):u=!1;if(p.length>0)for(c=p.length-1;c>0;c--)l.childNodes[p[c]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),i.startContainer,i.startOffset)}}var d=!!(0,r.le)(e.action)||"format-copy"!==e.action;if(0===this.formatter.getUndoRedoStack().length&&d&&!(e.altKey||e.shiftKey||e.altKey&&e.shiftKey&&67==e.which)&&this.formatter.saveData(),"insert-link"!==e.action&&"format-copy"!==e.action&&"format-paste"!==e.action&&(!e.target||!e.target.classList.contains("e-mention")||"Tab"!==e.code)&&(e.action&&"paste"!==e.action&&"space"!==e.action||9===e.which||"Backspace"===e.code&&8===e.which)){var f=!1;switch((0,r.le)(this.formatPainterModule)||(f="escape"===this.formatPainterModule.previousAction),f||this.formatter.process(this,null,e),e.action){case"toolbar-focus":if(this.toolbarSettings.enable&&this.getToolbarElement()){var g=this.getToolbarElement().querySelector(".e-toolbar-item:not(.e-overlay)[title]");g.firstElementChild.removeAttribute("tabindex"),g.firstElementChild.focus()}break;case"escape":this.contentModule.getEditPanel().focus()}}(0,r.le)(this.placeholder)||((0,r.le)(this.placeHolderWrapper)||1===this.inputElement.textContent.length?this.iframeSettings.enable&&this.inputElement.classList.contains("e-rte-placeholder")?(0,r.IV)([this.inputElement],"e-rte-placeholder"):this.setPlaceHolder():this.placeHolderWrapper.style.display="none"),this.autoResize()},t.prototype.keyUp=function(e){if("HTML"===this.editorMode){var i=this.getRange();if(-1!==r.AR.userAgent.indexOf("Firefox")&&"#text"===i.startContainer.nodeName&&i.startContainer.parentElement===this.inputElement&&"BR"!==this.enterKey){var s=this.getRange(),n=this.createElement(this.enterKey);s.startContainer.parentElement.insertBefore(n,s.startContainer),n.appendChild(s.startContainer),this.formatter.editorManager.nodeSelection.setSelectionText(this.contentModule.getDocument(),n.childNodes[0],n.childNodes[0],n.childNodes[0].textContent.length,n.childNodes[0].textContent.length)}}this.notify(xs,{member:"keyup",args:e}),(39===e.keyCode||37===e.keyCode)&&this.notify("tableModulekeyUp",{member:"tableModulekeyUp",args:e}),"KeyX"===e.code&&88===e.which&&88===e.keyCode&&e.ctrlKey&&(""===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML)&&(this.inputElement.innerHTML=fC(Wk(this),this));var o=32===e.which||13===e.which||8===e.which||46===e.which;(!("C"===e.key&&e.altKey&&e.shiftKey)&&!("V"===e.key&&e.altKey&&e.shiftKey)&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||o)||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||o)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),(this.inputElement&&0!==this.inputElement.textContent.length||this.element.querySelectorAll(".e-toolbar-item.e-active").length>0||this.formatter.getUndoRedoStack().length>0)&&this.notify(Qo,{args:e}),(0,r.le)(this.placeholder)||("Enter"!==e.key||13!==e.keyCode)&&("<p><br></p>"===this.inputElement.innerHTML||"<div><br></div>"===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML)&&this.setPlaceHolder()},t.prototype.serializeValue=function(e){return"HTML"===this.editorMode&&!(0,r.le)(e)&&(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(io(e)),e=this.encode(e)):(e=this.htmlEditorModule.sanitizeHelper(e),e=this.enableXhtml?this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e):e)),e},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.updateValue=function(e){if((0,r.le)(e)){var i=this.inputElement.innerHTML;this.setProperties({value:cK(i)?null:i})}else this.setProperties({value:e})},t.prototype.triggerEditArea=function(e){if(di()){var i=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===i.clientX&&this.clickPoints.clientY===i.clientY&&this.notify(Un,{member:"editAreaClick",args:e})}else this.notify(Un,{member:"editAreaClick",args:e})},t.prototype.notifyMouseUp=function(e){var i=e.touches?e.changedTouches[0]:e;this.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:i.clientX,clientY:i.clientY}}),(this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)||e.target&&("VIDEO"===e.target.nodeName||e.target.querySelectorAll("."+zp).length>0)||e.target&&"BR"!==e.target.nodeName&&(e.target.classList.contains(sl)||e.target.classList.contains(bh)||e.target.classList.contains("e-video-clickelem")))&&this.notify(Qo,{args:e}),this.triggerEditArea(e)},t.prototype.mouseUp=function(e){if(this.quickToolbarSettings.showOnRightClick&&r.AR.isDevice){var i=e.target,s=(0,r.oq)(i,"table");if(i&&"A"===i.nodeName||"IMG"===i.nodeName||"TD"===i.nodeName||"TH"===i.nodeName||"TABLE"===i.nodeName||s&&this.contentModule.getEditPanel().contains(s))return}if(3===e.detail){var n=this.getRange();if(this.formatter.editorManager.domNode.getSelection().rangeCount>0&&!(0,r.le)(n.startContainer.parentElement)&&(!(0,r.le)(n.startContainer.parentElement.nextSibling)&&(3!==n.startContainer.parentElement.nextSibling.nodeType||/\s+$/.test(n.startContainer.parentElement.nextSibling.textContent))||n.startOffset===n.endOffset)||"li"===n.startContainer.parentElement.tagName.toLocaleLowerCase()){var l=new Range,h=n.startContainer,c=n.endContainer,u=!1,p="OL"===n.commonAncestorContainer.nodeName||"UL"===n.commonAncestorContainer.nodeName||"LI"===n.commonAncestorContainer.nodeName;for(p||1!==c.nodeType||"LI"!==c.nodeName?p&&1===c.nodeType&&0===n.endOffset?c.previousElementSibling&&c.previousElementSibling.lastElementChild?c=c.previousElementSibling.lastElementChild:(c=(0,r.oq)(c.parentElement,"li"))&&"LI"===c.nodeName&&(c=c.previousElementSibling):!(0,r.oq)(c,"li")&&c.previousElementSibling&&c.previousElementSibling.lastChild&&c.previousElementSibling.textContent.trim().length>0?c=c.previousElementSibling.lastChild:(0,r.oq)(c,"li")&&c.previousElementSibling&&c.previousElementSibling.lastChild&&(c=(0,r.oq)(c,"li").parentElement.previousElementSibling.lastChild):c=(0,r.oq)(c,"ol, ul").previousElementSibling.lastElementChild,(!c||c===this.inputElement)&&(c=h,u=!0);"#text"!==c.nodeName&&!u;)c=c.lastElementChild?c.lastElementChild:c.lastChild;l.setStart(h,0),l.setEnd(c,c.textContent.length),this.formatter.editorManager.nodeSelection.setRange(this.contentModule.getDocument(),l)}}this.notifyMouseUp(e)},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.onCopy=function(){this.contentModule.getDocument().execCommand("copy",!1,null)},t.prototype.onCut=function(){this.contentModule.getDocument().execCommand("cut",!1,null)},t.prototype.onPaste=function(e){var i=this;this.trigger(dr,{originalEvent:e,cancel:!1,requestType:"Paste"},function(n){var c=i.inputElement.textContent.length-i.getSelection().length+((0,r.le)(e)||(0,r.le)(e.clipboardData)?0:e.clipboardData.getData("text/plain").replace(/(\r\n|\n|\r)/gm,"").replace(/\u200B/g,"").length);if("Markdown"===i.editorMode){var u={requestType:"Paste",editorMode:i.editorMode,event:e};return setTimeout(function(){i.formatter.onSuccess(i,u)},0),void(-1===i.maxLength||c<=i.maxLength||e.preventDefault())}if(!n.cancel&&"true"===i.inputElement.contentEditable&&(-1===i.maxLength||c<=i.maxLength))if((0,r.le)(i.pasteCleanupModule)){var p={requestType:"Paste",editorMode:i.editorMode,event:e},d=null,f=!1;e&&!(0,r.le)(e.clipboardData)&&(d=e.clipboardData.getData("text/plain"),f=e.clipboardData.getData("text/html").indexOf("MsoNormal")>0);var g=e&&e.clipboardData&&e.clipboardData.items.length>0?e.clipboardData.items[0].getAsFile():null;null!==d&&i.notify(Hp,{file:g,args:e,text:d,isWordPaste:f}),setTimeout(function(){i.formatter.onSuccess(i,p)},0)}else i.notify("pasteClean",{args:e});else e.preventDefault()})},t.prototype.clipboardAction=function(e,i){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:i});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:i});break;case"paste":this.onPaste(i)}},t.prototype.destroy=function(){if(!this.isDestroyed&&this.isRendered){if((0,r.le)(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),null===this.element.offsetParent)return(0,r.le)(this.toolbarModule)||this.toolbarModule.destroy(),this.notify(Bi,{}),a.prototype.destroy.call(this),void(this.isRendered=!1);if(this.notify(Oe,{}),this.destroyDependentModules(),this.unWireEvents(),"TEXTAREA"===this.originalElement.tagName){this.element.parentElement.insertBefore(this.valueContainer,this.element),this.valueContainer.id=this.getID(),this.valueContainer.removeAttribute("name"),(0,r.og)(this.element),""!==this.originalElement.innerHTML.trim()?(this.valueContainer.value=this.originalElement.innerHTML.trim(),this.setProperties({value:(0,r.le)(this.initialValue)?null:this.initialValue},!0)):this.valueContainer.value=this.valueContainer.defaultValue,this.element=this.valueContainer;for(var e=0;e<this.originalElement.classList.length;e++)(0,r.cn)([this.element],this.originalElement.classList[e]);if(!(0,r.le)(this.cssClass)){var i=this.cssClass.split(" ");for(e=0;e<i.length;e++)(0,r.cn)([this.element],i[e])}(0,r.IV)([this.element],oV)}else""!==this.originalElement.innerHTML.trim()?(this.element.innerHTML=this.originalElement.innerHTML.trim(),this.setProperties({value:(0,r.le)(this.initialValue)?null:this.initialValue},!0)):this.element.innerHTML="";if(this.placeholder&&this.placeHolderWrapper&&(this.placeHolderWrapper=null),!(0,r.le)(this.cssClass)){var s=this.cssClass.split(" ");for(e=0;e<s.length;e++)""!==s[e].trim()&&(0,r.IV)([this.element],s[e])}this.removeHtmlAttributes(),this.removeAttributes(),a.prototype.destroy.call(this),this.isRendered=!1}},t.prototype.removeHtmlAttributes=function(){if(this.htmlAttributes)for(var e=Object.keys(this.htmlAttributes),i=0;i<e.length&&this.element.hasAttribute(e[i]);i++)this.element.removeAttribute(e[i])},t.prototype.removeAttributes=function(){this.enabled||(0,r.IV)([this.element],Ik),this.enableRtl&&(0,r.IV)([this.element],Wc),this.readonly&&(0,r.IV)([this.element],hm),""!==this.element.style.width&&""===this.originalElement.style.width&&this.element.style.removeProperty("width"),""!==this.element.style.height&&""===this.originalElement.style.height&&this.element.style.removeProperty("height"),this.element.removeAttribute("aria-disabled"),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex")},t.prototype.destroyDependentModules=function(){this.renderModule.destroy(),this.formatter.editorManager.undoRedoManager.destroy(),this.sourceCodeModule.destroy()},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.getText=function(){return this.contentModule.getText()},t.prototype.getSelectedHtml=function(){var i=this.createElement("div"),s=this.contentModule.getDocument().getSelection();if(s.rangeCount>0){var n=s.getRangeAt(0).cloneContents();i.appendChild(n)}return i.innerHTML},t.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var e=this.getRange(),i="#text"===e.endContainer.nodeName?e.endContainer.parentElement:e.endContainer,s=e.getClientRects()[0].left,n=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(s,n,i)}},t.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},t.prototype.getModuleName=function(){return"richtexteditor"},t.prototype.onPropertyChanged=function(e,i){for(var s=0,n=Object.keys(e);s<n.length;s++){var o=n[s];switch(o){case"enterKey":case"value":var l=void 0;l=this.serializeValue(l="enterKey"===o?null===this.value||"<div><br></div>"===this.value||"<p><br></p>"===this.value||"<br>"===this.value?null:this.value:e[o]);var h="HTML"===this.editorMode?fC(l,this):l;(!(0,r.le)(l)&&""!==l||"enterKey"===o)&&this.setProperties({value:this.enableHtmlEncode?this.encode(io(h)):h},!0),this.updatePanelValue(),this.inputElement&&this.notify(Fg,{}),this.setPlaceHolder(),this.notify(tm,{module:"XhtmlValidation",newProp:e,oldProp:i}),this.enableXhtml&&this.setProperties({value:this.getXhtml()},!0),this.showCharCount&&this.countModule.refresh(),this.addAudioVideoWrapper();break;case"valueTemplate":this.setValue(!0),this.showCharCount&&this.countModule.refresh();break;case"width":this.setWidth(e[o]),this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.toolbarModule.refreshToolbarOverflow(),this.resizeHandler());break;case"height":this.setHeight(e[o]),this.setContentHeight(),this.autoResize();break;case"readonly":this.setReadOnly(!1);break;case"cssClass":this.element.classList.remove(i[o]),this.setCssClass(e[o]),this.notify(zi,{cssClass:e[o],oldCssClass:i[o]});break;case"enabled":this.setEnable();break;case"enableRtl":this.updateRTL();break;case"placeholder":this.placeholder=e[o],this.setPlaceHolder();break;case"htmlAttributes":sA(this.htmlAttributes,this,!1,!1);break;case"iframeSettings":var c=i[o];if(c.resources){var p=this.contentModule.getDocument().querySelector("head"),d=void 0;c.resources.scripts&&(d=p.querySelectorAll("."+WF),this.removeSheets(d)),c.resources.styles&&(d=p.querySelectorAll("."+UF),this.removeSheets(d))}this.setIframeSettings();break;case"locale":a.prototype.refresh.call(this);break;case"inlineMode":this.notify(hs,{module:"quickToolbar",newProp:e,oldProp:i}),this.setContentHeight();break;case"toolbarSettings":this.notify(hs,{module:"toolbar",newProp:e,oldProp:i}),this.setContentHeight();break;case"maxLength":this.showCharCount&&this.countModule.refresh();break;case"showCharCount":e[o]&&this.countModule?this.countModule.renderCount():!1===e[o]&&this.countModule&&this.countModule.destroy();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify(yC,{newProp:e,oldProp:i});break;case"enableXhtml":this.notify(tm,{module:"XhtmlValidation",newProp:e,oldProp:i});break;case"quickToolbarSettings":e.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent(),this.notify(hs,{newProp:e,oldProp:i});break;case"formatPainterSettings":this.formatter.editorManager.observer.notify(yC,{module:"formatPainter",newProp:e});break;default:this.notify(hs,{newProp:e,oldProp:i})}}},t.prototype.updateValueData=function(){this.enableHtmlEncode?this.setProperties({value:this.encode(io(this.inputElement.innerHTML))},!0):this.setProperties({value:/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:io(this.inputElement.innerHTML)})},t.prototype.removeSheets=function(e){var i;for(i=0;i<e.length;i++)(0,r.og)(e[i])},t.prototype.updatePanelValue=function(){var e=this.value;e=this.enableHtmlEncode&&this.value?io(e):e;var i=this.element.querySelector("."+Sh);e?(i&&"block"===i.style.display&&(i.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.replace("&amp;","&").trim()!==e.trim()?this.inputElement.innerHTML=e:"Markdown"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(i&&"block"===i.style.display&&(i.value=""),"HTML"===this.editorMode?"DIV"===this.enterKey?this.inputElement.innerHTML="<div><br/></div>":"BR"===this.enterKey?this.inputElement.innerHTML="<br/>":(this.inputElement.innerHTML="<p><br/></p>",""===e&&this.formatter&&this.inputElement&&this.formatter.editorManager.nodeSelection.setCursorPoint(this.contentModule.getDocument(),this.inputElement.firstElementChild,this.inputElement.firstElementChild.childElementCount)):this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule.refresh()},t.prototype.setHeight=function(e){this.element.style.height="auto"!==e?(0,r.Ac)(e):"auto","Expand"===this.toolbarSettings.type&&("string"==typeof this.height&&this.height.indexOf("px")>-1||"number"==typeof this.height)?this.element.classList.add(fV):this.element.classList.remove(fV)},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderWrapper||(this.placeHolderWrapper=this.createElement("span",{className:"rte-placeholder e-rte-placeholder "+this.cssClass}),this.inputElement&&this.inputElement.parentElement.insertBefore(this.placeHolderWrapper,this.inputElement),(0,r.Y4)(this.placeHolderWrapper,{style:"font-size: 14px; margin-left: 0px; margin-right: 0px;"})),this.placeHolderWrapper.innerHTML=this.placeholder,this.placeHolderWrapper.style.display=!(0===this.inputElement.textContent.length&&this.inputElement.childNodes.length<2)||(0,r.le)(this.inputElement.firstChild)||"BR"!==this.inputElement.firstChild.nodeName&&("P"!==this.inputElement.firstChild.nodeName&&"DIV"!==this.inputElement.firstChild.nodeName||(0,r.le)(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName)?"none":"block"):this.inputElement.setAttribute("placeholder",this.placeholder)),this.placeholder&&this.iframeSettings.enable&&(!(0===this.inputElement.textContent.length&&this.inputElement.childNodes.length<2)||(0,r.le)(this.inputElement.firstChild)||"BR"!==this.inputElement.firstChild.nodeName&&("P"!==this.inputElement.firstChild.nodeName&&"DIV"!==this.inputElement.firstChild.nodeName||(0,r.le)(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName)?(0,r.IV)([this.inputElement],"e-rte-placeholder"):((0,r.cn)([this.inputElement],"e-rte-placeholder"),this.inputElement.setAttribute("placeholder",this.placeholder)))},t.prototype.setWidth=function(e){"auto"!==e?(0,r.V7)(this.element,{width:(0,r.Ac)(this.width)}):this.element.style.width="auto"},t.prototype.setCssClass=function(e){if(!(0,r.le)(e))for(var i=e.split(" "),s=0;s<i.length;s++)""!==i[s].trim()&&this.element.classList.add(i[s])},t.prototype.updateRTL=function(){this.notify(el,{enableRtl:this.enableRtl}),this.enableRtl?(this.element.classList.add(Wc),this.inputElement.classList.add(Wc)):(this.element.classList.remove(Wc),this.inputElement.classList.remove(Wc))},t.prototype.updateReadOnly=function(){this.notify(em,{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?(this.unbindEvents(),this.unWireEvents()):this.enabled&&this.wireEvents())},t.prototype.print=function(){var i,e=this;this.trigger(dr,{element:this.inputElement,requestType:"print",cancel:!1},function(n){i=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===r.AR.info.name&&i.resizeTo(screen.availWidth,screen.availHeight),i=(0,r.S0)(e.inputElement,i),n.cancel||e.trigger(ga,{requestType:"print"})})},t.prototype.refreshUI=function(){this.renderModule.refresh()},t.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},t.prototype.enableToolbarItem=function(e,i){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!0,i)},t.prototype.disableToolbarItem=function(e,i){this.toolbarModule.enableTBarItems(this.getBaseToolbarObject(),e,!1,i)},t.prototype.removeToolbarItem=function(e){this.toolbarModule.removeTBarItems(e)},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.contentModule.getDocument())},t.prototype.initializeServices=function(){this.serviceLocator.register("rendererFactory",new EV),this.serviceLocator.register("rteLocale",this.localeObj=new r.E7(this.getModuleName(),iK,this.locale)),this.serviceLocator.register("dialogRenderObject",new FX(this))},t.prototype.RTERender=function(){var e=this.serviceLocator.getService("rendererFactory");this.contentModule=e.getRenderer(Fe.Content),this.fullScreenModule=new kX(this),this.enterKeyModule=new aQ(this),this.renderModule.render(),this.inputElement=this.contentModule.getEditPanel(),this.setHeight(this.height),sA(this.htmlAttributes,this,!1,!0),this.iframeSettings&&this.setIframeSettings(),this.setCssClass(this.cssClass),this.updateEnable(),this.setPlaceHolder(),this.updateRTL(),this.updateReadOnly(),this.updatePanelValue(),this.enableHtmlEncode&&!(0,r.le)(this.value)&&this.setProperties({value:this.encode(io(this.value))})},t.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var e=this.iframeSettings.resources.styles;this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,this.iframeSettings.resources.scripts),this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e)}this.iframeSettings.attributes&&sA(this.iframeSettings.attributes,this,!0,!1)},t.prototype.InjectSheet=function(e,i){try{if(i&&i.length>0)for(var n=this.contentModule.getDocument().querySelector("head"),o=0;o<i.length;o++)if(e){var l=this.createScriptElement();l.src=i[o],n.appendChild(l)}else{var h=this.createStyleElement();h.href=i[o],n.appendChild(h)}}catch(c){return}},t.prototype.createScriptElement=function(){var e=this.createElement("script",{className:WF});return e.type="text/javascript",e},t.prototype.createStyleElement=function(){var e=this.createElement("link",{className:UF});return e.rel="stylesheet",e},t.prototype.setValue=function(e){var i=this;if(this.valueTemplate){var s=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);if("string"==typeof this.valueTemplate&&s.test(this.valueTemplate))this.setProperties({value:this.valueTemplate});else{var n=(0,r.MY)(this.valueTemplate)("",this,"valueTemplate");if("string"!=typeof this.valueTemplate&&this.isReact){this.displayTempElem=this.createElement("div");for(var o=0;o<n.length;o++)(0,r.R3)([n[o]],this.displayTempElem);this.renderTemplates(function(){i.inputElement.innerHTML=i.displayTempElem.childNodes[0].innerHTML,i.setProperties({value:i.inputElement.innerHTML.trim()})})}else{var h=this.element;for(e&&(this.inputElement.innerHTML="",h=this.inputElement),o=0;o<n.length;o++)(0,r.R3)([n[o]],h);this.setProperties({value:h.innerHTML.trim()}),this.renderReactTemplates()}}}else{var c=!(0,r.le)(this.element.innerHTML)&&this.element.innerHTML.replace(/<(\/?|\!?)(!--!--)>/g,"").trim();""!==c&&this.setProperties("TEXTAREA"===this.element.tagName?{value:io(c)}:{value:c})}},t.prototype.renderTemplates=function(e){this.renderReactTemplates(e)},t.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},t.prototype.getInsertImgMaxWidth=function(){var e=this.insertImageSettings.maxWidth,n=this.contentModule.getEditPanel(),o=window.getComputedStyle(n),l=n.offsetWidth-(14+parseFloat(o.paddingLeft.split("px")[0])+parseFloat(o.paddingRight.split("px")[0])+parseFloat(o.marginLeft.split("px")[0])+parseFloat(o.marginRight.split("px")[0]));return(0,r.le)(e)?l:e},t.prototype.getInsertVidMaxWidth=function(){var e=this.insertVideoSettings.maxWidth,n=this.contentModule.getEditPanel(),o=window.getComputedStyle(n),l=n.offsetWidth-(14+parseFloat(o.paddingLeft.split("px")[0])+parseFloat(o.paddingRight.split("px")[0])+parseFloat(o.marginLeft.split("px")[0])+parseFloat(o.marginRight.split("px")[0]));return(0,r.le)(e)?l:e},t.prototype.setContentHeight=function(e,i){var s,o,n=0,l="string"==typeof this.height&&this.height.indexOf("%")>-1,h=this.sourceCodeModule.getPanel()&&"block"===this.sourceCodeModule.getPanel().parentElement.style.display?this.sourceCodeModule.getPanel().parentElement:this.contentModule.getPanel(),c=this.element.offsetHeight;0===c&&"auto"!==this.height&&!this.getToolbar()&&(c=parseInt(this.height,10),l&&(o=this.height));var u=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,p=this.element.querySelector(".e-resize-handle"),d=this.enableResize?(0,r.le)(p)?0:p.offsetHeight+8:0,f=this.getToolbar()?this.toolbarModule.getExpandTBarPopHeight():0;if(this.toolbarSettings.type===tn.Expand&&i?(s="auto"===this.height&&0===d?"auto":c-(u+f+d)+"px",n=this.toolbarSettings.enableFloating?0:f):s="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")||this.isResizeInitialized?l&&o?o:c-(u+d)+"px":"auto",("windowResize"!==e||l)&&(this.iframeSettings.enable?"auto"!==s&&(0,r.V7)(h,{height:s,marginTop:n+"px"}):("windowResize"===e&&l&&(s=parseInt(s,10)-2+"px"),(0,r.V7)(h,{height:s,marginTop:n+"px"}))),this.iframeSettings.enable&&"sourceCode"===e){var g=(0,r.Ys)(".e-rte-content",this.element);(0,r.V7)(g,{height:s,marginTop:n+"px"})}if(this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable){var m=(i?u+f:u)+"px";(0,r.V7)(this.getToolbar().parentElement,{height:m})}0===d&&this.autoResize()},t.prototype.getHtml=function(){var e=this.removeResizeElement(this.contentModule.getEditPanel().innerHTML);return!this.enableXhtml||"<p><br></p>"!==e&&"<div><br></div>"!==e&&"<br>"!==e?this.serializeValue(e):null},t.prototype.getXhtml=function(){var e=this.removeResizeElement(this.value);return!(0,r.le)(e)&&this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e},t.prototype.showSourceCode=function(){this.readonly||this.notify(Vp,{})},t.prototype.getCharCount=function(){var e="Markdown"===this.editorMode?this.inputElement.value.trim():this.inputElement.textContent.trim();return"Markdown"!==this.editorMode&&-1!==e.indexOf("\u200b")?e.replace(/\u200B/g,"").length:e.length},t.prototype.showDialog=function(e){e===fr.InsertLink?this.notify(uk,{}):e===fr.InsertImage?this.notify(dk,{}):e===fr.InsertAudio?this.notify("showAudioDialog",{}):e===fr.InsertVideo?this.notify("showVideoDialog",{}):e===fr.InsertTable&&this.notify("showTableDialog",{})},t.prototype.closeDialog=function(e){e===fr.InsertLink?this.notify(pk,{}):e===fr.InsertImage?this.notify(mk,{}):e===fr.InsertAudio?this.notify("closeAudioDialog",{}):e===fr.InsertVideo?this.notify("closeVideoDialog",{}):e===fr.InsertTable&&this.notify("closeTableDialog",{})},t.prototype.getBaseToolbarObject=function(){return!this.inlineMode.enable||r.AR.isDevice&&!di()?this.toolbarModule&&this.toolbarModule.getBaseToolbar():this.quickToolbarModule&&this.quickToolbarModule.getInlineBaseToolbar()},t.prototype.getToolbar=function(){return this.toolbarModule?this.toolbarModule.getToolbarElement():null},t.prototype.getToolbarElement=function(){return this.toolbarModule&&this.toolbarModule.getToolbarElement()},t.prototype.getID=function(){return"TEXTAREA"===this.originalElement.tagName?this.valueContainer.id:this.element.id},t.prototype.getCssClass=function(e){return(0,r.le)(this.cssClass)?"":e?" "+this.cssClass:this.cssClass},t.prototype.mouseDownHandler=function(e){var i=e.touches?e.changedTouches[0]:e;(0,r.cn)([this.element],[Lk]),this.preventDefaultResize(e),this.notify(Wn,{args:e}),this.clickPoints={clientX:i.clientX,clientY:i.clientY}},t.prototype.preventImgResize=function(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.preventDefaultResize=function(e){"msie"===r.AR.info.name?this.contentModule.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize):"mozilla"===r.AR.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!1,"false"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!1,"false"))},t.prototype.defaultResize=function(e){"msie"===r.AR.info.name?this.contentModule.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):"mozilla"===r.AR.info.name&&(this.contentModule.getDocument().execCommand("enableObjectResizing",!0,"true"),this.contentModule.getDocument().execCommand("enableInlineTableEditing",!0,"true"))},t.prototype.resizeHandler=function(){var e=!1;document.body.contains(this.element)?(this.toolbarSettings.enable&&!this.inlineMode.enable&&(this.toolbarModule.refreshToolbarOverflow(),e=this.toolbarModule.baseToolbar.toolbarObj.element.classList.contains(Gc)),!0!==this.iframeSettings.enable&&(this.contentModule.getPanel().style.borderBottom="none"),this.setContentHeight("windowResize",e),this.notify(qg,null)):document.defaultView.removeEventListener("resize",this.onResizeHandler,!0)},t.prototype.scrollHandler=function(e){this.element&&this.notify($o,{args:e})},t.prototype.contentScrollHandler=function(e){this.notify("contentscroll",{args:e})},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,(0,r.cn)([this.element],[Lk]),this.cloneValue="HTML"===this.editorMode?"<p><br></p>"===this.inputElement.innerHTML||"<div><br></div>"===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(io(this.inputElement.innerHTML)):this.inputElement.innerHTML:""===this.inputElement.value?null:this.inputElement.value;var i=document.activeElement;if((i===this.element||i===this.getToolbarElement()||i===this.contentModule.getEditPanel()||this.iframeSettings.enable&&i===this.contentModule.getPanel()&&e.target&&!e.target.classList.contains("e-img-inner")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains("e-img-wrap")||(0,r.oq)(i,".e-rte-toolbar")===this.getToolbarElement())&&(this.contentModule.getEditPanel().focus(),!(0,r.le)(this.getToolbarElement()))){this.getToolbarElement().setAttribute("tabindex","-1");for(var s=this.getToolbarElement().querySelectorAll('[tabindex="0"]'),n=0;n<s.length;n++)s[n].setAttribute("tabindex","-1")}this.preventDefaultResize(e),this.trigger("focus",{event:e,isInteracted:0!==Object.keys(e).length}),!(0,r.le)(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),r.bi.add(document,"mousedown",this.onDocumentClick,this)}if(!this.readonly){var o=this.getCurrentFocus(e);("editArea"===o||"textArea"===o||"sourceCode"===o)&&this.resetToolbarTabIndex()}},t.prototype.getUpdatedValue=function(){var e,i=this.element.querySelector("."+Sh);return"HTML"===this.editorMode?(e="<p><br></p>"===this.inputElement.innerHTML||"<div><br></div>"===this.inputElement.innerHTML||"<br>"===this.inputElement.innerHTML?null:this.enableHtmlEncode?this.encode(io(this.removeResizeElement(this.inputElement.innerHTML))):this.inputElement.innerHTML,i&&"block"===i.style.display&&(e=i.value)):e=""===this.inputElement.value?null:this.inputElement.value,null!=e&&!this.enableHtmlEncode&&(e=this.removeResizeElement(e)),e},t.prototype.updateValueOnIdle=function(){!(0,r.le)(this.tableModule)&&!(0,r.le)(this.inputElement.querySelector(".e-table-box.e-rbox-select"))||(this.setProperties({value:this.getUpdatedValue()},!0),this.valueContainer.value=this.value,this.isValueChangeBlurhandler=!1,this.invokeChangeEvent())},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.cleanupResizeElements=function(e){var i=this.removeResizeElement(e.value);e.callBack(i)},t.prototype.removeResizeElement=function(e){var i=document.createElement("div");i.innerHTML=e;var s=i.querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box, .e-table-rhelper, .e-img-resize");if(s.length>0)for(var n=0;n<s.length;n++)(0,r.og)(s[n]);return i.innerHTML},t.prototype.updateStatus=function(e){if(!(0,r.le)(e.html)||!(0,r.le)(e.markdown)){var i=this.formatter.editorManager.undoRedoManager.getUndoStatus();this.trigger("updatedToolbarStatus",{undo:i.undo,redo:i.redo,html:e.html,markdown:e.markdown})}},t.prototype.onDocumentClick=function(e){var i=e.target,s=(0,r.oq)(i,"."+Wb);!this.element.contains(e.target)&&document!==e.target&&s!==this.element&&!(0,r.oq)(i,'[aria-owns="'+this.getID()+'"]')&&(this.isBlur=!0,this.isRTE=!1),this.notify("docClick",{args:e}),"msie"!==r.AR.info.name&&e.detail>3&&e.preventDefault()},t.prototype.blurHandler=function(e){var i=e.relatedTarget;if(i){var s=(0,r.oq)(i,"."+Wb);s&&s===this.element?(this.isBlur=!1,i===this.getToolbarElement()&&i.setAttribute("tabindex","-1")):(0,r.oq)(i,'[aria-owns="'+this.getID()+'"]')||(0,r.oq)(i,"."+Xi)?this.isBlur=!1:(this.isBlur=!0,i=null)}if(this.isBlur&&(0,r.le)(i)){(0,r.IV)([this.element],[Lk]),this.notify(Kg,{});var n=this.getUpdatedValue();this.setProperties({value:n}),this.valueContainer.value=this.value,this.notify(Qo,{args:e,documentNode:document}),this.isValueChangeBlurhandler=!0,this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,Eh(this.valueContainer,"focusout"),this.defaultResize(e),this.trigger("blur",{event:e,isInteracted:0!==Object.keys(e).length}),(0,r.le)(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),!(0,r.le)(this.placeHolderWrapper)&&this.element.querySelector("[title = Preview]")&&(this.placeHolderWrapper.style.display="none"),r.bi.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0;!this.readonly&&"outside"===this.getCurrentFocus(e)&&this.resetToolbarTabIndex()},t.prototype.contentChanged=function(){this.autoSaveOnIdle&&((0,r.le)(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},t.prototype.invokeChangeEvent=function(){var e;e=this.enableXhtml?this.getXhtml():this.value,this.value!==this.cloneValue&&(this.trigger("change",{value:e,isInteracted:this.isValueChangeBlurhandler}),this.cloneValue=this.value)},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=iu(this.element);for(var e=0,i=this.scrollParentElements;e<i.length;e++)r.bi.add(i[e],"scroll",this.scrollHandler,this);this.iframeSettings.enable||r.bi.add(this.inputElement,"scroll",this.contentScrollHandler,this)},t.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(r.bi.add(this.inputElement,"contextmenu",this.contextHandler,this),r.AR.isDevice&&(this.touchModule=new r.Xh(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},t.prototype.unWireContextEvent=function(){r.bi.remove(this.inputElement,"contextmenu",this.contextHandler),r.AR.isDevice&&this.touchModule&&this.touchModule.destroy()},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=iu(this.element);for(var e=0,i=this.scrollParentElements;e<i.length;e++)r.bi.remove(i[e],"scroll",this.scrollHandler);this.iframeSettings.enable||r.bi.remove(this.inputElement,"scroll",this.contentScrollHandler)},t.prototype.touchHandler=function(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)},t.prototype.contextHandler=function(e){var i=(0,r.oq)(e.target,"a, table, img");(!1===this.inlineMode.onSelection||!(0,r.le)(i)&&this.inputElement.contains(i)&&("IMG"===i.tagName||"TABLE"===i.tagName||"A"===i.tagName))&&e.preventDefault()},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim();this.setProperties({value:""===e?null:e})},t.prototype.autoResize=function(){var e=this;if("auto"===this.height){if("Markdown"===this.editorMode)setTimeout(function(){e.setAutoHeight(e.inputElement)},0);else if(this.iframeSettings.enable){var i=this.element.querySelector("#"+this.getID()+"_rte-view");setTimeout(function(){e.setAutoHeight(i)},100),this.inputElement.style.overflow="hidden"}}else this.inputElement.style.overflow=null},t.prototype.setAutoHeight=function(e){(0,r.le)(e)||(e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")},t.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.on(Hg,this.contentChanged,this),this.on(ck,this.updateResizeFlag,this),this.on(jb,this.updateStatus,this),this.on(Ek,this.cleanupResizeElements,this),(!this.readonly||!this.enabled)&&this.bindEvents()},t.prototype.restrict=function(e){if(this.maxLength>=0){var i="Markdown"===this.editorMode?this.contentModule.getText():e&&e.currentTarget.textContent;if(!i)return;for(var s=[8,16,17,37,38,39,40,46,65],n=void 0,o=0;o<=s.length-1;o++)if(e.which===s[o]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(n=s[o])}i.length>=this.maxLength&&-1!==this.maxLength&&e.which!==n&&e.preventDefault()}},t.prototype.bindEvents=function(){this.keyboardModule=new Gk(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:nA({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=(0,r.oq)(this.valueContainer,"form");e&&r.bi.add(e,"reset",this.resetHandler,this),r.bi.add(this.inputElement,"keyup",this.keyUp,this),r.bi.add(this.inputElement,"paste",this.onPaste,this),r.bi.add(this.inputElement,r.AR.touchEndEvent,(0,r.Ds)(this.mouseUp,30),this),r.bi.add(this.inputElement,r.AR.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on(Qi,this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(r.bi.add(this.inputElement,"focusin",this.focusHandler,this),r.bi.add(this.inputElement,"focusout",this.blurHandler,this),r.bi.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),r.bi.add(this.inputElement.ownerDocument,r.AR.touchStartEvent,this.onIframeMouseDown,this)),this.wireScrollElementsEvents()},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.currentTarget=e.target,this.notify(pr,e)},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut();break;case"tab":this.iframeSettings.enable&&(this.isBlur=!0)}e.callBack&&("copy"===e.event.action||"cut"===e.event.action||"delete"===e.event.action)&&e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.off(Hg,this.contentChanged),this.off(ck,this.updateResizeFlag),this.off(jb,this.updateStatus),this.off(Ek,this.cleanupResizeElements),(!this.readonly||!this.enabled)&&this.unbindEvents()},t.prototype.unbindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=(0,r.oq)(this.valueContainer,"form");e&&r.bi.remove(e,"reset",this.resetHandler),r.bi.remove(this.inputElement,"keyup",this.keyUp),r.bi.remove(this.inputElement,"paste",this.onPaste),r.bi.remove(this.inputElement,r.AR.touchEndEvent,(0,r.Ds)(this.mouseUp,30)),r.bi.remove(this.inputElement,r.AR.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off(Qi,this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(r.bi.remove(this.inputElement,"focusin",this.focusHandler),r.bi.remove(this.inputElement,"focusout",this.blurHandler),r.bi.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),r.bi.remove(this.inputElement.ownerDocument,r.AR.touchStartEvent,this.onIframeMouseDown)),this.unWireScrollElementsEvents()},t.prototype.getCurrentFocus=function(e){return e.target===this.inputElement&&document.activeElement===this.inputElement?"editArea":e.target===this.getToolbarElement()||!(0,r.le)(e.relatedTarget)&&(0,r.oq)(e.relatedTarget,".e-rte-toolbar")===this.getToolbarElement()?"toolbar":e.target===this.valueContainer&&document.activeElement===this.valueContainer?"textArea":!(0,r.le)(e.target)&&e.target.classList.contains(Sh)&&document.activeElement===e.target?"sourceCode":"outside"},t.prototype.resetToolbarTabIndex=function(){if(this.getToolbarElement())for(var e=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]"),i=0;i<e.length;i++)!e[i].classList.contains("e-rte-dropdown-btn")&&!e[i].classList.contains("e-insert-table-btn")&&(!e[i].hasAttribute("tabindex")||"-1"!==e[i].getAttribute("tabindex"))&&e[i].setAttribute("tabindex","-1")},he([(0,r.Zz)({},HX)],t.prototype,"toolbarSettings",void 0),he([(0,r.Zz)({},UX)],t.prototype,"quickToolbarSettings",void 0),he([(0,r.Zz)({},YX)],t.prototype,"pasteCleanupSettings",void 0),he([(0,r.Zz)({},GX)],t.prototype,"formatPainterSettings",void 0),he([(0,r.Zz)({},ZX)],t.prototype,"emojiPickerSettings",void 0),he([(0,r.Zz)({},sQ)],t.prototype,"iframeSettings",void 0),he([(0,r.Zz)({},zX)],t.prototype,"insertImageSettings",void 0),he([(0,r.Zz)({},jX)],t.prototype,"insertAudioSettings",void 0),he([(0,r.Zz)({},qX)],t.prototype,"insertVideoSettings",void 0),he([(0,r.Zz)({},WX)],t.prototype,"tableSettings",void 0),he([(0,r.Z9)(0)],t.prototype,"floatingToolbarOffset",void 0),he([(0,r.Zz)({},rQ)],t.prototype,"inlineMode",void 0),he([(0,r.Zz)({},_X)],t.prototype,"fileManagerSettings",void 0),he([(0,r.Z9)("100%")],t.prototype,"width",void 0),he([(0,r.Z9)(!1)],t.prototype,"enablePersistence",void 0),he([(0,r.Z9)(!0)],t.prototype,"showTooltip",void 0),he([(0,r.Z9)(!1)],t.prototype,"enableResize",void 0),he([(0,r.Z9)({})],t.prototype,"htmlAttributes",void 0),he([(0,r.Z9)(null)],t.prototype,"placeholder",void 0),he([(0,r.Z9)(!1)],t.prototype,"autoSaveOnIdle",void 0),he([(0,r.Z9)(!1)],t.prototype,"readonly",void 0),he([(0,r.Z9)(!0)],t.prototype,"enabled",void 0),he([(0,r.Z9)(!0)],t.prototype,"enableHtmlSanitizer",void 0),he([(0,r.Z9)(!1)],t.prototype,"enableHtmlEncode",void 0),he([(0,r.Z9)(!1)],t.prototype,"enableXhtml",void 0),he([(0,r.Z9)("auto")],t.prototype,"height",void 0),he([(0,r.Z9)(null)],t.prototype,"cssClass",void 0),he([(0,r.Z9)(null)],t.prototype,"value",void 0),he([(0,r.Z9)("P")],t.prototype,"enterKey",void 0),he([(0,r.Z9)("BR")],t.prototype,"shiftEnterKey",void 0),he([(0,r.Z9)(30)],t.prototype,"undoRedoSteps",void 0),he([(0,r.Z9)(300)],t.prototype,"undoRedoTimer",void 0),he([(0,r.Z9)("HTML")],t.prototype,"editorMode",void 0),he([(0,r.Z9)(null)],t.prototype,"keyConfig",void 0),he([(0,r.Z9)(!1)],t.prototype,"showCharCount",void 0),he([(0,r.Z9)(!1)],t.prototype,"enableTabKey",void 0),he([(0,r.Z9)(!1)],t.prototype,"enableAutoUrl",void 0),he([(0,r.Z9)(-1)],t.prototype,"maxLength",void 0),he([(0,r.Zz)({},QX)],t.prototype,"format",void 0),he([(0,r.Zz)({},eQ)],t.prototype,"numberFormatList",void 0),he([(0,r.Zz)({},tQ)],t.prototype,"bulletFormatList",void 0),he([(0,r.Zz)({},KX)],t.prototype,"fontFamily",void 0),he([(0,r.Zz)({},XX)],t.prototype,"fontSize",void 0),he([(0,r.Zz)({},JX)],t.prototype,"fontColor",void 0),he([(0,r.Zz)({},$X)],t.prototype,"backgroundColor",void 0),he([(0,r.Z9)(null)],t.prototype,"valueTemplate",void 0),he([(0,r.Z9)(1e4)],t.prototype,"saveInterval",void 0),he([(0,r.ju)()],t.prototype,"actionBegin",void 0),he([(0,r.ju)()],t.prototype,"actionComplete",void 0),he([(0,r.ju)()],t.prototype,"beforeDialogOpen",void 0),he([(0,r.ju)()],t.prototype,"dialogOpen",void 0),he([(0,r.ju)()],t.prototype,"beforeDialogClose",void 0),he([(0,r.ju)()],t.prototype,"dialogClose",void 0),he([(0,r.ju)()],t.prototype,"beforeQuickToolbarOpen",void 0),he([(0,r.ju)()],t.prototype,"quickToolbarOpen",void 0),he([(0,r.ju)()],t.prototype,"quickToolbarClose",void 0),he([(0,r.ju)()],t.prototype,"toolbarStatusUpdate",void 0),he([(0,r.ju)()],t.prototype,"updatedToolbarStatus",void 0),he([(0,r.ju)()],t.prototype,"imageSelected",void 0),he([(0,r.ju)()],t.prototype,"beforeImageUpload",void 0),he([(0,r.ju)()],t.prototype,"imageUploading",void 0),he([(0,r.ju)()],t.prototype,"imageUploadSuccess",void 0),he([(0,r.ju)()],t.prototype,"imageUploadFailed",void 0),he([(0,r.ju)()],t.prototype,"imageRemoving",void 0),he([(0,r.ju)()],t.prototype,"afterImageDelete",void 0),he([(0,r.ju)()],t.prototype,"fileSelected",void 0),he([(0,r.ju)()],t.prototype,"beforeFileUpload",void 0),he([(0,r.ju)()],t.prototype,"fileUploading",void 0),he([(0,r.ju)()],t.prototype,"fileUploadSuccess",void 0),he([(0,r.ju)()],t.prototype,"fileUploadFailed",void 0),he([(0,r.ju)()],t.prototype,"fileRemoving",void 0),he([(0,r.ju)()],t.prototype,"afterMediaDelete",void 0),he([(0,r.ju)()],t.prototype,"created",void 0),he([(0,r.ju)()],t.prototype,"destroyed",void 0),he([(0,r.ju)()],t.prototype,"beforeSanitizeHtml",void 0),he([(0,r.ju)()],t.prototype,"blur",void 0),he([(0,r.ju)()],t.prototype,"toolbarClick",void 0),he([(0,r.ju)()],t.prototype,"focus",void 0),he([(0,r.ju)()],t.prototype,"change",void 0),he([(0,r.ju)()],t.prototype,"resizing",void 0),he([(0,r.ju)()],t.prototype,"resizeStart",void 0),he([(0,r.ju)()],t.prototype,"resizeStop",void 0),he([(0,r.ju)()],t.prototype,"beforePasteCleanup",void 0),he([(0,r.ju)()],t.prototype,"afterPasteCleanup",void 0),he([(0,r.ju)()],t.prototype,"beforeImageDrop",void 0),he([(0,r.Z9)(null)],t.prototype,"formatter",void 0),he([r.Zl],t)}(r.wA);const hQ=["valueTemplate"];var rA;const cQ=["actionBegin","actionComplete","afterImageDelete","afterMediaDelete","afterPasteCleanup","beforeDialogClose","beforeDialogOpen","beforeFileUpload","beforeImageDrop","beforeImageUpload","beforePasteCleanup","beforeQuickToolbarOpen","beforeSanitizeHtml","blur","change","created","destroyed","dialogClose","dialogOpen","fileRemoving","fileSelected","fileUploadFailed","fileUploadSuccess","fileUploading","focus","imageRemoving","imageSelected","imageUploadFailed","imageUploadSuccess","imageUploading","quickToolbarClose","quickToolbarOpen","resizeStart","resizeStop","resizing","toolbarClick","toolbarStatusUpdate","updatedToolbarStatus","valueChange"],uQ=["value"];let ol=rA=class extends lQ{constructor(t,e,i,s,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=s,this.cdr=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let o=this.injector.get("RichTextEditorToolbar");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorLink");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorImage");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorAudio");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorVideo");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorCount");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorQuickToolbar");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorHtmlEditor");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorMarkdownEditor");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorTable");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorPasteCleanup");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorResize");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorFileManager");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorFormatPainter");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}try{let o=this.injector.get("RichTextEditorEmojiPicker");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch(o){}this.registerEvents(cQ),this.addTwoWay.call(this,uQ),function(a,t,e){for(var i="currentInstance".replace(/\[/g,".").replace(/\]/g,"").split("."),s=e||{},n=0;n<i.length;n++){var o=i[n];n+1===i.length?s[o]=void 0===t?{}:t:void 0===s[o]&&(s[o]={}),s=s[o]}}(0,this,this.viewContainerRef),this.formContext=new IA,this.formCompContext=new EA}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};ol.\u0275fac=function(t){return new(t||ol)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(w.s_b),w.Y36(w.zs3),w.Y36(w.sBO))},ol.\u0275cmp=w.Xpm({type:ol,selectors:[["ejs-richtexteditor"]],contentQueries:function(t,e,i){if(1&t&&w.Suo(i,hQ,5),2&t){let s;w.iGM(s=w.CRH())&&(e.valueTemplate=s.first)}},inputs:{autoSaveOnIdle:"autoSaveOnIdle",backgroundColor:"backgroundColor",bulletFormatList:"bulletFormatList",cssClass:"cssClass",editorMode:"editorMode",emojiPickerSettings:"emojiPickerSettings",enableAutoUrl:"enableAutoUrl",enableHtmlEncode:"enableHtmlEncode",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableResize:"enableResize",enableRtl:"enableRtl",enableTabKey:"enableTabKey",enableXhtml:"enableXhtml",enabled:"enabled",enterKey:"enterKey",fileManagerSettings:"fileManagerSettings",floatingToolbarOffset:"floatingToolbarOffset",fontColor:"fontColor",fontFamily:"fontFamily",fontSize:"fontSize",format:"format",formatPainterSettings:"formatPainterSettings",formatter:"formatter",height:"height",htmlAttributes:"htmlAttributes",iframeSettings:"iframeSettings",inlineMode:"inlineMode",insertAudioSettings:"insertAudioSettings",insertImageSettings:"insertImageSettings",insertVideoSettings:"insertVideoSettings",keyConfig:"keyConfig",locale:"locale",maxLength:"maxLength",numberFormatList:"numberFormatList",pasteCleanupSettings:"pasteCleanupSettings",placeholder:"placeholder",quickToolbarSettings:"quickToolbarSettings",readonly:"readonly",saveInterval:"saveInterval",shiftEnterKey:"shiftEnterKey",showCharCount:"showCharCount",showTooltip:"showTooltip",tableSettings:"tableSettings",toolbarSettings:"toolbarSettings",undoRedoSteps:"undoRedoSteps",undoRedoTimer:"undoRedoTimer",value:"value",valueTemplate:"valueTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",afterImageDelete:"afterImageDelete",afterMediaDelete:"afterMediaDelete",afterPasteCleanup:"afterPasteCleanup",beforeDialogClose:"beforeDialogClose",beforeDialogOpen:"beforeDialogOpen",beforeFileUpload:"beforeFileUpload",beforeImageDrop:"beforeImageDrop",beforeImageUpload:"beforeImageUpload",beforePasteCleanup:"beforePasteCleanup",beforeQuickToolbarOpen:"beforeQuickToolbarOpen",beforeSanitizeHtml:"beforeSanitizeHtml",blur:"blur",change:"change",created:"created",destroyed:"destroyed",dialogClose:"dialogClose",dialogOpen:"dialogOpen",fileRemoving:"fileRemoving",fileSelected:"fileSelected",fileUploadFailed:"fileUploadFailed",fileUploadSuccess:"fileUploadSuccess",fileUploading:"fileUploading",focus:"focus",imageRemoving:"imageRemoving",imageSelected:"imageSelected",imageUploadFailed:"imageUploadFailed",imageUploadSuccess:"imageUploadSuccess",imageUploading:"imageUploading",quickToolbarClose:"quickToolbarClose",quickToolbarOpen:"quickToolbarOpen",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",toolbarClick:"toolbarClick",toolbarStatusUpdate:"toolbarStatusUpdate",updatedToolbarStatus:"updatedToolbarStatus",valueChange:"valueChange"},features:[w._Bn([{provide:zt.JU,useExisting:(0,w.Gpc)(()=>rA),multi:!0}]),w.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),yA([function(t,e){var i={set:JH(e),get:$H(e,void 0),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i)}],ol.prototype,"valueTemplate",void 0),ol=rA=yA([function(a){return function(t){!function(a,t){t.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){(!a.prototype.hasOwnProperty(i)||e.isFormBase&&"constructor"!==i)&&(a.prototype[i]=e.prototype[i])})})}(t,a)}}([EA,IA])],ol);let pQ=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=w.oAB({type:a}),a.\u0275inj=w.cJS({imports:[[ya.ez]]}),a})();const bH={provide:"RichTextEditorToolbar",useValue:dK},CH={provide:"RichTextEditorLink",useValue:OX},SH={provide:"RichTextEditorImage",useValue:RX},wH={provide:"RichTextEditorHtmlEditor",useValue:EX};var vr=Je(6461),ao=Je(9490),dQ=Je(6237),aA=Je(9765),wC=Je(6682),fQ=Je(5257),oA=Je(6782),gQ=Je(9761),mQ=Je(4564),vQ=Je(8345),yQ=Je(521),bQ=Je(946);const CQ=["*"],EH=new w.OlP("MatChipRemove"),IH=new w.OlP("MatChipAvatar"),xH=new w.OlP("MatChipTrailingIcon");class SQ{constructor(t){this._elementRef=t}}const wQ=(0,yr.sb)((0,yr.pj)((0,yr.Kr)(SQ),"primary"),-1);let fm=(()=>{class a extends wQ{constructor(e,i,s,n,o,l,h,c){super(e),this._ngZone=i,this._changeDetectorRef=o,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new aA.xQ,this._onBlur=new aA.xQ,this.selectionChange=new w.vpe,this.destroyed=new w.vpe,this.removed=new w.vpe,this._addHostClassName(),this._chipRippleTarget=l.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new yr.IR(this,i,this._chipRippleTarget,s),this._chipRipple.setupTriggerEvents(e),this.rippleConfig=n||{},this._animationsDisabled="NoopAnimations"===h,this.tabIndex=null!=c&&parseInt(c)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(e){const i=(0,ao.Ig)(e);i!==this._selected&&(this._selected=i,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(e){this._value=e}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(e){this._selectable=(0,ao.Ig)(e)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(e){this._disabled=(0,ao.Ig)(e)}get removable(){return this._removable}set removable(e){this._removable=(0,ao.Ig)(e)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const e="mat-basic-chip",i=this._elementRef.nativeElement;i.hasAttribute(e)||i.tagName.toLowerCase()===e?i.classList.add(e):i.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(e=!1){return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(e){this.disabled?e.preventDefault():e.stopPropagation()}_handleKeydown(e){if(!this.disabled)switch(e.keyCode){case vr.yY:case vr.ZH:this.remove(),e.preventDefault();break;case vr.L_:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,fQ.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(e=!1){this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}return a.\u0275fac=function(e){return new(e||a)(w.Y36(w.SBq),w.Y36(w.R0b),w.Y36(yQ.t4),w.Y36(yr.Y2,8),w.Y36(w.sBO),w.Y36(ya.K0),w.Y36(dQ.Qb,8),w.$8M("tabindex"))},a.\u0275dir=w.lG2({type:a,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,i,s){if(1&e&&(w.Suo(s,IH,5),w.Suo(s,xH,5),w.Suo(s,EH,5)),2&e){let n;w.iGM(n=w.CRH())&&(i.avatar=n.first),w.iGM(n=w.CRH())&&(i.trailingIcon=n.first),w.iGM(n=w.CRH())&&(i.removeIcon=n.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(e,i){1&e&&w.NdJ("click",function(n){return i._handleClick(n)})("keydown",function(n){return i._handleKeydown(n)})("focus",function(){return i.focus()})("blur",function(){return i._blur()}),2&e&&(w.uIk("tabindex",i.disabled?null:i.tabIndex)("disabled",i.disabled||null)("aria-disabled",i.disabled.toString())("aria-selected",i.ariaSelected),w.ekj("mat-chip-selected",i.selected)("mat-chip-with-avatar",i.avatar)("mat-chip-with-trailing-icon",i.trailingIcon||i.removeIcon)("mat-chip-disabled",i.disabled)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[w.qOj]}),a})(),lA=(()=>{class a{constructor(e,i){this._parentChip=e,"BUTTON"===i.nativeElement.nodeName&&i.nativeElement.setAttribute("type","button")}_handleClick(e){const i=this._parentChip;i.removable&&!i.disabled&&i.remove(),e.stopPropagation()}}return a.\u0275fac=function(e){return new(e||a)(w.Y36(fm),w.Y36(w.SBq))},a.\u0275dir=w.lG2({type:a,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(e,i){1&e&&w.NdJ("click",function(n){return i._handleClick(n)})},features:[w._Bn([{provide:EH,useExisting:a}])]}),a})();const TH=new w.OlP("mat-chips-default-options"),xQ=(0,yr.FD)(class{constructor(a,t,e,i){this._defaultErrorStateMatcher=a,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i}});let TQ=0;class kQ{constructor(t,e){this.source=t,this.value=e}}let hA=(()=>{class a extends xQ{constructor(e,i,s,n,o,l,h){super(l,n,o,h),this._elementRef=e,this._changeDetectorRef=i,this._dir=s,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new aA.xQ,this._uid="mat-chip-list-"+TQ++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(c,u)=>c===u,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new w.vpe,this.valueChange=new w.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(e){this._multiple=(0,ao.Ig)(e),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this.writeValue(e),this._value=e}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(e){this._required=(0,ao.Ig)(e),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=(0,ao.Ig)(e),this._syncChipsState()}get selectable(){return this._selectable}set selectable(e){this._selectable=(0,ao.Ig)(e),this.chips&&this.chips.forEach(i=>i.chipListSelectable=this._selectable)}set tabIndex(e){this._userTabIndex=e,this._tabIndex=e}get chipSelectionChanges(){return(0,wC.T)(...this.chips.map(e=>e.selectionChange))}get chipFocusChanges(){return(0,wC.T)(...this.chips.map(e=>e._onFocus))}get chipBlurChanges(){return(0,wC.T)(...this.chips.map(e=>e._onBlur))}get chipRemoveChanges(){return(0,wC.T)(...this.chips.map(e=>e.destroyed))}ngAfterContentInit(){this._keyManager=new mQ.Em(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe((0,oA.R)(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.tabOut.pipe((0,oA.R)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe((0,gQ.O)(null),(0,oA.R)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new vQ.Ov(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}writeValue(e){this.chips&&this._setSelectionByValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}onContainerClick(e){this._originatesFromChip(e)||this.focus()}focus(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}_focusInput(e){this._chipInput&&this._chipInput.focus(e)}_keydown(e){const i=e.target;i&&i.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(e){return e>=0&&e<this.chips.length}_setSelectionByValue(e,i=!0){if(this._clearSelection(),this.chips.forEach(s=>s.deselect()),Array.isArray(e))e.forEach(s=>this._selectValue(s,i)),this._sortValues();else{const s=this._selectValue(e,i);s&&i&&this._keyManager.setActiveItem(s)}}_selectValue(e,i=!0){const s=this.chips.find(n=>null!=n.value&&this._compareWith(n.value,e));return s&&(i?s.selectViaInteraction():s.select(),this._selectionModel.select(s)),s}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(e){this._selectionModel.clear(),this.chips.forEach(i=>{i!==e&&i.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(e=>{e.selected&&this._selectionModel.select(e)}),this.stateChanges.next())}_propagateChanges(e){let i=null;i=Array.isArray(this.selected)?this.selected.map(s=>s.value):this.selected?this.selected.value:e,this._value=i,this.change.emit(new kQ(this,i)),this.valueChange.emit(i),this._onChange(i),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(e=>{e.source.selected?this._selectionModel.select(e.source):this._selectionModel.deselect(e.source),this.multiple||this.chips.forEach(i=>{!this._selectionModel.isSelected(i)&&i.selected&&i.deselect()}),e.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(e=>{let i=this.chips.toArray().indexOf(e.chip);this._isValidIndex(i)&&this._keyManager.updateActiveItem(i),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(e=>{const i=e.chip,s=this.chips.toArray().indexOf(e.chip);this._isValidIndex(s)&&i._hasFocus&&(this._lastDestroyedChipIndex=s)})}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-chip"))return!0;i=i.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(e=>e._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(e=>{e._chipListDisabled=this._disabled,e._chipListMultiple=this.multiple})}}return a.\u0275fac=function(e){return new(e||a)(w.Y36(w.SBq),w.Y36(w.sBO),w.Y36(bQ.Is,8),w.Y36(zt.F,8),w.Y36(zt.sg,8),w.Y36(yr.rD),w.Y36(zt.a5,10))},a.\u0275cmp=w.Xpm({type:a,selectors:[["mat-chip-list"]],contentQueries:function(e,i,s){if(1&e&&w.Suo(s,fm,5),2&e){let n;w.iGM(n=w.CRH())&&(i.chips=n)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(e,i){1&e&&w.NdJ("focus",function(){return i.focus()})("blur",function(){return i._blur()})("keydown",function(n){return i._keydown(n)}),2&e&&(w.Ikx("id",i._uid),w.uIk("tabindex",i.disabled?null:i._tabIndex)("aria-describedby",i._ariaDescribedby||null)("aria-required",i.role?i.required:null)("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-multiselectable",i.multiple)("role",i.role)("aria-orientation",i.ariaOrientation),w.ekj("mat-chip-list-disabled",i.disabled)("mat-chip-list-invalid",i.errorState)("mat-chip-list-required",i.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[w._Bn([{provide:Xc.Eo,useExisting:a}]),w.qOj],ngContentSelectors:CQ,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,i){1&e&&(w.F$t(),w.TgZ(0,"div",0),w.Hsn(1),w.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),a})(),AQ=0,cA=(()=>{class a{constructor(e,i){this._elementRef=e,this._defaultOptions=i,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new w.vpe,this.placeholder="",this.id="mat-chip-list-input-"+AQ++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement}set chipList(e){e&&(this._chipList=e,this._chipList.registerInput(this))}get addOnBlur(){return this._addOnBlur}set addOnBlur(e){this._addOnBlur=(0,ao.Ig)(e)}get disabled(){return this._disabled||this._chipList&&this._chipList.disabled}set disabled(e){this._disabled=(0,ao.Ig)(e)}get empty(){return!this.inputElement.value}ngOnChanges(){this._chipList.stateChanges.next()}ngOnDestroy(){this.chipEnd.complete()}ngAfterContentInit(){this._focusLastChipOnBackspace=this.empty}_keydown(e){if(e){if(e.keyCode===vr.Mf&&!(0,vr.Vb)(e,"shiftKey")&&this._chipList._allowFocusEscape(),e.keyCode===vr.ZH&&this._focusLastChipOnBackspace)return this._chipList._keyManager.setLastItemActive(),void e.preventDefault();this._focusLastChipOnBackspace=!1}this._emitChipEnd(e)}_keyup(e){!this._focusLastChipOnBackspace&&e.keyCode===vr.ZH&&this.empty&&(this._focusLastChipOnBackspace=!0,e.preventDefault())}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}_focus(){this.focused=!0,this._focusLastChipOnBackspace=this.empty,this._chipList.stateChanges.next()}_emitChipEnd(e){!this.inputElement.value&&!!e&&this._chipList._keydown(e),(!e||this._isSeparatorKey(e))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),null==e||e.preventDefault())}_onInput(){this._chipList.stateChanges.next()}focus(e){this.inputElement.focus(e)}clear(){this.inputElement.value="",this._focusLastChipOnBackspace=!0}_isSeparatorKey(e){return!(0,vr.Vb)(e)&&new Set(this.separatorKeyCodes).has(e.keyCode)}}return a.\u0275fac=function(e){return new(e||a)(w.Y36(w.SBq),w.Y36(TH))},a.\u0275dir=w.lG2({type:a,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(e,i){1&e&&w.NdJ("keydown",function(n){return i._keydown(n)})("keyup",function(n){return i._keyup(n)})("blur",function(){return i._blur()})("focus",function(){return i._focus()})("input",function(){return i._onInput()}),2&e&&(w.Ikx("id",i.id),w.uIk("disabled",i.disabled||null)("placeholder",i.placeholder||null)("aria-invalid",i._chipList&&i._chipList.ngControl?i._chipList.ngControl.invalid:null)("aria-required",i._chipList&&i._chipList.required||null))},inputs:{separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[w.TTD]}),a})();const DQ={separatorKeyCodes:[vr.K5]};let LQ=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=w.oAB({type:a}),a.\u0275inj=w.cJS({providers:[yr.rD,{provide:TH,useValue:DQ}],imports:[[yr.BQ]]}),a})();var kH=Je(4885);const OQ=["defaultRTE"];function RQ(a,t){if(1&a&&(w.TgZ(0,"mat-option",34),w._uU(1),w.qZA()),2&a){const e=t.$implicit;w.Q6J("value",e.name),w.xp6(1),w.Oqu(e.name||"")}}function PQ(a,t){if(1&a){const e=w.EpF();w.TgZ(0,"div",35),w.TgZ(1,"a",36),w._UZ(2,"img",37),w.qZA(),w.TgZ(3,"button",38),w.NdJ("click",function(s){const o=w.CHM(e).index,l=w.oxw();return s.preventDefault(),l.removeUploadedFile(o,"images    ")}),w.O4$(),w.TgZ(4,"svg",39),w._UZ(5,"circle",40),w._UZ(6,"path",41),w.qZA(),w.qZA(),w.qZA()}if(2&a){const e=t.$implicit;w.xp6(1),w.Q6J("href",e.image,w.LSH),w.xp6(1),w.Q6J("src",e,w.LSH)}}function MQ(a,t){1&a&&(w.TgZ(0,"mat-icon",44),w._uU(1,"cancel"),w.qZA())}function BQ(a,t){if(1&a){const e=w.EpF();w.TgZ(0,"mat-chip",42),w.NdJ("removed",function(){const n=w.CHM(e).$implicit;return w.oxw().remove(n)}),w._uU(1),w.YNc(2,MQ,2,0,"mat-icon",43),w.qZA()}if(2&a){const e=t.$implicit,i=w.oxw();w.Q6J("selectable",i.selectable)("removable",i.removable),w.xp6(1),w.hij(" ",e.name," "),w.xp6(1),w.Q6J("ngIf",i.removable)}}function NQ(a,t){1&a&&(w.TgZ(0,"span"),w._uU(1," Save"),w.qZA())}function FQ(a,t){1&a&&w._UZ(0,"mat-progress-spinner",45),2&a&&w.Q6J("diameter",24)("mode","indeterminate")}const HQ=["defaultRTE"];function zQ(a,t){if(1&a&&(w.TgZ(0,"mat-option",33),w._uU(1),w.qZA()),2&a){const e=t.$implicit;w.Q6J("value",e.name),w.xp6(1),w.Oqu(e.name||"")}}function jQ(a,t){1&a&&(w.TgZ(0,"mat-icon",36),w._uU(1,"cancel"),w.qZA())}function qQ(a,t){if(1&a){const e=w.EpF();w.TgZ(0,"mat-chip",34),w.NdJ("removed",function(){const n=w.CHM(e).$implicit;return w.oxw().remove(n)}),w._uU(1),w.YNc(2,jQ,2,0,"mat-icon",35),w.qZA()}if(2&a){const e=t.$implicit,i=w.oxw();w.Q6J("selectable",i.selectable)("removable",i.removable),w.xp6(1),w.hij(" ",e.name," "),w.xp6(1),w.Q6J("ngIf",i.removable)}}function _Q(a,t){if(1&a){const e=w.EpF();w.TgZ(0,"div",37),w.TgZ(1,"a",38),w._UZ(2,"img",39),w.qZA(),w.TgZ(3,"button",40),w.NdJ("click",function(s){const o=w.CHM(e).index,l=w.oxw();return s.preventDefault(),l.removeUploadedFile(o,"images    ")}),w.O4$(),w.TgZ(4,"svg",41),w._UZ(5,"circle",42),w._UZ(6,"path",43),w.qZA(),w.qZA(),w.qZA()}if(2&a){const e=t.$implicit;w.xp6(1),w.Q6J("href",e.image,w.LSH),w.xp6(1),w.Q6J("src",e,w.LSH)}}function WQ(a,t){1&a&&(w.TgZ(0,"span"),w._uU(1," Save"),w.qZA())}function UQ(a,t){1&a&&w._UZ(0,"mat-progress-spinner",44),2&a&&w.Q6J("diameter",24)("mode","indeterminate")}const GQ=[{path:"list",component:qH},{path:"add-news",component:(()=>{class a{constructor(e,i,s,n){this._formBuilder=e,this._router=i,this._commonService=s,this._newsService=n,this.loading=!1,this.categoryList$=[{name:"WHATSNEW"},{name:"HOTPROESS"},{name:"ARCHIVES"}],this.images=[],this.videos=[],this.tools={items:["Undo","Redo","|","Bold","Italic","Underline","StrikeThrough","|","FontName","FontSize","FontColor","BackgroundColor","|","SubScript","SuperScript","|","LowerCase","UpperCase","|","Formats","Alignments","|","OrderedList","UnorderedList","|","Indent","Outdent","|","CreateLink","Image","|","ClearFormat","Print","SourceCode","|","FullScreen"]},this.iframe={enable:!0},this.height=500,this.quickTools={image:["Replace","Align","Caption","Remove","InsertLink","-","Display","AltText","Dimension"]},this.visible=!0,this.removable=!0,this.separatorKeysCodes=[vr.K5,vr.OC],this.tags=[]}ngOnInit(){this.form=this._formBuilder.group({author:[null,[zt.kI.required]],category:[null,[zt.kI.required]],article:[null,[zt.kI.required]],title:[null,[zt.kI.required]],tags:[null,[zt.kI.required]]})}onCreate(){}add(e){const i=e.input;if(i){const n=e.value;(n||"").trim()&&this.tags.push({name:n.trim()}),i&&(this.form.value.tags="")}}remove(e){const i=this.tags.indexOf(e);i>=0&&this.tags.splice(i,1)}getCategories(){this._commonService.getCategoryList({}).subscribe(e=>{this.categoryList$=e?[...e.userCategory]:[]},e=>{})}addNews(){if(console.log("called"),this.loading=!0,console.log(this.form.value,this.rteObj,this.images,this.tags),this.form.invalid)return void(this.loading=!1);if(!this.images.length||!this.tags.length)return this._commonService.error("All fields are required."),void(this.loading=!1);let e={tags:this.tags.map(i=>i.name).toString()};this.images.length&&(e.image=this.images.toString()),this._newsService.addNews(Object.assign(Object.assign({},this.form.value),e)).subscribe(i=>{this.loading=!1,this._router.navigate(["/news/list"])},i=>{this.loading=!1,this._commonService.error(i.error.message)})}onFileChange(e,i){let s=e.target.files?Object.values(e.target.files):e.dataTransfer.files,n=[...s];!(null==s?void 0:s.length)||Array.from(n).forEach((o,l)=>{this.saveFiles(s[l],i)})}saveFiles(e,i){var s=this;return(0,mA.Z)(function*(){let n=e;if(console.log(n),"images"===i)if(s._commonService.checkFileSizeAndType(n,1)){let o=new FormData;o.append("file",n),s._newsService.upload(o).subscribe({next:l=>{s.images.push(null==l?void 0:l.Location)},error:l=>{}})}else s._commonService.error("Please upload image of file type png, jpg or jpeg and with size less than 5MB !");else if(s._commonService.checkVideoSizeAndType(n)){let o=new FormData;o.append("file",n),s._newsService.upload(o).subscribe({next:l=>{s.videos.push(null==l?void 0:l.Location)},error:l=>{}})}else s._commonService.error("Please upload image of file type for videos only !")})()}removeUploadedFile(e,i){this.images.splice(e,1)}}return a.\u0275fac=function(e){return new(e||a)(w.Y36(zt.qu),w.Y36(Th.F0),w.Y36(kC.v),w.Y36(TC))},a.\u0275cmp=w.Xpm({type:a,selectors:[["app-add-news"]],viewQuery:function(e,i){if(1&e&&w.Gf(OQ,5),2&e){let s;w.iGM(s=w.CRH())&&(i.rteObj=s.first)}},features:[w._Bn([bH,CH,SH,wH])],decls:56,vars:19,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select category",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter title",3,"formControlName"],["matInput","","placeholder","Enter author",3,"formControlName"],[3,"toolbarSettings","quickToolbarSettings","formControlName"],[1,"flex","flex-col","w-120"],[1,"w-full"],[1,"flex","items-center","justify-center","h-20","border-2","border-dashed","rounded-lg","cursor-pointer",3,"click"],["src","../../../../../../assets/images/select.svg",1,"w-10","h-10"],[1,"text-header","underline"],["type","file","multiple","",2,"display","none",3,"change"],["fileImages",""],[1,"grid","grid-cols-5","gap-4","my-5"],["class","_mg relative",4,"ngFor","ngForOf"],[1,"example-chip-list"],["aria-label","Fruit selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["id","tags","placeholder","New Tags...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","formControlName","matChipInputTokenEnd"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["type","button","routerLink","/news/list","mat-button",""],["mat-flat-button","","type","button",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[1,"_mg","relative"],["target","_blank",3,"href"],[1,"w-52","h-32",3,"src"],[1,"_icon","absolute","right-2","top-2",3,"click"],["width","30","height","30","viewBox","0 0 30 30","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","15","cy","15","r","15","fill","black","fill-opacity","0.3"],["d","M10.5 20.25C10.5 20.6478 10.658 21.0294 10.9393 21.3107C11.2206 21.592 11.6022 21.75 12 21.75H18C18.3978 21.75 18.7794 21.592 19.0607 21.3107C19.342 21.0294 19.5 20.6478 19.5 20.25V11.25H10.5V20.25ZM12 12.75H18V20.25H12V12.75ZM17.625 9L16.875 8.25H13.125L12.375 9H9.75V10.5H20.25V9H17.625Z","fill","white"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"diameter","mode"]],template:function(e,i){if(1&e){const s=w.EpF();w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.TgZ(2,"div",2),w.TgZ(3,"div",3),w.TgZ(4,"h2",4),w._uU(5," Add Content for News "),w.qZA(),w.qZA(),w.TgZ(6,"form",5),w.NdJ("submit",function(){return i.addNews}),w.TgZ(7,"div",6),w.TgZ(8,"mat-form-field",7),w.TgZ(9,"mat-label",8),w._uU(10," Category"),w._UZ(11,"span",9),w.qZA(),w.TgZ(12,"mat-select",10),w.YNc(13,RQ,2,2,"mat-option",11),w.qZA(),w.qZA(),w.qZA(),w.TgZ(14,"div",6),w.TgZ(15,"mat-form-field",7),w.TgZ(16,"mat-label",8),w._uU(17," Title"),w._UZ(18,"span",9),w.qZA(),w._UZ(19,"input",12),w.qZA(),w.qZA(),w.TgZ(20,"div",6),w.TgZ(21,"mat-form-field",7),w.TgZ(22,"mat-label",8),w._uU(23," Author"),w._UZ(24,"span",9),w.qZA(),w._UZ(25,"input",13),w.qZA(),w.qZA(),w.TgZ(26,"div",6),w._UZ(27,"ejs-richtexteditor",14),w.qZA(),w.TgZ(28,"div",15),w.TgZ(29,"div",16),w.TgZ(30,"mat-label",8),w._uU(31," Images"),w._UZ(32,"span",9),w.qZA(),w.TgZ(33,"div",17),w.NdJ("click",function(){return w.CHM(s),w.MAs(38).click()}),w._UZ(34,"img",18),w.TgZ(35,"span",19),w._uU(36,"Select images"),w.qZA(),w.qZA(),w.qZA(),w.TgZ(37,"input",20,21),w.NdJ("change",function(o){return i.onFileChange(o,"images")}),w.qZA(),w.TgZ(39,"div",22),w.YNc(40,PQ,7,2,"div",23),w.qZA(),w.qZA(),w.TgZ(41,"div",6),w.TgZ(42,"mat-form-field",24),w.TgZ(43,"mat-label",8),w._uU(44," Tags"),w._UZ(45,"span",9),w.qZA(),w.TgZ(46,"mat-chip-list",25,26),w.YNc(48,BQ,3,4,"mat-chip",27),w.TgZ(49,"input",28),w.NdJ("matChipInputTokenEnd",function(o){return i.add(o)}),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(50,"div",29),w.TgZ(51,"button",30),w._uU(52," Cancel "),w.qZA(),w.TgZ(53,"button",31),w.NdJ("click",function(){return i.addNews()}),w.YNc(54,NQ,2,0,"span",32),w.YNc(55,FQ,1,2,"mat-progress-spinner",33),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA()}if(2&e){const s=w.MAs(47);w.xp6(6),w.Q6J("formGroup",i.form),w.xp6(2),w.Q6J("floatLabel","always"),w.xp6(4),w.Q6J("formControlName","category"),w.xp6(1),w.Q6J("ngForOf",i.categoryList$),w.xp6(2),w.Q6J("floatLabel","always"),w.xp6(4),w.Q6J("formControlName","title"),w.xp6(2),w.Q6J("floatLabel","always"),w.xp6(4),w.Q6J("formControlName","author"),w.xp6(2),w.Q6J("toolbarSettings",i.tools)("quickToolbarSettings",i.quickTools)("formControlName","article"),w.xp6(13),w.Q6J("ngForOf",i.images),w.xp6(8),w.Q6J("ngForOf",i.tags),w.xp6(1),w.Q6J("matChipInputFor",s)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("formControlName","tags"),w.xp6(4),w.Q6J("color","primary"),w.xp6(1),w.Q6J("ngIf",!i.loading),w.xp6(1),w.Q6J("ngIf",i.loading)}},directives:[zt._Y,zt.JL,zt.sg,Xc.KE,Xc.hX,xC.gD,zt.JJ,zt.u,ya.sg,IC.Nt,zt.Fj,ol,hA,cA,gm.lW,Th.rH,ya.O5,yr.ey,fm,mm.Hw,lA,kH.Ou],styles:[".example-chip-list[_ngcontent-%COMP%]{width:100%}"]}),a})()},{path:"edit-news/:id",component:(()=>{class a{constructor(e,i,s,n,o){this._formBuilder=e,this._router=i,this._commonService=s,this._newsService=n,this._activatedRoute=o,this.loading=!1,this.categoryList$=[{name:"WHATSNEW"},{name:"HOTPROESS"},{name:"ARCHIVES"}],this.images=[],this.videos=[],this.tools={items:["Undo","Redo","|","Bold","Italic","Underline","StrikeThrough","|","FontName","FontSize","FontColor","BackgroundColor","|","SubScript","SuperScript","|","LowerCase","UpperCase","|","Formats","Alignments","|","OrderedList","UnorderedList","|","Indent","Outdent","|","CreateLink","Image","|","ClearFormat","Print","SourceCode","|","FullScreen"]},this.iframe={enable:!0},this.height=500,this.quickTools={image:["Replace","Align","Caption","Remove","InsertLink","-","Display","AltText","Dimension"]},this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[vr.K5,vr.OC],this.tags=[],this.newsId="",this._activatedRoute.params.subscribe(l=>{this.newsId=l.id})}ngOnInit(){this.form=this._formBuilder.group({author:[null,[zt.kI.required]],category:[null,[zt.kI.required]],article:[null,[zt.kI.required]],title:[null,[zt.kI.required]],image:[null,[]],tags:[null,[]]}),this.fetchContent()}onCreate(){const e=this.rteObj;e.contentModule.getDocument().addEventListener("keydown",function(i){"s"===i.key&&!0===i.ctrlKey&&(i.preventDefault(),e.updateValue(),console.log(e.value))})}add(e){const i=e.input,s=e.value;(s||"").trim()&&this.tags.push({name:s.trim()}),i&&(i.value="")}remove(e){const i=this.tags.indexOf(e);i>=0&&this.tags.splice(i,1)}getCategories(){this._commonService.getCategoryList({}).subscribe(e=>{this.categoryList$=e?[...e.userCategory]:[]},e=>{})}fetchContent(){this._newsService.getDetails(this.newsId).subscribe(e=>{this.patchValuestOfForm(e)},e=>{this._commonService.error(e.error.message)})}editNews(){if(this.loading=!0,console.log(this.form.value,this.rteObj,this.images,this.tags),this.form.invalid)return void(this.loading=!1);if(!this.images.length||!this.tags.length)return this._commonService.error("All fields are required."),void(this.loading=!1);let e={tags:this.tags.map(i=>i.name).toString()};this.images.length&&(e.image=this.images.toString()),delete this.form.value.image,delete this.form.value.tags,this._newsService.editNews(Object.assign(Object.assign({},this.form.value),e),this.newsId).subscribe(i=>{this.loading=!1,this._router.navigate(["/news/list"])},i=>{this.loading=!1,this._commonService.error(i.error.message)})}onFileChange(e,i){let s=e.target.files?Object.values(e.target.files):e.dataTransfer.files,n=[...s];!(null==s?void 0:s.length)||Array.from(n).forEach((o,l)=>{this.saveFiles(s[l],i)})}saveFiles(e,i){var s=this;return(0,mA.Z)(function*(){let n=e;if(console.log(n),"images"===i)if(s._commonService.checkFileSizeAndType(n,1)){let o=new FormData;o.append("file",n),s._newsService.upload(o).subscribe({next:l=>{s.images.push(null==l?void 0:l.Location)},error:l=>{}})}else s._commonService.error("Please upload image of file type png, jpg or jpeg and with size less than 5MB !");else if(s._commonService.checkVideoSizeAndType(n)){let o=new FormData;o.append("file",n),s._newsService.upload(o).subscribe({next:l=>{s.videos.push(null==l?void 0:l.Location)},error:l=>{}})}else s._commonService.error("Please upload image of file type for videos only !")})()}removeUploadedFile(e,i){this.images.splice(e,1)}patchValuestOfForm(e){Object.keys(this.form.controls).forEach(i=>{"image"!==i?"tags"===i?(console.log(e[i]),this.tags=e[i].split(",").map(s=>({name:s})),console.log(this.tags)):"article"===i?(console.log(e[i]),this.form.controls[i].setValue(e[i]?e[i]:"")):this.form.controls[i].setValue(e[i]?e[i]:""):this.images=e[i].split(",")}),console.log(this.images,this.videos)}}return a.\u0275fac=function(e){return new(e||a)(w.Y36(zt.qu),w.Y36(Th.F0),w.Y36(kC.v),w.Y36(TC),w.Y36(Th.gz))},a.\u0275cmp=w.Xpm({type:a,selectors:[["app-edit-news"]],viewQuery:function(e,i){if(1&e&&w.Gf(HQ,5),2&e){let s;w.iGM(s=w.CRH())&&(i.rteObj=s.first)}},features:[w._Bn([bH,CH,SH,wH])],decls:56,vars:19,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select category",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter title",3,"formControlName"],[3,"toolbarSettings","quickToolbarSettings","formControlName"],[1,"example-chip-list"],["aria-label","Fruit selection"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New Tags...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"flex","flex-col","w-120"],[1,"w-full"],[1,"flex","items-center","justify-center","h-20","border-2","border-dashed","rounded-lg","cursor-pointer",3,"click"],["src","../../../../../../assets/images/select.svg",1,"w-10","h-10"],[1,"text-header","underline"],["type","file","multiple","",2,"display","none",3,"change"],["fileImages",""],[1,"grid","grid-cols-5","gap-4","my-5"],["class","_mg relative",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/blogs/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"_mg","relative"],["target","_blank",3,"href"],[1,"w-52","h-32",3,"src"],[1,"_icon","absolute","right-2","top-2",3,"click"],["width","30","height","30","viewBox","0 0 30 30","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","15","cy","15","r","15","fill","black","fill-opacity","0.3"],["d","M10.5 20.25C10.5 20.6478 10.658 21.0294 10.9393 21.3107C11.2206 21.592 11.6022 21.75 12 21.75H18C18.3978 21.75 18.7794 21.592 19.0607 21.3107C19.342 21.0294 19.5 20.6478 19.5 20.25V11.25H10.5V20.25ZM12 12.75H18V20.25H12V12.75ZM17.625 9L16.875 8.25H13.125L12.375 9H9.75V10.5H20.25V9H17.625Z","fill","white"],[3,"diameter","mode"]],template:function(e,i){if(1&e){const s=w.EpF();w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.TgZ(2,"div",2),w.TgZ(3,"div",3),w.TgZ(4,"h2",4),w._uU(5," Edit Content for News "),w.qZA(),w.qZA(),w.TgZ(6,"form",5),w.NdJ("submit",function(){return i.editNews}),w.TgZ(7,"div",6),w.TgZ(8,"mat-form-field",7),w.TgZ(9,"mat-label",8),w._uU(10," Category"),w._UZ(11,"span",9),w.qZA(),w.TgZ(12,"mat-select",10),w.YNc(13,zQ,2,2,"mat-option",11),w.qZA(),w.qZA(),w.qZA(),w.TgZ(14,"div",6),w.TgZ(15,"mat-form-field",7),w.TgZ(16,"mat-label",8),w._uU(17," Title"),w._UZ(18,"span",9),w.qZA(),w._UZ(19,"input",12),w.qZA(),w.qZA(),w.TgZ(20,"div",6),w.TgZ(21,"mat-form-field",7),w.TgZ(22,"mat-label",8),w._uU(23," Author"),w._UZ(24,"span",9),w.qZA(),w._UZ(25,"input",12),w.qZA(),w.qZA(),w.TgZ(26,"div",6),w._UZ(27,"ejs-richtexteditor",13),w.qZA(),w.TgZ(28,"div",6),w.TgZ(29,"mat-form-field",14),w.TgZ(30,"mat-label",8),w._uU(31," Tags"),w._UZ(32,"span",9),w.qZA(),w.TgZ(33,"mat-chip-list",15,16),w.YNc(35,qQ,3,4,"mat-chip",17),w.TgZ(36,"input",18),w.NdJ("matChipInputTokenEnd",function(o){return i.add(o)}),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(37,"div",19),w.TgZ(38,"div",20),w.TgZ(39,"mat-label",8),w._uU(40," Images"),w._UZ(41,"span",9),w.qZA(),w.TgZ(42,"div",21),w.NdJ("click",function(){return w.CHM(s),w.MAs(47).click()}),w._UZ(43,"img",22),w.TgZ(44,"span",23),w._uU(45,"Select images"),w.qZA(),w.qZA(),w.qZA(),w.TgZ(46,"input",24,25),w.NdJ("change",function(o){return i.onFileChange(o,"images")}),w.qZA(),w.TgZ(48,"div",26),w.YNc(49,_Q,7,2,"div",27),w.qZA(),w.qZA(),w.TgZ(50,"div",28),w.TgZ(51,"button",29),w._uU(52,"Cancel"),w.qZA(),w.TgZ(53,"button",30),w.NdJ("click",function(){return i.editNews()}),w.YNc(54,WQ,2,0,"span",31),w.YNc(55,UQ,1,2,"mat-progress-spinner",32),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA()}if(2&e){const s=w.MAs(34);w.xp6(6),w.Q6J("formGroup",i.form),w.xp6(2),w.Q6J("floatLabel","always"),w.xp6(4),w.Q6J("formControlName","category"),w.xp6(1),w.Q6J("ngForOf",i.categoryList$),w.xp6(2),w.Q6J("floatLabel","always"),w.xp6(4),w.Q6J("formControlName","title"),w.xp6(2),w.Q6J("floatLabel","always"),w.xp6(4),w.Q6J("formControlName","author"),w.xp6(2),w.Q6J("toolbarSettings",i.tools)("quickToolbarSettings",i.quickTools)("formControlName","article"),w.xp6(8),w.Q6J("ngForOf",i.tags),w.xp6(1),w.Q6J("matChipInputFor",s)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),w.xp6(13),w.Q6J("ngForOf",i.images),w.xp6(4),w.Q6J("color","primary"),w.xp6(1),w.Q6J("ngIf",!i.loading),w.xp6(1),w.Q6J("ngIf",i.loading)}},directives:[zt._Y,zt.JL,zt.sg,Xc.KE,Xc.hX,xC.gD,zt.JJ,zt.u,ya.sg,IC.Nt,zt.Fj,ol,hA,cA,gm.lW,Th.rH,ya.O5,yr.ey,fm,mm.Hw,lA,kH.Ou],styles:[".example-chip-list[_ngcontent-%COMP%]{width:100%}"]}),a})()}];let ZQ=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=w.oAB({type:a}),a.\u0275inj=w.cJS({imports:[[ya.ez,Th.Bz.forChild(GQ),gm.ot,DH.p9,Xc.lN,mm.Ps,RH.m,IC.c,dA.TU,fA.Cv,yr.si,gA.AV,OH.rP,LH.JX,xC.LD,pQ,LQ]]}),a})()}}]);