"use strict";(self.webpackChunk_fracprop_panel=self.webpackChunk_fracprop_panel||[]).push([[766],{6766:(V,c,n)=>{n.r(c),n.d(c,{PropertyBuyShareModule:()=>K});var g=n(8583),p=n(3423),u=n(1095),B=n(7539),d=n(8295),L=n(6627),h=n(9983),_=n(3935),f=n(9692),v=n(2178),x=n(2458),N=n(1494),P=n(5396),y=n(1436),J=n(4466),U=n(1769),q=n(171),I=n(2613),Z=n(7441),t=n(7716),b=n(2340),T=n(5917),S=n(3190),O=n(1841);let A=(()=>{class o{constructor(e){this._httpClient=e}getList(e){return this._httpClient.get(b.N.apiEndPoint+"fund-account/auctionListForAdmin",{}).pipe((0,S.w)(i=>(0,T.of)(i)))}buyShare(e){return this._httpClient.post(b.N.apiEndPoint+"user-bids/userBidForAdmin",Object.assign({},e)).pipe((0,S.w)(i=>(0,T.of)(i)))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(O.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var w=n(1400),l=n(3679),C=n(8351);function F(o,s){1&o&&(t.TgZ(0,"div",12),t._UZ(1,"mat-progress-bar",13),t.qZA()),2&o&&(t.xp6(1),t.Q6J("mode","indeterminate"))}function Q(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",19),t.TgZ(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",20),t._uU(5),t.qZA(),t.TgZ(6,"div",20),t._uU(7),t.qZA(),t.TgZ(8,"div",20),t._uU(9),t.qZA(),t.TgZ(10,"div",21),t.TgZ(11,"button",22),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).deleteContent(null==a?null:a.id)}),t._uU(12," Delete "),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,i=s.index,r=t.oxw(2);t.xp6(3),t.hij(" ",(null==r.pagination?null:r.pagination.PageNo)*(null==r.pagination?null:r.pagination.limit)+i+1," "),t.xp6(2),t.hij(" ",(null==e||null==e.property?null:e.property.property_name)||"-"," "),t.xp6(2),t.hij(" ",(null==e?null:e.noofsharetoAuction)||"-"," "),t.xp6(2),t.hij(" ",null==e?null:e.sellingPrice," ")}}const j=function(o){return{"pointer-events-none":o}},Y=function(){return[5,10,25,100]};function D(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-paginator",23),t.NdJ("page",function(r){return t.CHM(e),t.oxw(2).pageChanged(r)}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(6,j,e.isLoading))("length",e.pagination.TotalCount)("pageIndex",e.pagination.PageNo)("pageSize",e.pagination.LimitRecords)("pageSizeOptions",t.DdM(8,Y))("showFirstLastButtons",!0)}}function z(o,s){if(1&o&&(t.ynx(0),t.ynx(1),t.TgZ(2,"div",14),t.TgZ(3,"div",15),t.TgZ(4,"div",16),t._uU(5,"S No."),t.qZA(),t.TgZ(6,"div",16),t._uU(7,"Property Name"),t.qZA(),t.TgZ(8,"div",16),t._uU(9,"No. of shares"),t.qZA(),t.TgZ(10,"div",16),t._uU(11,"Selling Price"),t.qZA(),t.TgZ(12,"div",16),t._uU(13,"Action"),t.qZA(),t.qZA(),t.ynx(14),t.YNc(15,Q,13,4,"ng-container",17),t.BQk(),t.qZA(),t.YNc(16,D,1,9,"mat-paginator",18),t.BQk(),t.BQk()),2&o){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.bugShareList$),t.xp6(1),t.Q6J("ngIf",e.bugShareList$.length)}}function M(o,s){if(1&o&&(t.TgZ(0,"div",24),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.isLoading?"Fetching Data":"There is no data!"," ")}}let $=(()=>{class o{constructor(e,i,r,a,m){this._buyService=e,this._changeDetectorRef=i,this._fuseConfirmationService=r,this._formBuilder=a,this._commonService=m,this.loading=!1,this.bugShareList$=[],this.isLoading1=!1,this.isLoading=!1,this.isBlocked=!1,this.pagination={limit:10,pageNo:0,TotalCount:0,PageNo:0},this.confirmationForm()}ngOnInit(){this.getListing()}getListing(){var e,i;let r={pageNo:null===(e=this.pagination)||void 0===e?void 0:e.pageNo,limit:null===(i=this.pagination)||void 0===i?void 0:i.limit};this.isLoading=!0,this._buyService.getList(Object.assign({},r)).subscribe(a=>{this.isLoading=!1,this.pagination.TotalCount=(null==a?void 0:a.totalBlog)||10,this.bugShareList$=a?[...a]:[],this._changeDetectorRef.detectChanges()},a=>{console.log(a),this._commonService.error(a.error.message),this.isLoading=!1})}pageChanged(e){var i,r,a;if((null==e?void 0:e.pageSize)!==(null===(i=this.pagination)||void 0===i?void 0:i.limit))return this.pagination.limit=null==e?void 0:e.pageSize,void this.resetPagination();this.pagination.limit=null==e?void 0:e.pageSize,this.pagination.PageNo=null==e?void 0:e.pageIndex,this.pagination.pageNo=(null===(r=this.pagination)||void 0===r?void 0:r.limit)*(null===(a=this.pagination)||void 0===a?void 0:a.PageNo),this.getListing()}resetPagination(){this.pagination={limit:this.pagination.limit,pageNo:0,TotalCount:0,PageNo:0},this.getListing()}confirmationForm(){this.confirmationDialog=this._formBuilder.group({title:"",message:"",icon:this._formBuilder.group({show:!0,name:"mat_outline:delete",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Yes",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"No"})}),dismissible:!0})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A),t.Y36(t.sBO),t.Y36(w.R),t.Y36(l.qu),t.Y36(C.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-buy-share-property-list"]],decls:16,vars:3,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-4","px-6","md:px-4"],["class","absolute inset-x-0 top-0",4,"ngIf"],[1,"flex","items-start","justify-between","w-full"],[1,"text-3xl","font-bold","tracking-tight","leading-8","text-theme"],[1,"mr-4","flex","justify-end","pb-2"],["routerLink","/buy-share/add-share","mat-flat-button","","type","button",1,"ml-4","bg-header","rounded-lg"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noAdmin",""],[1,"absolute","inset-x-0","top-0"],[3,"mode"],[1,"grid","table_tr_bg"],[1,"blogs-grid","z-10","text-lg","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","font-semibold",2,"background-color","#ecf1f2"],[1,"hidden","md:block"],[4,"ngFor","ngForOf"],["class","sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent justify-center text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"blogs-grid","font-medium","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b-2","border-gray-300"],[1,""],[1,"flex","justify-start"],["matTooltip","Delete",1,"min-w-20","min-h-7","h-7","px-2","ml-1","bg-red-600","text-white","rounded-2xl",3,"click"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent","justify-center","text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,F,2,1,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div"),t.TgZ(5,"h2",4),t._uU(6," Properties "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"button",6),t.TgZ(9,"span",7),t._uU(10,"Buy Shares"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"div",9),t.YNc(13,z,17,2,"ng-container",10),t.YNc(14,M,2,1,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&e){const r=t.MAs(15);t.xp6(2),t.Q6J("ngIf",i.isLoading),t.xp6(11),t.Q6J("ngIf",i.bugShareList$.length)("ngIfElse",r)}},directives:[g.O5,u.lW,p.rH,v.pW,g.sg,y.gM,f.NW,g.mk],styles:["",".blogs-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto auto}@media (min-width: 600px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto auto}}@media (min-width: 960px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:100px 200px 250px 200px 200p}}@media (min-width: 1280px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:100px 200px 250px 200px 200p}}"]}),o})();var E=n(7495),R=n(4885);function k(o,s){if(1&o&&(t.TgZ(0,"div",22),t.TgZ(1,"div",23),t._uU(2),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.hij(" Total number of shares available: ",(null==e.propertyDetails?null:e.propertyDetails.totalnumberShareavailable)||"-"," ")}}function W(o,s){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",null==e?null:e.id),t.xp6(1),t.Oqu((null==e?null:e.property_name)||"")}}function H(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1," Save"),t.qZA())}function X(o,s){1&o&&t._UZ(0,"mat-progress-spinner",25),2&o&&t.Q6J("diameter",24)("mode","indeterminate")}const G=[{path:"list",component:$},{path:"add-share",component:(()=>{class o{constructor(e,i,r,a,m){this._formBuilder=e,this._router=i,this._commonService=r,this._buyShareService=a,this._userService=m,this.loading=!1,this.images=[],this.videos=[],this.propertyList$=[],this.propertyDetails={}}ngOnInit(){this.form=this._formBuilder.group({property_id:[null,[l.kI.required]],auction_id:[null,[l.kI.required]],amount:[null,[l.kI.required]]}),this.getProperties(),this.userId=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).id:void 0}getProperties(){this._commonService.getPropertyList({}).subscribe(e=>{this.propertyList$=e?[...e]:[]},e=>{})}getDetailOnSelect(e){this.propertyDetails={},this.propertyList$.filter(i=>{i.id==e&&(this.propertyDetails=Object.assign({},i),console.log(i))})}add(){this.loading=!0,console.log(this.form),this.form.invalid?this.loading=!1:this._buyShareService.buyShare(Object.assign(Object.assign({},this.form.value),{user_id:this.userId,amount:this.form.value.amount.toString()})).subscribe(e=>{this.loading=!1,this._router.navigate(["/buy-share/list"])},e=>{this.loading=!1,this._commonService.error(e.error.message)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(p.F0),t.Y36(C.v),t.Y36(A),t.Y36(E.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-buy-share"]],decls:38,vars:12,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"text-3xl","tracking-tight","text-left","leading-8","pb-4"],["class","grid sm:grid-cols-1 md:grid-cols-1 gap-6 w-full min-w-0 pb-4",4,"ngIf"],[1,"grid","sm:grid-cols-2","md:grid-cols-2","gap-6","w-full","min-w-0"],[1,"flex","flex-col","gt-xs:flex-row"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select property",3,"formControlName","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","No. of shares","type","number",3,"formControlName"],["matInput","","placeholder","Amount","type","number",3,"formControlName"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/auction-calendar/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"grid","sm:grid-cols-1","md:grid-cols-1","gap-6","w-full","min-w-0","pb-4"],[1,"flex","flex-col","gt-xs:flex-row","text-2xl","text-center"],[3,"value"],[3,"diameter","mode"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h2",4),t._uU(5," Buy Share "),t.qZA(),t.qZA(),t.TgZ(6,"form",5),t.NdJ("submit",function(){return i.add}),t.TgZ(7,"h2",6),t._uU(8," Details "),t.qZA(),t.YNc(9,k,3,1,"div",7),t.TgZ(10,"div",8),t.TgZ(11,"div",9),t.TgZ(12,"mat-form-field",10),t.TgZ(13,"mat-label",11),t._uU(14," Property"),t._UZ(15,"span",12),t.qZA(),t.TgZ(16,"mat-select",13),t.NdJ("selectionChange",function(a){return i.getDetailOnSelect(a.value)}),t.YNc(17,W,2,2,"mat-option",14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(18,"div",8),t.TgZ(19,"div",8),t.TgZ(20,"div",9),t.TgZ(21,"mat-form-field",10),t.TgZ(22,"mat-label",11),t._uU(23,"No. of Shares "),t._UZ(24,"span",12),t.qZA(),t._UZ(25,"input",15),t.qZA(),t.qZA(),t.TgZ(26,"div",9),t.TgZ(27,"mat-form-field",10),t.TgZ(28,"mat-label",11),t._uU(29,"Amount(ZAR) "),t._UZ(30,"span",12),t.qZA(),t._UZ(31,"input",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",17),t.TgZ(33,"button",18),t._uU(34," Cancel "),t.qZA(),t.TgZ(35,"button",19),t.NdJ("click",function(){return i.add()}),t.YNc(36,H,2,0,"span",20),t.YNc(37,X,1,2,"mat-progress-spinner",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(3),t.Q6J("ngIf",i.form.value.property_id),t.xp6(3),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","property_id"),t.xp6(1),t.Q6J("ngForOf",i.propertyList$),t.xp6(4),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","noofsharetoAuction"),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","amount"),t.xp6(4),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",i.loading))},directives:[l._Y,l.JL,l.sg,g.O5,d.KE,d.hX,Z.gD,l.JJ,l.u,g.sg,h.Nt,l.wV,l.Fj,u.lW,p.rH,x.ey,R.Ou],styles:[""]}),o})()}];let K=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.ez,p.Bz.forChild(G),u.ot,B.p9,d.lN,L.Ps,h.c,_.Tx,f.TU,v.Cv,x.si,N.JX,Z.LD,P.rP,q.To,y.AV,J.m,U.t,I.Fk]]}),o})()}}]);