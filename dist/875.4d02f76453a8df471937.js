"use strict";(self.webpackChunk_fracprop_panel=self.webpackChunk_fracprop_panel||[]).push([[875],{4875:(K,_,a)=>{a.r(_),a.d(_,{WhatsNewModule:()=>X});var m=a(8583),d=a(3423),f=a(1095),L=a(7539),p=a(8295),T=a(6627),v=a(9983),b=a(9692),A=a(2178),x=a(2458),W=a(1494),J=a(5396),y=a(1436),Z=a(7441),I=a(4466),U=a(1769),w=a(4885),t=a(7716),c=a(2340),u=a(5917),h=a(3190),S=a(1841);let C=(()=>{class n{constructor(e){this._httpClient=e}getList(e){return this._httpClient.get(c.N.apiEndPoint+"what-new/getAll/"+e.pageNo+"/"+e.limit,{}).pipe((0,h.w)(i=>(0,u.of)(i)))}getDetails(e){return this._httpClient.get(c.N.apiEndPoint+"what-new/getWhatNewId/"+e).pipe((0,h.w)(i=>(0,u.of)(i)))}addWhatsNewContent(e){return this._httpClient.post(c.N.apiEndPoint+"what-new",Object.assign({},e)).pipe((0,h.w)(i=>(0,u.of)(i)))}editWhatsNewContent(e,i){return this._httpClient.patch(c.N.apiEndPoint+"what-new/"+i,Object.assign({},e)).pipe((0,h.w)(o=>(0,u.of)(o)))}deleteWhatsNewContent(e){return this._httpClient.delete(c.N.apiEndPoint+"what-new/"+e).pipe((0,h.w)(i=>(0,u.of)(i)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(S.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Q=a(1400),l=a(3679),N=a(8351);function O(n,s){1&n&&(t.TgZ(0,"div",13),t._UZ(1,"mat-progress-bar",14),t.qZA()),2&n&&(t.xp6(1),t.Q6J("mode","indeterminate"))}function E(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",20),t.TgZ(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA(),t.TgZ(6,"div",21),t._uU(7),t.qZA(),t.TgZ(8,"div",21),t._uU(9),t.qZA(),t.TgZ(10,"div",22),t.TgZ(11,"button",23),t._uU(12," Edit "),t.qZA(),t.TgZ(13,"button",24),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).deleteContent(null==r?null:r.id)}),t._uU(14," Delete "),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=s.$implicit,i=s.index,o=t.oxw(2);t.xp6(3),t.hij(" ",(null==o.pagination?null:o.pagination.PageNo)*(null==o.pagination?null:o.pagination.limit)+i+1," "),t.xp6(2),t.hij(" ",(null==e?null:e.groupName)||"-"," "),t.xp6(2),t.hij(" ",(null==e?null:e.heading)||"-"," "),t.xp6(2),t.hij(" ",(null==e?null:e.description)||"-"," "),t.xp6(2),t.MGl("routerLink","/whats-new/edit-content/",null==e?null:e.id,"")}}const F=function(n){return{"pointer-events-none":n}},Y=function(){return[5,10,25,100]};function j(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-paginator",25),t.NdJ("page",function(o){return t.CHM(e),t.oxw(2).pageChanged(o)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(6,F,e.isLoading))("length",e.pagination.TotalCount)("pageIndex",e.pagination.PageNo)("pageSize",e.pagination.LimitRecords)("pageSizeOptions",t.DdM(8,Y))("showFirstLastButtons",!0)}}function B(n,s){if(1&n&&(t.ynx(0),t.ynx(1),t.TgZ(2,"div",15),t.TgZ(3,"div",16),t.TgZ(4,"div",17),t._uU(5,"S No."),t.qZA(),t.TgZ(6,"div",17),t._uU(7,"Community"),t.qZA(),t.TgZ(8,"div",17),t._uU(9,"Heading"),t.qZA(),t.TgZ(10,"div",17),t._uU(11,"Description"),t.qZA(),t.TgZ(12,"div",17),t._uU(13,"Action"),t.qZA(),t.qZA(),t.ynx(14),t.YNc(15,E,15,5,"ng-container",18),t.BQk(),t.qZA(),t.YNc(16,j,1,9,"mat-paginator",19),t.BQk(),t.BQk()),2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.contentList$),t.xp6(1),t.Q6J("ngIf",e.contentList$.length)}}function P(n,s){if(1&n&&(t.TgZ(0,"div",26),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.isLoading?"Fetching Data":"There is no data!"," ")}}function k(n,s){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",null==e?null:e.id),t.xp6(1),t.Oqu((null==e?null:e.name)||"")}}function z(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1," Save"),t.qZA())}function M(n,s){1&n&&t._UZ(0,"mat-progress-spinner",21),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}function R(n,s){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",null==e?null:e.id),t.xp6(1),t.Oqu((null==e?null:e.name)||"")}}function G(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1," Save"),t.qZA())}function H(n,s){1&n&&t._UZ(0,"mat-progress-spinner",21),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}const V=[{path:"list",component:(()=>{class n{constructor(e,i,o,r,g){this._whatsNewService=e,this._changeDetectorRef=i,this._fuseConfirmationService=o,this._formBuilder=r,this._commonService=g,this.loading=!1,this.contentList$=[],this.isLoading1=!1,this.isLoading=!1,this.isBlocked=!1,this.pagination={limit:10,pageNo:0,TotalCount:0,PageNo:0},this.confirmationForm()}ngOnInit(){this.getListing()}getListing(){var e,i;let o={pageNo:null===(e=this.pagination)||void 0===e?void 0:e.pageNo,limit:null===(i=this.pagination)||void 0===i?void 0:i.limit};this.isLoading=!0,this._whatsNewService.getList(Object.assign({},o)).subscribe(r=>{this.isLoading=!1,this.pagination.TotalCount=(null==r?void 0:r.totalCount)||10,this.contentList$=r.getRecords?[...r.getRecords]:[],this._changeDetectorRef.detectChanges()},r=>{this._commonService.error(r.message),this.isLoading=!1})}pageChanged(e){var i,o,r;if((null==e?void 0:e.pageSize)!==(null===(i=this.pagination)||void 0===i?void 0:i.limit))return this.pagination.limit=null==e?void 0:e.pageSize,void this.resetPagination();this.pagination.limit=null==e?void 0:e.pageSize,this.pagination.PageNo=null==e?void 0:e.pageIndex,this.pagination.pageNo=(null===(o=this.pagination)||void 0===o?void 0:o.limit)*(null===(r=this.pagination)||void 0===r?void 0:r.PageNo),this.getListing()}resetPagination(){this.pagination={limit:this.pagination.limit,pageNo:0,TotalCount:0,PageNo:0},this.getListing()}confirmationForm(){this.confirmationDialog=this._formBuilder.group({title:"",message:"",icon:this._formBuilder.group({show:!0,name:"mat_outline:delete",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Yes",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"No"})}),dismissible:!0})}deleteContent(e){var i,o;null===(i=this.confirmationDialog.controls.title)||void 0===i||i.setValue("Delete "),null===(o=this.confirmationDialog.controls.message)||void 0===o||o.setValue("Are you sure you want to delete ?"),this._fuseConfirmationService.open(this.confirmationDialog.value).afterClosed().subscribe(g=>{"confirmed"===g&&this._whatsNewService.deleteWhatsNewContent(e).subscribe(q=>{this.getListing()},q=>{this._commonService.error(q.error.message)})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C),t.Y36(t.sBO),t.Y36(Q.R),t.Y36(l.qu),t.Y36(N.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-whats-new-listing"]],decls:17,vars:6,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-4","px-6","md:px-4"],["class","absolute inset-x-0 top-0",4,"ngIf"],[1,"flex","items-start","justify-between","w-full"],[1,"text-3xl","font-bold","tracking-tight","leading-8","text-theme"],[1,"mr-4","flex","justify-end","pb-2"],["routerLink","/whats-new/add-content","mat-flat-button","","type","button",1,"ml-4","bg-header","rounded-lg",3,"matTooltip","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noAdmin",""],[1,"absolute","inset-x-0","top-0"],[3,"mode"],[1,"grid","table_tr_bg"],[1,"content-grid","z-10","text-lg","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","font-semibold",2,"background-color","#ecf1f2"],[1,"hidden","md:block"],[4,"ngFor","ngForOf"],["class","sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent justify-center text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"content-grid","font-medium","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b-2","border-gray-300"],[1,""],[1,"flex","justify-start"],["matTooltip","Edit",1,"min-w-20","min-h-7","h-7","px-2","ml-1","bg-green-600","text-white","rounded-2xl",3,"routerLink"],["matTooltip","Delete",1,"min-w-20","min-h-7","h-7","px-2","ml-1","bg-red-600","text-white","rounded-2xl",3,"click"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent","justify-center","text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,O,2,1,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div"),t.TgZ(5,"h2",4),t._uU(6," What's New "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"button",6),t._UZ(9,"mat-icon",7),t.TgZ(10,"span",8),t._uU(11,"Add Content"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.YNc(14,B,17,2,"ng-container",11),t.YNc(15,P,2,1,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(16);t.xp6(2),t.Q6J("ngIf",i.isLoading),t.xp6(6),t.Q6J("matTooltip","Add Content")("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(5),t.Q6J("ngIf",i.contentList$.length)("ngIfElse",o)}},directives:[m.O5,f.lW,d.rH,y.gM,T.Hw,A.pW,m.sg,b.NW,m.mk],styles:["",".content-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto auto}@media (min-width: 600px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto auto}}@media (min-width: 960px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:200px 200px 200px 200px 200px}}@media (min-width: 1280px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:200px 200px 200px 200px 200px}}"]}),n})()},{path:"add-content",component:(()=>{class n{constructor(e,i,o,r){this._formBuilder=e,this._router=i,this._commonService=o,this._whatsNewService=r,this.loading=!1}ngOnInit(){this.form=this._formBuilder.group({heading:[null,[l.kI.required]],description:[null,[l.kI.required]],GroupCriteriaId:[null,[l.kI.required]]}),this.getCommunities()}getCommunities(){this._commonService.getCommunityList({searcString:"test"}).subscribe(e=>{this.communityList$=e?[...e]:[]},e=>{})}addContent(){this.loading=!0,this.form.invalid?this.loading=!1:this._whatsNewService.addWhatsNewContent(this.form.value).subscribe(e=>{this.loading=!1,this._router.navigate(["/whats-new/list"])},e=>{this.loading=!1,this._commonService.error(e.error.message)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(d.F0),t.Y36(N.v),t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-whats-new"]],decls:31,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select community",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter heading",3,"formControlName"],["appearance","outline",1,"w-full"],["matInput","","name","description","cols","35","rows","8","placeholder","Enter description",3,"formControlName"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/users/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[3,"diameter","mode"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h2",4),t._uU(5," Add Content for What's New "),t.qZA(),t.qZA(),t.TgZ(6,"form",5),t.NdJ("submit",function(){return i.addContent}),t.TgZ(7,"div",6),t.TgZ(8,"mat-form-field",7),t.TgZ(9,"mat-label",8),t._uU(10," Community"),t._UZ(11,"span",9),t.qZA(),t.TgZ(12,"mat-select",10),t.YNc(13,k,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",6),t.TgZ(15,"mat-form-field",7),t.TgZ(16,"mat-label",8),t._uU(17," Heading"),t._UZ(18,"span",9),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.qZA(),t.TgZ(20,"div",6),t.TgZ(21,"mat-form-field",13),t.TgZ(22,"mat-label"),t._uU(23,"Add Description"),t.qZA(),t._UZ(24,"textarea",14),t.qZA(),t.qZA(),t.TgZ(25,"div",15),t.TgZ(26,"button",16),t._uU(27,"Cancel"),t.qZA(),t.TgZ(28,"button",17),t.NdJ("click",function(){return i.addContent()}),t.YNc(29,z,2,0,"span",18),t.YNc(30,M,1,2,"mat-progress-spinner",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","GroupCriteriaId"),t.xp6(1),t.Q6J("ngForOf",i.communityList$),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","heading"),t.xp6(5),t.Q6J("formControlName","description"),t.xp6(4),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",i.loading))},directives:[l._Y,l.JL,l.sg,p.KE,p.hX,Z.gD,l.JJ,l.u,m.sg,v.Nt,l.Fj,f.lW,d.rH,m.O5,x.ey,w.Ou],styles:[""]}),n})()},{path:"edit-content/:id",component:(()=>{class n{constructor(e,i,o,r,g){this._formBuilder=e,this._router=i,this._activatedRoute=o,this._commonService=r,this._whatsNewService=g,this.loading=!1,this.contentId=""}ngOnInit(){this._activatedRoute.params.subscribe(e=>{this.contentId=e.id}),this.form=this._formBuilder.group({heading:[null,[l.kI.required]],description:[null,[l.kI.required]],GroupCriteriaId:[null,[l.kI.required]]}),this.getCommunities()}getCommunities(){this._commonService.getCommunityList({searcString:"test"}).subscribe(e=>{this.communityList$=e?[...e]:[],this.fetchContent()},e=>{})}fetchContent(){this._whatsNewService.getDetails(this.contentId).subscribe(e=>{this.patchValuestOfForm(e)},e=>{this._commonService.error(e.error.message)})}editContent(){this.loading=!0,this.form.invalid?this.loading=!1:this._whatsNewService.editWhatsNewContent(this.form.value,this.contentId).subscribe(e=>{this.loading=!1,this._router.navigate(["/whats-new/list"])},e=>{this.loading=!1,this._commonService.error(e.error.message)})}patchValuestOfForm(e){Object.keys(this.form.controls).forEach(i=>{this.form.controls[i].setValue(e[i]?e[i]:"")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(d.F0),t.Y36(d.gz),t.Y36(N.v),t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-whats-new"]],decls:31,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select community",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter heading",3,"formControlName"],["appearance","outline",1,"w-full"],["matInput","","name","description","cols","35","rows","8","placeholder","Enter description",3,"formControlName"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/users/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[3,"diameter","mode"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h2",4),t._uU(5," Edit Content for What's New "),t.qZA(),t.qZA(),t.TgZ(6,"form",5),t.NdJ("submit",function(){return i.editContent}),t.TgZ(7,"div",6),t.TgZ(8,"mat-form-field",7),t.TgZ(9,"mat-label",8),t._uU(10," Community"),t._UZ(11,"span",9),t.qZA(),t.TgZ(12,"mat-select",10),t.YNc(13,R,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",6),t.TgZ(15,"mat-form-field",7),t.TgZ(16,"mat-label",8),t._uU(17," Heading"),t._UZ(18,"span",9),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.qZA(),t.TgZ(20,"div",6),t.TgZ(21,"mat-form-field",13),t.TgZ(22,"mat-label"),t._uU(23,"Add Description"),t.qZA(),t._UZ(24,"textarea",14),t.qZA(),t.qZA(),t.TgZ(25,"div",15),t.TgZ(26,"button",16),t._uU(27,"Cancel"),t.qZA(),t.TgZ(28,"button",17),t.NdJ("click",function(){return i.editContent()}),t.YNc(29,G,2,0,"span",18),t.YNc(30,H,1,2,"mat-progress-spinner",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","GroupCriteriaId"),t.xp6(1),t.Q6J("ngForOf",i.communityList$),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","heading"),t.xp6(5),t.Q6J("formControlName","description"),t.xp6(4),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",i.loading))},directives:[l._Y,l.JL,l.sg,p.KE,p.hX,Z.gD,l.JJ,l.u,m.sg,v.Nt,l.Fj,f.lW,d.rH,m.O5,x.ey,w.Ou],styles:[""]}),n})()}];let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,d.Bz.forChild(V),f.ot,L.p9,p.lN,T.Ps,I.m,v.c,b.TU,A.Cv,x.si,y.AV,J.rP,W.JX,U.t,Z.LD,w.Cq]]}),n})()}}]);