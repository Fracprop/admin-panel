"use strict";(self.webpackChunk_fracprop_panel=self.webpackChunk_fracprop_panel||[]).push([[849],{849:(W,N,m)=>{m.r(N),m.d(N,{CommunityNotesModule:()=>H});var l=m(8583),u=m(3423),h=m(1095),q=m(7539),g=m(8295),_=m(6627),v=m(9983),b=m(9692),T=m(2178),C=m(2458),J=m(1494),I=m(5396),A=m(1436),S=m(4466),x=m(7441),t=m(7716),c=m(2340),p=m(5917),f=m(3190),w=m(1841);let Z=(()=>{class e{constructor(o){this._httpClient=o}getList(o){return this._httpClient.get(c.N.apiEndPoint+"community-notes/getAll/"+o.pageNo+"/"+o.limit).pipe((0,f.w)(n=>(0,p.of)(n)))}getDetails(o){return this._httpClient.get(c.N.apiEndPoint+"community-notes/findeOne/"+o).pipe((0,f.w)(n=>(0,p.of)(n)))}addCommunityNotes(o){return this._httpClient.post(c.N.apiEndPoint+"community-notes",Object.assign({},o)).pipe((0,f.w)(n=>(0,p.of)(n)))}editCommunityNotesContent(o,n){return this._httpClient.patch(c.N.apiEndPoint+"community-notes/"+n,Object.assign({},o)).pipe((0,f.w)(i=>(0,p.of)(i)))}deleteCommunityNotesContent(o){return this._httpClient.delete(c.N.apiEndPoint+"community-notes/"+o).pipe((0,f.w)(n=>(0,p.of)(n)))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(w.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=m(1400),a=m(3679),y=m(8351);function Q(e,s){1&e&&(t.TgZ(0,"div",13),t._UZ(1,"mat-progress-bar",14),t.qZA()),2&e&&(t.xp6(1),t.Q6J("mode","indeterminate"))}function O(e,s){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",20),t.TgZ(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div",21),t._uU(5),t.qZA(),t.TgZ(6,"div",21),t._uU(7),t.qZA(),t.TgZ(8,"div",22),t.TgZ(9,"button",23),t._uU(10," Edit "),t.qZA(),t.TgZ(11,"button",24),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw(2).deleteContent(null==r?null:r.id)}),t._uU(12," Delete "),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&e){const o=s.$implicit,n=s.index,i=t.oxw(2);t.xp6(3),t.hij(" ",(null==i.pagination?null:i.pagination.PageNo)*(null==i.pagination?null:i.pagination.limit)+n+1," "),t.xp6(2),t.hij(" ",(null==o?null:o.groupName)||"-"," "),t.xp6(2),t.hij(" ",(null==o?null:o.Notes)||"-"," "),t.xp6(2),t.MGl("routerLink","/community-notes/edit-content/",null==o?null:o.id,"")}}const F=function(e){return{"pointer-events-none":e}},Y=function(){return[5,10,25,100]};function E(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"mat-paginator",25),t.NdJ("page",function(i){return t.CHM(o),t.oxw(2).pageChanged(i)}),t.qZA()}if(2&e){const o=t.oxw(2);t.Q6J("ngClass",t.VKq(6,F,o.isLoading))("length",o.pagination.TotalCount)("pageIndex",o.pagination.PageNo)("pageSize",o.pagination.LimitRecords)("pageSizeOptions",t.DdM(8,Y))("showFirstLastButtons",!0)}}function B(e,s){if(1&e&&(t.ynx(0),t.ynx(1),t.TgZ(2,"div",15),t.TgZ(3,"div",16),t.TgZ(4,"div",17),t._uU(5,"S No."),t.qZA(),t.TgZ(6,"div",17),t._uU(7,"Community"),t.qZA(),t.TgZ(8,"div",17),t._uU(9,"Notes"),t.qZA(),t.TgZ(10,"div",17),t._uU(11,"Action"),t.qZA(),t.qZA(),t.ynx(12),t.YNc(13,O,13,4,"ng-container",18),t.BQk(),t.qZA(),t.YNc(14,E,1,9,"mat-paginator",19),t.BQk(),t.BQk()),2&e){const o=t.oxw();t.xp6(13),t.Q6J("ngForOf",o.contentList$),t.xp6(1),t.Q6J("ngIf",o.contentList$.length)}}function j(e,s){if(1&e&&(t.TgZ(0,"div",26),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.isLoading?"Fetching Data":"There is no data!"," ")}}function k(e,s){if(1&e&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.Q6J("value",null==o?null:o.id),t.xp6(1),t.Oqu((null==o?null:o.name)||"")}}function D(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1," Save"),t.qZA())}function z(e,s){1&e&&t._UZ(0,"mat-progress-spinner",20),2&e&&t.Q6J("diameter",24)("mode","indeterminate")}function $(e,s){if(1&e&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.Q6J("value",null==o?null:o.id),t.xp6(1),t.Oqu((null==o?null:o.name)||"")}}function R(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1," Save"),t.qZA())}function G(e,s){1&e&&t._UZ(0,"mat-progress-spinner",20),2&e&&t.Q6J("diameter",24)("mode","indeterminate")}const V=[{path:"list",component:(()=>{class e{constructor(o,n,i,r,d){this._communityNotesService=o,this._changeDetectorRef=n,this._fuseConfirmationService=i,this._formBuilder=r,this._commonService=d,this.loading=!1,this.contentList$=[],this.isLoading1=!1,this.isLoading=!1,this.isBlocked=!1,this.pagination={limit:10,pageNo:0,TotalCount:0,PageNo:0},this.confirmationForm()}ngOnInit(){this.getListing()}getListing(){var o,n;let i={pageNo:null===(o=this.pagination)||void 0===o?void 0:o.pageNo,limit:null===(n=this.pagination)||void 0===n?void 0:n.limit};this.isLoading=!0,this._communityNotesService.getList(Object.assign({},i)).subscribe(r=>{this.isLoading=!1,this.pagination.TotalCount=(null==r?void 0:r.totalCount)||10,this.contentList$=r.getRecords?[...r.getRecords]:[],this._changeDetectorRef.detectChanges()},r=>{console.log(r),this._commonService.error(r.error.message),this.isLoading=!1})}pageChanged(o){var n,i,r;if((null==o?void 0:o.pageSize)!==(null===(n=this.pagination)||void 0===n?void 0:n.limit))return this.pagination.limit=null==o?void 0:o.pageSize,void this.resetPagination();this.pagination.limit=null==o?void 0:o.pageSize,this.pagination.PageNo=null==o?void 0:o.pageIndex,this.pagination.pageNo=(null===(i=this.pagination)||void 0===i?void 0:i.limit)*(null===(r=this.pagination)||void 0===r?void 0:r.PageNo),this.getListing()}resetPagination(){this.pagination={limit:this.pagination.limit,pageNo:0,TotalCount:0,PageNo:0},this.getListing()}confirmationForm(){this.confirmationDialog=this._formBuilder.group({title:"",message:"",icon:this._formBuilder.group({show:!0,name:"mat_outline:delete",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Yes",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"No"})}),dismissible:!0})}deleteContent(o){var n,i;null===(n=this.confirmationDialog.controls.title)||void 0===n||n.setValue("Delete "),null===(i=this.confirmationDialog.controls.message)||void 0===i||i.setValue("Are you sure you want to delete ?"),this._fuseConfirmationService.open(this.confirmationDialog.value).afterClosed().subscribe(d=>{"confirmed"===d&&this._communityNotesService.deleteCommunityNotesContent(o).subscribe(L=>{this.getListing()},L=>{this._commonService.error(L.error.message)})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(Z),t.Y36(t.sBO),t.Y36(U.R),t.Y36(a.qu),t.Y36(y.v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-community-notes-list"]],decls:17,vars:6,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-4","px-6","md:px-4"],["class","absolute inset-x-0 top-0",4,"ngIf"],[1,"flex","items-start","justify-between","w-full"],[1,"text-3xl","font-bold","tracking-tight","leading-8","text-theme"],[1,"mr-4","flex","justify-end","pb-2"],["routerLink","/community-notes/add-content","mat-flat-button","","type","button",1,"ml-4","bg-header","rounded-lg",3,"matTooltip","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noAdmin",""],[1,"absolute","inset-x-0","top-0"],[3,"mode"],[1,"grid","table_tr_bg"],[1,"content-grid","z-10","text-lg","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","font-semibold",2,"background-color","#ecf1f2"],[1,"hidden","md:block"],[4,"ngFor","ngForOf"],["class","sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent justify-center text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"content-grid","font-medium","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b-2","border-gray-300"],[1,""],[1,"flex","justify-start"],["matTooltip","Details",1,"min-w-10","min-h-7","h-7","px-2","ml-1","bg-green-600","rounded-2xl",3,"routerLink"],["matTooltip","Delete",1,"min-w-20","min-h-7","h-7","px-2","ml-1","bg-red-600","text-white","rounded-2xl",3,"click"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent","justify-center","text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,Q,2,1,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div"),t.TgZ(5,"h2",4),t._uU(6," Community Notes "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"button",6),t._UZ(9,"mat-icon",7),t.TgZ(10,"span",8),t._uU(11,"Add Content"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.YNc(14,B,15,2,"ng-container",11),t.YNc(15,j,2,1,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&o){const i=t.MAs(16);t.xp6(2),t.Q6J("ngIf",n.isLoading),t.xp6(6),t.Q6J("matTooltip","Add Content")("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(5),t.Q6J("ngIf",n.contentList$.length)("ngIfElse",i)}},directives:[l.O5,h.lW,u.rH,A.gM,_.Hw,T.pW,l.sg,b.NW,l.mk],styles:["",".content-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto}@media (min-width: 600px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto}}@media (min-width: 960px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:300px 300px 300px 300px}}@media (min-width: 1280px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:300px 300px 300px 300px}}"]}),e})()},{path:"add-content",component:(()=>{class e{constructor(o,n,i,r){this._formBuilder=o,this._router=n,this._commonService=i,this._communityNotesService=r,this.loading=!1}ngOnInit(){this.form=this._formBuilder.group({Notes:[null,[a.kI.required]],GroupCriteriaId:[null,[a.kI.required]]}),this.getCommunities()}getCommunities(){this._commonService.getCommunityList({searcString:"test"}).subscribe(o=>{this.communityList$=o?[...o]:[]},o=>{})}addContent(){this.loading=!0,this.form.invalid?this.loading=!1:this._communityNotesService.addCommunityNotes(this.form.value).subscribe(o=>{this.loading=!1,this._router.navigate(["/community-notes/list"])},o=>{this.loading=!1,this._commonService.error(o.error.message)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(a.qu),t.Y36(u.F0),t.Y36(y.v),t.Y36(Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-community-notes"]],decls:25,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select community",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-full"],["matInput","","name","otes","cols","35","rows","8","placeholder","Enter notes",3,"formControlName"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/users/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[3,"diameter","mode"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h2",4),t._uU(5," Add Content for Community Notes "),t.qZA(),t.qZA(),t.TgZ(6,"form",5),t.NdJ("submit",function(){return n.addContent}),t.TgZ(7,"div",6),t.TgZ(8,"mat-form-field",7),t.TgZ(9,"mat-label",8),t._uU(10," Community"),t._UZ(11,"span",9),t.qZA(),t.TgZ(12,"mat-select",10),t.YNc(13,k,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",6),t.TgZ(15,"mat-form-field",12),t.TgZ(16,"mat-label"),t._uU(17,"Add Notes"),t.qZA(),t._UZ(18,"textarea",13),t.qZA(),t.qZA(),t.TgZ(19,"div",14),t.TgZ(20,"button",15),t._uU(21,"Cancel"),t.qZA(),t.TgZ(22,"button",16),t.NdJ("click",function(){return n.addContent()}),t.YNc(23,D,2,0,"span",17),t.YNc(24,z,1,2,"mat-progress-spinner",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","GroupCriteriaId"),t.xp6(1),t.Q6J("ngForOf",n.communityList$),t.xp6(5),t.Q6J("formControlName","Notes"),t.xp6(4),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",n.loading))},directives:[a._Y,a.JL,a.sg,g.KE,g.hX,x.gD,a.JJ,a.u,l.sg,v.Nt,a.Fj,h.lW,u.rH,l.O5,C.ey],styles:[""]}),e})()},{path:"edit-content/:id",component:(()=>{class e{constructor(o,n,i,r,d){this._formBuilder=o,this._router=n,this._activatedRoute=i,this._commonService=r,this._communityNotesService=d,this.loading=!1,this.contentId=""}ngOnInit(){this._activatedRoute.params.subscribe(o=>{this.contentId=o.id}),this.form=this._formBuilder.group({Notes:[null,[a.kI.required]],GroupCriteriaId:[null,[a.kI.required]]}),this.fetchContent()}getCommunities(){this._commonService.getCommunityList({searcString:"test"}).subscribe(o=>{this.communityList$=o?[...o]:[]},o=>{})}fetchContent(){this._communityNotesService.getDetails(this.contentId).subscribe(o=>{console.log(o),this.patchValuestOfForm(o),this.getCommunities()},o=>{this._commonService.error(o.error.message)})}editContent(){this.loading=!0,this.form.invalid?this.loading=!1:this._communityNotesService.editCommunityNotesContent(this.form.value,this.contentId).subscribe(o=>{this.loading=!1,this._router.navigate(["/community-notes/list"])},o=>{this.loading=!1,this._commonService.error(o.error.message)})}patchValuestOfForm(o){Object.keys(this.form.controls).forEach(n=>{this.form.controls[n].setValue(o[n]?o[n]:"")})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(a.qu),t.Y36(u.F0),t.Y36(u.gz),t.Y36(y.v),t.Y36(Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-community-notes"]],decls:25,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select community",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-full"],["matInput","","name","notes","cols","35","rows","8","placeholder","Enter Notes",3,"formControlName"],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/users/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[3,"diameter","mode"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h2",4),t._uU(5," Edit Content for Comunity Notes "),t.qZA(),t.qZA(),t.TgZ(6,"form",5),t.NdJ("submit",function(){return n.editContent}),t.TgZ(7,"div",6),t.TgZ(8,"mat-form-field",7),t.TgZ(9,"mat-label",8),t._uU(10," Community"),t._UZ(11,"span",9),t.qZA(),t.TgZ(12,"mat-select",10),t.YNc(13,$,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",6),t.TgZ(15,"mat-form-field",12),t.TgZ(16,"mat-label"),t._uU(17,"Add Notes"),t.qZA(),t._UZ(18,"textarea",13),t.qZA(),t.qZA(),t.TgZ(19,"div",14),t.TgZ(20,"button",15),t._uU(21,"Cancel"),t.qZA(),t.TgZ(22,"button",16),t.NdJ("click",function(){return n.editContent()}),t.YNc(23,R,2,0,"span",17),t.YNc(24,G,1,2,"mat-progress-spinner",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","GroupCriteriaId"),t.xp6(1),t.Q6J("ngForOf",n.communityList$),t.xp6(5),t.Q6J("formControlName","Notes"),t.xp6(4),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",n.loading))},directives:[a._Y,a.JL,a.sg,g.KE,g.hX,x.gD,a.JJ,a.u,l.sg,v.Nt,a.Fj,h.lW,u.rH,l.O5,C.ey],styles:[""]}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,u.Bz.forChild(V),h.ot,q.p9,g.lN,_.Ps,S.m,v.c,b.TU,T.Cv,C.si,A.AV,I.rP,J.JX,x.LD]]}),e})()}}]);