"use strict";(self.webpackChunk_fracprop_panel=self.webpackChunk_fracprop_panel||[]).push([[842],{842:(ae,C,g)=>{g.r(C),g.d(C,{BlogsModule:()=>se});var c=g(8583),m=g(3423),v=g(1095),S=g(7539),p=g(8295),q=g(6627),x=g(9983),B=g(9692),y=g(2178),Z=g(2458),J=g(1494),N=g(5396),U=g(1436),L=g(4466),b=g(7441),e=g(7716),u=g(2340),_=g(5917),h=g(3190),F=g(1841);let T=(()=>{class o{constructor(t){this._httpClient=t}getList(t){return this._httpClient.get(u.N.apiEndPoint+"user-blog/"+t.pageNo+"/"+t.limit).pipe((0,h.w)(i=>(0,_.of)(i)))}getDetails(t){return this._httpClient.get(u.N.apiEndPoint+"user-blog/"+t).pipe((0,h.w)(i=>(0,_.of)(i)))}addBlogs(t){return this._httpClient.post(u.N.apiEndPoint+"user-blog",Object.assign({},t)).pipe((0,h.w)(i=>(0,_.of)(i)))}editBlogs(t,i){return this._httpClient.patch(u.N.apiEndPoint+"user-blog/"+i,Object.assign({},t)).pipe((0,h.w)(n=>(0,_.of)(n)))}deleteBlogs(t){return this._httpClient.delete(u.N.apiEndPoint+"user-blog/"+t).pipe((0,h.w)(i=>(0,_.of)(i)))}upload(t){return this._httpClient.post(u.N.apiEndPoint+"upload",t).pipe((0,h.w)(i=>(0,_.of)(i)))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(F.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var k=g(1400),d=g(3679),A=g(8351);function I(o,s){1&o&&(e.TgZ(0,"div",13),e._UZ(1,"mat-progress-bar",14),e.qZA()),2&o&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function Q(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",20),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",21),e._uU(5),e.qZA(),e.TgZ(6,"div",21),e._uU(7),e.qZA(),e.TgZ(8,"div",21),e._uU(9),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"div",22),e.TgZ(12,"button",23),e._uU(13," Edit "),e.qZA(),e.TgZ(14,"button",24),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).deleteContent(null==l?null:l.id)}),e._uU(15," Delete "),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=s.$implicit,i=s.index,n=e.oxw(2);e.xp6(3),e.hij(" ",(null==n.pagination?null:n.pagination.PageNo)*(null==n.pagination?null:n.pagination.limit)+i+1," "),e.xp6(2),e.hij(" ",(null==t?null:t.blog_title)||"-"," "),e.xp6(2),e.hij(" ",(null==t?null:t.description)||"-"," "),e.xp6(2),e.hij(" ",e.xi3(10,5,null==t?null:t.dateSchdule,"dd/MM/yyyy")," "),e.xp6(3),e.MGl("routerLink","/blogs/edit-blogs/",null==t?null:t.id,"")}}const E=function(o){return{"pointer-events-none":o}},M=function(){return[5,10,25,100]};function O(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-paginator",25),e.NdJ("page",function(n){return e.CHM(t),e.oxw(2).pageChanged(n)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(6,E,t.isLoading))("length",t.pagination.TotalCount)("pageIndex",t.pagination.PageNo)("pageSize",t.pagination.LimitRecords)("pageSizeOptions",e.DdM(8,M))("showFirstLastButtons",!0)}}function Y(o,s){if(1&o&&(e.ynx(0),e.ynx(1),e.TgZ(2,"div",15),e.TgZ(3,"div",16),e.TgZ(4,"div",17),e._uU(5,"S No."),e.qZA(),e.TgZ(6,"div",17),e._uU(7,"Title"),e.qZA(),e.TgZ(8,"div",17),e._uU(9,"Description"),e.qZA(),e.TgZ(10,"div",17),e._uU(11,"Scheduled Date"),e.qZA(),e.TgZ(12,"div",17),e._uU(13,"Action"),e.qZA(),e.qZA(),e.ynx(14),e.YNc(15,Q,16,8,"ng-container",18),e.BQk(),e.qZA(),e.YNc(16,O,1,9,"mat-paginator",19),e.BQk(),e.BQk()),2&o){const t=e.oxw();e.xp6(15),e.Q6J("ngForOf",t.blogsList$),e.xp6(1),e.Q6J("ngIf",t.blogsList$.length)}}function D(o,s){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.isLoading?"Fetching Data":"There is no data!"," ")}}let H=(()=>{class o{constructor(t,i,n,l,r){this._blogsService=t,this._changeDetectorRef=i,this._fuseConfirmationService=n,this._formBuilder=l,this._commonService=r,this.loading=!1,this.blogsList$=[],this.isLoading1=!1,this.isLoading=!1,this.isBlocked=!1,this.pagination={limit:10,pageNo:0,TotalCount:0,PageNo:0},this.confirmationForm()}ngOnInit(){this.getListing()}getListing(){var t,i;let n={pageNo:null===(t=this.pagination)||void 0===t?void 0:t.pageNo,limit:null===(i=this.pagination)||void 0===i?void 0:i.limit};this.isLoading=!0,this._blogsService.getList(Object.assign({},n)).subscribe(l=>{this.isLoading=!1,this.pagination.TotalCount=(null==l?void 0:l.totalBlog)||10,this.blogsList$=l.userBlog?[...l.userBlog]:[],this._changeDetectorRef.detectChanges()},l=>{console.log(l),this._commonService.error(l.error.message),this.isLoading=!1})}pageChanged(t){var i,n,l;if((null==t?void 0:t.pageSize)!==(null===(i=this.pagination)||void 0===i?void 0:i.limit))return this.pagination.limit=null==t?void 0:t.pageSize,void this.resetPagination();this.pagination.limit=null==t?void 0:t.pageSize,this.pagination.PageNo=null==t?void 0:t.pageIndex,this.pagination.pageNo=(null===(n=this.pagination)||void 0===n?void 0:n.limit)*(null===(l=this.pagination)||void 0===l?void 0:l.PageNo),this.getListing()}resetPagination(){this.pagination={limit:this.pagination.limit,pageNo:0,TotalCount:0,PageNo:0},this.getListing()}confirmationForm(){this.confirmationDialog=this._formBuilder.group({title:"",message:"",icon:this._formBuilder.group({show:!0,name:"mat_outline:delete",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Yes",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"No"})}),dismissible:!0})}deleteContent(t){var i,n;null===(i=this.confirmationDialog.controls.title)||void 0===i||i.setValue("Delete "),null===(n=this.confirmationDialog.controls.message)||void 0===n||n.setValue("Are you sure you want to delete ?"),this._fuseConfirmationService.open(this.confirmationDialog.value).afterClosed().subscribe(r=>{"confirmed"===r&&this._blogsService.deleteBlogs(t).subscribe(a=>{this.getListing()},a=>{this._commonService.error(a.error.message)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T),e.Y36(e.sBO),e.Y36(k.R),e.Y36(d.qu),e.Y36(A.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-blogs-list"]],decls:17,vars:6,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-4","px-6","md:px-4"],["class","absolute inset-x-0 top-0",4,"ngIf"],[1,"flex","items-start","justify-between","w-full"],[1,"text-3xl","font-bold","tracking-tight","leading-8","text-theme"],[1,"mr-4","flex","justify-end","pb-2"],["routerLink","/blogs/add-blogs","mat-flat-button","","type","button",1,"ml-4","bg-header","rounded-lg",3,"matTooltip","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noAdmin",""],[1,"absolute","inset-x-0","top-0"],[3,"mode"],[1,"grid","table_tr_bg"],[1,"blogs-grid","z-10","text-lg","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","font-semibold",2,"background-color","#ecf1f2"],[1,"hidden","md:block"],[4,"ngFor","ngForOf"],["class","sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent justify-center text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"blogs-grid","font-medium","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b-2","border-gray-300"],[1,""],[1,"flex","justify-start"],["matTooltip","Details",1,"min-w-10","min-h-7","h-7","px-2","ml-1","bg-green-600","rounded-2xl",3,"routerLink"],["matTooltip","Delete",1,"min-w-20","min-h-7","h-7","px-2","ml-1","bg-red-600","text-white","rounded-2xl",3,"click"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent","justify-center","text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,I,2,1,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div"),e.TgZ(5,"h2",4),e._uU(6," Blogs "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"button",6),e._UZ(9,"mat-icon",7),e.TgZ(10,"span",8),e._uU(11,"Add Blogs"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"div",10),e.YNc(14,Y,17,2,"ng-container",11),e.YNc(15,D,2,1,"ng-template",null,12,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(16);e.xp6(2),e.Q6J("ngIf",i.isLoading),e.xp6(6),e.Q6J("matTooltip","Add Content")("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",i.blogsList$.length)("ngIfElse",n)}},directives:[c.O5,v.lW,m.rH,U.gM,q.Hw,y.pW,c.sg,B.NW,c.mk],pipes:[c.uU],styles:["",".blogs-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto auto}@media (min-width: 600px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto auto}}@media (min-width: 960px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:250px 250px 250px 250px 250px}}@media (min-width: 1280px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:250px 250px 250px 250px 250px}}"]}),o})();var w=g(4553),f=g(3220);function j(o,s){if(1&o&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.Oqu((null==t?null:t.category)||"")}}function V(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"a",35),e._UZ(2,"img",36),e.qZA(),e.TgZ(3,"button",37),e.NdJ("click",function(n){const r=e.CHM(t).index,a=e.oxw(2);return n.preventDefault(),a.removeUploadedFile(r,"images    ")}),e.O4$(),e.TgZ(4,"svg",38),e._UZ(5,"circle",39),e._UZ(6,"path",40),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(1),e.Q6J("href",t.image,e.LSH),e.xp6(1),e.Q6J("src",t,e.LSH)}}function P(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"mat-label",8),e._uU(3," Images"),e._UZ(4,"span",9),e.qZA(),e.TgZ(5,"div",27),e.NdJ("click",function(){return e.CHM(t),e.MAs(10).click()}),e._UZ(6,"img",28),e.TgZ(7,"span",29),e._uU(8,"Select images"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"input",30,31),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onFileChange(n,"images")}),e.qZA(),e.TgZ(11,"div",32),e.YNc(12,V,7,2,"div",33),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.images)}}function z(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",34),e.TgZ(1,"a",35),e._UZ(2,"img",42),e.qZA(),e.TgZ(3,"button",43),e.NdJ("click",function(n){const r=e.CHM(t).index,a=e.oxw(2);return n.preventDefault(),a.removeUploadedFile(r,"video")}),e.O4$(),e.TgZ(4,"svg",38),e._UZ(5,"circle",39),e._UZ(6,"path",40),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(1),e.Q6J("href",t.video,e.LSH)}}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"mat-label",8),e._uU(3," Videos"),e._UZ(4,"span",9),e.qZA(),e.TgZ(5,"div",27),e.NdJ("click",function(){return e.CHM(t),e.MAs(10).click()}),e._UZ(6,"img",28),e.TgZ(7,"span",29),e._uU(8,"Select videos"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"input",30,41),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onFileChange(n,"video")}),e.qZA(),e.TgZ(11,"div",32),e.YNc(12,z,7,1,"div",33),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.videos)}}function R(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1," Save"),e.qZA())}function K(o,s){1&o&&e._UZ(0,"mat-progress-spinner",44),2&o&&e.Q6J("diameter",24)("mode","indeterminate")}function G(o,s){if(1&o&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.Oqu((null==t?null:t.category)||"")}}function X(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"a",36),e._UZ(2,"img",37),e.qZA(),e.TgZ(3,"button",38),e.NdJ("click",function(n){const r=e.CHM(t).index,a=e.oxw(2);return n.preventDefault(),a.removeUploadedFile(r,"images    ")}),e.O4$(),e.TgZ(4,"svg",39),e._UZ(5,"circle",40),e._UZ(6,"path",41),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(1),e.Q6J("href",t.image,e.LSH),e.xp6(1),e.Q6J("src",t,e.LSH)}}function ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"div",18),e.TgZ(2,"mat-label",8),e._uU(3," Images"),e._UZ(4,"span",9),e.qZA(),e.TgZ(5,"div",28),e.NdJ("click",function(){return e.CHM(t),e.MAs(10).click()}),e._UZ(6,"img",29),e.TgZ(7,"span",30),e._uU(8,"Select images"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"input",31,32),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onFileChange(n,"images")}),e.qZA(),e.TgZ(11,"div",33),e.YNc(12,X,7,2,"div",34),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.images)}}function te(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"a",36),e._UZ(2,"img",43),e.qZA(),e.TgZ(3,"button",44),e.NdJ("click",function(n){const r=e.CHM(t).index,a=e.oxw(2);return n.preventDefault(),a.removeUploadedFile(r,"video")}),e.O4$(),e.TgZ(4,"svg",39),e._UZ(5,"circle",40),e._UZ(6,"path",41),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit;e.xp6(1),e.Q6J("href",t.video,e.LSH)}}function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"div",18),e.TgZ(2,"mat-label",8),e._uU(3," Videos"),e._UZ(4,"span",9),e.qZA(),e.TgZ(5,"div",28),e.NdJ("click",function(){return e.CHM(t),e.MAs(10).click()}),e._UZ(6,"img",29),e.TgZ(7,"span",30),e._uU(8,"Select videos"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"input",31,42),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onFileChange(n,"video")}),e.qZA(),e.TgZ(11,"div",33),e.YNc(12,te,7,1,"div",34),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.videos)}}function oe(o,s){1&o&&(e.TgZ(0,"span"),e._uU(1," Save"),e.qZA())}function ne(o,s){1&o&&e._UZ(0,"mat-progress-spinner",45),2&o&&e.Q6J("diameter",24)("mode","indeterminate")}const le=[{path:"list",component:H},{path:"add-blogs",component:(()=>{class o{constructor(t,i,n,l){this._formBuilder=t,this._router=i,this._commonService=n,this._blogsService=l,this.loading=!1,this.images=[],this.videos=[]}ngOnInit(){this.form=this._formBuilder.group({blog_title:[null,[d.kI.required]],description:[null,[d.kI.required]],blogcat:[null,[d.kI.required]],dateSchdule:[null,[d.kI.required]]}),this.getCategories()}getCategories(){this._commonService.getCategoryList({}).subscribe(t=>{this.categoryList$=t?[...t.userCategory]:[]},t=>{})}addBlogs(){this.loading=!0;let t={};if("777ff6e0-dd0e-4375-80a2-02ff7c583207"===this.form.value.blogcat){if(!this.videos.length)return this._commonService.error("Kindly upload video!"),void(this.loading=!1)}else if("777ff6e0-dd0e-4375-80a2-02ff7c583207"!==this.form.value.blogcat&&!this.images.length)return this._commonService.error("Kindly upload iamges!"),void(this.loading=!1);this.images.length&&(t.image=this.images.toString()),this.videos.length&&(t.videos=this.videos.toString()),this.form.invalid?this.loading=!1:this._blogsService.addBlogs(Object.assign(Object.assign({},this.form.value),t)).subscribe(i=>{this.loading=!1,this._router.navigate(["/blogs/list"])},i=>{this.loading=!1,this._commonService.error(i.error.message)})}onFileChange(t,i){let n=t.target.files?Object.values(t.target.files):t.dataTransfer.files,l=[...n];!(null==n?void 0:n.length)||Array.from(l).forEach((r,a)=>{this.saveFiles(n[a],i)})}saveFiles(t,i){var n=this;return(0,w.Z)(function*(){let l=t;if(console.log(l),"images"===i)if(n._commonService.checkFileSizeAndType(l,1)){let r=new FormData;r.append("file",l),n._blogsService.upload(r).subscribe({next:a=>{n.images.push(null==a?void 0:a.Location)},error:a=>{}})}else n._commonService.error("Please upload image of file type png, jpg or jpeg and with size less than 5MB !");else if(n._commonService.checkVideoSizeAndType(l)){let r=new FormData;r.append("file",l),n._blogsService.upload(r).subscribe({next:a=>{n.videos.push(null==a?void 0:a.Location)},error:a=>{}})}else n._commonService.error("Please upload image of file type for videos only !")})()}removeUploadedFile(t,i){this.images.splice(t,1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.qu),e.Y36(m.F0),e.Y36(A.v),e.Y36(T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-blogs"]],decls:44,vars:14,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select category",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter title",3,"formControlName"],["appearance","outline",1,"w-full"],["matInput","","name","description","cols","35","rows","8","placeholder","Enter description",3,"formControlName"],["class","flex flex-col w-120",4,"ngIf"],[1,"flex","flex-col","w-120"],[1,"w-full"],["matInput","","formControlName","dateSchdule",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker2",""],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/blogs/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[1,"flex","items-center","justify-center","h-20","border-2","border-dashed","cursor-pointer",3,"click"],["src","../../../../../../assets/images/select.svg",1,"w-10","h-10"],[1,"text-header","underline"],["type","file","multiple","",2,"display","none",3,"change"],["fileImages",""],[1,"grid","grid-cols-5","gap-4","my-5"],["class","_mg relative",4,"ngFor","ngForOf"],[1,"_mg","relative"],["target","_blank",3,"href"],[1,"w-52","h-32",3,"src"],[1,"_icon","absolute","right-2","top-2",3,"click"],["width","30","height","30","viewBox","0 0 30 30","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","15","cy","15","r","15","fill","black","fill-opacity","0.3"],["d","M10.5 20.25C10.5 20.6478 10.658 21.0294 10.9393 21.3107C11.2206 21.592 11.6022 21.75 12 21.75H18C18.3978 21.75 18.7794 21.592 19.0607 21.3107C19.342 21.0294 19.5 20.6478 19.5 20.25V11.25H10.5V20.25ZM12 12.75H18V20.25H12V12.75ZM17.625 9L16.875 8.25H13.125L12.375 9H9.75V10.5H20.25V9H17.625Z","fill","white"],["fileVideos",""],["src","../../../../../../assets/images/logo/pdf.svg",1,"w-52","h-32"],[1,"_icon","absolute","right-1","top-5",3,"click"],[3,"diameter","mode"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h2",4),e._uU(5," Add Content for Blogs "),e.qZA(),e.qZA(),e.TgZ(6,"form",5),e.NdJ("submit",function(){return i.addBlogs}),e.TgZ(7,"div",6),e.TgZ(8,"mat-form-field",7),e.TgZ(9,"mat-label",8),e._uU(10," Categories"),e._UZ(11,"span",9),e.qZA(),e.TgZ(12,"mat-select",10),e.YNc(13,j,2,2,"mat-option",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e.TgZ(15,"mat-form-field",7),e.TgZ(16,"mat-label",8),e._uU(17," Title"),e._UZ(18,"span",9),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.qZA(),e.TgZ(20,"div",6),e.TgZ(21,"mat-form-field",13),e.TgZ(22,"mat-label"),e._uU(23,"Add Description"),e.qZA(),e._UZ(24,"textarea",14),e.qZA(),e.qZA(),e.YNc(25,P,13,1,"div",15),e.YNc(26,$,13,1,"div",15),e.TgZ(27,"div",16),e.TgZ(28,"mat-form-field",17),e.TgZ(29,"mat-label",8),e._uU(30," Schedule date to post blog"),e._UZ(31,"span",9),e.qZA(),e._UZ(32,"input",18),e.TgZ(33,"mat-hint"),e._uU(34,"MM/DD/YYYY"),e.qZA(),e._UZ(35,"mat-datepicker-toggle",19),e._UZ(36,"mat-datepicker",null,20),e.qZA(),e.qZA(),e.TgZ(38,"div",21),e.TgZ(39,"button",22),e._uU(40,"Cancel"),e.qZA(),e.TgZ(41,"button",23),e.NdJ("click",function(){return i.addBlogs()}),e.YNc(42,R,2,0,"span",24),e.YNc(43,K,1,2,"mat-progress-spinner",25),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(37);e.xp6(6),e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(4),e.Q6J("formControlName","blogcat"),e.xp6(1),e.Q6J("ngForOf",i.categoryList$),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(4),e.Q6J("formControlName","blog_title"),e.xp6(5),e.Q6J("formControlName","description"),e.xp6(1),e.Q6J("ngIf","777ff6e0-dd0e-4375-80a2-02ff7c583207"!=i.form.value.blogcat),e.xp6(1),e.Q6J("ngIf","777ff6e0-dd0e-4375-80a2-02ff7c583207"===i.form.value.blogcat),e.xp6(6),e.Q6J("matDatepicker",n),e.xp6(3),e.Q6J("for",n),e.xp6(6),e.Q6J("color","primary"),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)}},directives:[d._Y,d.JL,d.sg,p.KE,p.hX,b.gD,d.JJ,d.u,c.sg,x.Nt,d.Fj,c.O5,f.hl,p.bx,f.nW,f.Mq,v.lW,m.rH,Z.ey],styles:[""]}),o})()},{path:"edit-blogs/:id",component:(()=>{class o{constructor(t,i,n,l,r){this._formBuilder=t,this._router=i,this._activatedRoute=n,this._commonService=l,this._blogsService=r,this.loading=!1,this.images=[],this.videos=[],this.blogId=""}ngOnInit(){this._activatedRoute.params.subscribe(t=>{this.blogId=t.id}),this.form=this._formBuilder.group({blog_title:[null,[d.kI.required]],description:[null,[d.kI.required]],blogcat:[null,[d.kI.required]],image:[null,[]],videos:[null,[]],dateSchdule:[null,[d.kI.required]]}),this.getCategories()}getCategories(){this._commonService.getCategoryList({}).subscribe(t=>{this.categoryList$=t?[...t.userCategory]:[],this.fetchContent()},t=>{})}fetchContent(){this._blogsService.getDetails(this.blogId).subscribe(t=>{this.patchValuestOfForm(t)},t=>{this._commonService.error(t.error.message)})}resetValues(){this.images=[],this.videos=[]}editBlogs(){this.loading=!0,console.log(this.form.value,this.images,this.videos);let t={};if("777ff6e0-dd0e-4375-80a2-02ff7c583207"===this.form.value.blogcat){if(!this.videos.length)return this._commonService.error("Kindly upload video!"),void(this.loading=!1)}else if("777ff6e0-dd0e-4375-80a2-02ff7c583207"!==this.form.value.blogcat&&!this.images.length)return this._commonService.error("Kindly upload iamges!"),void(this.loading=!1);this.images.length&&(t.image=this.images.toString()),this.videos.length&&(t.videos=this.videos.toString()),this.form.invalid?this.loading=!1:(delete this.form.value.image,delete this.form.value.videos,this._blogsService.editBlogs(Object.assign(Object.assign({},this.form.value),t),this.blogId).subscribe(i=>{this.loading=!1,this._router.navigate(["/blogs/list"])},i=>{this.loading=!1,this._commonService.error(i.error.message)}))}patchValuestOfForm(t){Object.keys(this.form.controls).forEach(i=>{console.log(t),"image"!==i?"videos"===i?this.videos=t[i].split(","):this.form.controls[i].setValue(t[i]?t[i]:""):this.images=t[i].split(",")}),console.log(this.images,this.videos)}onFileChange(t,i){let n=t.target.files?Object.values(t.target.files):t.dataTransfer.files,l=[...n];!(null==n?void 0:n.length)||Array.from(l).forEach((r,a)=>{this.saveFiles(n[a],i)})}saveFiles(t,i){var n=this;return(0,w.Z)(function*(){let l=t;if(console.log(l),"images"===i)if(n._commonService.checkFileSizeAndType(l,1)){let r=new FormData;r.append("file",l),n._blogsService.upload(r).subscribe({next:a=>{n.images.push(null==a?void 0:a.Location)},error:a=>{}})}else n._commonService.error("Please upload image of file type png, jpg or jpeg and with size less than 5MB !");else if(n._commonService.checkVideoSizeAndType(l)){let r=new FormData;r.append("file",l),n._blogsService.upload(r).subscribe({next:a=>{n.videos.push(null==a?void 0:a.Location)},error:a=>{}})}else n._commonService.error("Please upload image of file type for videos only !")})()}removeUploadedFile(t,i){this.images.splice(t,1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.qu),e.Y36(m.F0),e.Y36(m.gz),e.Y36(A.v),e.Y36(T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-blogs"]],decls:44,vars:14,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select category",3,"formControlName","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter title",3,"formControlName"],["appearance","outline",1,"w-full"],["matInput","","name","description","cols","35","rows","8","placeholder","Enter description",3,"formControlName"],["class","flex flex-col w-120",4,"ngIf"],["class","flex flex-col w-120 ",4,"ngIf"],[1,"flex","flex-col","w-120"],[1,"w-full"],["matInput","","formControlName","dateSchdule",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker2",""],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/blogs/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[1,"flex","items-center","justify-center","h-20","border-2","border-dashed","rounded-lg",3,"click"],["src","../../../../../../assets/images/select.svg",1,"w-10","h-10"],[1,"text-header","underline"],["type","file","multiple","",2,"display","none",3,"change"],["fileImages",""],[1,"grid","grid-cols-5","gap-4","my-5"],["class","_mg relative",4,"ngFor","ngForOf"],[1,"_mg","relative"],["target","_blank",3,"href"],[1,"w-52","h-32",3,"src"],[1,"_icon","absolute","right-2","top-2",3,"click"],["width","30","height","30","viewBox","0 0 30 30","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","15","cy","15","r","15","fill","black","fill-opacity","0.3"],["d","M10.5 20.25C10.5 20.6478 10.658 21.0294 10.9393 21.3107C11.2206 21.592 11.6022 21.75 12 21.75H18C18.3978 21.75 18.7794 21.592 19.0607 21.3107C19.342 21.0294 19.5 20.6478 19.5 20.25V11.25H10.5V20.25ZM12 12.75H18V20.25H12V12.75ZM17.625 9L16.875 8.25H13.125L12.375 9H9.75V10.5H20.25V9H17.625Z","fill","white"],["fileVideos",""],["src","../../../../../../assets/images/logo/pdf.svg",1,"w-52","h-32"],[1,"_icon","absolute","right-1","top-5",3,"click"],[3,"diameter","mode"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h2",4),e._uU(5," Edit Content for Blogs "),e.qZA(),e.qZA(),e.TgZ(6,"form",5),e.NdJ("submit",function(){return i.editBlogs}),e.TgZ(7,"div",6),e.TgZ(8,"mat-form-field",7),e.TgZ(9,"mat-label",8),e._uU(10," Categories"),e._UZ(11,"span",9),e.qZA(),e.TgZ(12,"mat-select",10),e.NdJ("selectionChange",function(){return i.resetValues()}),e.YNc(13,G,2,2,"mat-option",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e.TgZ(15,"mat-form-field",7),e.TgZ(16,"mat-label",8),e._uU(17," Title"),e._UZ(18,"span",9),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.qZA(),e.TgZ(20,"div",6),e.TgZ(21,"mat-form-field",13),e.TgZ(22,"mat-label"),e._uU(23,"Add Description"),e.qZA(),e._UZ(24,"textarea",14),e.qZA(),e.qZA(),e.YNc(25,ee,13,1,"div",15),e.YNc(26,ie,13,1,"div",16),e.TgZ(27,"div",17),e.TgZ(28,"mat-form-field",18),e.TgZ(29,"mat-label",8),e._uU(30," Schedule date to post blog"),e._UZ(31,"span",9),e.qZA(),e._UZ(32,"input",19),e.TgZ(33,"mat-hint"),e._uU(34,"MM/DD/YYYY"),e.qZA(),e._UZ(35,"mat-datepicker-toggle",20),e._UZ(36,"mat-datepicker",null,21),e.qZA(),e.qZA(),e.TgZ(38,"div",22),e.TgZ(39,"button",23),e._uU(40,"Cancel"),e.qZA(),e.TgZ(41,"button",24),e.NdJ("click",function(){return i.editBlogs()}),e.YNc(42,oe,2,0,"span",25),e.YNc(43,ne,1,2,"mat-progress-spinner",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(37);e.xp6(6),e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(4),e.Q6J("formControlName","blogcat"),e.xp6(1),e.Q6J("ngForOf",i.categoryList$),e.xp6(2),e.Q6J("floatLabel","always"),e.xp6(4),e.Q6J("formControlName","blog_title"),e.xp6(5),e.Q6J("formControlName","description"),e.xp6(1),e.Q6J("ngIf","777ff6e0-dd0e-4375-80a2-02ff7c583207"===i.form.value.blogcat),e.xp6(1),e.Q6J("ngIf","777ff6e0-dd0e-4375-80a2-02ff7c583207"===i.form.value.blogcat),e.xp6(6),e.Q6J("matDatepicker",n),e.xp6(3),e.Q6J("for",n),e.xp6(6),e.Q6J("color","primary"),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)}},directives:[d._Y,d.JL,d.sg,p.KE,p.hX,b.gD,d.JJ,d.u,c.sg,x.Nt,d.Fj,c.O5,f.hl,p.bx,f.nW,f.Mq,v.lW,m.rH,Z.ey],styles:[""]}),o})()}];let se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,m.Bz.forChild(le),v.ot,S.p9,p.lN,q.Ps,L.m,x.c,B.TU,y.Cv,Z.si,U.AV,N.rP,J.JX,b.LD,f.FA,Z.XK]]}),o})()}}]);