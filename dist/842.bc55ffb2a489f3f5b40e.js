"use strict";(self.webpackChunk_fracprop_panel=self.webpackChunk_fracprop_panel||[]).push([[842],{842:(rt,C,r)=>{r.r(C),r.d(C,{BlogsModule:()=>at});var c=r(8583),m=r(3423),v=r(1095),N=r(7539),p=r(8295),q=r(6627),x=r(9983),y=r(9692),B=r(2178),Z=r(2458),J=r(1494),L=r(5396),U=r(1436),F=r(4466),b=r(7441),t=r(7716),f=r(2340),_=r(5917),h=r(3190),k=r(1841);let T=(()=>{class o{constructor(e){this._httpClient=e}getList(e){return this._httpClient.get(f.N.apiEndPoint+"user-blog/"+e.pageNo+"/"+e.limit).pipe((0,h.w)(i=>(0,_.of)(i)))}getDetails(e){return this._httpClient.get(f.N.apiEndPoint+"user-blog/"+e).pipe((0,h.w)(i=>(0,_.of)(i)))}addBlogs(e){return this._httpClient.post(f.N.apiEndPoint+"user-blog",Object.assign({},e)).pipe((0,h.w)(i=>(0,_.of)(i)))}editBlogs(e,i){return this._httpClient.patch(f.N.apiEndPoint+"user-blog/"+i,Object.assign({},e)).pipe((0,h.w)(n=>(0,_.of)(n)))}deleteBlogs(e){return this._httpClient.delete(f.N.apiEndPoint+"user-blog/"+e).pipe((0,h.w)(i=>(0,_.of)(i)))}upload(e){return this._httpClient.post(f.N.apiEndPoint+"upload",e).pipe((0,h.w)(i=>(0,_.of)(i)))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(k.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var I=r(1400),d=r(3679),A=r(8351);function Q(o,s){1&o&&(t.TgZ(0,"div",13),t._UZ(1,"mat-progress-bar",14),t.qZA()),2&o&&(t.xp6(1),t.Q6J("mode","indeterminate"))}function E(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",20),t.TgZ(2,"div",21),t._uU(3),t.qZA(),t.TgZ(4,"div",22),t._uU(5),t.qZA(),t.TgZ(6,"div",23),t._uU(7),t.qZA(),t.TgZ(8,"div",23),t._uU(9),t.ALo(10,"slice"),t.qZA(),t.TgZ(11,"div",23),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"div",24),t.TgZ(15,"button",25),t._uU(16," Edit "),t.qZA(),t.TgZ(17,"button",26),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).deleteContent(null==l?null:l.id)}),t._uU(18," Delete "),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,i=s.index,n=t.oxw(2);t.xp6(3),t.hij(" ",(null==n.pagination?null:n.pagination.PageNo)*(null==n.pagination?null:n.pagination.limit)+i+1," "),t.xp6(2),t.hij(" ",(null==e||null==e.blogCategory?null:e.blogCategory.category)||"-"," "),t.xp6(2),t.hij(" ",(null==e?null:e.blog_title)||"-"," "),t.xp6(2),t.AsE(" ",t.Dn7(10,7,null==e?null:e.description,0,50)," ",(null==e?null:e.description.length)>100?"...":" "," "),t.xp6(3),t.hij(" ",t.xi3(13,11,null==e?null:e.dateSchdule,"dd/MM/yyyy")," "),t.xp6(3),t.MGl("routerLink","/blogs/edit-blogs/",null==e?null:e.id,"")}}const M=function(o){return{"pointer-events-none":o}},D=function(){return[5,10,25,100]};function O(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-paginator",27),t.NdJ("page",function(n){return t.CHM(e),t.oxw(2).pageChanged(n)}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(6,M,e.isLoading))("length",e.pagination.TotalCount)("pageIndex",e.pagination.PageNo)("pageSize",e.pagination.LimitRecords)("pageSizeOptions",t.DdM(8,D))("showFirstLastButtons",!0)}}function Y(o,s){if(1&o&&(t.ynx(0),t.ynx(1),t.TgZ(2,"div",15),t.TgZ(3,"div",16),t.TgZ(4,"div",17),t._uU(5,"S No."),t.qZA(),t.TgZ(6,"div",17),t._uU(7,"Category"),t.qZA(),t.TgZ(8,"div",17),t._uU(9,"Title"),t.qZA(),t.TgZ(10,"div",17),t._uU(11,"Description"),t.qZA(),t.TgZ(12,"div",17),t._uU(13,"Scheduled Date"),t.qZA(),t.TgZ(14,"div",17),t._uU(15,"Action"),t.qZA(),t.qZA(),t.ynx(16),t.YNc(17,E,19,14,"ng-container",18),t.BQk(),t.qZA(),t.YNc(18,O,1,9,"mat-paginator",19),t.BQk(),t.BQk()),2&o){const e=t.oxw();t.xp6(17),t.Q6J("ngForOf",e.blogsList$),t.xp6(1),t.Q6J("ngIf",e.blogsList$.length)}}function H(o,s){if(1&o&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.isLoading?"Fetching Data":"There is no data!"," ")}}let j=(()=>{class o{constructor(e,i,n,l,g){this._blogsService=e,this._changeDetectorRef=i,this._fuseConfirmationService=n,this._formBuilder=l,this._commonService=g,this.loading=!1,this.blogsList$=[],this.isLoading1=!1,this.isLoading=!1,this.isBlocked=!1,this.pagination={limit:10,pageNo:0,TotalCount:0,PageNo:0},this.confirmationForm()}ngOnInit(){this.getListing()}getListing(){var e,i;let n={pageNo:null===(e=this.pagination)||void 0===e?void 0:e.pageNo,limit:null===(i=this.pagination)||void 0===i?void 0:i.limit};this.isLoading=!0,this._blogsService.getList(Object.assign({},n)).subscribe(l=>{this.isLoading=!1,this.pagination.TotalCount=(null==l?void 0:l.totalBlog)||10,this.blogsList$=l.userBlog?[...l.userBlog]:[],this._changeDetectorRef.detectChanges()},l=>{console.log(l),this._commonService.error(l.error.message),this.isLoading=!1})}pageChanged(e){var i,n,l;if((null==e?void 0:e.pageSize)!==(null===(i=this.pagination)||void 0===i?void 0:i.limit))return this.pagination.limit=null==e?void 0:e.pageSize,void this.resetPagination();this.pagination.limit=null==e?void 0:e.pageSize,this.pagination.PageNo=null==e?void 0:e.pageIndex,this.pagination.pageNo=(null===(n=this.pagination)||void 0===n?void 0:n.limit)*(null===(l=this.pagination)||void 0===l?void 0:l.PageNo),this.getListing()}resetPagination(){this.pagination={limit:this.pagination.limit,pageNo:0,TotalCount:0,PageNo:0},this.getListing()}confirmationForm(){this.confirmationDialog=this._formBuilder.group({title:"",message:"",icon:this._formBuilder.group({show:!0,name:"mat_outline:delete",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Yes",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"No"})}),dismissible:!0})}deleteContent(e){var i,n;null===(i=this.confirmationDialog.controls.title)||void 0===i||i.setValue("Delete "),null===(n=this.confirmationDialog.controls.message)||void 0===n||n.setValue("Are you sure you want to delete ?"),this._fuseConfirmationService.open(this.confirmationDialog.value).afterClosed().subscribe(g=>{"confirmed"===g&&this._blogsService.deleteBlogs(e).subscribe(a=>{this.getListing()},a=>{this._commonService.error(a.error.message)})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T),t.Y36(t.sBO),t.Y36(I.R),t.Y36(d.qu),t.Y36(A.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-blogs-list"]],decls:17,vars:6,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-4","px-6","md:px-4"],["class","absolute inset-x-0 top-0",4,"ngIf"],[1,"flex","items-start","justify-between","w-full"],[1,"text-3xl","font-bold","tracking-tight","leading-8","text-theme"],[1,"mr-4","flex","justify-end","pb-2"],["routerLink","/blogs/add-blogs","mat-flat-button","","type","button",1,"ml-4","bg-header","rounded-lg",3,"matTooltip","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noAdmin",""],[1,"absolute","inset-x-0","top-0"],[3,"mode"],[1,"grid","table_tr_bg"],[1,"blogs-grid","z-10","text-lg","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","font-semibold",2,"background-color","#ecf1f2"],[1,"hidden","md:block"],[4,"ngFor","ngForOf"],["class","sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent justify-center text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],[1,"blogs-grid","font-medium","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b-2","border-gray-300"],[1,"w-13"],[1,"w-44"],[1,"w-36"],[1,"flex","justify-start","w-36"],["matTooltip","Details",1,"min-w-10","min-h-7","h-7","px-2","ml-1","bg-green-600","rounded-2xl",3,"routerLink"],["matTooltip","Delete",1,"min-w-20","min-h-7","h-7","px-2","ml-1","bg-red-600","text-white","rounded-2xl",3,"click"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent","justify-center","text-header",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,Q,2,1,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div"),t.TgZ(5,"h2",4),t._uU(6," Blogs "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"button",6),t._UZ(9,"mat-icon",7),t.TgZ(10,"span",8),t._uU(11,"Add Blogs"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.YNc(14,Y,19,2,"ng-container",11),t.YNc(15,H,2,1,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(16);t.xp6(2),t.Q6J("ngIf",i.isLoading),t.xp6(6),t.Q6J("matTooltip","Add Content")("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(5),t.Q6J("ngIf",i.blogsList$.length)("ngIfElse",n)}},directives:[c.O5,v.lW,m.rH,U.gM,q.Hw,B.pW,c.sg,y.NW,c.mk],pipes:[c.OU,c.uU],styles:["",".blogs-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto auto auto}@media (min-width: 600px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:auto auto auto auto auto auto}}@media (min-width: 960px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:50px 200px 250px 200px 200p 200px}}@media (min-width: 1280px){.blogs-grid[_ngcontent-%COMP%]{grid-template-columns:50px 200px 250px 200px 200p 200px}}"]}),o})();var w=r(4553),u=r(3220),S=r(4885);function V(o,s){if(1&o&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",null==e?null:e.id),t.xp6(1),t.Oqu((null==e?null:e.category)||"")}}function P(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"a",35),t._UZ(2,"img",36),t.qZA(),t.TgZ(3,"button",37),t.NdJ("click",function(n){const g=t.CHM(e).index,a=t.oxw(2);return n.preventDefault(),a.removeUploadedFile(g,"images    ")}),t.O4$(),t.TgZ(4,"svg",38),t._UZ(5,"circle",39),t._UZ(6,"path",40),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(1),t.Q6J("href",e.image,t.LSH),t.xp6(1),t.Q6J("src",e,t.LSH)}}function z(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.TgZ(2,"mat-label",8),t._uU(3," Images"),t._UZ(4,"span",9),t.qZA(),t.TgZ(5,"div",27),t.NdJ("click",function(){return t.CHM(e),t.MAs(10).click()}),t._UZ(6,"img",28),t.TgZ(7,"span",29),t._uU(8,"Select images"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"input",30,31),t.NdJ("change",function(n){return t.CHM(e),t.oxw().onFileChange(n,"images")}),t.qZA(),t.TgZ(11,"div",32),t.YNc(12,P,7,2,"div",33),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",e.images)}}function $(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"a",35),t._UZ(2,"img",42),t.qZA(),t.TgZ(3,"button",43),t.NdJ("click",function(n){const g=t.CHM(e).index,a=t.oxw(2);return n.preventDefault(),a.removeUploadedFile(g,"video")}),t.O4$(),t.TgZ(4,"svg",38),t._UZ(5,"circle",39),t._UZ(6,"path",40),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(1),t.Q6J("href",e.video,t.LSH)}}function R(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.TgZ(2,"mat-label",8),t._uU(3," Videos"),t._UZ(4,"span",9),t.qZA(),t.TgZ(5,"div",27),t.NdJ("click",function(){return t.CHM(e),t.MAs(10).click()}),t._UZ(6,"img",28),t.TgZ(7,"span",29),t._uU(8,"Select videos"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"input",30,41),t.NdJ("change",function(n){return t.CHM(e),t.oxw().onFileChange(n,"video")}),t.qZA(),t.TgZ(11,"div",32),t.YNc(12,$,7,1,"div",33),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",e.videos)}}function K(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1," Save"),t.qZA())}function W(o,s){1&o&&t._UZ(0,"mat-progress-spinner",44),2&o&&t.Q6J("diameter",24)("mode","indeterminate")}function X(o,s){if(1&o&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",null==e?null:e.id),t.xp6(1),t.Oqu((null==e?null:e.category)||"")}}function tt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"a",35),t._UZ(2,"img",36),t.qZA(),t.TgZ(3,"button",37),t.NdJ("click",function(n){const g=t.CHM(e).index,a=t.oxw(2);return n.preventDefault(),a.removeUploadedFile(g,"images    ")}),t.O4$(),t.TgZ(4,"svg",38),t._UZ(5,"circle",39),t._UZ(6,"path",40),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(1),t.Q6J("href",e.image,t.LSH),t.xp6(1),t.Q6J("src",e,t.LSH)}}function et(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.TgZ(2,"mat-label",8),t._uU(3," Images"),t._UZ(4,"span",9),t.qZA(),t.TgZ(5,"div",27),t.NdJ("click",function(){return t.CHM(e),t.MAs(10).click()}),t._UZ(6,"img",28),t.TgZ(7,"span",29),t._uU(8,"Select images"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"input",30,31),t.NdJ("change",function(n){return t.CHM(e),t.oxw().onFileChange(n,"images")}),t.qZA(),t.TgZ(11,"div",32),t.YNc(12,tt,7,2,"div",33),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",e.images)}}function it(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"a",35),t._UZ(2,"img",42),t.qZA(),t.TgZ(3,"button",43),t.NdJ("click",function(n){const g=t.CHM(e).index,a=t.oxw(2);return n.preventDefault(),a.removeUploadedFile(g,"video")}),t.O4$(),t.TgZ(4,"svg",38),t._UZ(5,"circle",39),t._UZ(6,"path",40),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(1),t.Q6J("href",e.video,t.LSH)}}function ot(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.TgZ(2,"mat-label",8),t._uU(3," Videos"),t._UZ(4,"span",9),t.qZA(),t.TgZ(5,"div",27),t.NdJ("click",function(){return t.CHM(e),t.MAs(10).click()}),t._UZ(6,"img",28),t.TgZ(7,"span",29),t._uU(8,"Select videos"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"input",30,41),t.NdJ("change",function(n){return t.CHM(e),t.oxw().onFileChange(n,"video")}),t.qZA(),t.TgZ(11,"div",32),t.YNc(12,it,7,1,"div",33),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",e.videos)}}function nt(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1," Save"),t.qZA())}function lt(o,s){1&o&&t._UZ(0,"mat-progress-spinner",44),2&o&&t.Q6J("diameter",24)("mode","indeterminate")}const st=[{path:"list",component:j},{path:"add-blogs",component:(()=>{class o{constructor(e,i,n,l){this._formBuilder=e,this._router=i,this._commonService=n,this._blogsService=l,this.todayDate=new Date,this.loading=!1,this.images=[],this.videos=[]}ngOnInit(){this.form=this._formBuilder.group({blog_title:[null,[d.kI.required]],description:[null,[d.kI.required]],blogcat:[null,[d.kI.required]],dateSchdule:[null,[d.kI.required]]}),this.getCategories()}getCategories(){this._commonService.getCategoryList({}).subscribe(e=>{this.categoryList$=e?[...e.userCategory]:[]},e=>{})}addBlogs(){this.loading=!0;let e={};if("777ff6e0-dd0e-4375-80a2-02ff7c583207"===this.form.value.blogcat){if(!this.videos.length)return this._commonService.error("Kindly upload video!"),void(this.loading=!1)}else if("777ff6e0-dd0e-4375-80a2-02ff7c583207"!==this.form.value.blogcat&&!this.images.length)return this._commonService.error("Kindly upload iamges!"),void(this.loading=!1);this.images.length&&(e.image=this.images.toString()),this.videos.length&&(e.videos=this.videos.toString()),this.form.invalid?this.loading=!1:this._blogsService.addBlogs(Object.assign(Object.assign({},this.form.value),e)).subscribe(i=>{this.loading=!1,this._router.navigate(["/blogs/list"])},i=>{this.loading=!1,this._commonService.error(i.error.message)})}onFileChange(e,i){let n=e.target.files?Object.values(e.target.files):e.dataTransfer.files,l=[...n];!(null==n?void 0:n.length)||Array.from(l).forEach((g,a)=>{this.saveFiles(n[a],i)})}saveFiles(e,i){var n=this;return(0,w.Z)(function*(){let l=e;if(console.log(l),"images"===i)if(n._commonService.checkFileSizeAndType(l,1)){let g=new FormData;g.append("file",l),n._blogsService.upload(g).subscribe({next:a=>{n.images.push(null==a?void 0:a.Location)},error:a=>{}})}else n._commonService.error("Please upload image of file type png, jpg or jpeg and with size less than 5MB !");else if(n._commonService.checkVideoSizeAndType(l)){let g=new FormData;g.append("file",l),n._blogsService.upload(g).subscribe({next:a=>{n.videos.push(null==a?void 0:a.Location)},error:a=>{}})}else n._commonService.error("Please upload image of file type for videos only !")})()}removeUploadedFile(e,i){this.images.splice(e,1)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.qu),t.Y36(m.F0),t.Y36(A.v),t.Y36(T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-blogs"]],decls:44,vars:15,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select category",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter title",3,"formControlName"],["appearance","outline",1,"w-full"],["matInput","","name","description","cols","35","rows","8","placeholder","Enter description",3,"formControlName"],["class","flex flex-col w-120",4,"ngIf"],[1,"flex","flex-col","w-120"],[1,"w-full"],["matInput","","formControlName","dateSchdule",3,"matDatepicker","min"],["matIconSuffix","",3,"for"],["picker2",""],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/blogs/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[1,"flex","items-center","justify-center","h-20","border-2","border-dashed","cursor-pointer",3,"click"],["src","../../../../../../assets/images/select.svg",1,"w-10","h-10"],[1,"text-header","underline"],["type","file","multiple","",2,"display","none",3,"change"],["fileImages",""],[1,"grid","grid-cols-5","gap-4","my-5"],["class","_mg relative",4,"ngFor","ngForOf"],[1,"_mg","relative"],["target","_blank",3,"href"],[1,"w-52","h-32",3,"src"],[1,"_icon","absolute","right-2","top-2",3,"click"],["width","30","height","30","viewBox","0 0 30 30","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","15","cy","15","r","15","fill","black","fill-opacity","0.3"],["d","M10.5 20.25C10.5 20.6478 10.658 21.0294 10.9393 21.3107C11.2206 21.592 11.6022 21.75 12 21.75H18C18.3978 21.75 18.7794 21.592 19.0607 21.3107C19.342 21.0294 19.5 20.6478 19.5 20.25V11.25H10.5V20.25ZM12 12.75H18V20.25H12V12.75ZM17.625 9L16.875 8.25H13.125L12.375 9H9.75V10.5H20.25V9H17.625Z","fill","white"],["fileVideos",""],["src","../../../../../../assets/images/logo/pdf.svg",1,"w-52","h-32"],[1,"_icon","absolute","right-1","top-5",3,"click"],[3,"diameter","mode"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h2",4),t._uU(5," Add Content for Blogs "),t.qZA(),t.qZA(),t.TgZ(6,"form",5),t.NdJ("submit",function(){return i.addBlogs}),t.TgZ(7,"div",6),t.TgZ(8,"mat-form-field",7),t.TgZ(9,"mat-label",8),t._uU(10," Categories"),t._UZ(11,"span",9),t.qZA(),t.TgZ(12,"mat-select",10),t.YNc(13,V,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",6),t.TgZ(15,"mat-form-field",7),t.TgZ(16,"mat-label",8),t._uU(17," Title"),t._UZ(18,"span",9),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.qZA(),t.TgZ(20,"div",6),t.TgZ(21,"mat-form-field",13),t.TgZ(22,"mat-label"),t._uU(23,"Add Description"),t.qZA(),t._UZ(24,"textarea",14),t.qZA(),t.qZA(),t.YNc(25,z,13,1,"div",15),t.YNc(26,R,13,1,"div",15),t.TgZ(27,"div",16),t.TgZ(28,"mat-form-field",17),t.TgZ(29,"mat-label",8),t._uU(30," Schedule date to post blog"),t._UZ(31,"span",9),t.qZA(),t._UZ(32,"input",18),t.TgZ(33,"mat-hint"),t._uU(34,"MM/DD/YYYY"),t.qZA(),t._UZ(35,"mat-datepicker-toggle",19),t._UZ(36,"mat-datepicker",null,20),t.qZA(),t.qZA(),t.TgZ(38,"div",21),t.TgZ(39,"button",22),t._uU(40,"Cancel"),t.qZA(),t.TgZ(41,"button",23),t.NdJ("click",function(){return i.addBlogs()}),t.YNc(42,K,2,0,"span",24),t.YNc(43,W,1,2,"mat-progress-spinner",25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(37);t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","blogcat"),t.xp6(1),t.Q6J("ngForOf",i.categoryList$),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","blog_title"),t.xp6(5),t.Q6J("formControlName","description"),t.xp6(1),t.Q6J("ngIf","777ff6e0-dd0e-4375-80a2-02ff7c583207"!=i.form.value.blogcat),t.xp6(1),t.Q6J("ngIf","777ff6e0-dd0e-4375-80a2-02ff7c583207"===i.form.value.blogcat),t.xp6(6),t.Q6J("matDatepicker",n)("min",i.todayDate),t.xp6(3),t.Q6J("for",n),t.xp6(6),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",i.loading)}},directives:[d._Y,d.JL,d.sg,p.KE,p.hX,b.gD,d.JJ,d.u,c.sg,x.Nt,d.Fj,c.O5,u.hl,p.bx,u.nW,u.Mq,v.lW,m.rH,Z.ey,S.Ou],styles:[""]}),o})()},{path:"edit-blogs/:id",component:(()=>{class o{constructor(e,i,n,l,g){this._formBuilder=e,this._router=i,this._activatedRoute=n,this._commonService=l,this._blogsService=g,this.todayDate=new Date,this.loading=!1,this.images=[],this.videos=[],this.blogId=""}ngOnInit(){this._activatedRoute.params.subscribe(e=>{this.blogId=e.id}),this.form=this._formBuilder.group({blog_title:[null,[d.kI.required]],description:[null,[d.kI.required]],blogcat:[null,[d.kI.required]],image:[null,[]],videos:[null,[]],dateSchdule:[null,[d.kI.required]]}),this.getCategories()}getCategories(){this._commonService.getCategoryList({}).subscribe(e=>{this.categoryList$=e?[...e.userCategory]:[],this.fetchContent()},e=>{})}fetchContent(){this._blogsService.getDetails(this.blogId).subscribe(e=>{this.patchValuestOfForm(e)},e=>{this._commonService.error(e.error.message)})}resetValues(){this.images=[],this.videos=[]}editBlogs(){this.loading=!0,console.log(this.form.value,this.images,this.videos);let e={};if("777ff6e0-dd0e-4375-80a2-02ff7c583207"===this.form.value.blogcat){if(!this.videos.length)return this._commonService.error("Kindly upload video!"),void(this.loading=!1)}else if("777ff6e0-dd0e-4375-80a2-02ff7c583207"!==this.form.value.blogcat&&!this.images.length)return this._commonService.error("Kindly upload iamges!"),void(this.loading=!1);this.images.length&&(e.image=this.images.toString()),this.videos.length&&(e.videos=this.videos.toString()),this.form.invalid?this.loading=!1:(delete this.form.value.image,delete this.form.value.videos,this._blogsService.editBlogs(Object.assign(Object.assign({},this.form.value),e),this.blogId).subscribe(i=>{this.loading=!1,this._router.navigate(["/blogs/list"])},i=>{this.loading=!1,this._commonService.error(i.error.message)}))}patchValuestOfForm(e){Object.keys(this.form.controls).forEach(i=>{console.log(e),"image"!==i?"videos"===i?this.videos=e[i]?e[i].split(","):null:this.form.controls[i].setValue(e[i]?e[i]:""):this.images=e[i].split(",")}),console.log(this.images,this.videos)}onFileChange(e,i){let n=e.target.files?Object.values(e.target.files):e.dataTransfer.files,l=[...n];!(null==n?void 0:n.length)||Array.from(l).forEach((g,a)=>{this.saveFiles(n[a],i)})}saveFiles(e,i){var n=this;return(0,w.Z)(function*(){let l=e;if(console.log(l),"images"===i)if(n._commonService.checkFileSizeAndType(l,1)){let g=new FormData;g.append("file",l),n._blogsService.upload(g).subscribe({next:a=>{n.images.push(null==a?void 0:a.Location)},error:a=>{}})}else n._commonService.error("Please upload image of file type png, jpg or jpeg and with size less than 5MB !");else if(n._commonService.checkVideoSizeAndType(l)){let g=new FormData;g.append("file",l),n._blogsService.upload(g).subscribe({next:a=>{n.videos.push(null==a?void 0:a.Location)},error:a=>{}})}else n._commonService.error("Please upload image of file type for videos only !")})()}removeUploadedFile(e,i){this.images.splice(e,1)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.qu),t.Y36(m.F0),t.Y36(m.gz),t.Y36(A.v),t.Y36(T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-blogs"]],decls:44,vars:16,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-2"],[1,"px-3","m-auto"],[1,"prose","prose-sm","max-w-3xl"],[1,"text-4xl","font-semibold","tracking-tight","leading-8"],[1,"flex","flex-col","mt-4","px-8","pt-10","bg-card","shadow","rounded","overflow-hidden","justify-center","items-center",3,"formGroup","submit"],[1,"w-120","flex"],[1,"flex-auto","gt-xs:pr-3",3,"floatLabel"],[1,"text-header","font-bold"],[1,"text-warn"],["placeholder","Select category",3,"formControlName","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Enter title",3,"formControlName"],["appearance","outline",1,"w-full"],["matInput","","name","description","cols","35","rows","8","placeholder","Enter description",3,"formControlName"],["class","flex flex-col w-120",4,"ngIf"],[1,"flex","flex-col","w-120"],[1,"w-full"],["matInput","",3,"matDatepicker","formControlName","min"],["matIconSuffix","",3,"for"],["picker2",""],[1,"flex","items-center","justify-end","border-t","-mx-8","mt-8","px-8","py-5","bg-gray-50","dark:bg-gray-700"],["routerLink","/blogs/list","mat-button",""],["mat-flat-button","",1,"px-6","ml-3","bg-theme",3,"color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[1,"flex","items-center","justify-center","h-20","border-2","border-dashed","rounded-lg",3,"click"],["src","../../../../../../assets/images/select.svg",1,"w-10","h-10"],[1,"text-header","underline"],["type","file","multiple","",2,"display","none",3,"change"],["fileImages",""],[1,"grid","grid-cols-5","gap-4","my-5"],["class","_mg relative",4,"ngFor","ngForOf"],[1,"_mg","relative"],["target","_blank",3,"href"],[1,"w-52","h-32",3,"src"],[1,"_icon","absolute","right-2","top-2",3,"click"],["width","30","height","30","viewBox","0 0 30 30","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","15","cy","15","r","15","fill","black","fill-opacity","0.3"],["d","M10.5 20.25C10.5 20.6478 10.658 21.0294 10.9393 21.3107C11.2206 21.592 11.6022 21.75 12 21.75H18C18.3978 21.75 18.7794 21.592 19.0607 21.3107C19.342 21.0294 19.5 20.6478 19.5 20.25V11.25H10.5V20.25ZM12 12.75H18V20.25H12V12.75ZM17.625 9L16.875 8.25H13.125L12.375 9H9.75V10.5H20.25V9H17.625Z","fill","white"],["fileVideos",""],["src","../../../../../../assets/images/logo/pdf.svg",1,"w-52","h-32"],[1,"_icon","absolute","right-1","top-5",3,"click"],[3,"diameter","mode"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h2",4),t._uU(5," Edit Content for Blogs "),t.qZA(),t.qZA(),t.TgZ(6,"form",5),t.NdJ("submit",function(){return i.editBlogs}),t.TgZ(7,"div",6),t.TgZ(8,"mat-form-field",7),t.TgZ(9,"mat-label",8),t._uU(10," Categories"),t._UZ(11,"span",9),t.qZA(),t.TgZ(12,"mat-select",10),t.NdJ("selectionChange",function(){return i.resetValues()}),t.YNc(13,X,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",6),t.TgZ(15,"mat-form-field",7),t.TgZ(16,"mat-label",8),t._uU(17," Title"),t._UZ(18,"span",9),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.qZA(),t.TgZ(20,"div",6),t.TgZ(21,"mat-form-field",13),t.TgZ(22,"mat-label"),t._uU(23,"Add Description"),t.qZA(),t._UZ(24,"textarea",14),t.qZA(),t.qZA(),t.YNc(25,et,13,1,"div",15),t.YNc(26,ot,13,1,"div",15),t.TgZ(27,"div",16),t.TgZ(28,"mat-form-field",17),t.TgZ(29,"mat-label",8),t._uU(30," Schedule date to post blog"),t._UZ(31,"span",9),t.qZA(),t._UZ(32,"input",18),t.TgZ(33,"mat-hint"),t._uU(34,"MM/DD/YYYY"),t.qZA(),t._UZ(35,"mat-datepicker-toggle",19),t._UZ(36,"mat-datepicker",null,20),t.qZA(),t.qZA(),t.TgZ(38,"div",21),t.TgZ(39,"button",22),t._uU(40,"Cancel"),t.qZA(),t.TgZ(41,"button",23),t.NdJ("click",function(){return i.editBlogs()}),t.YNc(42,nt,2,0,"span",24),t.YNc(43,lt,1,2,"mat-progress-spinner",25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(37);t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","blogcat"),t.xp6(1),t.Q6J("ngForOf",i.categoryList$),t.xp6(2),t.Q6J("floatLabel","always"),t.xp6(4),t.Q6J("formControlName","blog_title"),t.xp6(5),t.Q6J("formControlName","description"),t.xp6(1),t.Q6J("ngIf","777ff6e0-dd0e-4375-80a2-02ff7c583207"!==i.form.value.blogcat),t.xp6(1),t.Q6J("ngIf","777ff6e0-dd0e-4375-80a2-02ff7c583207"===i.form.value.blogcat),t.xp6(6),t.Q6J("matDatepicker",n)("formControlName","dateSchdule")("min",i.todayDate),t.xp6(3),t.Q6J("for",n),t.xp6(6),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",i.loading)}},directives:[d._Y,d.JL,d.sg,p.KE,p.hX,b.gD,d.JJ,d.u,c.sg,x.Nt,d.Fj,c.O5,u.hl,p.bx,u.nW,u.Mq,v.lW,m.rH,Z.ey,S.Ou],styles:[""]}),o})()}];let at=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.ez,m.Bz.forChild(st),v.ot,N.p9,p.lN,q.Ps,F.m,x.c,y.TU,B.Cv,Z.si,U.AV,L.rP,J.JX,b.LD,u.FA,Z.XK]]}),o})()}}]);